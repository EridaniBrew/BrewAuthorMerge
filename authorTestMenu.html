<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script type="text/javascript">
//<![CDATA[
var version = {major: 2, minor: 1, revision: 3, date: new Date("Nov 3, 2006"), extensions: {}};
//]]>
</script>
<!--
TiddlyWiki 2.1.3 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Copyright (c) Osmosoft Limited 2004-2006

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.

20-Nov-2010 rbd     GEM:498 Get rid of Java Saver support, as used in WebKit browsers
                    (Safari, Chrome, MacOS X). This is used for saving the TW from these
                    browsers when the TW was loaded from a file:// URL. This is not used
                    in the ACP environment. With it present (an <applet> tag is inserted),
                    WebKit browsers like Chrome pop up a Java flavored authentication
                    window. Annoying.
29-Aug-2011         GEM:691 Fix detection of String.trim() and Array.indexOf() additions
                    here. It was not detecting the existence of these in Chrome, causing
                    problems with JQuery (adding bValidate plugin exposed this problem).
-->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<!--PRE-HEAD-START-->
<!-- Enabling autodiscovery of RSS feed -->
<link rel="alternate" type="application/rss+xml" title="Observing events at <%= Prefs.SiteName %>" href="/ac/arss.asp" />
<!-- Defeating IE6 b/g image loading bug -->
<script language="javascript" type="text/javascript">
try {
 document.execCommand("BackgroundImageCache", false, true);
} catch(err) {}
</script>
<!-- Loading spash screen -->
<style type="text/css">
#contentWrapper {display:none;}
</style>
<div id="SplashScreen" style="background-color:black; position:absolute; top:0; left:0; width:100%; height:100%;">
<div style="border: 0px solid navy; border-radius: 8px; -moz-border-radius: 8px; -webkit-border-radius: 8px; outline: none; box-shadow: 0 0 32px #4444ff; -moz-box-shadow: 0 0 32px #4444ff; -webkit-box-shadow: 0 0 32px #4444ff; display: block; text-align: center; width: 600px; margin: 100px auto; padding: 10px 10px 10px 10px;; color:#FFA; font-size: 24px; font-family:Tahoma; background-color:#000030;"><table border="0" cellpadding="10px"><tr><td><img src="im/dc3logo.jpg"/></td><td><img src="im/loading.gif" align="absmiddle" height="32" width="32" />&nbsp;Loading <%= Prefs.SiteName %>...</td></tr></table></div></div>
<!-- Server-side static initialization and support functions<%
var __fso = new ActiveXObject("Scripting.FileSystemObject");
var __port = ":" + Request.ServerVariables("SERVER_PORT");
if(__port == ":80") __port = "";
var feedUri = "feed://" + Request.ServerVariables("SERVER_NAME") + __port + "/ac/arss.asp"; 
var camAvail = false;
try { camAvail = Camera.LinkEnabled; } catch (ex) { camAvail = false; }
var __fso = new ActiveXObject("Scripting.FileSystemObject");
var rotAvail = Rotator.Configured;
var ditherMainPixels = (Prefs.AutoGuiding.SensorPlateScale !== 0)
var schInst = false;
var schAvail = false;
var schUserPrio = false;
var schPerAF = false;
var schDB;
var acpAutoCal = false;
var filtNames = null;
var filtNameOpts = "";
var filtNameOptsSch = "";
var binVals = null;
var binValOpts = "";
var screenFlats = false;
var __st;
try {
    __st = __fso.OpenTextFile(Prefs.WebRoot + "\\FilterNames.txt");
    __st.ReadLine();
    var __buf = __st.ReadLine();
    if(__buf.search(/no filters/i) == -1) {
        filtNames = new Array();
        while (!__st.AtEndOfStream) {
            filtNames.push(__st.ReadLine());
        }
    }
    __st.Close();
	buf = bufs = "";    // Bufs for scheduler flavor, names not numbers
	if(filtNames == null) {
		buf += "<option value=\"0\">N/A</option>";
		bufs += "<option>N/A</option>";
	} else {
		var cf = Prefs.CameraPrefs.ClearFilterNumber;
		for (var i = 0; i < filtNames.length; i++) {
			buf += "<option value=\"" + i + "\"";
			bufs += "<option ";
			if(i == cf) {
			    buf += " selected";
			    bufs += " selected";
			}
			buf += ">" + filtNames[i] + "</option>";
			bufs += ">" + filtNames[i] + "</option>";
		}
	}
	filtNameOpts = Server.HTMLEncode(buf);
	filtNameOptsSch = Server.HTMLEncode(bufs);
} catch(ex) { }
try {
    __st = __fso.OpenTextFile(Prefs.WebRoot + "\\BinningVals.txt");
    __st.ReadLine();
	buf = "";
    while (!__st.AtEndOfStream)
    {
        var i = __st.ReadLine();
        buf += Server.HTMLEncode("<option value=\"" + i + "\">" + i + "</option>");
    }
    __st.Close();
    binValOpts = buf;
} catch(ex) {
    binValOpts = Server.HTMLEncode("<option value=\"1\">1</option>");
}
try {
    __st = __fso.OpenTextFile(ACPApp.ConfigPath + "\\AutoFlatConfig.txt");
    buf = __st.ReadAll();
    __st.Close();
    if (buf.search(/FlatMode\s+Sky/i) < 0)
        screenFlats = true;
} catch(ex) { }

acpAutoCal = Prefs.CameraPrefs.AutoCalibrate;

schInst = Scheduler.Installed;
if (schInst) {
    schAvail = Scheduler.Available;
    schUserPrio = Scheduler.UserPriorities;
    schPerAF = Scheduler.PeriodicAutoFocus;
    schDB = Scheduler.Database;
}
    
function filterNameOptions()
{
	return filtNameOpts;
}
function filterNameOptionsSch()     // Option values are the names not the numbers
{
	return filtNameOptsSch;
}
function binningOptions()
{
    return binValOpts;
}
%>-->

<!--PRE-HEAD-END-->
<title> &lt;%= Prefs.SiteName %&gt; - 
Welcome &lt;%= User.Name %&gt; </title>
<script type="text/javascript">
//<![CDATA[
// ---------------------------------------------------------------------------------
// Configuration repository
// ---------------------------------------------------------------------------------

// Miscellaneous options
var config = {
	numRssItems: 20, // Number of items in the RSS feed
	animFast: 0.12, // Speed for animations (lower == slower)
	animSlow: 0.01, // Speed for EasterEgg animations
	cascadeFast: 20, // Speed for cascade animations (higher == slower)
	cascadeSlow: 60, // Speed for EasterEgg cascade animations
	cascadeDepth: 5, // Depth of cascade animation
	displayStartupTime: false // Whether to display startup time
	};

// Messages
config.messages = {
	messageClose: {},
	dates: {}
};

// Options that can be set in the options panel and/or cookies
config.options = {
	chkRegExpSearch: false,
	chkCaseSensitiveSearch: false,
	chkAnimate: true,
	chkSaveBackups: true,
	chkAutoSave: false,
	chkGenerateAnRssFeed: false,
	chkSaveEmptyTemplate: false,
	chkOpenInNewWindow: true,
	chkToggleLinks: false,
	chkHttpReadOnly: true,
	chkForceMinorUpdate: false,
	chkConfirmDelete: true,
	chkInsertTabs: false,
	txtBackupFolder: "",
	txtMainTab: "tabTimeline",
	txtMoreTab: "moreTabAll",
	txtMaxEditRows: "30"
	};
	
// List of notification functions to be called when certain tiddlers are changed or deleted
config.notifyTiddlers = [
	{name: "StyleSheetLayout", notify: refreshStyles},
	{name: "StyleSheetColors", notify: refreshStyles},
	{name: "StyleSheet", notify: refreshStyles},
	{name: "StyleSheetPrint", notify: refreshStyles},
	{name: "PageTemplate", notify: refreshPageTemplate},
	{name: "SiteTitle", notify: refreshPageTitle},
	{name: "SiteSubtitle", notify: refreshPageTitle},
	{name: "ColorPalette", notify: refreshColorPalette},
	{name: null, notify: refreshDisplay}
	];

// Default tiddler templates
var DEFAULT_VIEW_TEMPLATE = 1;
var DEFAULT_EDIT_TEMPLATE = 2;
config.tiddlerTemplates = {
	1: "ViewTemplate",
	2: "EditTemplate"
	};

// More messages (rather a legacy layout that shouldn't really be like this)
config.views = {
	wikified: {
		tag: {}
		},
	editor: {
		tagChooser: {}
		}
	};

// Macros; each has a 'handler' member that is inserted later
config.macros = {
	today: {},
	version: {},
	search: {sizeTextbox: 15},
	tiddler: {},
	tag: {},
	tags: {},
	tagging: {},
	timeline: {},
	allTags: {},
	list: {
		all: {},
		missing: {},
		orphans: {},
		shadowed: {}
		},
	closeAll: {},
	permaview: {},
	saveChanges: {},
	slider: {},
	option: {},
	newTiddler: {},
	newJournal: {},
	sparkline: {},
	tabs: {},
	gradient: {},
	message: {},
	view: {},
	edit: {},
	tagChooser: {},
	toolbar: {},
	br: {},
	plugins: {},
	refreshDisplay: {},
	importTiddlers: {}
	};

// Commands supported by the toolbar macro
config.commands = {
	closeTiddler: {},
	closeOthers: {},
	editTiddler: {},
	saveTiddler: {hideReadOnly: true},
	cancelTiddler: {},
	deleteTiddler: {hideReadOnly: true},
	permalink: {},
	references: {},
	jump: {}
	};

// Browser detection... In a very few places, there's nothing else for it but to
// know what browser we're using.
config.userAgent = navigator.userAgent.toLowerCase();
config.browser = {
	isIE: config.userAgent.indexOf("msie") != -1 && config.userAgent.indexOf("opera") == -1,
	ieVersion: /MSIE (\d.\d)/i.exec(config.userAgent), // config.browser.ieVersion[1], if it exists, will be the IE version string, eg "6.0"
	isSafari: config.userAgent.indexOf("applewebkit") != -1,
	isBadSafari: !((new RegExp("[\u0150\u0170]","g")).test("\u0150")),
	firefoxDate: /Gecko\/(\d{8})/i.exec(config.userAgent), // config.browser.firefoxDate[1], if it exists, will be Firefox release date as "YYYYMMDD"
	isOpera: config.userAgent.indexOf("opera") != -1,
	isLinux: config.userAgent.indexOf("linux") != -1,
	isUnix: config.userAgent.indexOf("x11") != -1,
	isMac: config.userAgent.indexOf("mac") != -1,
	isWindows: config.userAgent.indexOf("win") != -1,
    isTouchInterface:  (config.userAgent.match(/iPhone/i) ||
                        config.userAgent.match(/iPad/i) ||
                        config.userAgent.match(/webOS/i) ||
                        config.userAgent.match(/webOs/i) ||
                        config.userAgent.match(/Android/i))
	};

// Basic regular expressions
config.textPrimitives = {
	upperLetter: "[A-Z\u00c0-\u00de\u0150\u0170]",
	lowerLetter: "[a-z0-9_\\-\u00df-\u00ff\u0151\u0171]",
	anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]",
	anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff\u0150\u0170\u0151\u0171]"
	};
if(config.browser.isBadSafari)
	config.textPrimitives = {
		upperLetter: "[A-Z\u00c0-\u00de]",
		lowerLetter: "[a-z0-9_\\-\u00df-\u00ff]",
		anyLetter:   "[A-Za-z0-9_\\-\u00c0-\u00de\u00df-\u00ff]",
		anyLetterStrict: "[A-Za-z0-9\u00c0-\u00de\u00df-\u00ff]"
		}
config.textPrimitives.sliceSeparator = "::";
config.textPrimitives.urlPattern = "[a-z]{3,8}:[^\\s:'\"][^\\s'\"]*(?:/|\\b)";
config.textPrimitives.unWikiLink = "~";
config.textPrimitives.wikiLink = "(?:(?:" + config.textPrimitives.upperLetter + "+" +
												config.textPrimitives.lowerLetter + "+" +
												config.textPrimitives.upperLetter +
												config.textPrimitives.anyLetter + "*)|(?:" +
												config.textPrimitives.upperLetter + "{2,}" +
												config.textPrimitives.lowerLetter + "+))";

config.textPrimitives.cssLookahead = "(?:(" + config.textPrimitives.anyLetter + "+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:(" + config.textPrimitives.anyLetter + "+):([^;\\|\\n]+);)";
config.textPrimitives.cssLookaheadRegExp = new RegExp(config.textPrimitives.cssLookahead,"mg");

config.textPrimitives.brackettedLink = "\\[\\[([^\\]]+)\\]\\]";
config.textPrimitives.titledBrackettedLink = "\\[\\[([^\\[\\]\\|]+)\\|([^\\[\\]\\|]+)\\]\\]";
config.textPrimitives.tiddlerForcedLinkRegExp = new RegExp("(?:" + config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" + 
	config.textPrimitives.urlPattern + ")","mg");
config.textPrimitives.tiddlerAnyLinkRegExp = new RegExp("("+ config.textPrimitives.wikiLink + ")|(?:" +
	config.textPrimitives.titledBrackettedLink + ")|(?:" +
	config.textPrimitives.brackettedLink + ")|(?:" +
	config.textPrimitives.urlPattern + ")","mg");

// ---------------------------------------------------------------------------------
// Shadow tiddlers
// ---------------------------------------------------------------------------------

config.shadowTiddlers = {
	ColorPalette: "Background: #fff\n" + 
				  "Foreground: #000\n" +
				  "PrimaryPale: #8cf\n" +
				  "PrimaryLight: #18f\n" +
				  "PrimaryMid: #04b\n" +
				  "PrimaryDark: #014\n" +
				  "SecondaryPale: #ffc\n" +
				  "SecondaryLight: #fe8\n" +
				  "SecondaryMid: #db4\n" +
				  "SecondaryDark: #841\n" +
				  "TertiaryPale: #eee\n" +
				  "TertiaryLight: #ccc\n" +
				  "TertiaryMid: #999\n" +
				  "TertiaryDark: #666\n" +
				  "Error: #f88\n",
	StyleSheet: "",
	StyleSheetColors: "/*{{{*/\nbody {\n	background: [[ColorPalette::Background]];\n	color: [[ColorPalette::Foreground]];\n}\n\na{\n	color: [[ColorPalette::PrimaryMid]];\n}\n\na:hover{\n	background: [[ColorPalette::PrimaryMid]];\n	color: [[ColorPalette::Background]];\n}\n\na img{\n	border: 0;\n}\n\nh1,h2,h3,h4,h5 {\n	color: [[ColorPalette::SecondaryDark]];\n	background: [[ColorPalette::PrimaryPale]];\n}\n\n.button {\n	color: [[ColorPalette::PrimaryDark]];\n	border: 1px solid [[ColorPalette::Background]];\n}\n\n.button:hover {\n	color: [[ColorPalette::PrimaryDark]];\n	background: [[ColorPalette::SecondaryLight]];\n	border-color: [[ColorPalette::SecondaryMid]];\n}\n\n.button:active {\n	color: [[ColorPalette::Background]];\n	background: [[ColorPalette::SecondaryMid]];\n	border: 1px solid [[ColorPalette::SecondaryDark]];\n}\n\n.header {\n	background: [[ColorPalette::PrimaryMid]];\n}\n\n.headerShadow {\n	color: [[ColorPalette::Foreground]];\n}\n\n.headerShadow a {\n	font-weight: normal;\n	color: [[ColorPalette::Foreground]];\n}\n\n.headerForeground {\n	color: [[ColorPalette::Background]];\n}\n\n.headerForeground a {\n	font-weight: normal;\n	color: [[ColorPalette::PrimaryPale]];\n}\n\n.tabSelected{\n	color: [[ColorPalette::PrimaryDark]];\n	background: [[ColorPalette::TertiaryPale]];\n	border-left: 1px solid [[ColorPalette::TertiaryLight]];\n	border-top: 1px solid [[ColorPalette::TertiaryLight]];\n	border-right: 1px solid [[ColorPalette::TertiaryLight]];\n}\n\n.tabUnselected {\n	color: [[ColorPalette::Background]];\n	background: [[ColorPalette::TertiaryMid]];\n}\n\n.tabContents {\n	color: [[ColorPalette::PrimaryDark]];\n	background: [[ColorPalette::TertiaryPale]];\n	border: 1px solid [[ColorPalette::TertiaryLight]];\n}\n\n.tabContents .button {\n	 border: 0;}\n\n#sidebar {\n}\n\n#sidebarOptions input {\n	border: 1px solid [[ColorPalette::PrimaryMid]];\n}\n\n#sidebarOptions .sliderPanel {\n	background: [[ColorPalette::PrimaryPale]];\n}\n\n#sidebarOptions .sliderPanel a {\n	border: none;\n	color: [[ColorPalette::PrimaryMid]];\n}\n\n#sidebarOptions .sliderPanel a:hover {\n	color: [[ColorPalette::Background]];\n	background: [[ColorPalette::PrimaryMid]];\n}\n\n#sidebarOptions .sliderPanel a:active {\n	color: [[ColorPalette::PrimaryMid]];\n	background: [[ColorPalette::Background]];\n}\n\n.wizard {\n	background: [[ColorPalette::SecondaryLight]];\n	border-top: 1px solid [[ColorPalette::SecondaryMid]];\n	border-left: 1px solid [[ColorPalette::SecondaryMid]];\n}\n\n.wizard h1 {\n	color: [[ColorPalette::SecondaryDark]];\n}\n\n.wizard h2 {\n	color: [[ColorPalette::Foreground]];\n}\n\n.wizardStep {\n	background: [[ColorPalette::Background]];\n	border-top: 1px solid [[ColorPalette::SecondaryMid]];\n	border-bottom: 1px solid [[ColorPalette::SecondaryMid]];\n	border-left: 1px solid [[ColorPalette::SecondaryMid]];\n}\n\n.wizard .button {\n	color: [[ColorPalette::Background]];\n	background: [[ColorPalette::PrimaryMid]];\n	border-top: 1px solid [[ColorPalette::PrimaryLight]];\n	border-right: 1px solid [[ColorPalette::PrimaryDark]];\n	border-bottom: 1px solid [[ColorPalette::PrimaryDark]];\n	border-left: 1px solid [[ColorPalette::PrimaryLight]];\n}\n\n.wizard .button:hover {\n	color: [[ColorPalette::PrimaryLight]];\n	background: [[ColorPalette::PrimaryDark]];\n	border-color: [[ColorPalette::PrimaryLight]];\n}\n\n.wizard .button:active {\n	color: [[ColorPalette::Background]];\n	background: [[ColorPalette::PrimaryMid]];\n	border-top: 1px solid [[ColorPalette::PrimaryLight]];\n	border-right: 1px solid [[ColorPalette::PrimaryDark]];\n	border-bottom: 1px solid [[ColorPalette::PrimaryDark]];\n	border-left: 1px solid [[ColorPalette::PrimaryLight]];\n}\n\n#messageArea {\n	border: 1px solid [[ColorPalette::SecondaryDark]];\n	background: [[ColorPalette::SecondaryMid]];\n	color: [[ColorPalette::PrimaryDark]];\n}\n\n#messageArea .button {\n	padding: 0.2em 0.2em 0.2em 0.2em;\n	color: [[ColorPalette::PrimaryDark]];\n	background: [[ColorPalette::Background]];\n}\n\n.popup {\n	background: [[ColorPalette::PrimaryLight]];\n	border: 1px solid [[ColorPalette::PrimaryMid]];\n}\n\n.popup hr {\n	color: [[ColorPalette::PrimaryDark]];\n	background: [[ColorPalette::PrimaryDark]];\n	border-bottom: 1px;\n}\n\n.listBreak div{\n	border-bottom: 1px solid [[ColorPalette::PrimaryDark]];\n}\n\n.popup li.disabled {\n	color: [[ColorPalette::PrimaryMid]];\n}\n\n.popup li a, .popup li a:visited {\n	color: [[ColorPalette::TertiaryPale]];\n	border: none;\n}\n\n.popup li a:hover {\n	background: [[ColorPalette::PrimaryDark]];\n	color: [[ColorPalette::Background]];\n	border: none;\n}\n\n.tiddler .defaultCommand {\n font-weight: bold;\n}\n\n.shadow .title {\n	color: [[ColorPalette::TertiaryDark]];\n}\n\n.title {\n	color: [[ColorPalette::SecondaryDark]];\n}\n\n.subtitle {\n	color: [[ColorPalette::TertiaryDark]];\n}\n\n.toolbar {\n	color: [[ColorPalette::PrimaryMid]];\n}\n\n.tagging, .tagged {\n	border: 1px solid [[ColorPalette::TertiaryPale]];\n	background-color: [[ColorPalette::TertiaryPale]];\n}\n\n.selected .tagging, .selected .tagged {\n	background-color: [[ColorPalette::TertiaryLight]];\n	border: 1px solid [[ColorPalette::TertiaryMid]];\n}\n\n.tagging .listTitle, .tagged .listTitle {\n	color: [[ColorPalette::PrimaryDark]];\n}\n\n.tagging .button, .tagged .button {\n		border: none;\n}\n\n.footer {\n	color: [[ColorPalette::TertiaryLight]];\n}\n\n.selected .footer {\n	color: [[ColorPalette::TertiaryMid]];\n}\n\n.sparkline {\n	background: [[ColorPalette::PrimaryPale]];\n	border: 0;\n}\n\n.sparktick {\n	background: [[ColorPalette::PrimaryDark]];\n}\n\n.error, .errorButton {\n	color: [[ColorPalette::Foreground]];\n	background: [[ColorPalette::Error]];\n}\n\n.warning {\n	color: [[ColorPalette::Foreground]];\n	background: [[ColorPalette::SecondaryPale]];\n}\n\n.cascade {\n	background: [[ColorPalette::TertiaryPale]];\n	color: [[ColorPalette::TertiaryMid]];\n	border: 1px solid [[ColorPalette::TertiaryMid]];\n}\n\n.imageLink, #displayArea .imageLink {\n	background: transparent;\n}\n\n.viewer .listTitle {list-style-type: none; margin-left: -2em;}\n\n.viewer .button {\n	border: 1px solid [[ColorPalette::SecondaryMid]];\n}\n\n.viewer blockquote {\n	border-left: 3px solid [[ColorPalette::TertiaryDark]];\n}\n\n.viewer table {\n	border: 2px solid [[ColorPalette::TertiaryDark]];\n}\n\n.viewer th, thead td {\n	background: [[ColorPalette::SecondaryMid]];\n	border: 1px solid [[ColorPalette::TertiaryDark]];\n	color: [[ColorPalette::Background]];\n}\n\n.viewer td, .viewer tr {\n	border: 1px solid [[ColorPalette::TertiaryDark]];\n}\n\n.viewer pre {\n	border: 1px solid [[ColorPalette::SecondaryLight]];\n	background: [[ColorPalette::SecondaryPale]];\n}\n\n.viewer code {\n	color: [[ColorPalette::SecondaryDark]];\n}\n\n.viewer hr {\n	border: 0;\n	border-top: dashed 1px [[ColorPalette::TertiaryDark]];\n	color: [[ColorPalette::TertiaryDark]];\n}\n\n.highlight, .marked {\n	background: [[ColorPalette::SecondaryLight]];\n}\n\n.editor input {\n	border: 1px solid [[ColorPalette::PrimaryMid]];\n}\n\n.editor textarea {\n	border: 1px solid [[ColorPalette::PrimaryMid]];\n	width: 100%;\n}\n\n.editorFooter {\n	color: [[ColorPalette::TertiaryMid]];\n}\n\n/*}}}*/",
	StyleSheetLayout: "/*{{{*/\n* html .tiddler {\n    height: 1%;\n}\n\nbody {\n	font-size: .75em;\n	font-family: arial,helvetica;\n	margin: 0;\n	padding: 0;\n}\n\nh1,h2,h3,h4,h5 {\n	font-weight: bold;\n	text-decoration: none;\n	padding-left: 0.4em;\n}\n\nh1 {font-size: 1.35em;}\nh2 {font-size: 1.25em;}\nh3 {font-size: 1.1em;}\nh4 {font-size: 1em;}\nh5 {font-size: .9em;}\n\nhr {\n	height: 1px;\n}\n\na{\n	text-decoration: none;\n}\n\ndt {font-weight: bold;}\n\nol { list-style-type: decimal }\nol ol { list-style-type: lower-alpha }\nol ol ol { list-style-type: lower-roman }\nol ol ol ol { list-style-type: decimal }\nol ol ol ol ol { list-style-type: lower-alpha }\nol ol ol ol ol ol { list-style-type: lower-roman }\nol ol ol ol ol ol ol { list-style-type: decimal }\n\n.txtOptionInput {\n	width: 11em;\n}\n\n#contentWrapper .chkOptionInput {\n	border: 0;\n}\n\n.externalLink {\n	text-decoration: underline;\n}\n\n.indent {margin-left:3em;}\n.outdent {margin-left:3em; text-indent:-3em;}\ncode.escaped {white-space:nowrap;}\n\n.tiddlyLinkExisting {\n	font-weight: bold;\n}\n\n.tiddlyLinkNonExisting {\n	font-style: italic;\n}\n\n/* the 'a' is required for IE, otherwise it renders the whole tiddler a bold */\na.tiddlyLinkNonExisting.shadow {\n	font-weight: bold;\n}\n\n#mainMenu .tiddlyLinkExisting, \n#mainMenu .tiddlyLinkNonExisting,\n#sidebarTabs .tiddlyLinkNonExisting{\n font-weight: normal;\n font-style: normal;\n}\n\n#sidebarTabs .tiddlyLinkExisting {\n font-weight: bold;\n font-style: normal;\n}\n\n.header {\n		position: relative;\n}\n\n.header a:hover {\n	background: transparent;\n}\n\n.headerShadow {\n	position: relative;\n	padding: 4.5em 0em 1em 1em;\n	left: -1px;\n	top: -1px;\n}\n\n.headerForeground {\n	position: absolute;\n	padding: 4.5em 0em 1em 1em;\n	left: 0px;\n	top: 0px;\n}\n\n.siteTitle {\n	font-size: 3em;\n}\n\n.siteSubtitle {\n	font-size: 1.2em;\n}\n\n#mainMenu {\n	position: absolute;\n	left: 0;\n	width: 10em;\n	text-align: right;\n	line-height: 1.6em;\n	padding: 1.5em 0.5em 0.5em 0.5em;\n	font-size: 1.1em;\n}\n\n#sidebar {\n	position: absolute;\n	right: 3px;\n	width: 16em;\n	font-size: .9em;\n}\n\n#sidebarOptions {\n	padding-top: 0.3em;\n}\n\n#sidebarOptions a {\n	margin: 0em 0.2em;\n	padding: 0.2em 0.3em;\n	display: block;\n}\n\n#sidebarOptions input {\n	margin: 0.4em 0.5em;\n}\n\n#sidebarOptions .sliderPanel {\n	margin-left: 1em;\n	padding: 0.5em;\n	font-size: .85em;\n}\n\n#sidebarOptions .sliderPanel a {\n	font-weight: bold;\n	display: inline;\n	padding: 0;\n}\n\n#sidebarOptions .sliderPanel input {\n	margin: 0 0 .3em 0;\n}\n\n#sidebarTabs .tabContents {\n	width: 15em;\n	overflow: hidden;\n}\n\n.wizard {\n	padding: 0.1em 0em 0em 2em;\n}\n\n.wizard h1 {\n	font-size: 2em;\n	font-weight: bold;\n	background: none;\n	padding: 0em 0em 0em 0em;\n	margin: 0.4em 0em 0.2em 0em;\n}\n\n.wizard h2 {\n	font-size: 1.2em;\n	font-weight: bold;\n	background: none;\n	padding: 0em 0em 0em 0em;\n	margin: 0.2em 0em 0.2em 0em;\n}\n\n.wizardStep {\n	padding: 1em 1em 1em 1em;\n}\n\n.wizard .button {\n	margin: 0.5em 0em 0em 0em;\n	font-size: 1.2em;\n}\n\n#messageArea {\nposition:absolute; top:0; right:0; margin: 0.5em; padding: 0.5em;\n}\n\n*[id='messageArea'] {\nposition:fixed !important; z-index:99;}\n\n.messageToolbar {\ndisplay: block;\ntext-align: right;\n}\n\n#messageArea a{\n	text-decoration: underline;\n}\n\n.popup {\n	font-size: .9em;\n	padding: 0.2em;\n	list-style: none;\n	margin: 0;\n}\n\n.popup hr {\n	display: block;\n	height: 1px;\n	width: auto;\n	padding: 0;\n	margin: 0.2em 0em;\n}\n\n.listBreak {\n	font-size: 1px;\n	line-height: 1px;\n}\n\n.listBreak div {\n	margin: 2px 0;\n}\n\n.popup li.disabled {\n	padding: 0.2em;\n}\n\n.popup li a{\n	display: block;\n	padding: 0.2em;\n}\n\n.tabset {\n	padding: 1em 0em 0em 0.5em;\n}\n\n.tab {\n	margin: 0em 0em 0em 0.25em;\n	padding: 2px;\n}\n\n.tabContents {\n	padding: 0.5em;\n}\n\n.tabContents ul, .tabContents ol {\n	margin: 0;\n	padding: 0;\n}\n\n.txtMainTab .tabContents li {\n	list-style: none;\n}\n\n.tabContents li.listLink {\n	 margin-left: .75em;\n}\n\n#displayArea {\n	margin: 1em 17em 0em 14em;\n}\n\n\n.toolbar {\n	text-align: right;\n	font-size: .9em;\n	visibility: hidden;\n}\n\n.selected .toolbar {\n	visibility: visible;\n}\n\n.tiddler {\n	padding: 1em 1em 0em 1em;\n}\n\n.missing .viewer,.missing .title {\n	font-style: italic;\n}\n\n.title {\n	font-size: 1.6em;\n	font-weight: bold;\n}\n\n.missing .subtitle {\n display: none;\n}\n\n.subtitle {\n	font-size: 1.1em;\n}\n\n.tiddler .button {\n	padding: 0.2em 0.4em;\n}\n\n.tagging {\nmargin: 0.5em 0.5em 0.5em 0;\nfloat: left;\ndisplay: none;\n}\n\n.isTag .tagging {\ndisplay: block;\n}\n\n.tagged {\nmargin: 0.5em;\nfloat: right;\n}\n\n.tagging, .tagged {\nfont-size: 0.9em;\npadding: 0.25em;\n}\n\n.tagging ul, .tagged ul {\nlist-style: none;margin: 0.25em;\npadding: 0;\n}\n\n.tagClear {\nclear: both;\n}\n\n.footer {\n	font-size: .9em;\n}\n\n.footer li {\ndisplay: inline;\n}\n\n* html .viewer pre {\n	width: 99%;\n	padding: 0 0 1em 0;\n}\n\n.viewer {\n	line-height: 1.4em;\n	padding-top: 0.5em;\n}\n\n.viewer .button {\n	margin: 0em 0.25em;\n	padding: 0em 0.25em;\n}\n\n.viewer blockquote {\n	line-height: 1.5em;\n	padding-left: 0.8em;\n	margin-left: 2.5em;\n}\n\n.viewer ul, .viewer ol{\n	margin-left: 0.5em;\n	padding-left: 1.5em;\n}\n\n.viewer table {\n	border-collapse: collapse;\n	margin: 0.8em 1.0em;\n}\n\n.viewer th, .viewer td, .viewer tr,.viewer caption{\n	padding: 3px;\n}\n\n.viewer table.listView {\n	font-size: 0.85em;\n	margin: 0.8em 1.0em;\n}\n\n.viewer table.listView th, .viewer table.listView td, .viewer table.listView tr {\n	padding: 0px 3px 0px 3px;\n}\n\n.viewer pre {\n	padding: 0.5em;\n	margin-left: 0.5em;\n	font-size: 1.2em;\n	line-height: 1.4em;\n	overflow: auto;\n}\n\n.viewer code {\n	font-size: 1.2em;\n	line-height: 1.4em;\n}\n\n.editor {\nfont-size: 1.1em;\n}\n\n.editor input, .editor textarea {\n	display: block;\n	width: 100%;\n	font: inherit;\n}\n\n.editorFooter {\n	padding: 0.25em 0em;\n	font-size: .9em;\n}\n\n.editorFooter .button {\npadding-top: 0px; padding-bottom: 0px;}\n\n.fieldsetFix {border: 0;\npadding: 0;\nmargin: 1px 0px 1px 0px;\n}\n\n.sparkline {\n	line-height: 1em;\n}\n\n.sparktick {\n	outline: 0;\n}\n\n.zoomer {\n	font-size: 1.1em;\n	position: absolute;\n	padding: 1em;\n}\n\n.cascade {\n	font-size: 1.1em;\n	position: absolute;\n	overflow: hidden;\n}\n/*}}}*/",
	StyleSheetPrint: "/*{{{*/\n@media print {\n#mainMenu, #sidebar, #messageArea, .toolbar {display: none ! important;}\n#displayArea {margin: 1em 1em 0em 1em;}\n/* Fixes a feature in Firefox 1.5.0.2 where print preview displays the noscript content */\nnoscript {display:none;}\n}\n/*}}}*/",
	PageTemplate: "<!--{{{-->\n<div class='header' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'>\n<div class='headerShadow'>\n<span class='siteTitle' refresh='content' tiddler='SiteTitle'></span>&nbsp;\n<span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'></span>\n</div>\n<div class='headerForeground'>\n<span class='siteTitle' refresh='content' tiddler='SiteTitle'></span>&nbsp;\n<span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'></span>\n</div>\n</div>\n<div id='mainMenu' refresh='content' tiddler='MainMenu'></div>\n<div id='sidebar'>\n<div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'></div>\n<div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'></div>\n</div>\n<div id='displayArea'>\n<div id='messageArea'></div>\n<div id='tiddlerDisplay'></div>\n</div>\n<!--}}}-->",
	ViewTemplate: "<!--{{{-->\n<div class='toolbar' macro='toolbar closeTiddler closeOthers +editTiddler permalink references jump'></div>\n<div class='title' macro='view title'></div>\n<div class='subtitle'><span macro='view modifier link'></span>, <span macro='view modified date [[DD MMM YYYY]]'></span> (<span macro='message views.wikified.createdPrompt'></span> <span macro='view created date [[DD MMM YYYY]]'></span>)</div>\n<div class='tagging' macro='tagging'></div>\n<div class='tagged' macro='tags'></div>\n<div class='viewer' macro='view text wikified'></div>\n<div class='tagClear'></div>\n<!--}}}-->",
	EditTemplate: "<!--{{{-->\n<div class='toolbar' macro='toolbar +saveTiddler -cancelTiddler deleteTiddler'></div>\n<div class='title' macro='view title'></div>\n<div class='editor' macro='edit title'></div>\n<div class='editor' macro='edit text'></div>\n<div class='editor' macro='edit tags'></div><div class='editorFooter'><span macro='message views.editor.tagPrompt'></span><span macro='tagChooser'></span></div>\n<!--}}}-->",
	MarkupPreHead: "<!--{{{-->\n<link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml'/>\n<!--}}}-->",
	MarkupPostHead: "",
	MarkupPreBody: "",
	MarkupPostBody: ""
	};

// ---------------------------------------------------------------------------------
// Translateable strings
// ---------------------------------------------------------------------------------

// Strings in "double quotes" should be translated; strings in 'single quotes' should be left alone

merge(config.options,{
	txtUserName: "YourName"});

merge(config.messages,{
	customConfigError: "Problems were encountered loading plugins. See PluginManager for details",
	pluginError: "Error: %0",
	pluginDisabled: "Not executed because disabled via 'systemConfigDisable' tag",
	pluginForced: "Executed because forced via 'systemConfigForce' tag",
	pluginVersionError: "Not executed because this plugin needs a newer version of TiddlyWiki",
	nothingSelected: "Nothing is selected. You must select one or more items first",
	savedSnapshotError: "It appears that this TiddlyWiki has been incorrectly saved. Please see http://www.tiddlywiki.com/#DownloadSoftware for details",
	subtitleUnknown: "(unknown)",
	undefinedTiddlerToolTip: "The tiddler '%0' doesn't yet exist",
	shadowedTiddlerToolTip: "The tiddler '%0' doesn't yet exist, but has a pre-defined shadow value",
	tiddlerLinkTooltip: "%0 - %1, %2",
	externalLinkTooltip: "External link to %0",
	noTags: "There are no tagged tiddlers",
	notFileUrlError: "You need to save this TiddlyWiki to a file before you can save changes",
	cantSaveError: "It's not possible to save changes. This could be because your browser doesn't support saving (instead, use FireFox if you can), or because the pathname to your TiddlyWiki file contains illegal characters",
	invalidFileError: "The original file '%0' does not appear to be a valid TiddlyWiki",
	backupSaved: "Backup saved",
	backupFailed: "Failed to save backup file",
	rssSaved: "RSS feed saved",
	rssFailed: "Failed to save RSS feed file",
	emptySaved: "Empty template saved",
	emptyFailed: "Failed to save empty template file",
	mainSaved: "Main TiddlyWiki file saved",
	mainFailed: "Failed to save main TiddlyWiki file. Your changes have not been saved",
	macroError: "Error in macro <<%0>>",
	macroErrorDetails: "Error while executing macro <<%0>>:\n%1",
	missingMacro: "No such macro",
	overwriteWarning: "A tiddler named '%0' already exists. Choose OK to overwrite it",
	unsavedChangesWarning: "WARNING! There are unsaved changes in TiddlyWiki\n\nChoose OK to save\nChoose CANCEL to discard",
	confirmExit: "--------------------------------\n\nThere are unsaved changes in TiddlyWiki. If you continue you will lose those changes\n\n--------------------------------",
	saveInstructions: "SaveChanges",
	unsupportedTWFormat: "Unsupported TiddlyWiki format '%0'",
	tiddlerSaveError: "Error when saving tiddler '%0'",
	tiddlerLoadError: "Error when loading tiddler '%0'",
	wrongSaveFormat: "Cannot save with storage format '%0'. Using standard format for save.",
	invalidFieldName: "Invalid field name %0",
	fieldCannotBeChanged: "Field '%0' cannot be changed"});

merge(config.messages.messageClose,{
	text: "close",
	tooltip: "close this message area"});

config.messages.dates.months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November","December"];
config.messages.dates.days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
config.messages.dates.shortMonths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
config.messages.dates.shortDays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

merge(config.views.wikified.tag,{
	labelNoTags: "no tags",
	labelTags: "tags: ",
	openTag: "Open tag '%0'",
	tooltip: "Show tiddlers tagged with '%0'",
	openAllText: "Open all",
	openAllTooltip: "Open all of these tiddlers",
	popupNone: "No other tiddlers tagged with '%0'"});

merge(config.views.wikified,{
	defaultText: "The tiddler '%0' doesn't yet exist. Double-click to create it",
	defaultModifier: "(missing)",
	shadowModifier: "(built-in shadow tiddler)",
	createdPrompt: "created"});

merge(config.views.editor,{
	tagPrompt: "Type tags separated with spaces, [[use double square brackets]] if necessary, or add existing",
	defaultText: "Type the text for '%0'"});

merge(config.views.editor.tagChooser,{
	text: "tags",
	tooltip: "Choose existing tags to add to this tiddler",
	popupNone: "There are no tags defined",
	tagTooltip: "Add the tag '%0'"});

merge(config.macros.search,{
	label: "search",
	prompt: "Search this TiddlyWiki",
	accessKey: "F",
	successMsg: "%0 tiddlers found matching %1",
	failureMsg: "No tiddlers found matching %0"});

merge(config.macros.tagging,{
	label: "tagging: ",
	labelNotTag: "not tagging",
	tooltip: "List of tiddlers tagged with '%0'"});

merge(config.macros.timeline,{
	dateFormat: "DD MMM YYYY"});

merge(config.macros.allTags,{
	tooltip: "Show tiddlers tagged with '%0'",
	noTags: "There are no tagged tiddlers"});

config.macros.list.all.prompt = "All tiddlers in alphabetical order";
config.macros.list.missing.prompt = "Tiddlers that have links to them but are not defined";
config.macros.list.orphans.prompt = "Tiddlers that are not linked to from any other tiddlers";
config.macros.list.shadowed.prompt = "Tiddlers shadowed with default contents";

merge(config.macros.closeAll,{
	label: "close all",
	prompt: "Close all displayed tiddlers (except any that are being edited)"});

merge(config.macros.permaview,{
	label: "permaview",
	prompt: "Link to an URL that retrieves all the currently displayed tiddlers"});

merge(config.macros.saveChanges,{
	label: "save changes",
	prompt: "Save all tiddlers to create a new TiddlyWiki",
	accessKey: "S"});

merge(config.macros.newTiddler,{
	label: "new tiddler",
	prompt: "Create a new tiddler",
	title: "New Tiddler",
	accessKey: "N"});

merge(config.macros.newJournal,{
	label: "new journal",
	prompt: "Create a new tiddler from the current date and time",
	accessKey: "J"});

merge(config.macros.plugins,{
	skippedText: "(This plugin has not been executed because it was added since startup)",
	noPluginText: "There are no plugins installed",
	confirmDeleteText: "Are you sure you want to delete these tiddlers:\n\n%0",
	listViewTemplate : {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Title', field: 'title', tiddlerLink: 'title', title: "Title", type: 'TiddlerLink'},
			{name: 'Forced', field: 'forced', title: "Forced", tag: 'systemConfigForce', type: 'TagCheckbox'},
			{name: 'Disabled', field: 'disabled', title: "Disabled", tag: 'systemConfigDisable', type: 'TagCheckbox'},
			{name: 'Executed', field: 'executed', title: "Loaded", type: 'Boolean', trueText: "Yes", falseText: "No"},
			{name: 'Error', field: 'error', title: "Status", type: 'Boolean', trueText: "Error", falseText: "OK"},
			{name: 'Log', field: 'log', title: "Log", type: 'StringList'}
			],
		rowClasses: [
			{className: 'error', field: 'error'},
			{className: 'warning', field: 'warning'}
			],
		actions: [
			{caption: "More actions...", name: ''},
			{caption: "Remove systemConfig tag", name: 'remove'},
			{caption: "Delete these tiddlers forever", name: 'delete'}
			]}
	});

merge(config.macros.refreshDisplay,{
	label: "refresh",
	prompt: "Redraw the entire TiddlyWiki display"
	});

merge(config.macros.importTiddlers,{
	readOnlyWarning: "You cannot import tiddlers into a read-only TiddlyWiki. Try opening the TiddlyWiki file from a file:// URL",
	defaultPath: "http://www.tiddlywiki.com/index.html",
	fetchLabel: "fetch",
	fetchPrompt: "Fetch the tiddlywiki file",
	fetchError: "There were problems fetching the tiddlywiki file",
	confirmOverwriteText: "Are you sure you want to overwrite these tiddlers:\n\n%0",
	wizardTitle: "Import tiddlers from another TiddlyWiki file",
	step1: "Step 1: Locate the TiddlyWiki file",
	step1prompt: "Enter the URL or pathname here: ",
	step1promptFile: "...or browse for a file: ",
	step1promptFeeds: "...or select a pre-defined feed: ",
	step1feedPrompt: "Choose...",
	step2: "Step 2: Loading TiddlyWiki file",
	step2Text: "Please wait while the file is loaded from: %0",
	step3: "Step 3: Choose the tiddlers to import",
	step4: "%0 tiddler(s) imported",
	step5: "Done",
	listViewTemplate: {
		columns: [
			{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},
			{name: 'Title', field: 'title', title: "Title", type: 'String'},
			{name: 'Snippet', field: 'text', title: "Snippet", type: 'String'},
			{name: 'Tags', field: 'tags', title: "Tags", type: 'Tags'}
			],
		rowClasses: [
			],
		actions: [
			{caption: "More actions...", name: ''},
			{caption: "Import these tiddlers", name: 'import'}
			]}
	});

merge(config.commands.closeTiddler,{
	text: "close",
	tooltip: "Close this tiddler"});

merge(config.commands.closeOthers,{
	text: "close others",
	tooltip: "Close all other tiddlers"});

merge(config.commands.editTiddler,{
	text: "edit",
	tooltip: "Edit this tiddler",
	readOnlyText: "view",
	readOnlyTooltip: "View the source of this tiddler"});

merge(config.commands.saveTiddler,{
	text: "done",
	tooltip: "Save changes to this tiddler"});

merge(config.commands.cancelTiddler,{
	text: "cancel",
	tooltip: "Undo changes to this tiddler",
	warning: "Are you sure you want to abandon your changes to '%0'?",
	readOnlyText: "done",
	readOnlyTooltip: "View this tiddler normally"});

merge(config.commands.deleteTiddler,{
	text: "delete",
	tooltip: "Delete this tiddler",
	warning: "Are you sure you want to delete '%0'?"});

merge(config.commands.permalink,{
	text: "permalink",
	tooltip: "Permalink for this tiddler"});

merge(config.commands.references,{
	text: "references",
	tooltip: "Show tiddlers that link to this one",
	popupNone: "No references"});

merge(config.commands.jump,{
	text: "jump",
	tooltip: "Jump to another open tiddler"});

merge(config.shadowTiddlers,{
	DefaultTiddlers: "GettingStarted",
	MainMenu: "GettingStarted",
	SiteTitle: "My TiddlyWiki",
	SiteSubtitle: "a reusable non-linear personal web notebook",
	SiteUrl: "http://www.tiddlywiki.com/",
	GettingStarted: "To get started with this blank TiddlyWiki, you'll need to modify the following tiddlers:\n* SiteTitle & SiteSubtitle: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)\n* MainMenu: The menu (usually on the left)\n* DefaultTiddlers: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened\nYou'll also need to enter your username for signing your edits: <<option txtUserName>>",
	SideBarOptions: "<<search>><<closeAll>><<permaview>><<newTiddler>><<newJournal 'DD MMM YYYY'>><<saveChanges>><<slider chkSliderOptionsPanel OptionsPanel 'options »' 'Change TiddlyWiki advanced options'>>",
	OptionsPanel: "These InterfaceOptions for customising TiddlyWiki are saved in your browser\n\nYour username for signing your edits. Write it as a WikiWord (eg JoeBloggs)\n\n<<option txtUserName>>\n<<option chkSaveBackups>> SaveBackups\n<<option chkAutoSave>> AutoSave\n<<option chkRegExpSearch>> RegExpSearch\n<<option chkCaseSensitiveSearch>> CaseSensitiveSearch\n<<option chkAnimate>> EnableAnimations\n\n----\nAdvancedOptions\nPluginManager\nImportTiddlers",
	AdvancedOptions: "<<option chkGenerateAnRssFeed>> GenerateAnRssFeed\n<<option chkOpenInNewWindow>> OpenLinksInNewWindow\n<<option chkSaveEmptyTemplate>> SaveEmptyTemplate\n<<option chkToggleLinks>> Clicking on links to tiddlers that are already open causes them to close\n^^(override with Control or other modifier key)^^\n<<option chkHttpReadOnly>> HideEditingFeatures when viewed over HTTP\n<<option chkForceMinorUpdate>> Treat edits as MinorChanges by preserving date and time\n^^(override with Shift key when clicking 'done' or by pressing Ctrl-Shift-Enter^^\n<<option chkConfirmDelete>> ConfirmBeforeDeleting\nMaximum number of lines in a tiddler edit box: <<option txtMaxEditRows>>\nFolder name for backup files: <<option txtBackupFolder>>\n<<option chkInsertTabs>> Use tab key to insert tab characters instead of jumping to next field",
	SideBarTabs: "<<tabs txtMainTab Timeline Timeline TabTimeline All 'All tiddlers' TabAll Tags 'All tags' TabTags More 'More lists' TabMore>>",
	TabTimeline: "<<timeline>>",
	TabAll: "<<list all>>",
	TabTags: "<<allTags>>",
	TabMore: "<<tabs txtMoreTab Missing 'Missing tiddlers' TabMoreMissing Orphans 'Orphaned tiddlers' TabMoreOrphans Shadowed 'Shadowed tiddlers' TabMoreShadowed>>",
	TabMoreMissing: "<<list missing>>",
	TabMoreOrphans: "<<list orphans>>",
	TabMoreShadowed: "<<list shadowed>>",
	PluginManager: "<<plugins>>",
	ImportTiddlers: "<<importTiddlers>>"});

// ---------------------------------------------------------------------------------
// Main
// ---------------------------------------------------------------------------------

var params = null; // Command line parameters
var store = null; // TiddlyWiki storage
var story = null; // Main story
var formatter = null; // Default formatters for the wikifier
config.parsers = {}; // Hashmap of alternative parsers for the wikifier
var anim = new Animator(); // Animation engine
var readOnly = false; // Whether we're in readonly mode
var highlightHack = null; // Embarrassing hack department...
var hadConfirmExit = false; // Don't warn more than once
var safeMode = false; // Disable all plugins and cookies
var installedPlugins = []; // Information filled in when plugins are executed
var startingUp = false; // Whether we're in the process of starting up
var pluginInfo,tiddler; // Used to pass information to plugins in loadPlugins()

// Starting up
function main()
{
	var now, then = new Date();
	startingUp = true;
	window.onbeforeunload = function(e) {if(window.confirmExit) return confirmExit();};
	params = getParameters();
	if(params)
		params = params.parseParams("open",null,false);
	store = new TiddlyWiki();
	invokeParamifier(params,"oninit");
	story = new Story("tiddlerDisplay","tiddler");
	addEvent(document,"click",Popup.onDocumentClick);
	saveTest();
	loadOptionsCookie();
	for(var s=0; s<config.notifyTiddlers.length; s++)
		store.addNotification(config.notifyTiddlers[s].name,config.notifyTiddlers[s].notify);
	store.loadFromDiv("storeArea","store",true);
	invokeParamifier(params,"onload");
	var pluginProblem = loadPlugins();
	formatter = new Formatter(config.formatters);
	readOnly = (window.location.protocol == "file:") ? false : config.options.chkHttpReadOnly;
	invokeParamifier(params,"onconfig");
	store.notifyAll();
	restart();
	if(pluginProblem)
		{
		story.displayTiddler(null,"PluginManager");
		displayMessage(config.messages.customConfigError);
		}
	now = new Date();
	if(config.displayStartupTime)
		displayMessage("TiddlyWiki startup in " + (now-then)/1000 + " seconds");
	startingUp = false;
}

// Restarting
function restart()
{
	invokeParamifier(params,"onstart");
	if(story.isEmpty())
		{
		var defaultParams = store.getTiddlerText("DefaultTiddlers").parseParams("open",null,false);
		invokeParamifier(defaultParams,"onstart");
		}
	window.scrollTo(0,0);
}

function saveTest()
{
	var saveTest = document.getElementById("saveTest");
	if(saveTest.hasChildNodes())
		alert(config.messages.savedSnapshotError);
	saveTest.appendChild(document.createTextNode("savetest"));
}

function loadPlugins()
{
	if(safeMode)
		return false;
	var configTiddlers = store.getTaggedTiddlers("systemConfig");
	installedPlugins = [];
	var hadProblem = false;
	for(var t=0; t<configTiddlers.length; t++)
		{
		tiddler = configTiddlers[t];
		pluginInfo = getPluginInfo(tiddler);
		if(isPluginExecutable(pluginInfo))
			{
			pluginInfo.executed = true;
			pluginInfo.error = false;
			try
				{
				if(tiddler.text && tiddler.text != "")
					window.eval(tiddler.text);
				}
			catch(e)
				{
				pluginInfo.log.push(config.messages.pluginError.format([exceptionText(e)]));
				pluginInfo.error = true;
				hadProblem = true;
				}
			}
		else
			pluginInfo.warning = true;
		installedPlugins.push(pluginInfo);
		}
	return hadProblem;
}

function getPluginInfo(tiddler)
{
	var p = store.getTiddlerSlices(tiddler.title,["Name","Description","Version","CoreVersion","Date","Source","Author","License","Browsers"]);
	p.tiddler = tiddler;
	p.title = tiddler.title;
	p.log = [];
	return p;
}

// Check that a particular plugin is valid for execution
function isPluginExecutable(plugin)
{
	if(plugin.tiddler.isTagged("systemConfigDisable"))
		return verifyTail(plugin,false,config.messages.pluginDisabled);
	if(plugin.tiddler.isTagged("systemConfigForce"))
		return verifyTail(plugin,true,config.messages.pluginForced);
	if(plugin["CoreVersion"])
		{
		var coreVersion = plugin["CoreVersion"].split(".");
		var w = parseInt(coreVersion[0]) - version.major;
		if(w == 0 && coreVersion[1])
			w = parseInt(coreVersion[1]) - version.minor;
		if(w == 0 && coreVersion[2])
		 	w = parseInt(coreVersion[2]) - version.revision;
		if(w > 0)
			return verifyTail(plugin,false,config.messages.pluginVersionError);
		}
	return true;
}

function verifyTail(plugin,result,message)
{
	plugin.log.push(message);
	return result;
}

function invokeMacro(place,macro,params,wikifier,tiddler)
{
	try
		{
		var m = config.macros[macro];
		if(m && m.handler)
			m.handler(place,macro,params.readMacroParams(),wikifier,params,tiddler);
		else
			createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,config.messages.missingMacro]));
		}
	catch(ex)
		{
		createTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,ex.toString()]));
		}
}

// ---------------------------------------------------------------------------------
// Paramifiers
// ---------------------------------------------------------------------------------

function getParameters()
{
	var p = null;
	if(window.location.hash)
		{
		p = decodeURI(window.location.hash.substr(1));
		if(config.browser.firefoxDate != null && config.browser.firefoxDate[1] < "20051111")
			p = convertUTF8ToUnicode(p);
		}
	return p;
}

function invokeParamifier(params,handler)
{
	if(!params || params.length == undefined || params.length <= 1)
		return;
	for(var t=1; t<params.length; t++)
		{
		var p = config.paramifiers[params[t].name];
		if(p && p[handler] instanceof Function)
			p[handler](params[t].value);
		}
}

config.paramifiers = {};

config.paramifiers.start = {
	oninit: function(v) {
		safeMode = v.toLowerCase() == "safe";
		}
};

config.paramifiers.open = {
	onstart: function(v) {
		story.displayTiddler("bottom",v,null,false,false);
		}
};

config.paramifiers.story = {
	onstart: function(v) {
		var list = store.getTiddlerText(v,"").parseParams("open",null,false);
		invokeParamifier(list,"onstart");
		}
};

config.paramifiers.search = {
	onstart: function(v) {
		story.search(v,false,false);
		}
};

config.paramifiers.searchRegExp = {
	onstart: function(v) {
		story.prototype.search(v,false,true);
		}
};

config.paramifiers.tag = {
	onstart: function(v) {
		var tagged = store.getTaggedTiddlers(v,"title");
		for(var t=0; t<tagged.length; t++)
			story.displayTiddler("bottom",tagged[t].title,null,false,false);
		}
};

config.paramifiers.newTiddler = {
	onstart: function(v) {
		if(!readOnly)
			{
			story.displayTiddler(null,v,DEFAULT_EDIT_TEMPLATE);
			story.focusTiddler(v,"text");
			}
		}
};

config.paramifiers.newJournal = {
	onstart: function(v) {
		if(!readOnly)
			{
			var now = new Date();
			var title = now.formatString(v.trim());
			story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE);
			story.focusTiddler(title,"text");
			}
		}
};

// ---------------------------------------------------------------------------------
// Formatter helpers
// ---------------------------------------------------------------------------------

function Formatter(formatters)
{
	this.formatters = [];
	var pattern = [];
	for(var n=0; n<formatters.length; n++)
		{
		pattern.push("(" + formatters[n].match + ")");
		this.formatters.push(formatters[n]);
		}
	this.formatterRegExp = new RegExp(pattern.join("|"),"mg");
}

config.formatterHelpers = {

	createElementAndWikify: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,this.element),this.termRegExp);
	},
	
	inlineCssHelper: function(w)
	{
		var styles = [];
		config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch)
			{
			var s,v;
			if(lookaheadMatch[1])
				{
				s = lookaheadMatch[1].unDash();
				v = lookaheadMatch[2];
				}
			else
				{
				s = lookaheadMatch[3].unDash();
				v = lookaheadMatch[4];
				}
			if (s=="bgcolor")
				s = "backgroundColor";
			styles.push({style: s, value: v});
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
			config.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);
			}
		return styles;
	},

	applyCssHelper: function(e,styles)
	{
		for(var t=0; t< styles.length; t++)
			{
			try
				{
				e.style[styles[t].style] = styles[t].value;
				}
			catch (ex)
				{
				}
			}
	},

	enclosedTextHelper: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			{
			var text = lookaheadMatch[1];
			if(config.browser.isIE)
				text = text.replace(/\n/g,"\r");
			createTiddlyElement(w.output,this.element,null,null,text);
			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;
			}
	},

	isExternalLink: function(link)
	{
		if(store.tiddlerExists(link) || store.isShadowTiddler(link))
			{
			//# Definitely not an external link
			return false;
			}
		var urlRegExp = new RegExp(config.textPrimitives.urlPattern,"mg");
		if(urlRegExp.exec(link))
			{
			// Definitely an external link
			return true;
			}
		if (link.indexOf(".")!=-1 || link.indexOf("\\")!=-1 || link.indexOf("/")!=-1)
			{
			//# Link contains . / or \ so is probably an external link
			return true;
			}
		//# Otherwise assume it is not an external link
		return false;
	}

};

// ---------------------------------------------------------------------------------
// Standard formatters
// ---------------------------------------------------------------------------------

config.formatters = [
{
	name: "table",
	match: "^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",
	lookaheadRegExp: /^\|([^\n]*)\|([fhck]?)$/mg,
	rowTermRegExp: /(\|(?:[fhck]?)$\n?)/mg,
	cellRegExp: /(?:\|([^\n\|]*)\|)|(\|[fhck]?$\n?)/mg,
	cellTermRegExp: /((?:\x20*)\|)/mg,
	rowTypes: {"c":"caption", "h":"thead", "":"tbody", "f":"tfoot"},

	handler: function(w)
	{
		var table = createTiddlyElement(w.output,"table");
		var prevColumns = [];
		var currRowType = null;
		var rowContainer;
		var rowCount = 0;
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch)
			{
			var nextRowType = lookaheadMatch[2];
			if(nextRowType == "k")
				{
				table.className = lookaheadMatch[1];
				w.nextMatch += lookaheadMatch[0].length+1;
				}
			else
				{
				if(nextRowType != currRowType)
					{
					rowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);
					currRowType = nextRowType;
					}
				if(currRowType == "c")
					{
					// Caption
					w.nextMatch++;
					if(rowContainer != table.firstChild)
						table.insertBefore(rowContainer,table.firstChild);
					rowContainer.setAttribute("align",rowCount == 0?"top":"bottom");
					w.subWikifyTerm(rowContainer,this.rowTermRegExp);
					}
				else
					{
					this.rowHandler(w,createTiddlyElement(rowContainer,"tr",null,(rowCount&1)?"oddRow":"evenRow"),prevColumns);
					rowCount++;
					}
				}
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			}
	},
	rowHandler: function(w,e,prevColumns)
	{
		var col = 0;
		var colSpanCount = 1;
		var prevCell = null;
		this.cellRegExp.lastIndex = w.nextMatch;
		var cellMatch = this.cellRegExp.exec(w.source);
		while(cellMatch && cellMatch.index == w.nextMatch)
			{
			if(cellMatch[1] == "~")
				{
				// Rowspan
				var last = prevColumns[col];
				if(last)
					{
					last.rowSpanCount++;
					last.element.setAttribute("rowspan",last.rowSpanCount);
					last.element.setAttribute("rowSpan",last.rowSpanCount); // Needed for IE
					last.element.valign = "center";
					}
				w.nextMatch = this.cellRegExp.lastIndex-1;
				}
			else if(cellMatch[1] == ">")
				{
				// Colspan
				colSpanCount++;
				w.nextMatch = this.cellRegExp.lastIndex-1;
				}
			else if(cellMatch[2])
				{
				// End of row
				if(prevCell && colSpanCount > 1)
					{
					prevCell.setAttribute("colspan",colSpanCount);
					prevCell.setAttribute("colSpan",colSpanCount); // Needed for IE
					}
				w.nextMatch = this.cellRegExp.lastIndex;
				break;
				}
			else
				{
				// Cell
				w.nextMatch++;
				var styles = config.formatterHelpers.inlineCssHelper(w);
				var spaceLeft = false;
				var chr = w.source.substr(w.nextMatch,1);
				while(chr == " ")
					{
					spaceLeft = true;
					w.nextMatch++;
					chr = w.source.substr(w.nextMatch,1);
					}
				var cell;
				if(chr == "!")
					{
					cell = createTiddlyElement(e,"th");
					w.nextMatch++;
					}
				else
					cell = createTiddlyElement(e,"td");
				prevCell = cell;
				prevColumns[col] = {rowSpanCount:1, element:cell};
				if(colSpanCount > 1)
					{
					cell.setAttribute("colspan",colSpanCount);
					cell.setAttribute("colSpan",colSpanCount); // Needed for IE
					colSpanCount = 1;
					}
				config.formatterHelpers.applyCssHelper(cell,styles);
				w.subWikifyTerm(cell,this.cellTermRegExp);
				if(w.matchText.substr(w.matchText.length-2,1) == " ") // spaceRight
					cell.align = spaceLeft ? "center" : "left";
				else if(spaceLeft)
					cell.align = "right";
				w.nextMatch--;
				}
			col++;
			this.cellRegExp.lastIndex = w.nextMatch;
			cellMatch = this.cellRegExp.exec(w.source);
			}
	}
},

{
	name: "heading",
	match: "^!{1,5}",
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		w.subWikifyTerm(createTiddlyElement(w.output,"h" + w.matchLength),this.termRegExp);
	}
},

{
	name: "list",
	match: "^(?:(?:(?:\\*)|(?:#)|(?:;)|(?::))+)",
	lookaheadRegExp: /^(?:(?:(\*)|(#)|(;)|(:))+)/mg,
	termRegExp: /(\n)/mg,
	handler: function(w)
	{
		var placeStack = [w.output];
		var currLevel = 0, currType = null;
		var listLevel, listType, itemType;
		w.nextMatch = w.matchStart;
		this.lookaheadRegExp.lastIndex = w.nextMatch;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		while(lookaheadMatch && lookaheadMatch.index == w.nextMatch)
			{
			if(lookaheadMatch[1])
				{
				listType = "ul";
				itemType = "li";
				}
			else if(lookaheadMatch[2])
				{
				listType = "ol";
				itemType = "li";
				}
			else if(lookaheadMatch[3])
				{
				listType = "dl";
				itemType = "dt";
				}
			else if(lookaheadMatch[4])
				{
				listType = "dl";
				itemType = "dd";
				}
			listLevel = lookaheadMatch[0].length;
			w.nextMatch += lookaheadMatch[0].length;
			if(listLevel > currLevel)
				{
				for(var t=currLevel; t<listLevel; t++)
					placeStack.push(createTiddlyElement(placeStack[placeStack.length-1],listType));
				}
			else if(listLevel < currLevel)
				{
				for(var t=currLevel; t>listLevel; t--)
					placeStack.pop();
				}
			else if(listLevel == currLevel && listType != currType)
				{
				placeStack.pop();
				placeStack.push(createTiddlyElement(placeStack[placeStack.length-1],listType));
				}
			currLevel = listLevel;
			currType = listType;
			var e = createTiddlyElement(placeStack[placeStack.length-1],itemType);
			w.subWikifyTerm(e,this.termRegExp);
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		}
	}
},

{
	name: "quoteByBlock",
	match: "^<<<\\n",
	termRegExp: /(^<<<(\n|$))/mg,
	element: "blockquote",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "quoteByLine",
	match: "^>+",
	lookaheadRegExp: /^>+/mg,
	termRegExp: /(\n)/mg,
	element: "blockquote",
	handler: function(w)
	{
		var placeStack = [w.output];
		var currLevel = 0;
		var newLevel = w.matchLength;
		var t;
		do {
			if(newLevel > currLevel)
				{
				for(t=currLevel; t<newLevel; t++)
					placeStack.push(createTiddlyElement(placeStack[placeStack.length-1],this.element));
				}
			else if(newLevel < currLevel)
				{
				for(t=currLevel; t>newLevel; t--)
					placeStack.pop();
				}
			currLevel = newLevel;
			w.subWikifyTerm(placeStack[placeStack.length-1],this.termRegExp);
			createTiddlyElement(placeStack[placeStack.length-1],"br");
			this.lookaheadRegExp.lastIndex = w.nextMatch;
			var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
			var matched = lookaheadMatch && lookaheadMatch.index == w.nextMatch;
			if(matched)
				{
				newLevel = lookaheadMatch[0].length;
				w.nextMatch += lookaheadMatch[0].length;
				}
		} while(matched);
	}
},

{
	name: "rule",
	match: "^----+$\\n?",
	handler: function(w)
	{
		createTiddlyElement(w.output,"hr");
	}
},

{
	name: "monospacedByLine",
	match: "^\\{\\{\\{\\n",
	lookaheadRegExp: /^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/mg,
	element: "pre",
	handler: config.formatterHelpers.enclosedTextHelper
},

{
	name: "monospacedByLineForCSS",
	match: "^/\\*[\\{]{3}\\*/\\n",
	lookaheadRegExp: /\/\*[\{]{3}\*\/\n*((?:^[^\n]*\n)+?)(\n*^\/\*[\}]{3}\*\/$\n?)/mg,
	element: "pre",
	handler: config.formatterHelpers.enclosedTextHelper
},

{
	name: "monospacedByLineForPlugin",
	match: "^//\\{\\{\\{\\n",
	lookaheadRegExp: /^\/\/\{\{\{\n\n*((?:^[^\n]*\n)+?)(\n*^\/\/\}\}\}$\n?)/mg,
	element: "pre",
	handler: config.formatterHelpers.enclosedTextHelper
},

{
	name: "monospacedByLineForTemplate",
	match: "^<!--[\\{]{3}-->\\n",
	lookaheadRegExp: /<!--[\{]{3}-->\n*((?:^[^\n]*\n)+?)(\n*^<!--[\}]{3}-->$\n?)/mg, 
	element: "pre",
	handler: config.formatterHelpers.enclosedTextHelper
},

{
	name: "wikifyCommentForPlugin", 
	match: "^/\\*\\*\\*\\n",
	termRegExp: /(^\*\*\*\/\n)/mg,
	handler: function(w)
	{
		w.subWikifyTerm(w.output,this.termRegExp);
	}
},

{
	name: "wikifyCommentForTemplate", 
	match: "^<!---\\n",
	termRegExp: /(^--->\n)/mg,
	handler: function(w) 
	{
		w.subWikifyTerm(w.output,this.termRegExp);
	}
},

{
	name: "macro",
	match: "<<",
	lookaheadRegExp: /<<([^>\s]+)(?:\s*)((?:[^>]|(?:>(?!>)))*)>>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart && lookaheadMatch[1])
			{
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			invokeMacro(w.output,lookaheadMatch[1],lookaheadMatch[2],w,w.tiddler);
			}
	}
},

{
	name: "prettyLink",
	match: "\\[\\[",
	lookaheadRegExp: /\[\[(.*?)(?:\|(~)?(.*?))?\]\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			{
			var e;
			var text = lookaheadMatch[1];
			if(lookaheadMatch[3])
				{
				// Pretty bracketted link
				var link = lookaheadMatch[3];
				e = (!lookaheadMatch[2] && config.formatterHelpers.isExternalLink(link))
						? createExternalLink(w.output,link)
						: createTiddlyLink(w.output,link,false,null,w.isStatic);
				}
			else
				{
				// Simple bracketted link
				e = createTiddlyLink(w.output,text,false,null,w.isStatic);
				}
			createTiddlyText(e,text);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
	}
},

{
	name: "unWikiLink",
	match: config.textPrimitives.unWikiLink+config.textPrimitives.wikiLink,
	handler: function(w)
	{
		w.outputText(w.output,w.matchStart+1,w.nextMatch);
	}
},

{
	name: "wikiLink",
	match: config.textPrimitives.wikiLink,
	handler: function(w)
	{
		if(w.matchStart > 0)
			{
			var preRegExp = new RegExp(config.textPrimitives.anyLetterStrict,"mg");
			preRegExp.lastIndex = w.matchStart-1;
			var preMatch = preRegExp.exec(w.source);
			if(preMatch.index == w.matchStart-1)
				{
				w.outputText(w.output,w.matchStart,w.nextMatch);
				return;
				}
			}
		if(w.autoLinkWikiWords == true || store.isShadowTiddler(w.matchText))
			{
			var link = createTiddlyLink(w.output,w.matchText,false,null,w.isStatic);
			w.outputText(link,w.matchStart,w.nextMatch);
			}
		else
			{
			w.outputText(w.output,w.matchStart,w.nextMatch);
			}
	}
},

{
	name: "urlLink",
	match: config.textPrimitives.urlPattern,
	handler: function(w)
	{
		w.outputText(createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch);
	}
},

{
	name: "image",
	match: "\\[[<>]?[Ii][Mm][Gg]\\[",
	lookaheadRegExp: /\[(<?)(>?)[Ii][Mm][Gg]\[(?:([^\|\]]+)\|)?([^\[\]\|]+)\](?:\[([^\]]*)\])?\]/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart) // Simple bracketted link
			{
			var e = w.output;
			if(lookaheadMatch[5])
				{
				var link = lookaheadMatch[5];
				e = config.formatterHelpers.isExternalLink(link) ? createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic);
				addClass(e,"imageLink");
				}
			var img = createTiddlyElement(e,"img");
			if(lookaheadMatch[1])
				img.align = "left";
			else if(lookaheadMatch[2])
				img.align = "right";
			if(lookaheadMatch[3])
				img.title = lookaheadMatch[3];
			img.src = lookaheadMatch[4];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
	}
},

{
	name: "html",
	match: "<[Hh][Tt][Mm][Ll]>",
	lookaheadRegExp: /<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source)
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			{
			createTiddlyElement(w.output,"span").innerHTML = lookaheadMatch[1];
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
	}
},

{
	name: "commentByBlock",
	match: "/%",
	lookaheadRegExp: /\/%((?:.|\n)*?)%\//mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source)
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			w.nextMatch = this.lookaheadRegExp.lastIndex;
	}
},

{
	name: "boldByChar",
	match: "''",
	termRegExp: /('')/mg,
	element: "strong",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "italicByChar",
	match: "//",
	termRegExp: /(\/\/)/mg,
	element: "em",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "underlineByChar",
	match: "__",
	termRegExp: /(__)/mg,
	element: "u",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "strikeByChar",
	match: "--(?!\\s|$)",
	termRegExp: /((?!\s)--|(?=\n\n))/mg,
	element: "strike",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "superscriptByChar",
	match: "\\^\\^",
	termRegExp: /(\^\^)/mg,
	element: "sup",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "subscriptByChar",
	match: "~~",
	termRegExp: /(~~)/mg,
	element: "sub",
	handler: config.formatterHelpers.createElementAndWikify
},

{
	name: "monospacedByChar",
	match: "\\{\\{\\{",
	lookaheadRegExp: /\{\{\{((?:.|\n)*?)\}\}\}/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source)
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			{
			createTiddlyElement(w.output,"code",null,null,lookaheadMatch[1]);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
	}
},

{
	name: "styleByChar",
	match: "@@",
	termRegExp: /(@@)/mg,
	handler:  function(w)
	{
		var e = createTiddlyElement(w.output,"span");
		var styles = config.formatterHelpers.inlineCssHelper(w);
		if(styles.length == 0)
			e.className = "marked";
		else
			config.formatterHelpers.applyCssHelper(e,styles);
		w.subWikifyTerm(e,this.termRegExp);
	}
},

{
	name: "lineBreak",
	match: "\\n|<br ?/?>",
	handler: function(w)
	{
		createTiddlyElement(w.output,"br");
	}
},

{
	name: "rawText",
	match: "\\\"{3}|<nowiki>",
	lookaheadRegExp: /(?:\"{3}|<nowiki>)((?:.|\n)*?)(?:\"{3}|<\/nowiki>)/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source)
		if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
			{
			createTiddlyElement(w.output,"span",null,null,lookaheadMatch[1]);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			}
	}
},

{
	name: "mdash",
	match: "--",
	handler: function(w)
		{
		createTiddlyElement(w.output,"span").innerHTML = "&mdash;";
		}
},

{
	name: "htmlEntitiesEncoding",
	match: "(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",
	handler: function(w)
		{
		createTiddlyElement(w.output,"span").innerHTML = w.matchText;
		}
},

{
	name: "customClasses",
	match: "\\{\\{",
	termRegExp: /(\}\}\})/mg,
	lookaheadRegExp: /\{\{[\s]*([\w]+[\s\w]*)[\s]*\{(\n?)/mg,
	handler: function(w)
	{
		this.lookaheadRegExp.lastIndex = w.matchStart;
		var lookaheadMatch = this.lookaheadRegExp.exec(w.source);
		if(lookaheadMatch)
			{
			var e = createTiddlyElement(w.output,lookaheadMatch[2] == "\n" ? "div" : "span",null,lookaheadMatch[1]);
			w.nextMatch = this.lookaheadRegExp.lastIndex;
			w.subWikifyTerm(e,this.termRegExp);
			}
	}
}

];

// ---------------------------------------------------------------------------------
// Wikifier
// ---------------------------------------------------------------------------------

function getParser(tiddler)
{
	var f = formatter;
	if(tiddler!=null)
		{
		for(var i in config.parsers)
			{
			if(tiddler.isTagged(config.parsers[i].formatTag))
				{
				f = config.parsers[i];
				break;
				}
			}
		}
	return f;
}

function wikify(source,output,highlightRegExp,tiddler)
{
	if(source && source != "")
		{
		var wikifier = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);
		wikifier.subWikifyUnterm(output);
		}
}

function wikifyStatic(source,highlightRegExp,tiddler)
{
	var e = createTiddlyElement(document.body,"div");
	e.style.display = "none";
	var html = "";
	if(source && source != "")
		{
		var wikifier = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);
		wikifier.isStatic = true;
		wikifier.subWikifyUnterm(e);
		html = e.innerHTML;
		e.parentNode.removeChild(e);
		}
	return html;
}

// Wikify a named tiddler to plain text
function wikifyPlain(title)
{
	if(store.tiddlerExists(title) || store.isShadowTiddler(title))
		{
		var wikifier = new Wikifier(store.getTiddlerText(title),formatter,null,store.getTiddler(title));
		return wikifier.wikifyPlain();
		}
	else
		return "";
}

// Highlight plain text into an element
function highlightify(source,output,highlightRegExp)
{
	if(source && source != "")
		{
		var wikifier = new Wikifier(source,formatter,highlightRegExp);
		wikifier.outputText(output,0,source.length);
		}
}

// Construct a wikifier object
// source - source string that's going to be wikified
// formatter - Formatter() object containing the list of formatters to be used
// highlightRegExp - regular expression of the text string to highlight
// tiddler - reference to the tiddler that's taken to be the container for this wikification
function Wikifier(source,formatter,highlightRegExp,tiddler)
{
	this.source = source;
	this.output = null;
	this.formatter = formatter;
	this.nextMatch = 0;
	this.autoLinkWikiWords = tiddler && tiddler.autoLinkWikiWords() == false ? false : true;
	this.highlightRegExp = highlightRegExp;
	this.highlightMatch = null;
	this.isStatic = false;
	if(highlightRegExp)
		{
		highlightRegExp.lastIndex = 0;
		this.highlightMatch = highlightRegExp.exec(source);
		}
	this.tiddler = tiddler;
}

Wikifier.prototype.wikifyPlain = function()
{
	var e = createTiddlyElement(document.body,"div");
	e.style.display = "none";
	this.subWikify(e);
	var text = getPlainText(e);
	e.parentNode.removeChild(e);
	return text;
}

Wikifier.prototype.subWikify = function(output,terminator)
{
	// Handle the terminated and unterminated cases separately
	if (terminator)
		this.subWikifyTerm(output,new RegExp("(" + terminator + ")","mg"));
	else
		this.subWikifyUnterm(output);
}

Wikifier.prototype.subWikifyUnterm = function(output)
{
	// subWikify() can be indirectly recursive, so we need to save the old output pointer
	var oldOutput = this.output;
	this.output = output;
	// Get the first match
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(this.source);
	while(formatterMatch)
		{
		// Output any text before the match
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		// Set the match parameters for the handler
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		// Figure out which formatter matched and call its handler
		for(var t=1; t<formatterMatch.length; t++)
			{
			if(formatterMatch[t])
				{
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
				}
			}
		// Get the next match
		formatterMatch = this.formatter.formatterRegExp.exec(this.source);
		}
	// Output any text after the last match
	if(this.nextMatch < this.source.length)
		{
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
		}
	// Restore the output pointer
	this.output = oldOutput;
}

Wikifier.prototype.subWikifyTerm = function(output,terminatorRegExp)
{
	// subWikify() can be indirectly recursive, so we need to save the old output pointer
	var oldOutput = this.output;
	this.output = output;
	// Get the first matches for the formatter and terminator RegExps
	terminatorRegExp.lastIndex = this.nextMatch;
	var terminatorMatch = terminatorRegExp.exec(this.source);
	this.formatter.formatterRegExp.lastIndex = this.nextMatch;
	var formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
	while(terminatorMatch || formatterMatch)
		{
		// Check for a terminator match  before the next formatter match
		if(terminatorMatch && (!formatterMatch || terminatorMatch.index <= formatterMatch.index))
			{
			// Output any text before the match
			if(terminatorMatch.index > this.nextMatch)
				this.outputText(this.output,this.nextMatch,terminatorMatch.index);
			// Set the match parameters
			this.matchText = terminatorMatch[1];
			this.matchLength = terminatorMatch[1].length;
			this.matchStart = terminatorMatch.index;
			this.nextMatch = this.matchStart + this.matchLength;
			// Restore the output pointer
			this.output = oldOutput;
			return;
			}
		// It must be a formatter match; output any text before the match
		if(formatterMatch.index > this.nextMatch)
			this.outputText(this.output,this.nextMatch,formatterMatch.index);
		// Set the match parameters
		this.matchStart = formatterMatch.index;
		this.matchLength = formatterMatch[0].length;
		this.matchText = formatterMatch[0];
		this.nextMatch = this.formatter.formatterRegExp.lastIndex;
		// Figure out which formatter matched and call its handler
		for(var t=1; t<formatterMatch.length; t++)
			{
			if(formatterMatch[t])
				{
				this.formatter.formatters[t-1].handler(this);
				this.formatter.formatterRegExp.lastIndex = this.nextMatch;
				break;
				}
			}
		// Get the next match
		terminatorRegExp.lastIndex = this.nextMatch;
		terminatorMatch = terminatorRegExp.exec(this.source);
		formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);
		}
	// Output any text after the last match
	if(this.nextMatch < this.source.length)
		{
		this.outputText(this.output,this.nextMatch,this.source.length);
		this.nextMatch = this.source.length;
		}
	// Restore the output pointer
	this.output = oldOutput;
}

Wikifier.prototype.outputText = function(place,startPos,endPos)
{
	// Check for highlights
	while(this.highlightMatch && (this.highlightRegExp.lastIndex > startPos) && (this.highlightMatch.index < endPos) && (startPos < endPos))
		{
		// Deal with any plain text before the highlight
		if(this.highlightMatch.index > startPos)
			{
			createTiddlyText(place,this.source.substring(startPos,this.highlightMatch.index));
			startPos = this.highlightMatch.index;
			}
		// Deal with the highlight
		var highlightEnd = Math.min(this.highlightRegExp.lastIndex,endPos);
		var theHighlight = createTiddlyElement(place,"span",null,"highlight",this.source.substring(startPos,highlightEnd));
		startPos = highlightEnd;
		// Nudge along to the next highlight if we're done with this one
		if(startPos >= this.highlightRegExp.lastIndex)
			this.highlightMatch = this.highlightRegExp.exec(this.source);
		}
	// Do the unhighlighted text left over
	if(startPos < endPos)
		{
		createTiddlyText(place,this.source.substring(startPos,endPos));
		}
}

// ---------------------------------------------------------------------------------
// Macro definitions
// ---------------------------------------------------------------------------------

config.macros.today.handler = function(place,macroName,params)
{
	var now = new Date();
	var text;
	if(params[0])
		text = now.formatString(params[0].trim());
	else
		text = now.toLocaleString();
	createTiddlyElement(place,"span",null,null,text);
}

config.macros.version.handler = function(place)
{
	createTiddlyElement(place,"span",null,null,version.major + "." + version.minor + "." + version.revision + (version.beta ? " (beta " + version.beta + ")" : ""));
}

config.macros.list.handler = function(place,macroName,params)
{
	var type = params[0] ? params[0] : "all";
	var theList = document.createElement("ul");
	place.appendChild(theList);
	if(this[type].prompt)
		createTiddlyElement(theList,"li",null,"listTitle",this[type].prompt);
	var results;
	if(this[type].handler)
		results = this[type].handler(params);
	for(var t = 0; t < results.length; t++)
		{
		var theListItem = document.createElement("li")
		theList.appendChild(theListItem);
		if(typeof results[t] == "string")
			createTiddlyLink(theListItem,results[t],true);
		else
			createTiddlyLink(theListItem,results[t].title,true);
		}
}

config.macros.list.all.handler = function(params)
{
	return store.reverseLookup("tags","excludeLists",false,"title");
}

config.macros.list.missing.handler = function(params)
{
	return store.getMissingLinks();
}

config.macros.list.orphans.handler = function(params)
{
	return store.getOrphans();
}

config.macros.list.shadowed.handler = function(params)
{
	return store.getShadowed();
}

config.macros.allTags.handler = function(place,macroName,params)
{
	var tags = store.getTags();
	var theDateList = createTiddlyElement(place,"ul");
	if(tags.length == 0)
		createTiddlyElement(theDateList,"li",null,"listTitle",this.noTags);
	for(var t=0; t<tags.length; t++)
		{
		var theListItem =createTiddlyElement(theDateList,"li");
		var theTag = createTiddlyButton(theListItem,tags[t][0] + " (" + tags[t][1] + ")",this.tooltip.format([tags[t][0]]),onClickTag);
		theTag.setAttribute("tag",tags[t][0]);
		}
}

config.macros.timeline.handler = function(place,macroName,params)
{
	var field = params[0] ? params[0] : "modified";
	var tiddlers = store.reverseLookup("tags","excludeLists",false,field);
	var lastDay = "";
	var last = params[1] ? tiddlers.length-Math.min(tiddlers.length,parseInt(params[1])) : 0;
	for(var t=tiddlers.length-1; t>=last; t--)
		{
		var tiddler = tiddlers[t];
		var theDay = tiddler[field].convertToLocalYYYYMMDDHHMM().substr(0,8);
		if(theDay != lastDay)
			{
			var theDateList = document.createElement("ul");
			place.appendChild(theDateList);
			createTiddlyElement(theDateList,"li",null,"listTitle",tiddler[field].formatString(this.dateFormat));
			lastDay = theDay;
			}
		var theDateListItem = createTiddlyElement(theDateList,"li",null,"listLink");
		theDateListItem.appendChild(createTiddlyLink(place,tiddler.title,true));
		}
}

config.macros.search.handler = function(place,macroName,params)
{
	var searchTimeout = null;
	var btn = createTiddlyButton(place,this.label,this.prompt,this.onClick);
	var txt = createTiddlyElement(place,"input",null,"txtOptionInput");
	if(params[0])
		txt.value = params[0];
	txt.onkeyup = this.onKeyPress;
	txt.onfocus = this.onFocus;
	txt.setAttribute("size",this.sizeTextbox);
	txt.setAttribute("accessKey",this.accessKey);
	txt.setAttribute("autocomplete","off");
	txt.setAttribute("lastSearchText","");
	if(config.browser.isSafari)
		{
		txt.setAttribute("type","search");
		txt.setAttribute("results","5");
		}
	else
		txt.setAttribute("type","text");
}

// Global because there's only ever one outstanding incremental search timer
config.macros.search.timeout = null;

config.macros.search.doSearch = function(txt)
{
	if(txt.value.length > 0)
		{
		story.search(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch);
		txt.setAttribute("lastSearchText",txt.value);
		}
}

config.macros.search.onClick = function(e)
{
	config.macros.search.doSearch(this.nextSibling);
	return false;
}

config.macros.search.onKeyPress = function(e)
{
	if(!e) var e = window.event;
	switch(e.keyCode)
		{
		case 13: // Ctrl-Enter
		case 10: // Ctrl-Enter on IE PC
			config.macros.search.doSearch(this);
			break;
		case 27: // Escape
			this.value = "";
			clearMessage();
			break;
		}
	if(this.value.length > 2)
		{
		if(this.value != this.getAttribute("lastSearchText"))
			{
			if(config.macros.search.timeout)
				clearTimeout(config.macros.search.timeout);
			var txt = this;
			config.macros.search.timeout = setTimeout(function() {config.macros.search.doSearch(txt);},500);
			}
		}
	else
		{
		if(config.macros.search.timeout)
			clearTimeout(config.macros.search.timeout);
		}
}

config.macros.search.onFocus = function(e)
{
	this.select();
}

config.macros.tiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("name",null,true,false,true);
	var names = params[0]["name"];
	var tiddlerName = names[0];
	var className = names[1] ? names[1] : null;
	var args = params[0]["with"];
	var wrapper = createTiddlyElement(place,"span",null,className);
	if(!args)
		{
		wrapper.setAttribute("refresh","content");
		wrapper.setAttribute("tiddler",tiddlerName);
		}
	var text = store.getTiddlerText(tiddlerName);
	if(text)
		{
		var stack = config.macros.tiddler.tiddlerStack;
		if(stack.indexOf(tiddlerName) !== -1)
			return;
		stack.push(tiddlerName);
		try
			{
			var n = args ? Math.min(args.length,9) : 0;
			for(var i=0; i<n; i++) 
				{
				var placeholderRE = new RegExp("\\$" + (i + 1),"mg");
				text = text.replace(placeholderRE,args[i]);
				}
			config.macros.tiddler.renderText(wrapper,text,tiddlerName,params);
			}
		finally
			{
			stack.pop();
			}
		}
}

config.macros.tiddler.renderText = function(place,text,tiddlerName,params) 
{
	wikify(text,place,null,store.getTiddler(tiddlerName));
}

config.macros.tiddler.tiddlerStack = [];

config.macros.tag.handler = function(place,macroName,params)
{
	createTagButton(place,params[0]);
}

config.macros.tags.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var theList = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title && store.tiddlerExists(title))
		tiddler = store.getTiddler(title);
	var sep = getParam(params,"sep"," ");
	var lingo = config.views.wikified.tag;
	var prompt = tiddler.tags.length == 0 ? lingo.labelNoTags : lingo.labelTags;
	createTiddlyElement(theList,"li",null,"listTitle",prompt.format([tiddler.title]));
	for(var t=0; t<tiddler.tags.length; t++)
		{
		createTagButton(createTiddlyElement(theList,"li"),tiddler.tags[t],tiddler.title);
		if(t<tiddler.tags.length-1)
			createTiddlyText(theList,sep);
		}
}

config.macros.tagging.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	params = paramString.parseParams("anon",null,true,false,false);
	var theList = createTiddlyElement(place,"ul");
	var title = getParam(params,"anon","");
	if(title == "" && tiddler instanceof Tiddler)
		title = tiddler.title;
	var sep = getParam(params,"sep"," ");
	theList.setAttribute("title",this.tooltip.format([title]));
	var tagged = store.getTaggedTiddlers(title);
	var prompt = tagged.length == 0 ? this.labelNotTag : this.label;
	createTiddlyElement(theList,"li",null,"listTitle",prompt.format([title,tagged.length]));
	for(var t=0; t<tagged.length; t++)
		{
		createTiddlyLink(createTiddlyElement(theList,"li"),tagged[t].title,true);
		if(t<tagged.length-1)
			createTiddlyText(theList,sep);
		}
}

config.macros.closeAll.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
}

config.macros.closeAll.onClick = function(e)
{
	story.closeAllTiddlers();
	return false;
}

config.macros.permaview.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
}

config.macros.permaview.onClick = function(e)
{
	story.permaView();
	return false;
}

config.macros.saveChanges.handler = function(place)
{
	if(!readOnly)
		createTiddlyButton(place,this.label,this.prompt,this.onClick,null,null,this.accessKey);
}

config.macros.saveChanges.onClick = function(e)
{
	saveChanges();
	return false;
}

config.macros.slider.onClickSlider = function(e)
{
	if(!e) var e = window.event;
	var n = this.nextSibling;
	var cookie = n.getAttribute("cookie");
	var isOpen = n.style.display != "none";
	if(anim && config.options.chkAnimate)
		anim.startAnimating(new Slider(n,!isOpen,e.shiftKey || e.altKey,"none"));
	else
		n.style.display = isOpen ? "none" : "block";
	config.options[cookie] = !isOpen;
	saveOptionCookie(cookie);
	return false;
}

config.macros.slider.createSlider = function(place,cookie,title,tooltip)
{
	var cookie = cookie ? cookie : "";
	var btn = createTiddlyButton(place,title,tooltip,this.onClickSlider);
	var panel = createTiddlyElement(null,"div",null,"sliderPanel");
	panel.setAttribute("cookie",cookie);
	panel.style.display = config.options[cookie] ? "block" : "none";
	place.appendChild(panel);
	return panel;
}

config.macros.slider.handler = function(place,macroName,params)
{
	var panel = this.createSlider(place,params[0],params[2],params[3]);
	var text = store.getTiddlerText(params[1]);
	panel.setAttribute("refresh", "content");
	panel.setAttribute("tiddler", params[1]);
	if(text)
		wikify(text,panel,null,store.getTiddler(params[1]));
}

config.macros.option.onChangeOption = function(e)
{
	var opt = this.getAttribute("option");
	var elementType,valueField;
	if(opt)
		{
		switch(opt.substr(0,3))
			{
			case "txt":
				elementType = "input";
				valueField = "value";
				break;
			case "chk":
				elementType = "input";
				valueField = "checked";
				break;
			}
		config.options[opt] = this[valueField];
		saveOptionCookie(opt);
		var nodes = document.getElementsByTagName(elementType);
		for(var t=0; t<nodes.length; t++)
			{
			var optNode = nodes[t].getAttribute("option");
			if(opt == optNode)
				nodes[t][valueField] = this[valueField];
			}
		}
	return(true);
}

config.macros.option.handler = function(place,macroName,params)
{
	var opt = params[0];
	if(config.options[opt] == undefined)
		return;
	var c;
	switch(opt.substr(0,3))
		{
		case "txt":
			c = document.createElement("input");
			c.onkeyup = this.onChangeOption;
			c.setAttribute("option",opt);
			c.className = "txtOptionInput";
			place.appendChild(c);
			c.value = config.options[opt];
			break;
		case "chk":
			c = document.createElement("input");
			c.setAttribute("type","checkbox");
			c.onclick = this.onChangeOption;
			c.setAttribute("option",opt);
			c.className = "chkOptionInput";
			place.appendChild(c);
			c.checked = config.options[opt];
			break;
		}
}



config.macros.newTiddler.createNewTiddlerButton = function(place,title,params,label,prompt,accessKey,newFocus,isJournal)
{
	var tags = [];
	for(var t=1; t<params.length; t++)
		if((params[t].name == "anon" && t != 1) || (params[t].name == "tag"))
			tags.push(params[t].value);
	label = getParam(params,"label",label);
	prompt = getParam(params,"prompt",prompt);
	accessKey = getParam(params,"accessKey",accessKey);
	newFocus = getParam(params,"focus",newFocus);
	var btn = createTiddlyButton(place,label,prompt,this.onClickNewTiddler,null,null,accessKey);
	btn.setAttribute("newTitle",title);
	btn.setAttribute("isJournal",isJournal);
	btn.setAttribute("params",tags.join("|"));
	btn.setAttribute("newFocus",newFocus);
	btn.setAttribute("newTemplate",getParam(params,"template",DEFAULT_EDIT_TEMPLATE));
	var text = getParam(params,"text");
	if(text !== undefined) 
		btn.setAttribute("newText",text);
	return btn;
}

config.macros.newTiddler.onClickNewTiddler = function()
{
	var title = this.getAttribute("newTitle");
	if(this.getAttribute("isJournal"))
		{
		var now = new Date();
		title = now.formatString(title.trim());
		}
	var params = this.getAttribute("params").split("|");
	var focus = this.getAttribute("newFocus");
	var template = this.getAttribute("newTemplate");
	story.displayTiddler(null,title,template);
	var text = this.getAttribute("newText");
	if(typeof text == "string")
		story.getTiddlerField(title,"text").value = text.format([title]);
	for(var t=0;t<params.length;t++)
		story.setTiddlerTag(title,params[t],+1);
	story.focusTiddler(title,focus);
	return false;
}

config.macros.newTiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(!readOnly)
		{
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : this.title;
		title = getParam(params,"title",title);
		this.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"title",false);
		}
}

config.macros.newJournal.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(!readOnly)
		{
		params = paramString.parseParams("anon",null,true,false,false);
		var title = params[1] && params[1].name == "anon" ? params[1].value : "";
		title = getParam(params,"title",title);
		config.macros.newTiddler.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,"text",true);
		}
}

config.macros.sparkline.handler = function(place,macroName,params)
{
	var data = [];
	var min = 0;
	var max = 0;
	for(var t=0; t<params.length; t++)
		{
		var v = parseInt(params[t]);
		if(v < min)
			min = v;
		if(v > max)
			max = v;
		data.push(v);
		}
	if(data.length < 1)
		return;
	var box = createTiddlyElement(place,"span",null,"sparkline",String.fromCharCode(160));
	box.title = data.join(",");
	var w = box.offsetWidth;
	var h = box.offsetHeight;
	box.style.paddingRight = (data.length * 2 - w) + "px";
	box.style.position = "relative";
	for(var d=0; d<data.length; d++)
		{
		var tick = document.createElement("img");
		tick.border = 0;
		tick.className = "sparktick";
		tick.style.position = "absolute";
		tick.src = "data:image/gif,GIF89a%01%00%01%00%91%FF%00%FF%FF%FF%00%00%00%C0%C0%C0%00%00%00!%F9%04%01%00%00%02%00%2C%00%00%00%00%01%00%01%00%40%02%02T%01%00%3B";
		tick.style.left = d*2 + "px";
		tick.style.width = "2px";
		var v = Math.floor(((data[d] - min)/(max-min)) * h);
		tick.style.top = (h-v) + "px";
		tick.style.height = v + "px";
		box.appendChild(tick);
		}
}

config.macros.tabs.handler = function(place,macroName,params)
{
	var cookie = params[0];
	var numTabs = (params.length-1)/3;
	var wrapper = createTiddlyElement(null,"div",null,cookie);
	var tabset = createTiddlyElement(wrapper,"div",null,"tabset");
	tabset.setAttribute("cookie",cookie);
	var validTab = false;
	for(var t=0; t<numTabs; t++)
		{
		var label = params[t*3+1];
		var prompt = params[t*3+2];
		var content = params[t*3+3];
		var tab = createTiddlyButton(tabset,label,prompt,this.onClickTab,"tab tabUnselected");
		tab.setAttribute("tab",label);
		tab.setAttribute("content",content);
		tab.title = prompt;
		if(config.options[cookie] == label)
			validTab = true;
		}
	if(!validTab)
		config.options[cookie] = params[1];
	place.appendChild(wrapper);
	this.switchTab(tabset,config.options[cookie]);
}

config.macros.tabs.onClickTab = function(e)
{
	config.macros.tabs.switchTab(this.parentNode,this.getAttribute("tab"));
	return false;
}

config.macros.tabs.switchTab = function(tabset,tab)
{
	var cookie = tabset.getAttribute("cookie");
	var theTab = null
	var nodes = tabset.childNodes;
	for(var t=0; t<nodes.length; t++)
		if(nodes[t].getAttribute && nodes[t].getAttribute("tab") == tab)
			{
			theTab = nodes[t];
			theTab.className = "tab tabSelected";
			}
		else
			nodes[t].className = "tab tabUnselected"
	if(theTab)
		{
		if(tabset.nextSibling && tabset.nextSibling.className == "tabContents")
			tabset.parentNode.removeChild(tabset.nextSibling);
		var tabContent = createTiddlyElement(null,"div",null,"tabContents");
		tabset.parentNode.insertBefore(tabContent,tabset.nextSibling);
		var contentTitle = theTab.getAttribute("content");
		wikify(store.getTiddlerText(contentTitle),tabContent,null,store.getTiddler(contentTitle));
		if(cookie)
			{
			config.options[cookie] = tab;
			saveOptionCookie(cookie);
			}
		}
}

// <<gradient [[tiddler name]] vert|horiz rgb rgb rgb rgb... >>
config.macros.gradient.handler = function(place,macroName,params,wikifier)
{
	var terminator = ">>";
	var panel;
	if(wikifier)
		panel = createTiddlyElement(place,"div",null,"gradient");
	else
		panel = place;
	panel.style.position = "relative";
	panel.style.overflow = "hidden";
	panel.style.zIndex = "0";
	var t;
	if(wikifier)
		{
		var styles = config.formatterHelpers.inlineCssHelper(wikifier);
		config.formatterHelpers.applyCssHelper(panel,styles);
		}
	var colours = [];
	for(t=1; t<params.length; t++)
		{
		var c = new RGB(params[t]);
		if(c)
			colours.push(c);
		}
	drawGradient(panel,params[0] != "vert",colours);
	if(wikifier)
		wikifier.subWikify(panel,terminator);
	if(document.all)
		{
		panel.style.height = "100%";
		panel.style.width = "100%";
		}
}

config.macros.message.handler = function(place,macroName,params)
{
	if(params[0])
		{
		var m = config;
		var p = params[0].split(".");
		for(var t=0; t<p.length; t++)
			{
			if(p[t] in m)
				m = m[p[t]];
			else
				break;
			}
		createTiddlyText(place,m.toString().format(params.splice(1)));
		}
}

config.macros.view.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if((tiddler instanceof Tiddler) && params[0])
		{
		var value = store.getValue(tiddler,params[0]);
		if(value != undefined)
			switch(params[1])
				{
				case undefined:
					highlightify(value,place,highlightHack);
					break;
				case "link":
					createTiddlyLink(place,value,true);
					break;
				case "wikified":
					wikify(value,place,highlightHack,tiddler);
					break;
				case "date":
					value = Date.convertFromYYYYMMDDHHMM(value);
					if(params[2])
						createTiddlyText(place,value.formatString(params[2]));
					else
						createTiddlyText(place,value);
					break;
				}
		}
}

config.macros.edit.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var field = params[0];
	if((tiddler instanceof Tiddler) && field)
		{
		story.setDirty(tiddler.title,true);
		if(field != "text")
			{
				var e = createTiddlyElement(null,"input");
				if(tiddler.isReadOnly())
					e.setAttribute("readOnly","readOnly");
				e.setAttribute("edit",field);
				e.setAttribute("type","text");
				var v = store.getValue(tiddler,field);
				if(!v) 
					v = "";
				e.value = v;
				e.setAttribute("size","40");
				e.setAttribute("autocomplete","off");
				place.appendChild(e);
			}
		else
			{
				var wrapper1 = createTiddlyElement(null,"fieldset",null,"fieldsetFix");
				var wrapper2 = createTiddlyElement(wrapper1,"div");
				var e = createTiddlyElement(wrapper2,"textarea");
				if(tiddler.isReadOnly())
					e.setAttribute("readOnly","readOnly");
				var v = store.getValue(tiddler,field);
				if(!v) 
					v = "";
				e.value = v;
				var rows = 10;
				var lines = v.match(/\n/mg);
				var maxLines = Math.max(parseInt(config.options.txtMaxEditRows),5);
				if(lines != null && lines.length > rows)
					rows = lines.length + 5;
				rows = Math.min(rows,maxLines);
				e.setAttribute("rows",rows);
				e.setAttribute("edit",field);
				place.appendChild(wrapper1);
			}
		}
}

config.macros.tagChooser.onClick = function(e)
{
	if(!e) var e = window.event;
	var lingo = config.views.editor.tagChooser;
	var popup = Popup.create(this);
	var tags = store.getTags();
	if(tags.length == 0)
		createTiddlyText(createTiddlyElement(popup,"li"),lingo.popupNone);
	for(var t=0; t<tags.length; t++)
		{
		var theTag = createTiddlyButton(createTiddlyElement(popup,"li"),tags[t][0],lingo.tagTooltip.format([tags[t][0]]),config.macros.tagChooser.onTagClick);
		theTag.setAttribute("tag",tags[t][0]);
		theTag.setAttribute("tiddler", this.getAttribute("tiddler"));
		}
	Popup.show(popup,false);
	e.cancelBubble = true;
	if(e.stopPropagation) e.stopPropagation();
	return(false);
}

config.macros.tagChooser.onTagClick = function(e)
{
	if(!e) var e = window.event;
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(!readOnly)
		story.setTiddlerTag(title,tag,0);
	return(false);
}

config.macros.tagChooser.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(tiddler instanceof Tiddler)
		{
		var title = tiddler.title;
		var lingo = config.views.editor.tagChooser;
		var btn = createTiddlyButton(place,lingo.text,lingo.tooltip,this.onClick);
		btn.setAttribute("tiddler", title);
		}
}

// Create a toolbar command button
// place - parent DOM element
// command - reference to config.commands[] member -or- name of member
// tiddler - reference to tiddler that toolbar applies to
// theClass - the class to give the button
config.macros.toolbar.createCommand = function(place,commandName,tiddler,theClass)
{
	if(typeof commandName != "string")
		{
		var c = null;
		for(var t in config.commands)
			if(config.commands[t] == commandName)
				c = t;
		commandName = c;
		}
	if((tiddler instanceof Tiddler) && (typeof commandName == "string"))
		{
		var title = tiddler.title;
		var command = config.commands[commandName];
		var ro = tiddler.isReadOnly();
		var shadow = store.isShadowTiddler(title) && !store.tiddlerExists(title);
		var text = ro && command.readOnlyText ? command.readOnlyText : command.text;
		var tooltip = ro && command.readOnlyTooltip ? command.readOnlyTooltip : command.tooltip;
		if((!ro || (ro && !command.hideReadOnly)) && !(shadow && command.hideShadow))

			{
			var btn = createTiddlyButton(null,text,tooltip,this.onClickCommand);
			btn.setAttribute("commandName", commandName);
			btn.setAttribute("tiddler", title);
			if(theClass)
				addClass(btn,theClass);
			place.appendChild(btn);
			}
		}
}

config.macros.toolbar.onClickCommand = function(e)
{
	if(!e) var e = window.event;
	var command = config.commands[this.getAttribute("commandName")];
	return command.handler(e,this,this.getAttribute("tiddler"));
}

// Invoke the first command encountered from a given place that is tagged with a specified class
config.macros.toolbar.invokeCommand = function(place,theClass,event)
{
	var children = place.getElementsByTagName("a")
	for(var t=0; t<children.length; t++)
		{
		var c = children[t];
		if(hasClass(c,theClass) && c.getAttribute && c.getAttribute("commandName"))
			{
			if(c.onclick instanceof Function)
				c.onclick.call(c,event);
			break;
			}
		}
}

config.macros.toolbar.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	for(var t=0; t<params.length; t++)
		{
		var c = params[t];
		var theClass = "";
		switch(c.substr(0,1))
			{
			case "+":
				theClass = "defaultCommand";
				c = c.substr(1);
				break;
			case "-":
				theClass = "cancelCommand";
				c = c.substr(1);
				break;
			}
		if(c in config.commands)
			this.createCommand(place,c,tiddler,theClass);
		}
}

config.macros.plugins.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	var e = createTiddlyElement(place,"div");
	e.setAttribute("refresh","macro");
	e.setAttribute("macroName","plugins");
	e.setAttribute("params",paramString);
	this.refresh(e,paramString);
}

config.macros.plugins.refresh = function(place,params)
{
	var selectedRows = [];
	ListView.forEachSelector(place,function(e,rowName) {
			if(e.checked)
				selectedRows.push(e.getAttribute("rowName"));
		});
	removeChildren(place);
	params = params.parseParams("anon");
	var plugins = installedPlugins.slice(0);
	var t,tiddler,p;
	var configTiddlers = store.getTaggedTiddlers("systemConfig");
	for(t=0; t<configTiddlers.length; t++)
		{
		tiddler = configTiddlers[t];
		if(plugins.findByField("title",tiddler.title) == null)
			{
			p = getPluginInfo(tiddler);
			p.executed = false;
			p.log.splice(0,0,this.skippedText);
			plugins.push(p);
			}
		}
	for(t=0; t<plugins.length; t++)
		{
		var p = plugins[t];
		p.forced = p.tiddler.isTagged("systemConfigForce");
		p.disabled = p.tiddler.isTagged("systemConfigDisable");
		p.Selected = selectedRows.indexOf(plugins[t].title) != -1;
		}
	if(plugins.length == 0)
		createTiddlyElement(place,"em",null,null,this.noPluginText);
	else
		ListView.create(place,plugins,this.listViewTemplate,this.onSelectCommand);
}

config.macros.plugins.onSelectCommand = function(command,rowNames)
{
	var t;
	switch(command)
		{
		case "remove":
			for(t=0; t<rowNames.length; t++)
				store.setTiddlerTag(rowNames[t],false,"systemConfig");
			break;
		case "delete":
			if(rowNames.length > 0 && confirm(config.macros.plugins.confirmDeleteText.format([rowNames.join(", ")])))
				{
				for(t=0; t<rowNames.length; t++)
					{
					store.removeTiddler(rowNames[t]);
					story.closeTiddler(rowNames[t],true,false);
					}
				}
			break;
		}
	if(config.options.chkAutoSave)
		saveChanges(true);
}

config.macros.refreshDisplay.handler = function(place)
{
	createTiddlyButton(place,this.label,this.prompt,this.onClick);
}

config.macros.refreshDisplay.onClick = function(e)
{
	refreshAll();
	return false;
}

config.macros.importTiddlers.handler = function(place,macroName,params,wikifier,paramString,tiddler)
{
	if(readOnly)
		{
		createTiddlyElement(place,"div",null,"marked",this.readOnlyWarning);
		return;
		}
	var importer = createTiddlyElement(null,"div",null,"importTiddler wizard");
	createTiddlyElement(importer,"h1",null,null,this.wizardTitle);
	createTiddlyElement(importer,"h2",null,"step1",this.step1);
	var step = createTiddlyElement(importer,"div",null,"wizardStep");
	createTiddlyText(step,this.step1prompt);
	var input = createTiddlyElement(null,"input",null,"txtOptionInput");
	input.type = "text";
	input.size = 50;
	step.appendChild(input);
	importer.inputBox = input;
	createTiddlyElement(step,"br");
	createTiddlyText(step,this.step1promptFile);
	var fileInput = createTiddlyElement(null,"input",null,"txtOptionInput");
	fileInput.type = "file";
	fileInput.size = 50;
	fileInput.onchange = this.onBrowseChange;
	fileInput.onkeyup = this.onBrowseChange;
	step.appendChild(fileInput);
	createTiddlyElement(step,"br");
	createTiddlyText(step,this.step1promptFeeds);
	var feeds = this.getFeeds([{caption: this.step1feedPrompt, name: ""}]);
	createTiddlyDropDown(step,this.onFeedChange,feeds);
	createTiddlyElement(step,"br");
	createTiddlyButton(step,this.fetchLabel,this.fetchPrompt,this.onFetch,null,null,null);
        place.appendChild(importer);
}

config.macros.importTiddlers.getFeeds = function(feeds)
{
	var tagged = store.getTaggedTiddlers("contentPublisher","title");
	for(var t=0; t<tagged.length; t++)
		feeds.push({caption: tagged[t].title, name: store.getTiddlerSlice(tagged[t].title,"URL")});
	return feeds;
}

config.macros.importTiddlers.onFeedChange = function(e)
{
	var importer = findRelated(this,"importTiddler","className","parentNode");
	importer.inputBox.value = this.value;
	this.selectedIndex = 0;
}

config.macros.importTiddlers.onBrowseChange = function(e)
{
	var importer = findRelated(this,"importTiddler","className","parentNode");
	importer.inputBox.value = "file://" + this.value;
}

config.macros.importTiddlers.onFetch = function(e)
{
	var importer = findRelated(this,"importTiddler","className","parentNode");
	var url = importer.inputBox.value;
	var cutoff = findRelated(importer.firstChild,"step2","className","nextSibling");
	while(cutoff)
		{
		var temp = cutoff.nextSibling;
		cutoff.parentNode.removeChild(cutoff);
		cutoff = temp;
		}
	createTiddlyElement(importer,"h2",null,"step2",config.macros.importTiddlers.step2);
	var step = createTiddlyElement(importer,"div",null,"wizardStep",config.macros.importTiddlers.step2Text.format([url]));
	loadRemoteFile(url,config.macros.importTiddlers.onLoad,importer);
}

config.macros.importTiddlers.onLoad = function(status,params,responseText,url,xhr)
{
	if(!status)
		{
		displayMessage(this.fetchError);
		return;
		}
	var importer = params;
	// Check that the tiddler we're in hasn't been closed - doesn't work on IE
//	var p = importer;
//	while(p.parentNode)
//		p = p.parentNode;
//	if(!(p instanceof HTMLDocument))
//		return;
	// Crack out the content - (should be refactored)
	var posOpeningDiv = responseText.indexOf(startSaveArea);
	var limitClosingDiv = responseText.indexOf("<!--POST-BODY-START--"+">");
	var posClosingDiv = responseText.lastIndexOf(endSaveArea,limitClosingDiv == -1 ? responseText.length : limitClosingDiv);
	if((posOpeningDiv == -1) || (posClosingDiv == -1))
		{
		alert(config.messages.invalidFileError.format([url]));
		return;
		}
	var content = "<html><body>" + responseText.substring(posOpeningDiv,posClosingDiv + endSaveArea.length) + "</body></html>";
	// Create the iframe
	var iframe = document.createElement("iframe");
	iframe.style.display = "none";
	importer.insertBefore(iframe,importer.firstChild);
	var doc = iframe.document;
	if(iframe.contentDocument)
		doc = iframe.contentDocument; // For NS6
	else if(iframe.contentWindow)
		doc = iframe.contentWindow.document; // For IE5.5 and IE6
	// Put the content in the iframe
	doc.open();
	doc.writeln(content);
	doc.close();
	// Load the content into a TiddlyWiki() object
	var storeArea = doc.getElementById("storeArea");
	var importStore = new TiddlyWiki();
	importStore.loadFromDiv(storeArea,"store");
	// Get rid of the iframe
	iframe.parentNode.removeChild(iframe);
	// Extract data for the listview
	var tiddlers = [];
	importStore.forEachTiddler(function(title,tiddler)
		{
		var t = {};
		t.title = title;
		t.modified = tiddler.modified;
		t.modifier = tiddler.modifier;
		t.text = tiddler.text.substr(0,50);
		t.tags = tiddler.tags;
		tiddlers.push(t);
		});
	// Display the listview
	createTiddlyElement(importer,"h2",null,"step3",config.macros.importTiddlers.step3);
	var step = createTiddlyElement(importer,"div",null,"wizardStep");
	ListView.create(step,tiddlers,config.macros.importTiddlers.listViewTemplate,config.macros.importTiddlers.onSelectCommand);
	// Save the importer
	importer.store = importStore;
}

config.macros.importTiddlers.onSelectCommand = function(listView,command,rowNames)
{
	var importer = findRelated(listView,"importTiddler","className","parentNode");
	switch(command)
		{
		case "import":
			config.macros.importTiddlers.doImport(importer,rowNames);
			break;
		}
	if(config.options.chkAutoSave)
		saveChanges(true);
}

config.macros.importTiddlers.doImport = function(importer,rowNames)
{
	var theStore = importer.store;
	var overwrite = new Array();
	var t;
	for(t=0; t<rowNames.length; t++)
		{
		if(store.tiddlerExists(rowNames[t]))
			overwrite.push(rowNames[t]);
	}
	if(overwrite.length > 0)
		if(!confirm(this.confirmOverwriteText.format([overwrite.join(", ")])))
			return;
	for(t=0; t<rowNames.length; t++)
		{
		var inbound = theStore.fetchTiddler(rowNames[t]);
		store.saveTiddler(inbound.title, inbound.title, inbound.text, inbound.modifier, inbound.modified, inbound.tags);
		store.fetchTiddler(inbound.title).created = inbound.created;
		store.notify(rowNames[t],false);
		}
	store.notifyAll();
	store.setDirty(true);
	createTiddlyElement(importer,"h2",null,"step4",this.step4.format([rowNames.length]));
	var step = createTiddlyElement(importer,"div",null,"wizardStep");
	for(t=0; t<rowNames.length; t++)
		{
		createTiddlyLink(step,rowNames[t],true);
		createTiddlyElement(step,"br");
		}
	createTiddlyElement(importer,"h2",null,"step5",this.step5);
}
// ---------------------------------------------------------------------------------
// Menu and toolbar commands
// ---------------------------------------------------------------------------------

config.commands.closeTiddler.handler = function(event,src,title)
{
	story.closeTiddler(title,true,event.shiftKey || event.altKey);
	return false;
}

config.commands.closeOthers.handler = function(event,src,title)
{
	story.closeAllTiddlers(title);
	return false;
}

config.commands.editTiddler.handler = function(event,src,title)
{
	clearMessage();
	story.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE);
	story.focusTiddler(title,"text");
	return false;
}

config.commands.saveTiddler.handler = function(event,src,title)
{
	var newTitle = story.saveTiddler(title,event.shiftKey);
	if(newTitle)
	   story.displayTiddler(null,newTitle);
	return false;
}

config.commands.cancelTiddler.handler = function(event,src,title)
{
	if(story.hasChanges(title) && !readOnly)
		if(!confirm(this.warning.format([title])))
			return false;
	story.setDirty(title,false);
	story.displayTiddler(null,title);
	return false;
}

config.commands.deleteTiddler.handler = function(event,src,title)
{
	var deleteIt = true;
	if (config.options.chkConfirmDelete)
		deleteIt = confirm(this.warning.format([title]));
	if (deleteIt)
		{
		store.removeTiddler(title);
		story.closeTiddler(title,true,event.shiftKey || event.altKey);
		if(config.options.chkAutoSave)
			saveChanges();
		}
	return false;
}

config.commands.permalink.handler = function(event,src,title)
{
	var t = encodeURIComponent(String.encodeTiddlyLink(title));
	if(window.location.hash != t)
		window.location.hash = t;
	return false;
}

config.commands.references.handler = function(event,src,title)
{
	var popup = Popup.create(src);
	if(popup)
		{
		var references = store.getReferringTiddlers(title);
		var c = false;
		for(var r=0; r<references.length; r++)
			if(references[r].title != title && !references[r].isTagged("excludeLists"))
				{
				createTiddlyLink(createTiddlyElement(popup,"li"),references[r].title,true);
				c = true;
				}
		if(!c)
			createTiddlyText(createTiddlyElement(popup,"li",null,"disabled"),this.popupNone);
		}
	Popup.show(popup,false);
	event.cancelBubble = true;
	if (event.stopPropagation) event.stopPropagation();
	return false;
}

config.commands.jump.handler = function(event,src,title)
{
	var popup = Popup.create(src);
	if(popup)
		{
		story.forEachTiddler(function(title,element) {
			createTiddlyLink(createTiddlyElement(popup,"li"),title,true);
			});
		}
	Popup.show(popup,false);
	event.cancelBubble = true;
	if (event.stopPropagation) event.stopPropagation();
	return false;
}

// ---------------------------------------------------------------------------------
// Tiddler() object
// ---------------------------------------------------------------------------------

function Tiddler()
{
	this.title = null;
	this.text = null;
	this.modifier = null;
	this.modified = new Date();
	this.created = new Date();
	this.links = [];
	this.linksUpdated = false;
	this.tags = [];
	return this;
}

Tiddler.prototype.getLinks = function()
{
	if(this.linksUpdated==false)
		this.changed();
	return this.links;
}

// Format the text for storage in an RSS item
Tiddler.prototype.saveToRss = function(url)
{
	var s = [];
	s.push("<item>");
	s.push("<title" + ">" + this.title.htmlEncode() + "</title" + ">");
	s.push("<description>" + wikifyStatic(this.text,null,this).htmlEncode() + "</description>");
	for(var t=0; t<this.tags.length; t++)
		s.push("<category>" + this.tags[t] + "</category>");
	s.push("<link>" + url + "#" + encodeURIComponent(String.encodeTiddlyLink(this.title)) + "</link>");
	s.push("<pubDate>" + this.modified.toGMTString() + "</pubDate>");
	s.push("</item>");
	return(s.join("\n"));
}

// Change the text and other attributes of a tiddler
Tiddler.prototype.set = function(title,text,modifier,modified,tags,created,fields)
{
	this.assign(title,text,modifier,modified,tags,created,fields);
	this.changed();
	return this;
}

// Change the text and other attributes of a tiddler without triggered a tiddler.changed() call
Tiddler.prototype.assign = function(title,text,modifier,modified,tags,created,fields)
{
	if(title != undefined)
		this.title = title;
	if(text != undefined)
		this.text = text;
	if(modifier != undefined)
		this.modifier = modifier;
	if(modified != undefined)
		this.modified = modified;
	if(created != undefined)
		this.created = created;
	if(fields != undefined)
		this.fields = fields;
	if(tags != undefined)
		this.tags = (typeof tags == "string") ? tags.readBracketedList() : tags;
	else if(this.tags == undefined)
		this.tags = [];
	return this;
}

// Get the tags for a tiddler as a string (space delimited, using [[brackets]] for tags containing spaces)
Tiddler.prototype.getTags = function()
{
	return String.encodeTiddlyLinkList(this.tags);
}

// Test if a tiddler carries a tag
Tiddler.prototype.isTagged = function(tag)
{
	return this.tags.indexOf(tag) != -1;
}

// Static method to convert "\n" to newlines, "\s" to "\"
Tiddler.unescapeLineBreaks = function(text)
{
	return text ? text.unescapeLineBreaks() : "";
}

// Convert newlines to "\n", "\" to "\s"
Tiddler.prototype.escapeLineBreaks = function()
{
	return this.text.escapeLineBreaks();
}

// Updates the secondary information (like links[] array) after a change to a tiddler
Tiddler.prototype.changed = function()
{
	this.links = [];
	var t = this.autoLinkWikiWords() ? 0 : 1;
	var tiddlerLinkRegExp = t==0 ? config.textPrimitives.tiddlerAnyLinkRegExp : config.textPrimitives.tiddlerForcedLinkRegExp;
	tiddlerLinkRegExp.lastIndex = 0;
	var formatMatch = tiddlerLinkRegExp.exec(this.text);
	while(formatMatch)
		{
		if(t==0 && formatMatch[1] && formatMatch[1] != this.title) // wikiWordLink
			{
			if(formatMatch.index > 0)
				{
				var preRegExp = new RegExp(config.textPrimitives.unWikiLink+"|"+config.textPrimitives.anyLetter,"mg");
				preRegExp.lastIndex = formatMatch.index-1;
				var preMatch = preRegExp.exec(this.text);
				if(preMatch.index != formatMatch.index-1)
					this.links.pushUnique(formatMatch[1]);
				}
			else
				this.links.pushUnique(formatMatch[1]);
			}
		else if(formatMatch[2-t] && (store.tiddlerExists(formatMatch[3-t]) || store.isShadowTiddler(formatMatch[3-t]))) // titledBrackettedLink
			this.links.pushUnique(formatMatch[3-t]);
		else if(formatMatch[4-t] && formatMatch[4-t] != this.title) // brackettedLink
			this.links.pushUnique(formatMatch[4-t]);
		// Do not add link if match urlPattern (formatMatch[5-t])
		formatMatch = tiddlerLinkRegExp.exec(this.text);
		}
	this.linksUpdated = true;
	return;
}

Tiddler.prototype.getSubtitle = function()
{
	var theModifier = this.modifier;
	if(!theModifier)
		theModifier = config.messages.subtitleUnknown;
	var theModified = this.modified;
	if(theModified)
		theModified = theModified.toLocaleString();
	else
		theModified = config.messages.subtitleUnknown;
	return(config.messages.tiddlerLinkTooltip.format([this.title,theModifier,theModified]));
}

Tiddler.prototype.isReadOnly = function()
{
	return readOnly;
}

Tiddler.prototype.autoLinkWikiWords = function()
{
	return !(this.isTagged("systemConfig") || this.isTagged("excludeMissing"));
}

Tiddler.prototype.generateFingerprint = function()
{
	return "0x" + Crypto.hexSha1Str(this.text);
}

// ---------------------------------------------------------------------------------
// TiddlyWiki() object contains Tiddler()s
// ---------------------------------------------------------------------------------

function TiddlyWiki()
{
	var tiddlers = {}; // Hashmap by name of tiddlers
	this.tiddlersUpdated = false;
	this.namedNotifications = []; // Array of {name:,notify:} of notification functions
	this.notificationLevel = 0;
	this.slices = {}; // map tiddlerName->(map sliceName->sliceValue). Lazy.
	this.clear = function() {
		tiddlers = {};
		this.setDirty(false);
		};
	this.fetchTiddler = function(title) {
		return tiddlers[title];
		};
	this.deleteTiddler = function(title) {
		delete this.slices[title];
		delete tiddlers[title];
		};
	this.addTiddler = function(tiddler) {
		delete this.slices[tiddler.title];
		tiddlers[tiddler.title] = tiddler;
		};
	this.forEachTiddler = function(callback) {
		for(var t in tiddlers)
			{
			var tiddler = tiddlers[t];
			if(tiddler instanceof Tiddler)
				callback.call(this,t,tiddler);
			}
		};
}

// Set the dirty flag
TiddlyWiki.prototype.setDirty = function(dirty)
{
	this.dirty = dirty;
}

TiddlyWiki.prototype.isDirty = function()
{
	return this.dirty;
}

TiddlyWiki.prototype.suspendNotifications = function()
{
	this.notificationLevel--;
}

TiddlyWiki.prototype.resumeNotifications = function()
{
	this.notificationLevel++;
}

// Invoke the notification handlers for a particular tiddler
TiddlyWiki.prototype.notify = function(title,doBlanket)
{
	if(!this.notificationLevel)
		for(var t=0; t<this.namedNotifications.length; t++)
			{
			var n = this.namedNotifications[t];
			if((n.name == null && doBlanket) || (n.name == title))
				n.notify(title);
			}
}

// Invoke the notification handlers for all tiddlers
TiddlyWiki.prototype.notifyAll = function()
{
	if(!this.notificationLevel)
		for(var t=0; t<this.namedNotifications.length; t++)
			{
			var n = this.namedNotifications[t];
			if(n.name)
				n.notify(n.name);
			}
}

// Add a notification handler to a tiddler
TiddlyWiki.prototype.addNotification = function(title,fn)
{
	for (var i=0; i<this.namedNotifications.length; i++)
		if((this.namedNotifications[i].name == title) && (this.namedNotifications[i].notify == fn))
			return this;
	this.namedNotifications.push({name: title, notify: fn});
	return this;
}

TiddlyWiki.prototype.removeTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler)
		{
		this.deleteTiddler(title);
		this.notify(title,true);
		this.setDirty(true);
		}
}

TiddlyWiki.prototype.tiddlerExists = function(title)
{
	var t = this.fetchTiddler(title);
	return (t != undefined);
}

TiddlyWiki.prototype.isShadowTiddler = function(title)
{
	return typeof config.shadowTiddlers[title] == "string";
}

TiddlyWiki.prototype.getTiddler = function(title)
{
	var t = this.fetchTiddler(title);
	if(t != undefined)
		return t;
	else
		return null;
}

TiddlyWiki.prototype.getTiddlerText = function(title,defaultText)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler)
		return tiddler.text;
	if(!title)
		return defaultText;
	var pos = title.indexOf(config.textPrimitives.sliceSeparator);
	if(pos != -1)
		{
		var slice = this.getTiddlerSlice(title.substr(0,pos),title.substr(pos + config.textPrimitives.sliceSeparator.length));
		if(slice)
			return slice;
		}
	if(this.isShadowTiddler(title))
		return config.shadowTiddlers[title];
	if(defaultText != undefined)
		return defaultText;
	return null;
}

TiddlyWiki.prototype.slicesRE = /(?:[\'\/]*~?(\w+)[\'\/]*\:[\'\/]*\s*(.*?)\s*$)|(?:\|[\'\/]*~?(\w+)\:?[\'\/]*\|\s*(.*?)\s*\|)/gm

// @internal
TiddlyWiki.prototype.calcAllSlices = function(title) 
{
	var slices = {};
	var text = this.getTiddlerText(title,"");
	this.slicesRE.lastIndex = 0;
	do 
		{
			var m = this.slicesRE.exec(text);
			if (m) 
				{
					if (m[1])
						slices[m[1]] = m[2];
					else
						slices[m[3]] = m[4];
				}
		}
	while(m);
	return slices;
}

// Returns the slice of text of the given name
//#
//# A text slice is a substring in the tiddler's text that is defined
//# either like this
//#    aName:  textSlice
//# or
//#    |aName:| textSlice |
//# or
//#    |aName| textSlice |
//#
//# In the text the name (or name:) may be decorated with '' or //. I.e.
//# this would also a possible text slice:
//#
//#    |''aName:''| textSlice |
//#
//# @param name should only contain "word characters" (i.e. "a-ZA-Z_0-9")
//# @return [may be undefined] the (trimmed) text of the specified slice.
TiddlyWiki.prototype.getTiddlerSlice = function(title,sliceName)
{
	var slices = this.slices[title];
	if (!slices) {
		slices = this.calcAllSlices(title);
		this.slices[title] = slices;
	}
	return slices[sliceName];
}

// Build an hashmap of the specified named slices of a tiddler
TiddlyWiki.prototype.getTiddlerSlices = function(title,sliceNames)
{
	var r = {};
	for(var t=0; t<sliceNames.length; t++)
		{
		var slice = this.getTiddlerSlice(title,sliceNames[t]);
		if(slice)
			r[sliceNames[t]] = slice;
		}
	return r;
}

TiddlyWiki.prototype.getRecursiveTiddlerText = function(title,defaultText,depth)
{
	var bracketRegExp = new RegExp("(?:\\[\\[([^\\]]+)\\]\\])","mg");
	var text = this.getTiddlerText(title,null);
	if(text == null)
		return defaultText;
	var textOut = [];
	var lastPos = 0;
	do {
		var match = bracketRegExp.exec(text);
		if(match)
			{
			textOut.push(text.substr(lastPos,match.index-lastPos));
			if(match[1])
				{
				if(depth <= 0)
					textOut.push(match[1]);
				else
					textOut.push(this.getRecursiveTiddlerText(match[1],"[[" + match[1] + "]]",depth-1));
				}
			lastPos = match.index + match[0].length;
			}
		else
			textOut.push(text.substr(lastPos));
	} while(match);
	return(textOut.join(""));
}

TiddlyWiki.prototype.setTiddlerTag = function(title,status,tag)
{
	var tiddler = this.fetchTiddler(title);
	if(tiddler)
		{
		var t = tiddler.tags.indexOf(tag);
		if(t != -1)
			tiddler.tags.splice(t,1);
		if(status)
			tiddler.tags.push(tag);
		tiddler.changed();
		this.notify(title,true);
		this.setDirty(true);
		}
}

TiddlyWiki.prototype.saveTiddler = function(title,newTitle,newBody,modifier,modified,tags,fields)
{
	var tiddler = this.fetchTiddler(title);
	var created;
	if(tiddler)
		{
		created = tiddler.created; // Preserve created date
		this.deleteTiddler(title);
		}
	else
		{
		tiddler = new Tiddler();
		created = modified;
		}
	tiddler.set(newTitle,newBody,modifier,modified,tags,created,fields);
	this.addTiddler(tiddler);
	if(title != newTitle)
		this.notify(title,true);
	this.notify(newTitle,true);
	this.setDirty(true);
	return tiddler;
}

TiddlyWiki.prototype.createTiddler = function(title)
{
	var tiddler = this.fetchTiddler(title);
	if(!tiddler)
		{
		tiddler = new Tiddler();
		tiddler.title = title;
		this.addTiddler(tiddler);
		this.setDirty(true);
		}
	return tiddler;
}

// Load contents of a tiddlywiki from an HTML DIV
TiddlyWiki.prototype.loadFromDiv = function(src,idPrefix,noUpdate)
{
	this.idPrefix = idPrefix;
	var storeElem = (typeof src == "string") ? document.getElementById(src) : src;
	var tiddlers = this.getLoader().loadTiddlers(this,storeElem.childNodes);
	this.setDirty(false);
	if(!noUpdate)
		{
		for(var i = 0;i<tiddlers.length; i++)
			tiddlers[i].changed();
		}
}

TiddlyWiki.prototype.updateTiddlers = function()
{
	this.tiddlersUpdated = true;
	this.forEachTiddler(function(title,tiddler) {
		tiddler.changed();
		});
}

// Return all tiddlers formatted as an HTML string
TiddlyWiki.prototype.allTiddlersAsHtml = function()
{
	return store.getSaver().externalize(store);
}

// Return an array of tiddlers matching a search regular expression
TiddlyWiki.prototype.search = function(searchRegExp,sortField,excludeTag)
{
	var candidates = this.reverseLookup("tags",excludeTag,false);
	var results = [];
	for(var t=0; t<candidates.length; t++)
		{
		if((candidates[t].title.search(searchRegExp) != -1) || (candidates[t].text.search(searchRegExp) != -1))
			results.push(candidates[t]);
		}
	if(!sortField)
		sortField = "title";
	results.sort(function(a,b) {return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1);});
	return results;
}

// Return an array of all the tags in use. Each member of the array is another array where [0] is the name of the tag and [1] is the number of occurances
TiddlyWiki.prototype.getTags = function()
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		for(var g=0; g<tiddler.tags.length; g++)
			{
			var tag = tiddler.tags[g];
			var f = false;
			for(var c=0; c<results.length; c++)
				if(results[c][0] == tag)
					{
					f = true;
					results[c][1]++;
					}
			if(!f)
				results.push([tag,1]);
			}
		});
	results.sort(function(a,b) {return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : (a[0].toLowerCase() == b[0].toLowerCase() ? 0 : +1);});
	return results;
}

// Return an array of the tiddlers that are tagged with a given tag
TiddlyWiki.prototype.getTaggedTiddlers = function(tag,sortField)
{
	return this.reverseLookup("tags",tag,true,sortField);
}

// Return an array of the tiddlers that link to a given tiddler
TiddlyWiki.prototype.getReferringTiddlers = function(title,unusedParameter,sortField)
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	return this.reverseLookup("links",title,true,sortField);
}

// Return an array of the tiddlers that do or do not have a specified entry in the specified storage array (ie, "links" or "tags")
// lookupMatch == true to match tiddlers, false to exclude tiddlers
TiddlyWiki.prototype.reverseLookup = function(lookupField,lookupValue,lookupMatch,sortField)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		var f = !lookupMatch;
		for(var lookup=0; lookup<tiddler[lookupField].length; lookup++)
			if(tiddler[lookupField][lookup] == lookupValue)
				f = lookupMatch;
		if(f)
			results.push(tiddler);
		});
	if(!sortField)
		sortField = "title";
	results.sort(function(a,b) {return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1);});
	return results;
}

// Return the tiddlers as a sorted array
TiddlyWiki.prototype.getTiddlers = function(field,excludeTag)
{
	var results = [];
	this.forEachTiddler(function(title,tiddler) {
		if(excludeTag == undefined || !tiddler.isTagged(excludeTag))
			results.push(tiddler);
		});
	if(field)
		results.sort(function(a,b) {return a[field] < b[field] ? -1 : (a[field] == b[field] ? 0 : +1);});
	return results;
}

// Return array of names of tiddlers that are referred to but not defined
TiddlyWiki.prototype.getMissingLinks = function(sortField)
{
	if(!this.tiddlersUpdated)
		this.updateTiddlers();
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		for(var n=0; n<tiddler.links.length;n++)
			{
			var link = tiddler.links[n];
			if(this.fetchTiddler(link) == null && !this.isShadowTiddler(link))
				results.pushUnique(link);
			}
		});
	results.sort();
	return results;
}

// Return an array of names of tiddlers that are defined but not referred to
TiddlyWiki.prototype.getOrphans = function()
{
	var results = [];
	this.forEachTiddler(function (title,tiddler) {
		if(this.getReferringTiddlers(title).length == 0 && !tiddler.isTagged("excludeLists"))
			results.push(title);
		});
	results.sort();
	return results;
}

// Return an array of names of all the shadow tiddlers
TiddlyWiki.prototype.getShadowed = function()
{
	var results = [];
	for(var t in config.shadowTiddlers)
		if(typeof config.shadowTiddlers[t] == "string")
			results.push(t);
	results.sort();
	return results;
}

// Resolves a Tiddler reference or tiddler title into a Tiddler object, or null if it doesn't exist
TiddlyWiki.prototype.resolveTiddler = function(tiddler) 
{
	var t = (typeof tiddler == 'string') ? this.getTiddler(tiddler) : tiddler;
	return t instanceof Tiddler ? t : null;
}

TiddlyWiki.prototype.getLoader = function() 
{
	if (!this.loader) 
		this.loader = new TW21Loader();
	return this.loader;
}
 
TiddlyWiki.prototype.getSaver = function() 
{
	if (!this.saver) 
		this.saver = new TW21Saver();
	return this.saver;
}

// Returns true if path is a valid field name (path),
// i.e. a sequence of identifiers, separated by '.'
TiddlyWiki.isValidFieldName = function (name) {
	var match = /[a-zA-Z_]\w*(\.[a-zA-Z_]\w*)*/.exec(name);
	return match && (match[0] == name);
}

// Throws an exception when name is not a valid field name.
TiddlyWiki.checkFieldName = function(name) {
	if (!TiddlyWiki.isValidFieldName(name))
		throw config.messages.invalidFieldName.format([name]);
}

function StringFieldAccess(n, readOnly) {
	this.set = readOnly 
		? function(t,v) {if (v != t[n]) throw config.messages.fieldCannotBeChanged.format([n]);}
		: function(t,v) {if (v != t[n]) {t[n] = v; return true;}};
	this.get = function(t) {return t[n];};
}

function DateFieldAccess(n) {
	this.set = function(t,v) {
			var d = v instanceof Date ? v : Date.convertFromYYYYMMDDHHMM(v); 
			if (d != t[n]) {
				t[n] = d; return true;
			}
		};
	this.get = function(t)   {return t[n].convertToYYYYMMDDHHMM();}
}

function LinksFieldAccess(n) {
	this.set = function(t,v) {
			var s = (typeof v == "string") ? v.readBracketedList() : v; 
			if (s.toString() != t[n].toString()) {
				t[n] = s; return true;
			}
		};
	this.get = function(t)   {return String.encodeTiddlyLinkList(t[n]);}
}

TiddlyWiki.standardFieldAccess = {
	// The set functions return true when setting the data has changed the value.
	
	"title":    new StringFieldAccess("title", true),
	// Handle the "tiddler" field name as the title
	"tiddler":  new StringFieldAccess("title", true),
	
	"text":     new StringFieldAccess("text"),
	"modifier": new StringFieldAccess("modifier"),
	"modified": new DateFieldAccess("modified"),
	"created":  new DateFieldAccess("created"),
	"tags":     new LinksFieldAccess("tags")
};

TiddlyWiki.isStandardField = function(name) {
	return TiddlyWiki.standardFieldAccess[name] != undefined;
}

// Sets the value of the given field of the tiddler to the value. 
// Setting an ExtendedField's value to null or undefined removes the field. 
// Setting a namespace to undefined removes all fields of that namespace.
// The fieldName is case-insensitive.
// All values will be converted to a string value.
TiddlyWiki.prototype.setValue = function(tiddler, fieldName, value) {
	TiddlyWiki.checkFieldName(fieldName);
	var t = this.resolveTiddler(tiddler);
	if (!t)
		return;
		
	fieldName = fieldName.toLowerCase();

	var isRemove = (value === undefined) || (value === null);

	if (!t.fields) 
		t.fields = {};
		
	var accessor = TiddlyWiki.standardFieldAccess[fieldName];
	if (accessor) {
		if (isRemove)
			// don't remove StandardFields
			return;
		var h = TiddlyWiki.standardFieldAccess[fieldName];
		if (!h.set(t, value))
			return;

	} else {
		var oldValue = t.fields[fieldName];
		
		if (isRemove) {
			if (oldValue !== undefined) {
				// deletes a single field
				delete t.fields[fieldName];
			} else {
				// no concrete value is defined for the fieldName
				// so we guess this is a namespace path.
				
				// delete all fields in a namespace
				var re = new RegExp('^'+fieldName+'\\.');
				var dirty = false;
				for (var n in t.fields) {
					if (n.match(re)) {
						delete t.fields[n];
						dirty = true;
					}
				}
				if (!dirty)
					return
			}
				
		} else {
			// the "normal" set case. value is defined (not null/undefined)
			// For convenience provide a nicer conversion Date->String
 			value = value instanceof Date 
				? value.convertToYYYYMMDDHHMMSSMMM() 
				: String(value);
			if (oldValue == value) 
				return;
			t.fields[fieldName] = value;
		}
	}
	
	// When we are here the tiddler/store really was changed.
	this.notify(t.title,true);
	if (!fieldName.match(/^temp\./))
		this.setDirty(true);
}

// Returns the value of the given field of the tiddler. 
// The fieldName is case-insensitive.
// Will only return String values (or undefined).
TiddlyWiki.prototype.getValue = function(tiddler, fieldName) {
	var t = this.resolveTiddler(tiddler);
	if (!t)
		return undefined;

	fieldName = fieldName.toLowerCase();

	var accessor = TiddlyWiki.standardFieldAccess[fieldName];
	if (accessor) {
		return accessor.get(t);
	}
	
	return t.fields ? t.fields[fieldName] : undefined;
}

// Calls the callback function for every field in the tiddler.
//
// When callback function returns a non-false value the iteration stops 
// and that value is returned. 
//
// The order of the fields is not defined.
// 
// @param callback a function(tiddler, fieldName, value). 
// 
TiddlyWiki.prototype.forEachField = function(tiddler, callback, onlyExtendedFields) {
	var t = this.resolveTiddler(tiddler);
	if (!t)
		return undefined;
	
	if (t.fields) {
		for (var n in t.fields) {
			var result = callback(t, n, t.fields[n]);
			if (result)
				return result;
		}
	}
	
	if (onlyExtendedFields)
		return undefined;

	for (var n in TiddlyWiki.standardFieldAccess) {
		if (n == "tiddler")
			// even though the "title" field can also be referenced through the name "tiddler"
			// we only visit this field once.
			continue;
			
		var result = callback(t, n, TiddlyWiki.standardFieldAccess[n].get(t));
		if (result)
			return result;
	}

	return undefined;
};
// ---------------------------------------------------------------------------------
// Story functions
// ---------------------------------------------------------------------------------

// A story is a HTML div containing a sequence of tiddlers that can be manipulated
// container - id of containing element
// idPrefix - string prefix prepended to title to make ids for tiddlers in this story
function Story(container,idPrefix)
{
	this.container = container;
	this.idPrefix = idPrefix;
	this.highlightRegExp = null;
}

// Iterate through all the tiddlers in a story
// fn - callback function to be called for each tiddler. Arguments are:
//		tiddler - reference to Tiddler object
//		element - reference to tiddler display element
Story.prototype.forEachTiddler = function(fn)
{
	var place = document.getElementById(this.container);
	if(!place)
		return;
	var e = place.firstChild;
	while(e)
		{
		var n = e.nextSibling;
		var title = e.getAttribute("tiddler");
		fn.call(this,title,e);
		e = n;
		}
}

// Display several tiddlers given their titles in an array. Parameters same as displayTiddler(), except:
// titles - array of string titles
Story.prototype.displayTiddlers = function(srcElement,titles,template,animate,slowly)
{
	for(var t = titles.length-1;t>=0;t--)
		this.displayTiddler(srcElement,titles[t],template,animate,slowly);
}

// Display a given tiddler with a given template. If the tiddler is already displayed but with a different
// template, it is switched to the specified template
// srcElement - reference to element from which this one is being opened -or-
//              special positions "top", "bottom"
// title - title of tiddler to display
// template - the name of the tiddler containing the template -or-
//			  one of the constants DEFAULT_VIEW_TEMPLATE and DEFAULT_EDIT_TEMPLATE -or-
//			  null or undefined to indicate the current template if there is one, DEFAULT_VIEW_TEMPLATE if not
// animate - whether to perform animations
// slowly - whether to perform animations in slomo
Story.prototype.displayTiddler = function(srcElement,title,template,animate,slowly)
{
	var place = document.getElementById(this.container);
	var tiddlerElem = document.getElementById(this.idPrefix + title);
	if(tiddlerElem)
		this.refreshTiddler(title,template);
	else
		{
		var before = this.positionTiddler(srcElement);
		tiddlerElem = this.createTiddler(place,before,title,template);
		}
	if(srcElement && typeof srcElement !== "string")
		{
		if(anim && config.options.chkAnimate && (animate == undefined || animate == true))
			anim.startAnimating(new Cascade(title,srcElement,tiddlerElem,slowly),new Scroller(tiddlerElem,slowly));
		else
			window.scrollTo(0,ensureVisible(tiddlerElem));
		}
}

// Figure out the appropriate position for a newly opened tiddler
// srcElement - reference to the element containing the link to the tiddler -or-
//              special positions "top", "bottom"
// returns - reference to the tiddler that the new one should appear before (null for the bottom of the story)
Story.prototype.positionTiddler = function(srcElement)
{
	var place = document.getElementById(this.container);
	var before;
	if(typeof srcElement == "string")
		{
		switch(srcElement)
			{
			case "top":
				before = place.firstChild;
				break;
			case "bottom":
				before = null;
				break;
			}
		}
	else
		{
		var after = this.findContainingTiddler(srcElement);
		if(after == null)
			before = place.firstChild;
		else if(after.nextSibling)
			before = after.nextSibling;
		else
			before = null;
		}
	return before;
}

// Create a tiddler frame at the appropriate place in a story column
// place - reference to parent element
// before - null, or reference to element before which to insert new tiddler
// title - title of new tiddler
// template - the name of the tiddler containing the template or one of the constants DEFAULT_VIEW_TEMPLATE and DEFAULT_EDIT_TEMPLATE
Story.prototype.createTiddler = function(place,before,title,template)
{
	var tiddlerElem = createTiddlyElement(null,"div",this.idPrefix + title,"tiddler");
	tiddlerElem.setAttribute("refresh","tiddler");
	place.insertBefore(tiddlerElem,before);
	this.refreshTiddler(title,template);
	return tiddlerElem;
}

// Overridable for choosing the name of the template to apply for a tiddler
Story.prototype.chooseTemplateForTiddler = function(title,template)
{
	if(!template)
		template = DEFAULT_VIEW_TEMPLATE;
	if(template == DEFAULT_VIEW_TEMPLATE || template == DEFAULT_EDIT_TEMPLATE)
		template = config.tiddlerTemplates[template];
	return template;
}

// Overridable for extracting the text of a template from a tiddler
Story.prototype.getTemplateForTiddler = function(title,template,tiddler)
{
	return store.getRecursiveTiddlerText(template,null,10);
}

// Apply a template to an existing tiddler if it is not already displayed using that template
// title - title of tiddler to update
// template - the name of the tiddler containing the template or one of the constants DEFAULT_VIEW_TEMPLATE and DEFAULT_EDIT_TEMPLATE
// force - if true, forces the refresh even if the template hasn't changedd
Story.prototype.refreshTiddler = function(title,template,force)
{
	var tiddlerElem = document.getElementById(this.idPrefix + title);
	if(tiddlerElem)
		{
		if(tiddlerElem.getAttribute("dirty") == "true" && !force)
			return tiddlerElem;
		template = this.chooseTemplateForTiddler(title,template);
		var currTemplate = tiddlerElem.getAttribute("template");
		if((template != currTemplate) || force)
			{
			var tiddler = store.getTiddler(title);
			if(!tiddler)
				{
				tiddler = new Tiddler();
				if(store.isShadowTiddler(title))
					tiddler.set(title,store.getTiddlerText(title),config.views.wikified.shadowModifier,version.date,[],version.date);
				else
					{
					var text = template=="EditTemplate"
								? config.views.editor.defaultText.format([title])
								: config.views.wikified.defaultText.format([title]);
					tiddler.set(title,text,config.views.wikified.defaultModifier,version.date,[],version.date);
					}
				}
			tiddlerElem.setAttribute("tags",tiddler.tags.join(" "));
			tiddlerElem.setAttribute("tiddler",title);
			tiddlerElem.setAttribute("template",template);
			var me = this;
			tiddlerElem.onmouseover = this.onTiddlerMouseOver;
			tiddlerElem.onmouseout = this.onTiddlerMouseOut;
			tiddlerElem.ondblclick = this.onTiddlerDblClick;
			tiddlerElem[window.event?"onkeydown":"onkeypress"] = this.onTiddlerKeyPress;
			var html = this.getTemplateForTiddler(title,template,tiddler);
			tiddlerElem.innerHTML = html;
			applyHtmlMacros(tiddlerElem,tiddler);
			if(store.getTaggedTiddlers(title).length > 0)
				addClass(tiddlerElem,"isTag");
			else
				removeClass(tiddlerElem,"isTag");
			if(!store.tiddlerExists(title))
				{
				if(store.isShadowTiddler(title))
					addClass(tiddlerElem,"shadow");
				else
					addClass(tiddlerElem,"missing");
				}
			else
				{
				removeClass(tiddlerElem,"shadow");
				removeClass(tiddlerElem,"missing");
				}
			}
		}
	return tiddlerElem;
}

// Refresh all tiddlers in the Story
Story.prototype.refreshAllTiddlers = function() 
{
	var place = document.getElementById(this.container);
	var e = place.firstChild;
	if(!e)
		return;
	this.refreshTiddler(e.getAttribute("tiddler"),e.getAttribute("template"),true);
	while((e = e.nextSibling) != null) 
		this.refreshTiddler(e.getAttribute("tiddler"),e.getAttribute("template"),true);
}

// Default tiddler onmouseover/out event handlers
Story.prototype.onTiddlerMouseOver = function(e)
{
	if(window.addClass instanceof Function)
		addClass(this,"selected");
}

Story.prototype.onTiddlerMouseOut = function(e)
{
	if(window.removeClass instanceof Function)
		removeClass(this,"selected");
}

// Default tiddler ondblclick event handler
Story.prototype.onTiddlerDblClick = function(e)
{
	if(!e) var e = window.event;
	var theTarget = resolveTarget(e);
	if(theTarget && theTarget.nodeName.toLowerCase() != "input" && theTarget.nodeName.toLowerCase() != "textarea")
		{
		if(document.selection && document.selection.empty)
			document.selection.empty();
		config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
		e.cancelBubble = true;
		if (e.stopPropagation) e.stopPropagation();
		return true;
		}
	else
		return false;
}

Story.prototype.onTiddlerKeyPress = function(e)
{
	if(!e) var e = window.event;
	clearMessage();
	var consume = false; 
	var title = this.getAttribute("tiddler");
	var target = resolveTarget(e);
	switch(e.keyCode)
		{
		case 9: // Tab
			if(config.options.chkInsertTabs && target.tagName.toLowerCase() == "textarea")
				{
				replaceSelection(target,String.fromCharCode(9));
				consume = true; 
				}
			if(config.isOpera)
				{
				target.onblur = function()
					{
					this.focus();
					this.onblur = null;
					}
				}
			break;
		case 13: // Ctrl-Enter
		case 10: // Ctrl-Enter on IE PC
		case 77: // Ctrl-Enter is "M" on some platforms
			if(e.ctrlKey)
				{
				blurElement(this);
				config.macros.toolbar.invokeCommand(this,"defaultCommand",e);
				consume = true;
				}
			break; 
		case 27: // Escape
			blurElement(this);
			config.macros.toolbar.invokeCommand(this,"cancelCommand",e);
			consume = true;
			break;
		}
	e.cancelBubble = consume;
	if(consume)
		{
		if(e.stopPropagation) e.stopPropagation(); // Stop Propagation
		e.returnValue = true; // Cancel The Event in IE
		if(e.preventDefault ) e.preventDefault(); // Cancel The Event in Moz
		}
	return(!consume);
};

// Returns the specified field (input or textarea element) in a tiddler, otherwise the first edit field it finds
// or null if it found no edit field at all
Story.prototype.getTiddlerField = function(title,field)
{
	var tiddlerElem = document.getElementById(this.idPrefix + title);
	var e = null;
	if(tiddlerElem != null)
		{
		var children = tiddlerElem.getElementsByTagName("*");
		for (var t=0; t<children.length; t++)
			{
			var c = children[t];
			if(c.tagName.toLowerCase() == "input" || c.tagName.toLowerCase() == "textarea")
				{
				if(!e)
					e = c;
				if(c.getAttribute("edit") == field)
					e = c;
				}
			}
		}
	return e;
}

// Focus a specified tiddler. Attempts to focus the specified field, otherwise the first edit field it finds
Story.prototype.focusTiddler = function(title,field)
{
	var e = this.getTiddlerField(title,field);
	if(e)
		{
		e.focus();
		e.select();
		}
}

// Ensures that a specified tiddler does not have the focus
Story.prototype.blurTiddler = function(title)
{
	var tiddlerElem = document.getElementById(this.idPrefix + title);
	if(tiddlerElem != null && tiddlerElem.focus && tiddlerElem.blur)
		{
		tiddlerElem.focus();
		tiddlerElem.blur();
		}
}

// Adds a specified value to the edit controls (if any) of a particular
// array-formatted field of a particular tiddler (eg "tags")
//  title - name of tiddler
//  tag - value of field, without any [[brackets]]
//  mode - +1 to add the tag, -1 to remove it, 0 to toggle it
//  field - name of field (eg "tags")
Story.prototype.setTiddlerField = function(title,tag,mode,field)
{
	var c = story.getTiddlerField(title,field);

	var tags = c.value.readBracketedList();
	tags.setItem(tag,mode);
	c.value = String.encodeTiddlyLinkList(tags);
}

// The same as setTiddlerField but preset to the "tags" field
Story.prototype.setTiddlerTag = function(title,tag,mode)
{
	Story.prototype.setTiddlerField(title,tag,mode,"tags");
}

// Close a specified tiddler
// title - name of tiddler to close
// animate - whether to perform animations
// slowly - whether to perform animations in slomo
Story.prototype.closeTiddler = function(title,animate,slowly)
{
	var tiddlerElem = document.getElementById(this.idPrefix + title);
	if(tiddlerElem != null)
		{
		clearMessage();
		this.scrubTiddler(tiddlerElem);
		if(anim && config.options.chkAnimate && animate)
			anim.startAnimating(new Slider(tiddlerElem,false,slowly,"all"));
		else
			tiddlerElem.parentNode.removeChild(tiddlerElem);
		}
}

// Scrub IDs from a tiddler. This is so that the 'ghost' of a tiddler while it is being closed
// does not interfere with things
// tiddler - reference to the tiddler element
Story.prototype.scrubTiddler = function(tiddlerElem)
{
	tiddlerElem.id = null;
}

// Set the 'dirty' flag of a tiddler
// title - title of tiddler to change
// dirty - new boolean status of flag
Story.prototype.setDirty = function(title,dirty)
{
	var tiddlerElem = document.getElementById(this.idPrefix + title);
	if(tiddlerElem != null)
		tiddlerElem.setAttribute("dirty",dirty ? "true" : "false");
}

// Is a particular tiddler dirty (with unsaved changes)?
Story.prototype.isDirty = function(title)
{
	var tiddlerElem = document.getElementById(this.idPrefix + title);
	if(tiddlerElem != null)
		return tiddlerElem.getAttribute("dirty") == "true";
	return null;
}

// Determine whether any open tiddler are dirty
Story.prototype.areAnyDirty = function()
{
	var r = false;
	this.forEachTiddler(function(title,element) {
		if(this.isDirty(title))
			r = true;
		});
	return r;
}

// Close all tiddlers in the story
Story.prototype.closeAllTiddlers = function(exclude)
{
	clearMessage();
	this.forEachTiddler(function(title,element) {
		if((title != exclude) && element.getAttribute("dirty") != "true")
			this.closeTiddler(title);
		});
	window.scrollTo(0,0);
}

// Check if there are any tiddlers in the story
Story.prototype.isEmpty = function()
{
	var place = document.getElementById(this.container);
	return(place && place.firstChild == null);
}

// Perform a search and display the result
// text - text to search for
// useCaseSensitive - true for case sensitive matching
// useRegExp - true to interpret text as a RegExp
Story.prototype.search = function(text,useCaseSensitive,useRegExp)
{
	this.closeAllTiddlers();
	highlightHack = new RegExp(useRegExp ?	 text : text.escapeRegExp(),useCaseSensitive ? "mg" : "img");
	var matches = store.search(highlightHack,"title","excludeSearch");
	var titles = [];
	for(var t=matches.length-1; t>=0; t--)
		titles.push(matches[t].title);
	this.displayTiddlers(null,titles);
	highlightHack = null;
	var q = useRegExp ? "/" : "'";
	if(matches.length > 0)
		displayMessage(config.macros.search.successMsg.format([titles.length.toString(),q + text + q]));
	else
		displayMessage(config.macros.search.failureMsg.format([q + text + q]));
}

// Determine if the specified element is within a tiddler in this story
// e - reference to an element
// returns: reference to a tiddler element or null if none
Story.prototype.findContainingTiddler = function(e)
{
	while(e && !hasClass(e,"tiddler"))
		e = e.parentNode;
	return(e);
}

// Gather any saveable fields from a tiddler element
// e - reference to an element to scan recursively
// fields - object to contain gathered field values
Story.prototype.gatherSaveFields = function(e,fields)
{
	if(e && e.getAttribute)
		{
		var f = e.getAttribute("edit");
		if(f)
			fields[f] = e.value.replace(/\r/mg,"");;
		if(e.hasChildNodes())
			{
			var c = e.childNodes;
			for(var t=0; t<c.length; t++)
				this.gatherSaveFields(c[t],fields)
			}
		}
}

// Determine whether a tiddler has any edit fields, and if so if their values have been changed
// title - name of tiddler
Story.prototype.hasChanges = function(title)
{
	var e = document.getElementById(this.idPrefix + title);
	if(e != null)
		{
		var fields = {};
		this.gatherSaveFields(e,fields);
		var tiddler = store.fetchTiddler(title);
		if (!tiddler)
			return false;
		for(var n in fields)
			if (store.getValue(title,n) != fields[n])
				return true;
		}
	return false;
}

// Save any open edit fields of a tiddler and updates the display as necessary
// title - name of tiddler
// minorUpdate - true if the modified date shouldn't be updated
// returns: title of saved tiddler, or null if not saved
Story.prototype.saveTiddler = function(title,minorUpdate)
{
	var tiddlerElem = document.getElementById(this.idPrefix + title);
	if(tiddlerElem != null)
		{
		var fields = {};
		this.gatherSaveFields(tiddlerElem,fields);
		var newTitle = fields.title ? fields.title : title;
		if(store.tiddlerExists(newTitle) && newTitle != title)
			{
			if(confirm(config.messages.overwriteWarning.format([newTitle.toString()])))
				this.closeTiddler(newTitle,false,false);
			else
				return null;
			}
		tiddlerElem.id = this.idPrefix + newTitle;
		tiddlerElem.setAttribute("tiddler",newTitle);
		tiddlerElem.setAttribute("template",DEFAULT_VIEW_TEMPLATE);
		tiddlerElem.setAttribute("dirty","false");
		if(config.options.chkForceMinorUpdate)
			minorUpdate = !minorUpdate;
		var newDate = new Date();
		store.saveTiddler(title,newTitle,fields.text,config.options.txtUserName,minorUpdate ? undefined : newDate,fields.tags);
		for (var n in fields) 
			if (!TiddlyWiki.isStandardField(n))
				store.setValue(newTitle,n,fields[n]);
		if(config.options.chkAutoSave)
			saveChanges();
		return newTitle;
		}
	return null;
}

Story.prototype.permaView = function()
{
	var links = [];
	this.forEachTiddler(function(title,element) {
		links.push(String.encodeTiddlyLink(title));
		});
	var t = encodeURIComponent(links.join(" "));
	if(t == "")
		t = "#";
	if(window.location.hash != t)
		window.location.hash = t;
}

// ---------------------------------------------------------------------------------
// Message area
// ---------------------------------------------------------------------------------

function getMessageDiv()
{
	var msgArea = document.getElementById("messageArea");
	if(!msgArea)
		return null;
	if(!msgArea.hasChildNodes())
		createTiddlyButton(createTiddlyElement(msgArea,"div",null,"messageToolbar"),
			config.messages.messageClose.text,
			config.messages.messageClose.tooltip,
			clearMessage);
	msgArea.style.display = "block";
	return createTiddlyElement(msgArea,"div");
}

function displayMessage(text,linkText)
{
	var e = getMessageDiv();
	if(!e)
		{
		alert(text);
		return;
		}
	if(linkText)
		{
		var link = createTiddlyElement(e,"a",null,null,text);
		link.href = linkText;
		link.target = "_blank";
		}
	else
		e.appendChild(document.createTextNode(text));
}

function clearMessage()
{
	var msgArea = document.getElementById("messageArea");
	if(msgArea)
		{
		removeChildren(msgArea);
		msgArea.style.display = "none";
		}
	return false;
}

// ---------------------------------------------------------------------------------
// Refresh mechanism
// ---------------------------------------------------------------------------------

config.refreshers = {
	link: function(e,changeList)
		{
		var title = e.getAttribute("tiddlyLink");
		refreshTiddlyLink(e,title);
		return true;
		},
	
	tiddler: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var template = e.getAttribute("template");
		if(changeList && changeList.indexOf(title) != -1 && !story.isDirty(title))
			story.refreshTiddler(title,template,true);
		else
			refreshElements(e,changeList);
		return true;
		},

	content: function(e,changeList)
		{
		var title = e.getAttribute("tiddler");
		var force = e.getAttribute("force");
		if(force != null || changeList == null || changeList.indexOf(title) != -1)
			{
			removeChildren(e);
			wikify(store.getTiddlerText(title,title),e);
			return true;
			}
		else
			return false;
		},

	macro: function(e,changeList)
		{
		var macro = e.getAttribute("macroName");
		var params = e.getAttribute("params");
		if(macro)
			macro = config.macros[macro];
		if(macro && macro.refresh)
			macro.refresh(e,params);
		return true;
		}
};

function refreshElements(root,changeList)
{
	var nodes = root.childNodes;
	for(var c=0; c<nodes.length; c++)
		{
		var e = nodes[c],type;
		if(e.getAttribute)
			type = e.getAttribute("refresh");
		else
			type = null;
		var refresher = config.refreshers[type];
		var refreshed = false;
		if(refresher != undefined)
			refreshed = refresher(e,changeList);
		if(e.hasChildNodes() && !refreshed)
			refreshElements(e,changeList);
		}
}

function applyHtmlMacros(root,tiddler)
{
	var e = root.firstChild;
	while(e)
		{
		var nextChild = e.nextSibling;
		if(e.getAttribute)
			{
			var macro = e.getAttribute("macro");
			if(macro)
				{
				var params = "";
				var p = macro.indexOf(" ");
				if(p != -1)
					{
					params = macro.substr(p+1);
					macro = macro.substr(0,p);
					}
				invokeMacro(e,macro,params,null,tiddler);
				}
			}
		if(e.hasChildNodes())
			applyHtmlMacros(e,tiddler);
		e = nextChild;
		}
}

function refreshPageTemplate(title)
{
	var stash = createTiddlyElement(document.body,"div");
	stash.style.display = "none";
	var display = document.getElementById("tiddlerDisplay");
	var nodes,t;
	if(display)
		{
		nodes = display.childNodes;
		for(t=nodes.length-1; t>=0; t--)
			stash.appendChild(nodes[t]);
		}
	var wrapper = document.getElementById("contentWrapper");
	if(!title)
		title = "PageTemplate";
	var html = store.getRecursiveTiddlerText(title,null,10);
	wrapper.innerHTML = html;
	applyHtmlMacros(wrapper);
	refreshElements(wrapper);
	display = document.getElementById("tiddlerDisplay");
	removeChildren(display);
	if(!display)
		display = createTiddlyElement(wrapper,"div","tiddlerDisplay");
	nodes = stash.childNodes;
	for(t=nodes.length-1; t>=0; t--)
		display.appendChild(nodes[t]);
	stash.parentNode.removeChild(stash);
}

function refreshDisplay(hint)
{
	var e = document.getElementById("contentWrapper");
	if(typeof hint == "string")
		hint = [hint];
	refreshElements(e,hint);
}

function refreshPageTitle()
{
	document.title = wikifyPlain("SiteTitle") + " - " + wikifyPlain("SiteSubtitle");
}

function refreshStyles(title)
{
	setStylesheet(title == null ? "" : store.getRecursiveTiddlerText(title,"",10),title);
}

function refreshColorPalette(title)
{
	if(!startingUp)
		refreshAll();
}

function refreshAll()
{
	refreshPageTemplate();
	refreshDisplay();
	refreshStyles("StyleSheetLayout");
	refreshStyles("StyleSheetColors");
	refreshStyles("StyleSheet");
	refreshStyles("StyleSheetPrint");
}

// ---------------------------------------------------------------------------------
// Options cookie stuff
// ---------------------------------------------------------------------------------

function loadOptionsCookie()
{
	if(safeMode)
		return;
	var cookies = document.cookie.split(";");
	for(var c=0; c<cookies.length; c++)
		{
		var p = cookies[c].indexOf("=");
		if(p != -1)
			{
			var name = cookies[c].substr(0,p).trim();
			var value = cookies[c].substr(p+1).trim();
			switch(name.substr(0,3))
				{
				case "txt":
					config.options[name] = unescape(value);
					break;
				case "chk":
					config.options[name] = value == "true";
					break;
				}
			}
		}
}

function saveOptionCookie(name)
{
	if(safeMode)
		return;
	var c = name + "=";
	switch(name.substr(0,3))
		{
		case "txt":
			c += escape(config.options[name].toString());
			break;
		case "chk":
			c += config.options[name] ? "true" : "false";
			break;
		}
	c += "; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/";
	document.cookie = c;
}

// ---------------------------------------------------------------------------------
// Saving
// ---------------------------------------------------------------------------------

var saveUsingSafari = false;

var startSaveArea = '<div id="' + 'storeArea">'; // Split up into two so that indexOf() of this source doesn't find it
var endSaveArea = '</d' + 'iv>';

// If there are unsaved changes, force the user to confirm before exitting
function confirmExit()
{
	hadConfirmExit = true;
	if((store && store.isDirty && store.isDirty()) || (story && story.areAnyDirty && story.areAnyDirty()))
		return config.messages.confirmExit;
}

// Give the user a chance to save changes before exitting
function checkUnsavedChanges()
{
	if(store && store.isDirty && store.isDirty() && window.hadConfirmExit === false)
		{
		if(confirm(config.messages.unsavedChangesWarning))
			saveChanges();
		}
}

function updateMarkupBlock(s,blockName,tiddlerName)
{
	return s.replaceChunk(
			"<!--%0-START-->".format([blockName]),
			"<!--%0-END-->".format([blockName]),
			"\n" + store.getRecursiveTiddlerText(tiddlerName,"") + "\n");
}

// Save this tiddlywiki with the pending changes
function saveChanges(onlyIfDirty)
{
	if(onlyIfDirty && !store.isDirty())
		return;
	clearMessage();
	// Get the URL of the document
	var originalPath = document.location.toString();
	// Check we were loaded from a file URL
	if(originalPath.substr(0,5) != "file:")
		{
		alert(config.messages.notFileUrlError);
		if(store.tiddlerExists(config.messages.saveInstructions))
			story.displayTiddler(null,config.messages.saveInstructions);
		return;
		}
	var localPath = getLocalPath(originalPath);
	// Load the original file
	var original = loadFile(localPath);
	if(original == null)
		{
		alert(config.messages.cantSaveError);
		if(store.tiddlerExists(config.messages.saveInstructions))
			story.displayTiddler(null,config.messages.saveInstructions);
		return;
		}
	// Locate the storeArea div's
	var posOpeningDiv = original.indexOf(startSaveArea);
	var limitClosingDiv = original.indexOf("<!--POST-BODY-START--"+">");
	var posClosingDiv = original.lastIndexOf(endSaveArea,limitClosingDiv == -1 ? original.length : limitClosingDiv);
	if((posOpeningDiv == -1) || (posClosingDiv == -1))
		{
		alert(config.messages.invalidFileError.format([localPath]));
		return;
		}
	// Save the backup
	if(config.options.chkSaveBackups)
		{
		var backupPath = getBackupPath(localPath);
		var backup = saveFile(backupPath,original);
		if(backup)
			displayMessage(config.messages.backupSaved,"file://" + backupPath);
		else
			alert(config.messages.backupFailed);
		}
	// Save Rss
	if(config.options.chkGenerateAnRssFeed)
		{
		var rssPath = localPath.substr(0,localPath.lastIndexOf(".")) + ".xml";
		var rssSave = saveFile(rssPath,convertUnicodeToUTF8(generateRss()));
		if(rssSave)
			displayMessage(config.messages.rssSaved,"file://" + rssPath);
		else
			alert(config.messages.rssFailed);
		}
	// Save empty template
	if(config.options.chkSaveEmptyTemplate)
		{
		var emptyPath,p;
		if((p = localPath.lastIndexOf("/")) != -1)
			emptyPath = localPath.substr(0,p) + "/empty.html";
		else if((p = localPath.lastIndexOf("\\")) != -1)
			emptyPath = localPath.substr(0,p) + "\\empty.html";
		else
			emptyPath = localPath + ".empty.html";
		var empty = original.substr(0,posOpeningDiv + startSaveArea.length) + original.substr(posClosingDiv);
		var emptySave = saveFile(emptyPath,empty);
		if(emptySave)
			displayMessage(config.messages.emptySaved,"file://" + emptyPath);
		else
			alert(config.messages.emptyFailed);
		}
	var save;
	try 
		{
		// Save new file
		var revised = original.substr(0,posOpeningDiv + startSaveArea.length) + "\n" +
					convertUnicodeToUTF8(store.allTiddlersAsHtml()) + "\n" +
					original.substr(posClosingDiv);
		var newSiteTitle = convertUnicodeToUTF8((wikifyPlain("SiteTitle") + " - " + wikifyPlain("SiteSubtitle")).htmlEncode());
		revised = revised.replaceChunk("<title"+">","</title"+">"," " + newSiteTitle + " ");
		revised = updateMarkupBlock(revised,"PRE-HEAD","MarkupPreHead");
		revised = updateMarkupBlock(revised,"POST-HEAD","MarkupPostHead");
		revised = updateMarkupBlock(revised,"PRE-BODY","MarkupPreBody");
		revised = updateMarkupBlock(revised,"POST-BODY","MarkupPostBody");
		save = saveFile(localPath,revised);
		}
	catch (e) 
		{
		showException(e);
		}
	if(save)
		{
		displayMessage(config.messages.mainSaved,"file://" + localPath);
		store.setDirty(false);
		}
	else
		alert(config.messages.mainFailed);
}

function getLocalPath(originalPath)
{
	// Remove any location or query part of the URL
	var argPos = originalPath.indexOf("?");
	if(argPos != -1)
		originalPath = originalPath.substr(0,argPos);
	var hashPos = originalPath.indexOf("#");
	if(hashPos != -1)
		originalPath = originalPath.substr(0,hashPos);
	// Convert file://localhost/ to file:///
	if(originalPath.indexOf("file://localhost/") == 0)
		originalPath = "file://" + originalPath.substr(16);
	// Convert to a native file format assuming
	// "file:///x:/path/path/path..." - pc local file --> "x:\path\path\path..."
	// "file://///server/share/path/path/path..." - FireFox pc network file --> "\\server\share\path\path\path..."
	// "file:///path/path/path..." - mac/unix local file --> "/path/path/path..."
	// "file://server/share/path/path/path..." - pc network file --> "\\server\share\path\path\path..."
	var localPath;
	if(originalPath.charAt(9) == ":") // pc local file
		localPath = unescape(originalPath.substr(8)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file://///") == 0) // FireFox pc network file
		localPath = "\\\\" + unescape(originalPath.substr(10)).replace(new RegExp("/","g"),"\\");
	else if(originalPath.indexOf("file:///") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(7));
	else if(originalPath.indexOf("file:/") == 0) // mac/unix local file
		localPath = unescape(originalPath.substr(5));
	else // pc network file
		localPath = "\\\\" + unescape(originalPath.substr(7)).replace(new RegExp("/","g"),"\\");
	return localPath;
}

function getBackupPath(localPath)
{
	var backSlash = true;
	var dirPathPos = localPath.lastIndexOf("\\");
	if(dirPathPos == -1)
		{
		dirPathPos = localPath.lastIndexOf("/");
		backSlash = false;
		}
	var backupFolder = config.options.txtBackupFolder;
	if(!backupFolder || backupFolder == "")
		backupFolder = ".";
	var backupPath = localPath.substr(0,dirPathPos) + (backSlash ? "\\" : "/") + backupFolder + localPath.substr(dirPathPos);
	backupPath = backupPath.substr(0,backupPath.lastIndexOf(".")) + "." + (new Date()).convertToYYYYMMDDHHMMSSMMM() + ".html";
	return backupPath;
}

function generateRss()
{
	var s = [];
	var d = new Date();
	var u = store.getTiddlerText("SiteUrl");
	// Assemble the header
	s.push("<" + "?xml version=\"1.0\"?" + ">");
	s.push("<rss version=\"2.0\">");
	s.push("<channel>");
	s.push("<title" + ">" + wikifyPlain("SiteTitle").htmlEncode() + "</title" + ">");
	if(u)
		s.push("<link>" + u.htmlEncode() + "</link>");
	s.push("<description>" + wikifyPlain("SiteSubtitle").htmlEncode() + "</description>");
	s.push("<language>en-us</language>");
	s.push("<copyright>Copyright " + d.getFullYear() + " " + config.options.txtUserName.htmlEncode() + "</copyright>");
	s.push("<pubDate>" + d.toGMTString() + "</pubDate>");
	s.push("<lastBuildDate>" + d.toGMTString() + "</lastBuildDate>");
	s.push("<docs>http://blogs.law.harvard.edu/tech/rss</docs>");
	s.push("<generator>TiddlyWiki " + version.major + "." + version.minor + "." + version.revision + "</generator>");
	// The body
	var tiddlers = store.getTiddlers("modified","excludeLists");
	var n = config.numRssItems > tiddlers.length ? 0 : tiddlers.length-config.numRssItems;
	for (var t=tiddlers.length-1; t>=n; t--)
		s.push(tiddlers[t].saveToRss(u));
	// And footer
	s.push("</channel>");
	s.push("</rss>");
	// Save it all
	return s.join("\n");
}


// UTF-8 encoding rules:
// 0x0000 - 0x007F:	0xxxxxxx
// 0x0080 - 0x07FF:	110xxxxx 10xxxxxx
// 0x0800 - 0xFFFF:	1110xxxx 10xxxxxx 10xxxxxx

function convertUTF8ToUnicode(u)
{
	if(window.netscape == undefined)
		return manualConvertUTF8ToUnicode(u);
	else
		return mozConvertUTF8ToUnicode(u);
}

function manualConvertUTF8ToUnicode(utf)
{
	var uni = utf;
	var src = 0;
	var dst = 0;
	var b1, b2, b3;
	var c;
	while(src < utf.length)
		{
		b1 = utf.charCodeAt(src++);
		if(b1 < 0x80)
			dst++;
		else if(b1 < 0xE0)
			{
			b2 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0x1F) << 6) | (b2 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
			}
		else
			{
			b2 = utf.charCodeAt(src++);
			b3 = utf.charCodeAt(src++);
			c = String.fromCharCode(((b1 & 0xF) << 12) | ((b2 & 0x3F) << 6) | (b3 & 0x3F));
			uni = uni.substring(0,dst++).concat(c,utf.substr(src));
			}
	}
	return(uni);
}

function mozConvertUTF8ToUnicode(u)
{
	try
		{
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
		}
	catch(e)
		{
		return manualConvertUTF8ToUnicode(u);
		} // fallback
	var s = converter.ConvertToUnicode(u);
	var fin = converter.Finish();
	return (fin.length > 0) ? s+fin : s;
}

function convertUnicodeToUTF8(s)
{
	if(window.netscape == undefined)
		return manualConvertUnicodeToUTF8(s);
	else
		return mozConvertUnicodeToUTF8(s);
}

function manualConvertUnicodeToUTF8(s)
{
	var re = /[^\u0000-\u007F]/g ;
	return s.replace(re, function($0) {return("&#" + $0.charCodeAt(0).toString() + ";");})
}

function mozConvertUnicodeToUTF8(s)
{
	try
		{
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var converter = Components.classes["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);
		converter.charset = "UTF-8";
		}
	catch(e)
		{
		return manualConvertUnicodeToUTF8(s);
		} // fallback
	var u = converter.ConvertFromUnicode(s);
	var fin = converter.Finish();
	if(fin.length > 0)
		return u + fin;
	else
		return u;
}

function saveFile(fileUrl, content)
{
	var r = null;
	if((r == null) || (r == false))
		r = mozillaSaveFile(fileUrl, content);
	if((r == null) || (r == false))
		r = ieSaveFile(fileUrl, content);
	if((r == null) || (r == false))
		r = javaSaveFile(fileUrl, content);
	return(r);
}

function loadFile(fileUrl)
{
	var r = null;
	if((r == null) || (r == false))
		r = mozillaLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = ieLoadFile(fileUrl);
	if((r == null) || (r == false))
		r = javaLoadFile(fileUrl);
	return(r);
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function ieSaveFile(filePath, content)
{
	try
		{
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		}
	catch(e)
		{
		//alert("Exception while attempting to save\n\n" + e.toString());
		return(null);
		}
	var file = fso.OpenTextFile(filePath,2,-1,0);
	file.Write(content);
	file.Close();
	return(true);
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function ieLoadFile(filePath)
{
	try
		{
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		var file = fso.OpenTextFile(filePath,1);
		var content = file.ReadAll();
		file.Close();
		}
	catch(e)
		{
		//alert("Exception while attempting to load\n\n" + e.toString());
		return(null);
		}
	return(content);
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function mozillaSaveFile(filePath, content)
{
	if(window.Components)
		try
			{
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if (!file.exists())
				file.create(0, 0664);
			var out = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
			out.init(file, 0x20 | 0x02, 00004,null);
			out.write(content, content.length);
			out.flush();
			out.close();
			return(true);
			}
		catch(e)
			{
			//alert("Exception while attempting to save\n\n" + e);
			return(false);
			}
	return(null);
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function mozillaLoadFile(filePath)
{
	if(window.Components)
		try
			{
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if (!file.exists())
				return(null);
			var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
			inputStream.init(file, 0x01, 00004, null);
			var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream);
			sInputStream.init(inputStream);
			return(sInputStream.read(sInputStream.available()));
			}
		catch(e)
			{
			//alert("Exception while attempting to load\n\n" + e);
			return(false);
			}
	return(null);
}

function javaUrlToFilename(url)
{
	var f = "//localhost";
	if(url.indexOf(f) == 0)
		return url.substring(f.length);
	var i = url.indexOf(":");
	if(i > 0)
		return url.substring(i-1);
	return url;
}

function javaSaveFile(filePath, content)
{
	try
		{
		if(document.applets["TiddlySaver"])
			return document.applets["TiddlySaver"].saveFile(javaUrlToFilename(filePath),"UTF-8",content);
		}
	catch(e)
		{
		}
	try
		{
		var s = new java.io.PrintStream(new java.io.FileOutputStream(javaUrlToFilename(filePath)));
		s.print(content);
		s.close();
		}
	catch(e)
		{
		return null;
		}
	return true;
}

function javaLoadFile(filePath)
{
	try
		{
	if(document.applets["TiddlySaver"])
		return String(document.applets["TiddlySaver"].loadFile(javaUrlToFilename(filePath),"UTF-8"));
		}
	catch(e)
		{
		}
	var content = [];
	try
		{
		var r = new java.io.BufferedReader(new java.io.FileReader(javaUrlToFilename(filePath)));
		var line;
		while ((line = r.readLine()) != null)
			content.push(new String(line));
		r.close();
		}
	catch(e)
		{
		return null;
		}
	return content.join("\n");
}


// ---------------------------------------------------------------------------------
// Remote HTTP requests
// ---------------------------------------------------------------------------------

// Load a file over http
//   url - the source url
//   callback - function to call when there's a response
//   params - parameter object that gets passed to the callback for storing it's state
// Return value is the underlying XMLHttpRequest object, or 'null' if there was an error
// Callback function is called like this:
//   callback(status,params,responseText,xhr)
//     status - true if OK, false if error
//     params - the parameter object provided to loadRemoteFile()
//     responseText - the text of the file
//     xhr - the underlying XMLHttpRequest object
function loadRemoteFile(url,callback,params)
{
	// Get an xhr object
	var x;
	try
		{
		x = new XMLHttpRequest(); // Modern
		}
	catch(e)
		{
		try
			{
			x = new ActiveXObject("Msxml2.XMLHTTP"); // IE 6
			}
		catch (e)
			{
			return null;
			}
		}
	// Install callback
	x.onreadystatechange = function()
		{
		if (x.readyState == 4)
			{
			if ((x.status == 0 || x.status == 200) && callback)
				{
				callback(true,params,x.responseText,url,x);
			}
			else
				callback(false,params,null,url,x);
			}
		}
	// Send request
	if(window.netscape && window.netscape.security && document.location.protocol.indexOf("http") == -1)
		window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
	try
		{
		url = url + (url.indexOf("?") < 0 ? "?" : "&") + "nocache=" + Math.random();
		x.open("GET",url,true);
		if (x.overrideMimeType)
			x.overrideMimeType("text/html");
		x.send(null);
		}
	catch (e)
		{
		alert("Error in send " + e);
		return null;
		}
	return x;
}
// ---------------------------------------------------------------------------------
// TiddlyWiki-specific utility functions
// ---------------------------------------------------------------------------------

function createTiddlyButton(theParent,theText,theTooltip,theAction,theClass,theId,theAccessKey)
{
	var theButton = document.createElement("a");
	if(theAction)
		{
		theButton.onclick = theAction;
		theButton.setAttribute("href","javascript:;");
		}
	if(theTooltip)
		theButton.setAttribute("title",theTooltip);
	if(theText)
		theButton.appendChild(document.createTextNode(theText));
	if(theClass)
		theButton.className = theClass;
	else
		theButton.className = "button";
	if(theId)
		theButton.id = theId;
	if(theParent)
		theParent.appendChild(theButton);
	if(theAccessKey)
		theButton.setAttribute("accessKey",theAccessKey);
	return(theButton);
}

function createTiddlyLink(place,title,includeText,theClass,isStatic)
{
	var text = includeText ? title : null;
	var i = getTiddlyLinkInfo(title,theClass)
	var btn;
	if(isStatic)
		btn = createExternalLink(place,"#" + title);
	else
		btn = createTiddlyButton(place,text,i.subTitle,onClickTiddlerLink,i.classes);
	btn.setAttribute("refresh","link");
	btn.setAttribute("tiddlyLink",title);
	return(btn);
}

function refreshTiddlyLink(e,title)
{
	var i = getTiddlyLinkInfo(title,e.className);
	e.className = i.classes;
	e.title = i.subTitle;
}

function getTiddlyLinkInfo(title,currClasses)
{
	var classes = currClasses ? currClasses.split(" ") : [];
	classes.pushUnique("tiddlyLink");
	var tiddler = store.fetchTiddler(title);
	var subTitle;
	if(tiddler)
		{
		subTitle = tiddler.getSubtitle();
		classes.pushUnique("tiddlyLinkExisting");
		classes.remove("tiddlyLinkNonExisting");
		classes.remove("shadow");
		}
	else
		{
		classes.remove("tiddlyLinkExisting");
		classes.pushUnique("tiddlyLinkNonExisting");
		if(store.isShadowTiddler(title))
			{
			subTitle = config.messages.shadowedTiddlerToolTip.format([title]);
			classes.pushUnique("shadow");
			}
		else
			{
			subTitle = config.messages.undefinedTiddlerToolTip.format([title]);
			classes.remove("shadow");
			}
		}
	return {classes: classes.join(" "), subTitle: subTitle};
}

function createExternalLink(place,url)
{
	var theLink = document.createElement("a");
	theLink.className = "externalLink";
	theLink.href = url;
	theLink.title = config.messages.externalLinkTooltip.format([url]);
	if(config.options.chkOpenInNewWindow)
		theLink.target = "_blank";
	place.appendChild(theLink);
	return(theLink);
}

// Event handler for clicking on a tiddly link
function onClickTiddlerLink(e)
{
	if (!e) var e = window.event;
	var theTarget = resolveTarget(e);
	var theLink = theTarget;
	var title = null;
	do {
		title = theLink.getAttribute("tiddlyLink");
		theLink = theLink.parentNode;
	} while(title == null && theLink != null);
	if(title)
		{
		var toggling = e.metaKey || e.ctrlKey;
		if(config.options.chkToggleLinks)
			toggling = !toggling;
		var opening;
		if(toggling && document.getElementById("tiddler" + title))
			story.closeTiddler(title,true,e.shiftKey || e.altKey);
		else
			story.displayTiddler(theTarget,title,null,true,e.shiftKey || e.altKey);
		}
	clearMessage();
	return(false);
}

// Create a button for a tag with a popup listing all the tiddlers that it tags
function createTagButton(place,tag,excludeTiddler)
{
	var theTag = createTiddlyButton(place,tag,config.views.wikified.tag.tooltip.format([tag]),onClickTag);
	theTag.setAttribute("tag",tag);
	if(excludeTiddler)
		theTag.setAttribute("tiddler",excludeTiddler);
	return(theTag);
}

// Event handler for clicking on a tiddler tag
function onClickTag(e)
{
	if (!e) var e = window.event;
	var theTarget = resolveTarget(e);
	var popup = Popup.create(this);
	var tag = this.getAttribute("tag");
	var title = this.getAttribute("tiddler");
	if(popup && tag)
		{
		var tagged = store.getTaggedTiddlers(tag);
		var titles = [];
		var li,r;
		for(r=0;r<tagged.length;r++)
			if(tagged[r].title != title)
				titles.push(tagged[r].title);
		var lingo = config.views.wikified.tag;
		if(titles.length > 0)
			{
			var openAll = createTiddlyButton(createTiddlyElement(popup,"li"),lingo.openAllText.format([tag]),lingo.openAllTooltip,onClickTagOpenAll);
			openAll.setAttribute("tag",tag);
			createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
			for(r=0; r<titles.length; r++)
				{
				createTiddlyLink(createTiddlyElement(popup,"li"),titles[r],true);
				}
			}
		else
			createTiddlyText(createTiddlyElement(popup,"li",null,"disabled"),lingo.popupNone.format([tag]));
		createTiddlyElement(createTiddlyElement(popup,"li",null,"listBreak"),"div");
		var h = createTiddlyLink(createTiddlyElement(popup,"li"),tag,false);
		createTiddlyText(h,lingo.openTag.format([tag]));
		}
	Popup.show(popup,false);
	e.cancelBubble = true;
	if (e.stopPropagation) e.stopPropagation();
	return(false);
}

// Event handler for 'open all' on a tiddler popup
function onClickTagOpenAll(e)
{
	if (!e) var e = window.event;
	var tag = this.getAttribute("tag");
	var tagged = store.getTaggedTiddlers(tag);
	var titles = [];
	for(var t=0; t<tagged.length; t++)
		titles.push(tagged[t].title);
	story.displayTiddlers(this,titles);
	return(false);
}

function onClickError(e)
{
	if (!e) var e = window.event;
	var popup = Popup.create(this);
	var lines = this.getAttribute("errorText").split("\n");
	for(var t=0; t<lines.length; t++)
		createTiddlyElement(popup,"li",null,null,lines[t]);
	Popup.show(popup,false);
	e.cancelBubble = true;
	if (e.stopPropagation) e.stopPropagation();
	return false;
}

function createTiddlyDropDown(place,onchange,options)
{
	var sel = createTiddlyElement(place,"select");
	sel.onchange = onchange;
	for(var t=0; t<options.length; t++)
		{
		var e = createTiddlyElement(sel,"option",null,null,options[t].caption);
		e.value = options[t].name;
		}
}

function createTiddlyError(place,title,text)
{
	var btn = createTiddlyButton(place,title,null,onClickError,"errorButton");
	if (text) btn.setAttribute("errorText",text);
}

function merge(dst,src,preserveExisting)
{
	for (p in src)
		if (!preserveExisting || dst[p] === undefined)
			dst[p] = src[p];
	return dst;
}

// Returns a string containing the description of an exception, optionally prepended by a message
function exceptionText(e, message)
{
	var s = e.description ? e.description : e.toString();
	return message ? "%0:\n%1".format([message, s]) : s;
}

// Displays an alert of an exception description with optional message
function showException(e, message)
{
	alert(exceptionText(e, message));
}

// ---------------------------------------------------------------------------------
// Animation engine
// ---------------------------------------------------------------------------------

function Animator()
{
	this.running = 0; // Incremented at start of each animation, decremented afterwards. If zero, the interval timer is disabled
	this.timerID = 0; // ID of the timer used for animating
	this.animations = []; // List of animations in progress
	return this;
}

// Start animation engine
Animator.prototype.startAnimating = function() // Variable number of arguments
{
	for(var t=0; t<arguments.length; t++)
		this.animations.push(arguments[t]);
	if(this.running == 0)
		{
		var me = this;
		this.timerID = window.setInterval(function() {me.doAnimate(me);},5);
		}
	this.running += arguments.length;
}

// Perform an animation engine tick, calling each of the known animation modules
Animator.prototype.doAnimate = function(me)
{
	var a = 0;
	while(a < me.animations.length)
		{
		var animation = me.animations[a];
		if(animation.tick())
			a++;
		else
			{
			me.animations.splice(a,1);
			if(--me.running == 0)
				window.clearInterval(me.timerID);
			}
		}
}

// Map a 0..1 value to 0..1, but slow down at the start and end
Animator.slowInSlowOut = function(progress)
{
	return(1-((Math.cos(progress * Math.PI)+1)/2));
}

// ---------------------------------------------------------------------------------
// Cascade animation
// ---------------------------------------------------------------------------------

function Cascade(text,startElement,targetElement,slowly)
{
	var winWidth = findWindowWidth();
	var winHeight = findWindowHeight();
	this.elements = [];
	this.startElement = startElement;
	this.startLeft = findPosX(this.startElement);
	this.startTop = findPosY(this.startElement);
	this.startWidth = Math.min(this.startElement.offsetWidth,winWidth);
	this.startHeight = Math.min(this.startElement.offsetHeight,winHeight);
	this.targetElement = targetElement;
	targetElement.style.position = "relative";
	targetElement.style.zIndex = 2;
	this.targetLeft = findPosX(this.targetElement);
	this.targetTop = findPosY(this.targetElement);
	this.targetWidth = Math.min(this.targetElement.offsetWidth,winWidth);
	this.targetHeight = Math.min(this.targetElement.offsetHeight,winHeight);
	this.progress = -1;
	this.steps = slowly ? config.cascadeSlow : config.cascadeFast;
	this.text = text;
	this.tick();
	return this;
}

Cascade.prototype.tick = function()
{
	this.progress++;
	if(this.progress >= this.steps)
		{
		while(this.elements.length > 0)
			this.removeTail();
		this.targetElement.style.position = "static";
		this.targetElement.style.zIndex = "";
		return false;
		}
	else
		{
		if(this.elements.length > 0 && this.progress > config.cascadeDepth)
			this.removeTail();
		if(this.progress < (this.steps - config.cascadeDepth))
			{
			var f = Animator.slowInSlowOut(this.progress/(this.steps - config.cascadeDepth - 1));
			var e = createTiddlyElement(document.body,"div",null,"cascade",this.text);
			e.style.zIndex = 1;
			e.style.left = this.startLeft + (this.targetLeft-this.startLeft) * f + "px";
			e.style.top = this.startTop + (this.targetTop-this.startTop) * f + "px";
			e.style.width = this.startWidth + (this.targetWidth-this.startWidth) * f + "px";
			e.style.height = this.startHeight + (this.targetHeight-this.startHeight) * f + "px";
			e.style.display = "block";
			this.elements.push(e);
			}
		return true;
		}
}

Cascade.prototype.removeTail = function()
{
	var e = this.elements[0];
	e.parentNode.removeChild(e);
	this.elements.shift();
}

// ---------------------------------------------------------------------------------
// Scroller animation
// ---------------------------------------------------------------------------------

function Scroller(targetElement,slowly)
{
	this.targetElement = targetElement;
	this.startScroll = findScrollY();
	this.targetScroll = ensureVisible(targetElement);
	this.progress = 0;
	this.step = slowly ? config.animSlow : config.animFast;
	return this;
}

Scroller.prototype.tick = function()
{
	this.progress += this.step;
	if(this.progress > 1)
		{
		window.scrollTo(0,this.targetScroll);
		return false;
		}
	else
		{
		var f = Animator.slowInSlowOut(this.progress);
		window.scrollTo(0,this.startScroll + (this.targetScroll-this.startScroll) * f);
		return true;
		}
}

// ---------------------------------------------------------------------------------
// Slider animation
// ---------------------------------------------------------------------------------

// deleteMode - "none", "all" [delete target element and it's children], [only] "children" [but not the target element]
function Slider(element,opening,slowly,deleteMode)
{
	this.element = element;
	element.style.display = "block";
	this.deleteMode = deleteMode;
	this.element.style.height = "auto";
	this.realHeight = element.offsetHeight;
	this.opening = opening;
	this.step = slowly ? config.animSlow : config.animFast;
	if(opening)
		{
		this.progress = 0;
		element.style.height = "0px";
		element.style.display = "block";
		}
	else
		{
		this.progress = 1;
		this.step = -this.step;
		}
	element.style.overflow = "hidden";
	return this;
}

Slider.prototype.stop = function()
{
	if(this.opening)
		{
		this.element.style.height = "auto";
		this.element.style.opacity = 1;
		this.element.style.filter = "alpha(opacity:100)";
		}
	else
		{
		switch(this.deleteMode)
			{
			case "none":
				this.element.style.display = "none";
				break;
			case "all":
				this.element.parentNode.removeChild(this.element);
				break;
			case "children":
				removeChildren(this.element);
				break;
			}
		}
}

Slider.prototype.tick = function()
{
	this.progress += this.step;
	if(this.progress < 0 || this.progress > 1)
		{
		this.stop();
		return false;
		}
	else
		{
		var f = Animator.slowInSlowOut(this.progress);
		var h = this.realHeight * f;
		this.element.style.height = h + "px";
		this.element.style.opacity = f;
		this.element.style.filter = "alpha(opacity:" + f * 100 +")";
		return true;
		}
}

// ---------------------------------------------------------------------------------
// Popup menu
// ---------------------------------------------------------------------------------

var Popup = {
	stack: [] // Array of objects with members root: and popup:
	};

Popup.create = function(root)
{
	Popup.remove();
	var popup = createTiddlyElement(document.body,"ol","popup","popup");
	Popup.stack.push({root: root, popup: popup});
	return popup;
}

Popup.onDocumentClick = function(e)
{
	if (!e) var e = window.event;
	var target = resolveTarget(e);
	if(e.eventPhase == undefined)
		Popup.remove();
	else if(e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET)
		Popup.remove();
	return true;
}

Popup.show = function(unused,slowly)
{
	var curr = Popup.stack[Popup.stack.length-1];
	var rootLeft = findPosX(curr.root);
	var rootTop = findPosY(curr.root);
	var rootHeight = curr.root.offsetHeight;
	var popupLeft = rootLeft;
	var popupTop = rootTop + rootHeight;
	var popupWidth = curr.popup.offsetWidth;
	var winWidth = findWindowWidth();
	if(popupLeft + popupWidth > winWidth)
		popupLeft = winWidth - popupWidth;
	curr.popup.style.left = popupLeft + "px";
	curr.popup.style.top = popupTop + "px";
	curr.popup.style.display = "block";
	addClass(curr.root,"highlight");
	if(anim && config.options.chkAnimate)
		anim.startAnimating(new Scroller(curr.popup,slowly));
	else
		window.scrollTo(0,ensureVisible(curr.popup));
}

Popup.remove = function()
{
	if(Popup.stack.length > 0)
		{
		Popup.removeFrom(0);
		}
}

Popup.removeFrom = function(from)
{
	for(var t=Popup.stack.length-1; t>=from; t--)
		{
		var p = Popup.stack[t];
		removeClass(p.root,"highlight");
		p.popup.parentNode.removeChild(p.popup);
		}
	Popup.stack = Popup.stack.slice(0,from);
}

// ---------------------------------------------------------------------------------
// ListView gadget
// ---------------------------------------------------------------------------------

var ListView = {};

// Create a listview
//   place - where in the DOM tree to insert the listview
//   listObject - array of objects to be included in the listview
//   listTemplate - template for the listview
//   callback - callback for a command being selected
//   className - optional classname for the <table> element
ListView.create = function(place,listObject,listTemplate,callback,className)
{
	var table = createTiddlyElement(place,"table",null,className ? className : "listView");
	var thead = createTiddlyElement(table,"thead");
	var r = createTiddlyElement(thead,"tr");
	for(var t=0; t<listTemplate.columns.length; t++)
		{
		var columnTemplate = listTemplate.columns[t];
		var c = createTiddlyElement(r,"th");
		var colType = ListView.columnTypes[columnTemplate.type];
		if(colType && colType.createHeader)
			colType.createHeader(c,columnTemplate,t);
		}
	var tbody = createTiddlyElement(table,"tbody");
	for(var rc=0; rc<listObject.length; rc++)
		{
		rowObject = listObject[rc];
		r = createTiddlyElement(tbody,"tr");
		for(var c=0; c<listTemplate.rowClasses.length; c++)
			{
			if(rowObject[listTemplate.rowClasses[c].field])
				addClass(r,listTemplate.rowClasses[c].className);
			}
		rowObject.rowElement = rowObject;
		rowObject.colElements = {};
		for(var cc=0; cc<listTemplate.columns.length; cc++)
			{
			var c = createTiddlyElement(r,"td");
			var columnTemplate = listTemplate.columns[cc];
			var field = columnTemplate.field;
			var colType = ListView.columnTypes[columnTemplate.type];
			if(colType && colType.createItem)
				colType.createItem(c,rowObject,field,columnTemplate,cc,rc);
			rowObject.colElements[field] = c;
			}
		}
	if(callback && listTemplate.actions)
		createTiddlyDropDown(place,ListView.getCommandHandler(callback),listTemplate.actions);
	if(callback && listTemplate.buttons)
		{
		for(t=0; t<listTemplate.buttons.length; t++)
			{
			var a = listTemplate.buttons[t];
			if(a && a.name != "")
				createTiddlyButton(place,a.caption,null,ListView.getCommandHandler(callback,a.name,a.allowEmptySelection));
			}
		}
	return table;
}

ListView.getCommandHandler = function(callback,name,allowEmptySelection)
{
	return function(e)
		{
		var view = findRelated(this,"TABLE",null,"previousSibling");
		var tiddlers = [];
		ListView.forEachSelector(view,function(e,rowName) {
					if(e.checked)
						tiddlers.push(rowName);
					});
		if(tiddlers.length == 0 && !allowEmptySelection)
			alert(config.messages.nothingSelected);
		else
			{
			if(this.nodeName.toLowerCase() == "select")
				{
				callback(view,this.value,tiddlers);
				this.selectedIndex = 0;
				}
			else
				callback(view,name,tiddlers);
			}
		};
}

// Invoke a callback for each selector checkbox in the listview
//   view - <table> element of listView
//   callback(checkboxElement,rowName)
//     where
//       checkboxElement - DOM element of checkbox
//       rowName - name of this row as assigned by the column template
//   result: true if at least one selector was checked
ListView.forEachSelector = function(view,callback)
{
	var checkboxes = view.getElementsByTagName("input");
	var hadOne = false;
	for(var t=0; t<checkboxes.length; t++)
		{
		var cb = checkboxes[t];
		if(cb.getAttribute("type") == "checkbox")
			{
			var rn = cb.getAttribute("rowName");
			if(rn)
				{
				callback(cb,rn);
				hadOne = true;
				}
			}
		}
	return hadOne;
}

ListView.columnTypes = {};

ListView.columnTypes.String = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyText(place,columnTemplate.title);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v);
		}
};

ListView.columnTypes.Date = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				createTiddlyText(place,v.formatString(columnTemplate.dateFormat));
		}
};

ListView.columnTypes.StringList = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				{
				for(var t=0; t<v.length; t++)
					{
					createTiddlyText(place,v[t]);
					createTiddlyElement(place,"br");
					}
				}
		}
};

ListView.columnTypes.Selector = {
	createHeader: function(place,columnTemplate,col)
		{
			createTiddlyCheckbox(place,null,false,this.onHeaderChange);
		},
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],null);
			e.setAttribute("rowName",listObject[columnTemplate.rowName]);
		},
	onHeaderChange: function(e)
		{
			var state = this.checked;
			var view = findRelated(this,"TABLE");
			if(!view)
				return;
			ListView.forEachSelector(view,function(e,rowName) {
								e.checked = state;
							});
		}
};

ListView.columnTypes.Tags = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var tags = listObject[field];
			createTiddlyText(place,String.encodeTiddlyLinkList(tags));
		}
};

ListView.columnTypes.Boolean = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			if(listObject[field] == true)
				createTiddlyText(place,columnTemplate.trueText);
			if(listObject[field] == false)
				createTiddlyText(place,columnTemplate.falseText);
		}
};

ListView.columnTypes.TagCheckbox = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var e = createTiddlyCheckbox(place,null,listObject[field],this.onChange);
			e.setAttribute("tiddler",listObject.title);
			e.setAttribute("tag",columnTemplate.tag);
		},
	onChange : function(e)
		{
			var tag = this.getAttribute("tag");
			var tiddler = this.getAttribute("tiddler");
			store.setTiddlerTag(tiddler,this.checked,tag);
		}
};

ListView.columnTypes.TiddlerLink = {
	createHeader: ListView.columnTypes.String.createHeader,
	createItem: function(place,listObject,field,columnTemplate,col,row)
		{
			var v = listObject[field];
			if(v != undefined)
				{
				var link = createTiddlyLink(place,listObject[columnTemplate.tiddlerLink],false,null);
				createTiddlyText(link,listObject[field]);
				}
		}
};
// ---------------------------------------------------------------------------------
// Augmented methods for the JavaScript Number(), Array(), String() and Date() objects
// ---------------------------------------------------------------------------------

// Clamp a number to a range
Number.prototype.clamp = function(min,max)
{
	var c = this;
	if(c < min)
		c = min;
	if(c > max)
		c = max;
	return c;
}

// Add indexOf function if browser does not support it
if(!Array.prototype.indexOf) {
Array.prototype.indexOf = function(item,from)
{
	if(!from)
		from = 0;
	for(var i=from; i<this.length; i++)
		if(this[i] === item)
			return i;
	return -1;
}}

// Find an entry in a given field of the members of an array
if(!Array.prototype.findByField) {
Array.prototype.findByField = function(field,value)
{
	for(var t=0; t<this.length; t++)
		if(this[t][field] == value)
			return t;
	return null;
}}

// Return whether an entry exists in an array
Array.prototype.contains = function(item)
{
	return this.indexOf(item) != -1;
};

// Adds, removes or toggles a particular value within an array
//  value - value to add
//  mode - +1 to add value, -1 to remove value, 0 to toggle it
Array.prototype.setItem = function(value,mode)
{
	var p = this.indexOf(value);
	if(mode == 0)
		mode = (p == -1) ? +1 : -1;
	if(mode == +1)
		{
		if(p == -1)
			this.push(value);
		}
	else if(mode == -1)
		{
		if(p != -1)
			this.splice(p,1);
		}
}

// Return whether one of a list of values exists in an array
Array.prototype.containsAny = function(items)
{
	for(var i=0; i<items.length; i++)
		if (this.indexOf(items[i]) != -1)
			return true;
	return false;
};

// Return whether all of a list of values exists in an array
Array.prototype.containsAll = function(items)
{
	for (var i = 0; i<items.length; i++)
		if (this.indexOf(items[i]) == -1)
			return false;
	return true;
};

// Push a new value into an array only if it is not already present in the array. If the optional unique parameter is false, it reverts to a normal push
Array.prototype.pushUnique = function(item,unique)
{
	if(unique != undefined && unique == false)
		this.push(item);
	else
		{
		if(this.indexOf(item) == -1)
			this.push(item);
		}
}

Array.prototype.remove = function(item)
{
	var p = this.indexOf(item);
	if(p != -1)
		this.splice(p,1);
}

// Get characters from the right end of a string
String.prototype.right = function(n)
{
	if(n < this.length)
		return this.slice(this.length-n);
	else
		return this;
}

// Trim whitespace from both ends of a string if browser does not support it
if(!String.prototype.trim) {
String.prototype.trim = function()
{
	return this.replace(/^\s*|\s*$/g,"");
}}

// Convert a string from a CSS style property name to a JavaScript style name ("background-color" -> "backgroundColor")
String.prototype.unDash = function()
{
	var s = this.split("-");
	if(s.length > 1)
		for(var t=1; t<s.length; t++)
			s[t] = s[t].substr(0,1).toUpperCase() + s[t].substr(1);
	return s.join("");
}

// Substitute substrings from an array into a format string that includes '%1'-type specifiers
String.prototype.format = function(substrings)
{
	var subRegExp = /(?:%(\d+))/mg;
	var currPos = 0;
	var r = [];
	do {
		var match = subRegExp.exec(this);
		if(match && match[1])
			{
			if(match.index > currPos)
				r.push(this.substring(currPos,match.index));
			r.push(substrings[parseInt(match[1])]);
			currPos = subRegExp.lastIndex;
			}
	} while(match);
	if(currPos < this.length)
		r.push(this.substring(currPos,this.length));
	return r.join("");
}

// Escape any special RegExp characters with that character preceded by a backslash
String.prototype.escapeRegExp = function()
{
	var s = "\\^$*+?()=!|,{}[].";
	var c = this;
	for(var t=0; t<s.length; t++)
		c = c.replace(new RegExp("\\" + s.substr(t,1),"g"),"\\" + s.substr(t,1));
	return c;
}

// Convert "\" to "\s", newlines to "\n" (and remove carriage returns)
String.prototype.escapeLineBreaks = function()
{
	return this.replace(/\\/mg,"\\s").replace(/\n/mg,"\\n").replace(/\r/mg,"");
}

// Convert "\n" to newlines, "\b" to " ", "\s" to "\" (and remove carriage returns)
String.prototype.unescapeLineBreaks = function()
{
	return this.replace(/\\n/mg,"\n").replace(/\\b/mg," ").replace(/\\s/mg,"\\").replace(/\r/mg,"");
}

// Convert & to "&amp;", < to "&lt;", > to "&gt;" and " to "&quot;"
String.prototype.htmlEncode = function()
{
	return(this.replace(/&/mg,"&amp;").replace(/</mg,"&lt;").replace(/>/mg,"&gt;").replace(/\"/mg,"&quot;"));
}

// Convert "&amp;" to &, "&lt;" to <, "&gt;" to > and "&quot;" to "
String.prototype.htmlDecode = function()
{
	return(this.replace(/&amp;/mg,"&").replace(/&lt;/mg,"<").replace(/&gt;/mg,">").replace(/&quot;/mg,"\""));
}

// Parse a space-separated string of name:value parameters where:
//   - the name or the value can be optional (in which case separate defaults are used instead)
//     - in case of ambiguity, a lone word is taken to be a value
//     - if 'cascadeDefaults' is set to true, then the defaults are modified by updated by each specified name or value
//     - name prefixes are not allowed if the 'noNames' parameter is true
//   - if both the name and value are present they must be separated by a colon
//   - the name and the value may both be quoted with single- or double-quotes, double-square brackets
//   - names or values quoted with {{double-curly braces}} are evaluated as a JavaScript expression
//     - as long as the 'allowEval' parameter is true
// The result is an array of objects:
//   result[0] = object with a member for each parameter name, value of that member being an array of values
//   result[1..n] = one object for each parameter, with 'name' and 'value' members
String.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)
{
	var parseToken = function(match,p)
		{
		var n;
		if(match[p]) // Double quoted
			n = match[p];
		else if(match[p+1]) // Single quoted
			n = match[p+1];
		else if(match[p+2]) // Double-square-bracket quoted
			n = match[p+2];
		else if(match[p+3]) // Double-brace quoted
			try
				{
				n = match[p+3];
				if(allowEval)
					n = window.eval(n);
				}
			catch(e)
				{
				throw "Unable to evaluate {{" + match[p+3] + "}}: " + exceptionText(e);
				}
		else if(match[p+4]) // Unquoted
			n = match[p+4];
		else if(match[p+5]) // empty quote
			n = "";
		return n;
		};
	var r = [{}];
	var dblQuote = "(?:\"((?:(?:\\\\\")|[^\"])+)\")";
	var sngQuote = "(?:'((?:(?:\\\\\')|[^'])+)')";
	var dblSquare = "(?:\\[\\[((?:\\s|\\S)*?)\\]\\])";
	var dblBrace = "(?:\\{\\{((?:\\s|\\S)*?)\\}\\})";
	var unQuoted = noNames ? "([^\"'\\s]\\S*)" : "([^\"':\\s][^\\s:]*)";
	var emptyQuote = "((?:\"\")|(?:''))";
	var skipSpace = "(?:\\s*)";
	var token = "(?:" + dblQuote + "|" + sngQuote + "|" + dblSquare + "|" + dblBrace + "|" + unQuoted + "|" + emptyQuote + ")";
	var re = noNames
		? new RegExp(token,"mg")
		: new RegExp(skipSpace + token + skipSpace + "(?:(\\:)" + skipSpace + token + ")?","mg");
	var params = [];
	do {
		var match = re.exec(this);
		if(match)
			{
			var n = parseToken(match,1);
			if(noNames)
				r.push({name: "", value: n});
			else
				{
				var v = parseToken(match,8);
				if(v == null && defaultName)
					{
					v = n;
					n = defaultName;
					}
				else if(v == null && defaultValue)
					v = defaultValue;
				r.push({name: n, value: v});
				if(cascadeDefaults)
					{
					defaultName = n;
					defaultValue = v;
					}
				}
			}
	} while(match);
	// Summarise parameters into first element
	for(var t=1; t<r.length; t++)
		{
		if(r[0][r[t].name])
			r[0][r[t].name].push(r[t].value);
		else
			r[0][r[t].name] = [r[t].value];
		}
	return r;
}

// Process a string list of macro parameters into an array. Parameters can be quoted with "", '',
// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in
// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.
String.prototype.readMacroParams = function()
{
	var p = this.parseParams("list",null,true,true);
	var n = [];
	for(var t=1; t<p.length; t++)
		n.push(p[t].value);
	return n;
}

// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]
String.prototype.readBracketedList = function(unique)
{
	var p = this.parseParams("list",null,false,true);
	var n = [];
	for(var t=1; t<p.length; t++)
		n.pushUnique(p[t].value,unique);
	return n;
}

// Returns array with start and end index of chunk between given start and end marker, or undefined.
String.prototype.getChunkRange = function(start,end) 
{
	var s = this.indexOf(start);
	if(s != -1)
		{
		s += start.length;
		var e = this.indexOf(end,s);
		if(e != -1)
			return [s, e];
		}
}

// Replace a chunk of a string given start and end markers
String.prototype.replaceChunk = function(start,end,sub)
{
	var r = this.getChunkRange(start,end);
	return r 
		? this.substring(0,r[0]) + sub + this.substring(r[1])
		: this;
}

// Returns a chunk of a string between start and end markers, or undefined
String.prototype.getChunk = function(start,end)
{
	var r = this.getChunkRange(start,end);
	if (r)
		return this.substring(r[0],r[1]);
}


// Static method to bracket a string with double square brackets if it contains a space
String.encodeTiddlyLink = function(title)
{
	if(title.indexOf(" ") == -1)
		return(title);
	else
		return("[[" + title + "]]");
}

// Static method to encodeTiddlyLink for every item in an array and join them with spaces
String.encodeTiddlyLinkList = function(list)
{
	if(list)
		{
		var results = [];
		for(var t=0; t<list.length; t++)
			results.push(String.encodeTiddlyLink(list[t]));
		return results.join(" ");
		}
	else
		return "";
}

// Static method to left-pad a string with 0s to a certain width
String.zeroPad = function(n,d)
{
	var s = n.toString();
	if(s.length < d)
		s = "000000000000000000000000000".substr(0,d-s.length) + s;
	return(s);
}

String.prototype.startsWith = function(prefix) 
{
	return !prefix || this.substring(0,prefix.length) == prefix;
}

// Returns the first value of the given named parameter.
//#
//# @param params
//#         as returned by parseParams or null/undefined
//# @return [may be null/undefined]
//#
function getParam(params, name, defaultValue) {
	if (!params)
		return defaultValue;
	var p = params[0][name];
	return p ? p[0] : defaultValue;
}

// Returns the first value of the given boolean named parameter.
//#
//# @param params
//#         as returned by parseParams or null/undefined
//#
function getFlag(params, name, defaultValue) {
	return !!getParam(params, name, defaultValue);
} 
	
// Substitute date components into a string
Date.prototype.formatString = function(template)
{
	var t = template.replace(/0hh12/g,String.zeroPad(this.getHours12(),2));
	t = t.replace(/hh12/g,this.getHours12());
	t = t.replace(/0hh/g,String.zeroPad(this.getHours(),2));
	t = t.replace(/hh/g,this.getHours());
	t = t.replace(/0mm/g,String.zeroPad(this.getMinutes(),2));
	t = t.replace(/mm/g,this.getMinutes());
	t = t.replace(/0ss/g,String.zeroPad(this.getSeconds(),2));
	t = t.replace(/ss/g,this.getSeconds());
	t = t.replace(/[ap]m/g,this.getAmPm().toLowerCase());
	t = t.replace(/[AP]M/g,this.getAmPm().toUpperCase());
	t = t.replace(/wYYYY/g,this.getYearForWeekNo());
	t = t.replace(/wYY/g,String.zeroPad(this.getYearForWeekNo()-2000,2));
	t = t.replace(/YYYY/g,this.getFullYear());
	t = t.replace(/YY/g,String.zeroPad(this.getFullYear()-2000,2));
	t = t.replace(/MMM/g,config.messages.dates.months[this.getMonth()]);
	t = t.replace(/mmm/g,config.messages.dates.shortMonths[this.getMonth()]);
	t = t.replace(/0MM/g,String.zeroPad(this.getMonth()+1,2));
	t = t.replace(/MM/g,this.getMonth()+1);
	t = t.replace(/0WW/g,String.zeroPad(this.getWeek(),2));
	t = t.replace(/WW/g,this.getWeek());
	t = t.replace(/DDD/g,config.messages.dates.days[this.getDay()]);
	t = t.replace(/ddd/g,config.messages.dates.shortDays[this.getDay()]);
	t = t.replace(/0DD/g,String.zeroPad(this.getDate(),2));
	t = t.replace(/DDth/g,this.getDate()+this.daySuffix());
	t = t.replace(/DD/g,this.getDate());
	return t;
}

Date.prototype.getWeek = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if (d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week to calculate weekNo
	var n = Math.floor((dt.getTime()-new Date(dt.getFullYear(),0,1)+3600000)/86400000); 
	return Math.floor(n/7)+1;
}

Date.prototype.getYearForWeekNo = function()
{
	var dt = new Date(this.getTime());
	var d = dt.getDay();
	if (d==0) d=7;// JavaScript Sun=0, ISO Sun=7
	dt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week
	return dt.getFullYear();
}

Date.prototype.getHours12 = function()
{
	var h = this.getHours();
	return h > 12 ? h-12 : ( h > 0 ? h : 12 );
}

Date.prototype.getAmPm = function()
{
	return this.getHours() >= 12 ? "pm" : "am";
}

Date.prototype.daySuffix = function()
{
	var num = this.getDate();
	if (num >= 11 && num <= 13) return "th";
	else if (num.toString().substr(-1)=="1") return "st";
	else if (num.toString().substr(-1)=="2") return "nd";
	else if (num.toString().substr(-1)=="3") return "rd";
	return "th";
}

// Convert a date to local YYYYMMDDHHMM string format
Date.prototype.convertToLocalYYYYMMDDHHMM = function()
{
	return(String.zeroPad(this.getFullYear(),4) + String.zeroPad(this.getMonth()+1,2) + String.zeroPad(this.getDate(),2) + String.zeroPad(this.getHours(),2) + String.zeroPad(this.getMinutes(),2));
}

// Convert a date to UTC YYYYMMDDHHMM string format
Date.prototype.convertToYYYYMMDDHHMM = function()
{
	return(String.zeroPad(this.getUTCFullYear(),4) + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2));
}

// Convert a date to UTC YYYYMMDD.HHMMSSMMM string format
Date.prototype.convertToYYYYMMDDHHMMSSMMM = function()
{
	return(String.zeroPad(this.getUTCFullYear(),4) + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + "." + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2) + String.zeroPad(this.getUTCSeconds(),2) + String.zeroPad(this.getUTCMilliseconds(),4));
}

// Static method to create a date from a UTC YYYYMMDDHHMM format string
Date.convertFromYYYYMMDDHHMM = function(d)
{
	var theDate = new Date(Date.UTC(parseInt(d.substr(0,4),10),
							parseInt(d.substr(4,2),10)-1,
							parseInt(d.substr(6,2),10),
							parseInt(d.substr(8,2),10),
							parseInt(d.substr(10,2),10),0,0));
	return(theDate);
}

// ---------------------------------------------------------------------------------
// Crypto functions and associated conversion routines
// ---------------------------------------------------------------------------------

// Crypto "namespace"
function Crypto() {}

// Convert a string to an array of big-endian 32-bit words
Crypto.strToBe32s = function(str)
{
	var be = Array();
	var len = Math.floor(str.length/4);
	var i, j;
	for(i=0, j=0; i<len; i++, j+=4)
		{
		be[i] = ((str.charCodeAt(j)&0xff) << 24)|((str.charCodeAt(j+1)&0xff) << 16)|((str.charCodeAt(j+2)&0xff) << 8)|(str.charCodeAt(j+3)&0xff);
		}
	while (j<str.length)
		{
		be[j>>2] |= (str.charCodeAt(j)&0xff)<<(24-(j*8)%32);
		j++;
		}
	return be;
}

// Convert an array of big-endian 32-bit words to a string
Crypto.be32sToStr = function(be)
{
	var str = "";
	for(var i=0;i<be.length*32;i+=8)
		str += String.fromCharCode((be[i>>5]>>>(24-i%32)) & 0xff);
	return str;
}

// Convert an array of big-endian 32-bit words to a hex string
Crypto.be32sToHex = function(be)
{
	var hex = "0123456789ABCDEF";
	var str = "";
	for(var i=0;i<be.length*4;i++)
		str += hex.charAt((be[i>>2]>>((3-i%4)*8+4))&0xF) + hex.charAt((be[i>>2]>>((3-i%4)*8))&0xF);
	return str;
}

// Return, in hex, the SHA-1 hash of a string
Crypto.hexSha1Str = function(str)
{
	return Crypto.be32sToHex(Crypto.sha1Str(str));
}

// Return the SHA-1 hash of a string
Crypto.sha1Str = function(str)
{
	return Crypto.sha1(Crypto.strToBe32s(str),str.length);
}

// Calculate the SHA-1 hash of an array of blen bytes of big-endian 32-bit words
Crypto.sha1 = function(x,blen)
{
	// Add 32-bit integers, wrapping at 32 bits
	//# Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
	add32 = function(a,b)
	{
		var lsw = (a&0xFFFF)+(b&0xFFFF);
		var msw = (a>>16)+(b>>16)+(lsw>>16);
		return (msw<<16)|(lsw&0xFFFF);
	};
	// Add five 32-bit integers, wrapping at 32 bits
	//# Uses 16-bit operations internally to work around bugs in some JavaScript interpreters.
	add32x5 = function(a,b,c,d,e)
	{
		var lsw = (a&0xFFFF)+(b&0xFFFF)+(c&0xFFFF)+(d&0xFFFF)+(e&0xFFFF);
		var msw = (a>>16)+(b>>16)+(c>>16)+(d>>16)+(e>>16)+(lsw>>16);
		return (msw<<16)|(lsw&0xFFFF);
	};
	// Bitwise rotate left a 32-bit integer by 1 bit
	rol32 = function(n)
	{
		return (n>>>31)|(n<<1);
	};

	var len = blen*8;
	// Append padding so length in bits is 448 mod 512
	x[len>>5] |= 0x80 << (24-len%32);
	// Append length
	x[((len+64>>9)<<4)+15] = len;
	var w = Array(80);

	var k1 = 0x5A827999;
	var k2 = 0x6ED9EBA1;
	var k3 = 0x8F1BBCDC;
	var k4 = 0xCA62C1D6;

	var h0 = 0x67452301;
	var h1 = 0xEFCDAB89;
	var h2 = 0x98BADCFE;
	var h3 = 0x10325476;
	var h4 = 0xC3D2E1F0;

	for(var i=0;i<x.length;i+=16)
		{
		var j,t;
		var a = h0;
		var b = h1;
		var c = h2;
		var d = h3;
		var e = h4;
		for(j = 0;j<16;j++)
			{
			w[j] = x[i+j];
			t = add32x5(e,(a>>>27)|(a<<5),d^(b&(c^d)),w[j],k1);
			e=d; d=c; c=(b>>>2)|(b<<30); b=a; a = t;
			}
		for(j=16;j<20;j++)
			{
			w[j] = rol32(w[j-3]^w[j-8]^w[j-14]^w[j-16]);
			t = add32x5(e,(a>>>27)|(a<<5),d^(b&(c^d)),w[j],k1);
			e=d; d=c; c=(b>>>2)|(b<<30); b=a; a = t;
			}
		for(j=20;j<40;j++)
			{
			w[j] = rol32(w[j-3]^w[j-8]^w[j-14]^w[j-16]);
			t = add32x5(e,(a>>>27)|(a<<5),b^c^d,w[j],k2);
			e=d; d=c; c=(b>>>2)|(b<<30); b=a; a = t;
			}
		for(j=40;j<60;j++)
			{
			w[j] = rol32(w[j-3]^w[j-8]^w[j-14]^w[j-16]);
			t = add32x5(e,(a>>>27)|(a<<5),(b&c)|(d&(b|c)),w[j],k3);
			e=d; d=c; c=(b>>>2)|(b<<30); b=a; a = t;
			}
		for(j=60;j<80;j++)
			{
			w[j] = rol32(w[j-3]^w[j-8]^w[j-14]^w[j-16]);
			t = add32x5(e,(a>>>27)|(a<<5),b^c^d,w[j],k4);
			e=d; d=c; c=(b>>>2)|(b<<30); b=a; a = t;
			}

		h0 = add32(h0,a);
		h1 = add32(h1,b);
		h2 = add32(h2,c);
		h3 = add32(h3,d);
		h4 = add32(h4,e);
		}
	return Array(h0,h1,h2,h3,h4);
}

// ---------------------------------------------------------------------------------
// RGB colour object
// ---------------------------------------------------------------------------------

// Construct an RGB colour object from a '#rrggbb', '#rgb' or 'rgb(n,n,n)' string or from separate r,g,b values
function RGB(r,g,b)
{
	this.r = 0;
	this.g = 0;
	this.b = 0;
	if(typeof r == "string")
		{
		if(r.substr(0,1) == "#")
			{
			if(r.length == 7)
				{
				this.r = parseInt(r.substr(1,2),16)/255;
				this.g = parseInt(r.substr(3,2),16)/255;
				this.b = parseInt(r.substr(5,2),16)/255;
				}
			else
				{
				this.r = parseInt(r.substr(1,1),16)/15;
				this.g = parseInt(r.substr(2,1),16)/15;
				this.b = parseInt(r.substr(3,1),16)/15;
				}
			}
		else
			{
			var rgbPattern = /rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/ ;
			var c = r.match(rgbPattern);
			if (c)
				{
				this.r = parseInt(c[1],10)/255;
				this.g = parseInt(c[2],10)/255;
				this.b = parseInt(c[3],10)/255;
				}
			}
		}
	else
		{
		this.r = r;
		this.g = g;
		this.b = b;
		}
	return this;
}

// Mixes this colour with another in a specified proportion
// c = other colour to mix
// f = 0..1 where 0 is this colour and 1 is the new colour
// Returns an RGB object
RGB.prototype.mix = function(c,f)
{
	return new RGB(this.r + (c.r-this.r) * f,this.g + (c.g-this.g) * f,this.b + (c.b-this.b) * f);
}

// Return an rgb colour as a #rrggbb format hex string
RGB.prototype.toString = function()
{
	var r = this.r.clamp(0,1);
	var g = this.g.clamp(0,1);
	var b = this.b.clamp(0,1);
	return("#" + ("0" + Math.floor(r * 255).toString(16)).right(2) +
				 ("0" + Math.floor(g * 255).toString(16)).right(2) +
				 ("0" + Math.floor(b * 255).toString(16)).right(2));
}

// ---------------------------------------------------------------------------------
// DOM utilities - many derived from www.quirksmode.org
// ---------------------------------------------------------------------------------

function drawGradient(place,horiz,colours)
{
	for(var t=0; t<= 100; t+=2)
		{
		var bar = document.createElement("div");
		place.appendChild(bar);
		bar.style.position = "absolute";
		bar.style.left = horiz ? t + "%" : 0;
		bar.style.top = horiz ? 0 : t + "%";
		bar.style.width = horiz ? (101-t) + "%" : "100%";
		bar.style.height = horiz ? "100%" : (101-t) + "%";
		bar.style.zIndex = -1;
		var f = t/100;
		var p = f*(colours.length-1);
		bar.style.backgroundColor = colours[Math.floor(p)].mix(colours[Math.ceil(p)],p-Math.floor(p)).toString();
		}
}

function createTiddlyText(theParent,theText)
{
	return theParent.appendChild(document.createTextNode(theText));
}

function createTiddlyCheckbox(theParent,caption,checked,onChange)
{
	var cb = document.createElement("input");
	cb.setAttribute("type","checkbox");
	cb.onclick = onChange;
	theParent.appendChild(cb);
	cb.checked = checked;
	cb.className = "chkOptionInput";
	if(caption)
		wikify(caption,theParent);
	return cb;
}

function createTiddlyElement(theParent,theElement,theID,theClass,theText)
{
	var e = document.createElement(theElement);
	if(theClass != null)
		e.className = theClass;
	if(theID != null)
		e.setAttribute("id",theID);
	if(theText != null)
		e.appendChild(document.createTextNode(theText));
	if(theParent != null)
		theParent.appendChild(e);
	return(e);
}

// Add an event handler
// Thanks to John Resig, via QuirksMode
function addEvent(obj,type,fn)
{
	if(obj.attachEvent)
		{
		obj['e'+type+fn] = fn;
		obj[type+fn] = function(){obj['e'+type+fn](window.event);}
		obj.attachEvent('on'+type,obj[type+fn]);
		}
	else
		obj.addEventListener(type,fn,false);
}

// Remove  an event handler
// Thanks to John Resig, via QuirksMode
function removeEvent(obj,type,fn)
{
	if(obj.detachEvent)
		{
		obj.detachEvent('on'+type,obj[type+fn]);
		obj[type+fn] = null;
		}
	else
		obj.removeEventListener(type,fn,false);
}

function addClass(e,theClass)
{
	var currClass = e.className.split(" ");
	if(currClass.indexOf(theClass) == -1)
		e.className += " " + theClass;
}

function removeClass(e,theClass)
{
	var currClass = e.className.split(" ");
	var i = currClass.indexOf(theClass);
	while(i != -1)
		{
		currClass.splice(i,1);
		i = currClass.indexOf(theClass);
		}
	e.className = currClass.join(" ");
}

function hasClass(e,theClass)
{
	if(e.className)
		{
		if(e.className.split(" ").indexOf(theClass) != -1)
			return true;
		}
	return false;
}

// Find the closest relative with a given property value (property defaults to tagName, relative defaults to parentNode)
function findRelated(e,value,name,relative)
{
	name = name ? name : "tagName";
	relative = relative ? relative : "parentNode";
	if(name == "className")
		{
		while(e && !hasClass(e,value))
			{
			e = e[relative];
			}
		}
	else
		{
		while(e && e[name] != value)
			{
			e = e[relative];
			}
		}
	return e;
}

// Resolve the target object of an event
function resolveTarget(e)
{
	var obj;
	if (e.target)
		obj = e.target;
	else if (e.srcElement)
		obj = e.srcElement;
	if (obj.nodeType == 3) // defeat Safari bug
		obj = obj.parentNode;
	return(obj);
}

// Return the content of an element as plain text with no formatting
function getPlainText(e)
{
	var text = "";
	if(e.innerText)
		text = e.innerText;
	else if(e.textContent)
		text = e.textContent;
	return text;
}

// Get the scroll position for window.scrollTo necessary to scroll a given element into view
function ensureVisible(e)
{
	var posTop = findPosY(e);
	var posBot = posTop + e.offsetHeight;
	var winTop = findScrollY();
	var winHeight = findWindowHeight();
	var winBot = winTop + winHeight;
	if(posTop < winTop)
		return(posTop);
	else if(posBot > winBot)
		{
		if(e.offsetHeight < winHeight)
			return(posTop - (winHeight - e.offsetHeight));
		else
			return(posTop);
		}
	else
		return(winTop);
}

// Get the current width of the display window
function findWindowWidth()
{
	return(window.innerWidth ? window.innerWidth : document.documentElement.clientWidth);
}

// Get the current height of the display window
function findWindowHeight()
{
	return(window.innerHeight ? window.innerHeight : document.documentElement.clientHeight);
}

// Get the current horizontal page scroll position
function findScrollX()
{
	return(window.scrollX ? window.scrollX : document.documentElement.scrollLeft);
}

// Get the current vertical page scroll position
function findScrollY()
{
	return(window.scrollY ? window.scrollY : document.documentElement.scrollTop);
}

function findPosX(obj)
{
	var curleft = 0;
	while (obj.offsetParent)
		{
		curleft += obj.offsetLeft;
		obj = obj.offsetParent;
		}
	return curleft;
}

function findPosY(obj)
{
	var curtop = 0;
	while (obj.offsetParent)
		{
		curtop += obj.offsetTop;
		obj = obj.offsetParent;
		}
	return curtop;
}

// Blur a particular element
function blurElement(e)
{
	if(e != null && e.focus && e.blur)
		{
		e.focus();
		e.blur();
		}
}

// Create a non-breaking space
function insertSpacer(place)
{
	var e = document.createTextNode(String.fromCharCode(160));
	if(place)
		place.appendChild(e);
	return e;
}

// Remove all children of a node
function removeChildren(e)
{
	while(e.hasChildNodes())
		e.removeChild(e.firstChild);
}

// Add a stylesheet, replacing any previous custom stylesheet
function setStylesheet(s,id)
{
	if(!id)
		id = "customStyleSheet";
	var n = document.getElementById(id);
	if(document.createStyleSheet) // Test for IE's non-standard createStyleSheet method
		{
		if(n)
			n.parentNode.removeChild(n);
		// This failed without the &nbsp;
		document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style id='" + id + "'>" + s + "</style>");
		}
	else
		{
		if(n)
			n.replaceChild(document.createTextNode(s),n.firstChild);
		else
			{
			var n = document.createElement("style");
			n.type = "text/css";
			n.id = id;
			n.appendChild(document.createTextNode(s));
			document.getElementsByTagName("head")[0].appendChild(n);
			}
		}
}

// Replace the current selection of a textarea or text input and scroll it into view

function replaceSelection(e,text)
{
	if (e.setSelectionRange)
		{
		var oldpos = e.selectionStart + 1;
		e.value = e.value.substr(0,e.selectionStart) + text + e.value.substr(e.selectionStart);
		e.setSelectionRange( oldpos, oldpos);
		var linecount = e.value.split('\n').length;
		var thisline = e.value.substr(0,e.selectionStart).split('\n').length-1;
		e.scrollTop = Math.floor((thisline-e.rows/2)*e.scrollHeight/linecount);
		}
	else if (document.selection)
		{
		var range = document.selection.createRange();
		if (range.parentElement() == e)
			{
			var isCollapsed = range.text == "";
			range.text = text;
			 if (!isCollapsed)
				{
				range.moveStart('character', -text.length);
				range.select();
				}
			}
		}
}

// Returns the text of the given (text) node, possibly merging subsequent text nodes
function getNodeText(e)
{
	var t = ""; 
	while (e && e.nodeName == "#text")
		{
		t += e.nodeValue;
		e = e.nextSibling;
		}
	return t;
}
//# -------------------------
//# LoaderBase: A (abstract) storage loader that loads the tiddlers from a list of HTML elements.
//# The format of the elements is defined by subclasses of this loader through the internalizeTiddler implementation.
//# Subclasses must implement:
//# 			function getTitle(store, e)
//#
//# store must implement:
//# 			function createTiddler(title).
//#

function LoaderBase()
{
}

LoaderBase.prototype.loadTiddler = function(store,e,tiddlers)
{
	var title = this.getTitle(store, e);
	if (title)
		{
		var tiddler = store.createTiddler(title);
		this.internalizeTiddler(store, tiddler, title, e);
		tiddlers.push(tiddler);
		}
}

LoaderBase.prototype.loadTiddlers = function(store,nodes)
{
	var tiddlers = [];
	for (var t = 0; t < nodes.length; t++)
		{
		try
			{
			this.loadTiddler(store, nodes[t], tiddlers);
			}
		catch(e)
			{
			showException(e, config.messages.tiddlerLoadError.format([this.getTitle(store, nodes[t])]));
			}
		}
	return tiddlers;
}
	
//# -------------------------
//# SaverBase: a (abstract) storage saver that externalizes all tiddlers into a string, 
//# with every tiddler individually externalized (using this.externalizeTiddler) and joined with newlines 
//# Subclasses must implement:
//# 			function externalizeTiddler(store, tiddler)
//#
//# store must implement:
//# 			function getTiddlers(sortByFieldName)
//#

function SaverBase()
{
}

SaverBase.prototype.externalize = function(store) 
{
	var results = [];
	var tiddlers = store.getTiddlers("title");
	for (var t = 0; t < tiddlers.length; t++)
		results.push(this.externalizeTiddler(store, tiddlers[t]));
	return results.join("\n");
}
//--------------------------------
// TW21Loader (inherits from LoaderBase)

function TW21Loader() {};

TW21Loader.prototype = new LoaderBase();

TW21Loader.prototype.getTitle = function(store, e) {
	var title = null;
	if(e.getAttribute)
		title = e.getAttribute("tiddler");
	if(!title && e.id) {	
		var lenPrefix = store.idPrefix.length;
		if (e.id.substr(0,lenPrefix) == store.idPrefix)
			title = e.id.substr(lenPrefix);
	}
	return title;
}

TW21Loader.prototype.internalizeTiddler = function(store, tiddler, title, data) {
	var text = getNodeText(data.firstChild).unescapeLineBreaks();
	var modifier = data.getAttribute("modifier");
	var modified = Date.convertFromYYYYMMDDHHMM(data.getAttribute("modified"));
	var c = data.getAttribute("created");
	var created = c ? Date.convertFromYYYYMMDDHHMM(c) : modified;
	var tags = data.getAttribute("tags");
	var fields = {};
	var attrs = data.attributes;
	for(var i = attrs.length-1; i >= 0; i--) {
		var name = attrs[i].name;
		if (attrs[i].specified && !TiddlyWiki.isStandardField(name)) {
			fields[name] = attrs[i].value.unescapeLineBreaks();
		}
	}
	tiddler.assign(title,text,modifier,modified,tags,created, fields);
	return tiddler;
};

//--------------------------------
// TW21Saver (inherits from SaverBase)

function TW21Saver() {};

TW21Saver.prototype = new SaverBase();

TW21Saver.prototype.externalizeTiddler = function(store, tiddler) 
{
	try {
		var extendedFieldAttributes = "";
		store.forEachField(tiddler, 
			function(tiddler, fieldName, value) {
				// don't store stuff from the temp namespace
				if (!fieldName.match(/^temp\./))
					extendedFieldAttributes += ' %0="%1"'.format([fieldName, value.escapeLineBreaks().htmlEncode()]);
			}, true);
		return '<div tiddler="%0" modifier="%1" modified="%2" created="%3" tags="%4"%6>%5</div>'.format([
				tiddler.title.htmlEncode(),
				tiddler.modifier.htmlEncode(),
				tiddler.modified.convertToYYYYMMDDHHMM(),
				tiddler.created.convertToYYYYMMDDHHMM(),
				tiddler.getTags().htmlEncode(),
				tiddler.escapeLineBreaks().htmlEncode(),
				extendedFieldAttributes
			]);
	} catch (e) {
		throw exceptionText(e, config.messages.tiddlerSaveError.format([tiddler.title]));
	}
}

// ---------------------------------------------------------------------------------
// Deprecated code
// ---------------------------------------------------------------------------------

// @Deprecated: Use createElementAndWikify and this.termRegExp instead
config.formatterHelpers.charFormatHelper = function(w)
{
	w.subWikify(createTiddlyElement(w.output,this.element),this.terminator);
}

// @Deprecated: Use enclosedTextHelper and this.lookaheadRegExp instead
config.formatterHelpers.monospacedByLineHelper = function(w)
{
	var lookaheadRegExp = new RegExp(this.lookahead,"mg");
	lookaheadRegExp.lastIndex = w.matchStart;
	var lookaheadMatch = lookaheadRegExp.exec(w.source);
	if(lookaheadMatch && lookaheadMatch.index == w.matchStart)
		{
		var text = lookaheadMatch[1];
		if(config.browser.isIE)
			text = text.replace(/\n/g,"\r");
		createTiddlyElement(w.output,"pre",null,null,text);
		w.nextMatch = lookaheadRegExp.lastIndex;
		}
}

// @Deprecated: Use <br> or <br /> instead of <<br>>
config.macros.br.handler = function(place)
{
	createTiddlyElement(place,"br");
}

// Find an entry in an array. Returns the array index or null
// @Deprecated: Use indexOf instead
Array.prototype.find = function(item)
{
	var i = this.indexOf(item);
	return i == -1 ? null : i;
}

// Load a tiddler from an HTML DIV. The caller should make sure to later call Tiddler.changed()
// @Deprecated: Use store.getLoader().internalizeTiddler instead
Tiddler.prototype.loadFromDiv = function(divRef,title)
{
	return store.getLoader().internalizeTiddler(store,this,title,divRef);
}

// Format the text for storage in an HTML DIV
// @Deprecated Use store.getSaver().externalizeTiddler instead.
Tiddler.prototype.saveToDiv = function()
{
	return store.getSaver().externalizeTiddler(store,this);
}

// @Deprecated: Use store.allTiddlersAsHtml() instead
function allTiddlersAsHtml()
{
	return store.allTiddlersAsHtml();
}

// @Deprecated: Use refreshPageTemplate instead
function applyPageTemplate(title)
{
	refreshPageTemplate(title);
}

// @Deprecated: Use story.displayTiddlers instead
function displayTiddlers(srcElement,titles,template,unused1,unused2,animate,slowly)
{
	story.displayTiddlers(srcElement,titles,template,animate,slowly);
}

// @Deprecated: Use story.displayTiddler instead
function displayTiddler(srcElement,title,template,unused1,unused2,animate,slowly)
{
	story.displayTiddler(srcElement,title,template,animate,slowly);
}

// @Deprecated: Use functions on right hand side directly instead
var createTiddlerPopup = Popup.create;
var scrollToTiddlerPopup = Popup.show;
var hideTiddlerPopup = Popup.remove;

// @Deprecated: Use right hand side directly instead
var regexpBackSlashEn = new RegExp("\\\\n","mg");
var regexpBackSlash = new RegExp("\\\\","mg");
var regexpBackSlashEss = new RegExp("\\\\s","mg");
var regexpNewLine = new RegExp("\n","mg");
var regexpCarriageReturn = new RegExp("\r","mg");
// ---------------------------------------------------------------------------------
// End of scripts
// ---------------------------------------------------------------------------------
//]]>
</script>
<style type="text/css">

#saveTest {
	display: none;
}

.zoomer {
	display: none;
}

#messageArea {
	display: none;
}

#copyright {
	display: none;
}

.popup {
	position: absolute;
}

#storeArea {
	display: none;
	margin: 4em 10em 3em;
}

#storeArea div {
 padding: 0.5em;
 margin: 1em 0em 0em 0em;
 border-color: #f0f0f0 #606060 #404040 #d0d0d0; 
 border-style: solid; 
 border-width: 2px;
 overflow: auto;
}

#javascriptWarning {
	width: 100%;
	text-align: center;
	font-weight: bold;
	background-color: #dd1100;
	color: #fff;
	padding:1em 0em; 
}

</style>
<!--POST-HEAD-START-->
<!--{{{-->
<!-- Load JQuery and plugins used herein -->
<script language='javascript' type='text/javascript' src='/ac/jquery-1.6.2.min.js'></script>
<script language='javascript' type='text/javascript' src='/ac/jquery.sparkline.min.js'></script>
<script language='javascript' type='text/javascript' src='/ac/jquery.bvalidator.js'></script>
<!-- Special cookie processing for TW  -->
<script language='javascript' type='text/javascript'>
window.loadOptionsCookie_orig_DC3 = window.loadOptionsCookie;
window.loadOptionsCookie = function()
{
	if(safeMode)
	return;
	var cookies = document.cookie.split(";");
	for(var c = 0; c < cookies.length; c++)
	{
		var p = cookies[c].indexOf("=");
		if(p != -1)
		{
			var name = cookies[c].substr(0,p).trim();
			if(name.substr(0, 6) == "tw_opt")                   // Found the 'tw_opt' cookie
			{
				var value = cookies[c].substr(p + 1).trim();    // This has all the options
				var fc = value.split("&");
				for(var i = 0; i < fc.length; i++) 
				{
					p = fc[i].indexOf(":");
					name = fc[i].substr(0, p).trim();
					value = fc[i].substr(p + 1).trim();
					switch(name.substr(0,3))
					{
						case "txt":
						case "pas":                             // for UploadPlugin
						    config.options[name] = unescape(value);
						    break;
						case "chk":
						    config.options[name] = (value == "true");
						    break;
					}
				}
				return;                                         // Don't look at more cookies            
			}
		}
	}
};
//
// For the Moon Avoidance live spreadsheet in Moon Avoidance Lorentzian Help.
//
function mah_calc()
{
	var d = document.getElementById('mah_inDist').value;
	var w = document.getElementById('mah_inWidth').value;
	for (a = 0; a < 16; a++)
	{
		document.getElementById("mah_dist" + a).innerHTML = (d / (1.0 + Math.pow(((0.5 - (a / 29.5)) / (w / 29.5)), 2))).toFixed(0);
	}
}
</script>
<!--}}}-->
<!--POST-HEAD-END-->
</head>
<body onload="main();" onunload="if(window.checkUnsavedChanges) checkUnsavedChanges();">
<!--PRE-BODY-START-->
<!--{{{-->
<!-- LightBox translucent overlay -->
<div id="lightBoxOverlay" onclick="DC3.LightBox.hideBox()" style="display:none"></div>
<!-- General use simple LightBox -->
<div class="lightBox" id="lightBox" style="display:none">
	<img class="lightBoxClose" src="im/close.gif" onclick="DC3.LightBox.hideBox()" alt="Close" title="Close this window" />
	<div id="lightBoxContent"></div>
</div>
<!-- General use Alert LightBox -->
<div class="lightBoxAlert" id="lightBoxAlert" style="display:none">
	<img class="lightBoxClose" src="im/close.gif" onclick="DC3.LightBox.hideBox()" alt="Close" title="Close this window" />
	<div class="lightBoxAlertIcon"><img id="lightBoxAlertIcon" src="runtime" alt="runtime" title="runtime"></div>
	<div class="lightBoxAlertMessage" id="lightBoxAlertMessage">runtime</div>
</div>
<!-- End of LightBox --> 
<!--}}}-->

<!--PRE-BODY-END-->
	<div id="copyright">
	Welcome to TiddlyWiki by Jeremy Ruston, Copyright &copy; 2006 Osmosoft Limited
	</div>
	<noscript>
		<div id="javascriptWarning">This page requires JavaScript to function properly</div>
	</noscript>
	<div id="saveTest"></div>
	<div id="contentWrapper"></div>
	<div id="contentStash"></div>
	<div id="storeArea"><div tiddler="AARemoteContentTest" modifier="Bob Denny" modified="201401220029" created="201401212341" tags="">&lt;&lt;RemoteContent &quot;/ac/asGenProjList.asp&quot; &quot;&quot; &quot;&quot; &quot;raw&quot;&gt;&gt;</div>
<div tiddler="Acquire a Single Image" modifier="Bob Denny" modified="201401302305" created="200609252334" tags="Observing UserContent">&lt;&lt;slider &quot;&quot; &quot;Single Object Help&quot; Help &quot;Helpful information&quot;&gt;&gt;\n&lt;html&gt;\n&lt;form&gt;\n	&lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0&quot;&gt;\n		&lt;tr&gt;\n			&lt;td&gt;Target Name:&lt;/td&gt;\n			&lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;Target&quot; id=&quot;simg_tgt&quot; size=&quot;14&quot; value=&quot;&quot; validate=&quot;required&quot;&gt;\n                            &lt;input type=&quot;hidden&quot; name=&quot;visOnly&quot; id=&quot;simg_visOnly&quot; value=&quot;true&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;\n                &lt;a id=&quot;simg_getCoords&quot; href=&quot;javascript:;&quot; onClick=&quot;DC3.CatSearch.lookup(DC3.Lib.getPlace(this), null);&quot; title=&quot;Look up coordinates or calculate planetary ephemeris&quot;&gt;&amp;nbsp;Get Coordinates or Ephemeris&lt;/a&gt;\n                &lt;a id=&quot;simg_getTheSky&quot; style=&quot;display:none;&quot; href=&quot;javascript:;&quot; onClick=&quot;DC3.TheSky.fillFormInfo(DC3.Lib.getPlace(this));&quot; title=&quot;Fill in the coordinates from the current target in TheSky&quot;&gt;&amp;nbsp;Get Coordinates From TheSky&lt;/a&gt;\n            &lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr&gt;\n			&lt;td&gt;Right Asc. (hrs):&lt;/td&gt;\n			&lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;RA&quot; id=&quot;simg_ra&quot; size=&quot;12&quot; value=&quot;&quot; validate=&quot;sexanum[0:24],required&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;a id=&quot;simg_catSearch&quot; href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Deep Sky Catalog Search',null,config.options.chkAnimate,false)&quot; title=&quot;Open the Deep Sky Catalog Search Item&quot;&gt;&amp;nbsp;Deep Sky Catalog Search&lt;/a&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr&gt;\n			&lt;td&gt;Declination (deg):&lt;/td&gt;\n			&lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;Dec&quot; id=&quot;simg_dec&quot; size=&quot;12&quot; value=&quot;&quot; validate=&quot;sexanum[-90:90],required&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&amp;nbsp;&lt;i&gt;(coordinates in J2000)&lt;/i&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n		&lt;tr&gt;\n			&lt;td&gt;Pos. Angle (deg):&lt;/td&gt;\n			&lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;PA&quot; id=&quot;simg_pa&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;number,between[0:360],required&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&amp;nbsp;&lt;i&gt;(true/sky PA, required)&lt;/i&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;!--&lt;% } %&gt;--&gt;\n		&lt;!-- Mimics one row of the Color Series' expando form --&gt;\n		&lt;tr&gt;\n			&lt;td&gt;Duration (sec):&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure1&quot; id=&quot;ColorExposure1&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;number, required&quot;&gt;&lt;/td&gt;\n			&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&amp;nbsp;Filter:&amp;nbsp;\n				&lt;select name=&quot;ColorFilter1&quot; id=&quot;ColorFilter1&quot;&gt;\n					&lt;%= filterNameOptions() %&gt;\n				&lt;/select&gt;&lt;/td&gt;\n			&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&amp;nbsp;Binning:&amp;nbsp;\n				&lt;select name=&quot;ColorBinning1&quot; id=&quot;ColorBinning1&quot;&gt;\n					&lt;%= binningOptions() %&gt;\n				&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;input type=&quot;hidden&quot; name=&quot;ColorCount1&quot; id=&quot;ColorCount1&quot; value=&quot;1&quot;&gt;\n		&lt;input type=&quot;hidden&quot; name=&quot;ColorUse1&quot; id=&quot;ColorUse1&quot; value=&quot;yes&quot;&gt;\n		&lt;input type=&quot;hidden&quot; name=&quot;Dither&quot; id=&quot;Dither&quot; value=&quot;0.0&quot;&gt;\n	&lt;/table&gt;\n	&lt;div style=&quot;margin-top:0px;margin-bottom:8px&quot;&gt; \n		&lt;!--&lt;% if(Prefs.Autofocus.Enabled) { %&gt;--&gt;\n		&lt;input type=&quot;checkbox&quot; name=&quot;AF&quot; value=&quot;yes&quot; title=&quot;Focus the system before acquiring the image&quot;&gt;\n		Auto focus before imaging\n		&lt;/input&gt;\n		&lt;!--&lt;% } %&gt;--&gt;\n		\n		&lt;!--&lt;% if(Prefs.CameraPrefs.AutoCalibrate) { %&gt;--&gt;\n		    &lt;input type=&quot;checkbox&quot; checked disabled name=&quot;Cal&quot; value=&quot;yes&quot; title=&quot;Observatory calibrates all images&quot;&gt;Auto calibrate&lt;/input&gt;\n		&lt;!--&lt;% } else { %&gt;--&gt;\n		    &lt;input type=&quot;checkbox&quot; name=&quot;Cal&quot; value=&quot;yes&quot; title=&quot;Apply calibration frames after imaging&quot;&gt;Auto calibrate&lt;/input&gt;\n		&lt;!--&lt;% } %&gt;--&gt;\n	&lt;/div&gt;\n&lt;/form&gt;\n&lt;/html&gt;&lt;&lt;PersistentForm&gt;&gt;&lt;&lt;PostForm &quot;&quot; &quot;/ac/aacqform.asp&quot; &quot;Acquire Image&quot; &quot;Starts the image acquisition process&quot;&gt;&gt;&lt;&lt;ValidateForm &quot;&quot; &quot;postit&quot;&gt;&gt;&lt;script&gt;\n// DC3.TheSky.setTargetInfo() and DC3.TheSky.switchLink() depend on the link IDs!\nif(DC3.TheSky.theSkyInfoAvailable()) DC3.TheSky.switchLink(&quot;simg&quot;);\n&lt;/script&gt;\n</div>
<div tiddler="Acquired Images" modifier="Bob Denny" modified="201011221634" created="200609270052" tags="UserContent hideLocalUser">If you have lots of images this could take a long time to appear. We suggest [[using FTP|Using FTP]].\n\n&lt;&lt;RemoteContent '/images/&lt;%= User.Username %&gt;/aindex.asp' Refresh 'Refresh the file list'&gt;&gt;</div>
<div tiddler="AdvancedOptions" modifier="Bob Denny" modified="200611060452" created="200611060425" tags="">&lt;&lt;option chkOpenInNewWindow&gt;&gt; OpenLinksInNewWindow\n&lt;&lt;option chkToggleLinks&gt;&gt; Clicking on links to items that are already open causes them to close\n^^(override with Control or other modifier key)^^\n&lt;&lt;option chkForceMinorUpdate&gt;&gt; Treat edits as MinorChanges by preserving date and time\n^^(override with Shift key when clicking 'done' or by pressing Ctrl-Shift-Enter^^\n&lt;&lt;option chkConfirmDelete&gt;&gt; ConfirmBeforeDeleting\nMaximum number of lines in an item edit box: &lt;&lt;option txtMaxEditRows&gt;&gt;\n&lt;&lt;option chkInsertTabs&gt;&gt; Use tab key to insert tab characters instead of jumping to next field\n&lt;&lt;option chkSinglePageMode&gt;&gt; Display one item at a time\n&lt;&lt;option chkTopOfPageMode&gt;&gt; Always open items at the top of the page</div>
<div tiddler="AllTagsExPlugin" modifier="Bob Denny" modified="200609232115" created="200609231859" tags="systemConfig macro plugin">/***\n|''Name:''|allTagsExPlugin|\n|''Description:''|Post from form, wikify response|\n|''Date:''|Sept 20, 2006|\n|''Source:''|[[allTagsExPlugin]]|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.0.1|\n|''~CoreVersion:''|2.0.11|\n|''Browser:''|Firefox 1.5; Internet Explorer 6.0; Safari|\n|''Require:''|//none//|\nThis macro replaces the 'allTags' macro used in the tags tab of the sidebar, etc. \n!!Revision History\n&lt;&lt;&lt;\n''2006.09.23 [1.0.1]'' Initial creation\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\nversion.extensions.allTagsEx = {\n major: 1, minor: 0, revision: 1,\n date: new Date(2006, 9, 23), \n type: 'macro',\n source: &quot;#allTagsExPlugin&quot;\n};\n\nconfig.macros.allTagsEx = \n{\n handler: function(place, macroName, params, wikifier, paramString, tiddler) \n {\n var tags = store.getTags();\n var theDateList = createTiddlyElement(place,&quot;ul&quot;, null, null, null);\n if(tags.length === 0)\n createTiddlyElement(theDateList,&quot;li&quot;, null, &quot;listTitle&quot;, config.macros.allTags.noTags);\n for(var t = 0; t &lt; tags.length; t++)\n {\n var tagTiddler = store.fetchTiddler(tags[t][0]);\n if(!tagTiddler || !tagTiddler.isTagged(&quot;excludeLists&quot;))\n {\n var theListItem = createTiddlyElement(theDateList, &quot;li&quot;, null, null, null);\n var theTag = createTiddlyButton(theListItem,tags[t][0] + &quot; (&quot; + tags[t][1] + &quot;)&quot;, \n config.macros.allTags.tooltip.format([tags[t][0]]), onClickTag);\n theTag.setAttribute(&quot;tag&quot;, tags[t][0]);\n }\n }\n }\n};\n//}}}\n</div>
<div tiddler="Author Name" modifier="Bob Denny" modified="200611061737" created="200611061731" tags="Authoring Help deleteUser">Your &quot;real&quot; name for signing edits, for example Joe Author. The observatory users won't see the edit names and dates. They are for your reference.</div>
<div tiddler="Authoring" modifier="Bob Denny" modified="200611302143" created="200611302126" tags="deleteUser systemContent">''Tag'': Items which belong solely to the authoring environment. These items always have the [[deleteUser]] tag as well, causing them to be removed when building the final content.</div>
<div tiddler="Authoring Roadmap" modifier="Bob Denny" modified="200804140311" created="200611070326" tags="Authoring deleteUser">We're going to assume that you've figured out the general layout of this web interface and how to navigate the items. See [[Using This Web Site]].\n\nThis web interface uses TiddlyWiki as a framework. As you author, you'll see micro-content items referred to as //tiddlers//, but don't be confused. A tiddler is just an item. You are reading a tiddler right now.\n!!Authoring Process\nWe'll soon see how to make changes and additions to the web interface, but first it's important to know how the process works! All server web content is kept in the ACP ''~WebDocs'' folder and subfolders below it. There are two files on the server, ''author.html'' (the authoring document you see now) and ''index.asp'' (the file that generates the interface that your observers see).\n\nAll authoring is done using this (author.html) document. Once you have made your changes, just click the ''save to web'' link in the right sidebar. This will upload the changed author.html to the server and save the previous version to the ACP ''~WebDocs\sauthor-backup'' backup subfolder. \n\nBut there's more. After the interface is uploaded, the server creates a new end-user document ''index.asp''. A lot goes on during this process, most of which you needn't be concerned about. There are a few things, though, that you'll need to know and we'll cover them later. Anyway, all you have to do is ''save to web'' and your changes are ready for your observers.\n!!Editing an Existing Item\nThis is really easy. Click the ''edit'' link in the toolbar or just double-click anywhere in the item. Make your changes, then click the ''done'' link in the toolbar. Of course ''cancel'' will discard any changes you made. @@Don't click ''delete'' on any existing tiddler@@, you will probably break something. Now its time to play in the [[Sandbox]]. This is never saved to the observers' interface, so feel free to do anything you want. The [[Authoring System]] item has links to formatting reference information.\n\nDouble-click this item and see how I formatted it!\n!!Real Work: [[Contact Info]]\nIf you haven't yet made any changes, the [[Contact Info]] item won't exist. If you click [Contact Info]] in the Observatory Info menu on the left, you'll see that the item says it doesn't exist. Time to put something into it so your observers will have something to see. Oh, and you may have noticed that the links to [[Contact Info]] are italicized. An indication that the item linked-to doesn't exist.\n\nClick any of the (many) [[Contact Info]] links and you'll see an &quot;doesn't exist&quot; item appear. Click its ''edit'' link in the toolbar and put whatever information you wish into it. Include your name, email address, phone number or whatever you want your observers to know. Now click ''done''.\n\n@@IMPORTANT!@@ We'll explain tags later, but this is important. Using the ''tags'' link in the [[Contact Info]] item, position the mouse over the [] for UserContent. Then repeat this for the [] for [[Help]], and again for Custom. @@It's VITAL that you tag all items you change as Custom@@. That's how we'll preserve your changes through updates to the web content. Now click the ''tags'' link one more time and verify that [[UserContent]], [[Help]], and [[Custom]] are set as tags.\n\nNow click ''save to web''. The new content is now available to your observers. You can quickly test the observers' interface by clicking ''Test Live''. Do it now. It will open a new browser tab or window with the interface that your observers see. Open the Observatory Info menu on the left and click [[Contact Info]]. You should see the info you entered.\n!!Creating New Items\nThis is easy. Click ''new tiddler'' in the right sidebar. A new item will open for editing. Once you're finished, again use the ''tags'' link in theh toolbar to set (at least) [[UserContent]], [[Custom]](!), and maybe [[Help]].\n\nIf you create a brand new item, how will your observers find it? It will appear in the Items tab of the right sidebar, but the sidebar is initially hidden!  Changing the menus in the left sidebar is only for the advanced user (hint: they're in the MainMenu item, but be careful!). Of course you can link to your new item(s) from other items that //are// accessible.\n\nThe [[Welcome]] item normally appears just below the [[System Status]] item whenever observers first log in. That's a __perfect place__ for you to put site-specific news, links to items you have created, etc. Feel free to put anything you want there. You can also change the items that appear at login and have your new content appear at that time. See the next section.\n!!Changing Items That Show at Login\nYou can change the items that appear when a user first logs in. Edit the [[StartupItems]] item. It is a list of item links, one per line, that tell the system which items to display on user login. \n!!Next Steps\nOnce you &quot;get it&quot;, you'll see the possibilities... well, at least //some// of them! You should now think about customizing the [[Welcome]], [[Location]] and [[Common Questions]] items. You'll see things enclosed in {{{&lt;% ... %&gt;}}}. These are Active Server Page blocks, their contents will be replaced with some dynamic/generated content by the server. That's how the title and subtitle of browser display end up containing the site name and the login user's name!\n\nFinally, if there's something you want to do and can't figure out how, post a note to the [[DC-3 Dreams Communication Center|http://forums.dc3.com/]] and I'll try to help.</div>
<div tiddler="Authoring Setup" modifier="Bob Denny" modified="201210211838" created="200611070346" tags="Authoring deleteUser">Before you can make changes and successfully save them, you need to set a few things up. Make sure you can see the right sidebar. If not, click the side-bar « link on the toolbar to show the sidebar. Now click the options » link on the sidebar to expose the options area.\n\nThere are three things you need to set up:\n# Your real name (only authors can see this)\n# Your server username (must have Administrator privileges on the server!)\n# Your server password\nThe last two are needed (again) because the authoring system itself needs to authenticate itself in order to upload changes.\n\n@@We highly recommend the [[Google Chrome browser|https://www.google.com/intl/en/chrome/browser/]] for authoring and debugging ACP web content.@@\n\nNow click the ''save to web'' link on the sidebar. If all is well, you'll see a popup box in the upper right corner of the browser and it should indicate that the content was successfully saved. If not, re-check the username and password.\n\n@@If you are using ~FireFox@@ note that there is a bug in the HTTP engine that forms the core of ACP's web server which prevents FireFox from working for ACP authoring. There is a way to use  the [[Fiddler Web Debugging Tool|http://www.fiddler2.com/fiddler2/]] with FireFox to allow authoring. \n\nOk, you're ready to start. See [[Authoring Roadmap]].</div>
<div tiddler="Authoring System" modifier="Bob Denny" modified="201011252051" created="200611042356" tags="Authoring deleteUser">Welcome to the Share Your Sky! authoring environment. Yes, the title is supposed to look like that!\n\nReference information is available on:\n* [[Authoring Setup]] (read this first!)\n* [[Authoring Roadmap]]\n* [[Basic Formatting]]\n* [[Item Level Structure]]\n* [[Formatting Tables]]\n* [[Tag Usage]]\n* [[Macros]]\n* [[Using jQuery]]\n* [[Importing and Exporting Items]]\nThere is also a [[Sandbox]] in which you can practice editing and formatting text.\n&lt;script&gt;DC3.LightBox.showAlert('warning', 'Refresh your browser before authoring!');&lt;/script&gt;</div>
<div tiddler="AutoFocusInfoSlider" modifier="Bob Denny" modified="200612050143" created="200612050140" tags="Help UserContent hideUser">Asks for a filter name then focuses the optical system for the selected filter. You need to supply the filter name. If you don't know the names of the filters, see [[Instruments &amp; Equipment]].</div>
<div tiddler="BSDOpenSourceLicense" modifier="Bob Denny" modified="200609232117" created="200609120130" tags="systemContent">\nCopyright (c) 2005-2006, ~DC-3 Dreams, SP, Mesa, AZ\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n*Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. \n*Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. \n*Neither the name of ~DC-3 Dreams nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission. \nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n</div>
<div tiddler="Basic Formatting" modifier="Bob Denny" modified="201011162010" created="200611060245" tags="Authoring deleteUser">Here are the markups that you can use in item text. \n|!Format|!Markup|!Example|\n|Bold|{{{''Bold''}}} (2 single quotes)|''Bold''|\n|Highlight|{{{@@Highlight@@}}}|@@Highlight@@|\n|CSS Extended Highlights|{{{@@some css;Text@@}}}|@@background-color:#ff0000;color:#ffffff;red coloured@@&lt;&lt;br&gt;&gt;{{{@@background-color:#ff0000;color:#ffffff;red coloured@@}}}|\n|Custom CSS Class|&lt;html&gt;&lt;code&gt;{{wrappingClass{Text that is now accentuated}}}&lt;/code&gt;&lt;/html&gt;&lt;&lt;br&gt;&gt;By default, the text is placed in a &lt;span&gt;. To use a &lt;div&gt; instead, insert a line break before the text (after the single {)&lt;&lt;br&gt;&gt;In the CSS: {{{.wrappingClass {color: red;} }}}|Add .wrappingClass to StyleSheet|\n|Italic|{{{//Italic//}}}|//Italic//|\n|Monospaced text|&lt;html&gt;&lt;code&gt;{{{ ... }}}&lt;/code&gt;&lt;/html&gt;|{{{Monospaced text}}}|\n|Monospaced block multiline|Put &lt;html&gt;&lt;code&gt;{{{&lt;/code&gt;&lt;/html&gt; and &lt;html&gt;&lt;code&gt;}}}&lt;/code&gt;&lt;/html&gt; on their own lines|&lt;html&gt;&lt;pre&gt;{{{&lt;br/&gt;Monospaced&lt;br/&gt;Multi-line&lt;br/&gt;Block&lt;br/&gt;}}}&lt;/pre&gt;&lt;/html&gt;|\n|Strikethough|{{{--Strikethrough--}}}|--Strikethrough--|\n|Subscript|{{{~~Subscript~~}}}|Text~~Subscript~~|\n|Superscript|{{{^^Superscript^^}}}|Text^^Superscript^^|\n|Underlined|{{{__Underline__}}}(2 underscores)|__Underscored__|\n|Any HTML|{{{&lt;html&gt;&lt;span&gt;any&lt;/span&gt;&lt;br /&gt;&lt;b&gt;valid&lt;/b&gt; &lt;em&gt;xhtml&lt;/em&gt;&lt;/html&gt;}}}|&lt;html&gt;&lt;span&gt;any&lt;/span&gt;&lt;br /&gt;&lt;b&gt;valid&lt;/b&gt; &lt;em&gt;xhtml&lt;/em&gt;&lt;/html&gt;|\n|Comment|{{{/% This will not appear in the tiddler %/}}}||\n|Supress Wikifying|For example, WikiWord  {{{~WikiWord}}} (prefix with tilde)|~WikiWord|</div>
<div tiddler="BluePageTemplate" modifier="Bob Denny" modified="200609231817" created="200609192117" tags="pageTemplate systemContent">&lt;div class='header' macro='gradient vert #18f #04b'&gt;\n&lt;div class='headerShadow'&gt;\n&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;\n&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class='headerForeground'&gt;\n&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;\n&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;\n&lt;div id='sidebar'&gt;\n&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;\n&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id='displayArea'&gt;\n&lt;div id='messageArea'&gt;&lt;/div&gt;\n&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;\n&lt;/div&gt;</div>
<div tiddler="BlueStyleSheet" modifier="Bob Denny" modified="201011172200" created="200609192116" tags="styleSheet systemContent">/***\nStyles used in Share Your Sky! adaptation of ~TiddlyWiki. These must be completely overridden in other themes, as this style sheet is used only with the Default TW styles (StyleSheetLayout and StyleSheetColors).\n!!Revision History\n&lt;&lt;&lt;\n''2006.10.08 [rbd]'' Begin version control\n''2006.10.23 [rbd]'' Remove height from &lt;input&gt; and &lt;select&gt;, was scrunching buttons.\n''2006.10.24 [rbd]'' Complete telemetry colors\n''2006.11.07 [rbd]'' Faint border for sysmon thumbnail, add light tiddler borders (with Checketts fix), use new TW 2.1.x ColorPalette color specs.\n''2006.11.21 [rbd]'' Add .collapsedTitle for folded tiddlers\n''2009 01 09 [rbd]'' Firefox 3 compatibility. ~HeaderForeground needed width 100%\n''2010.11.17 [rbd]'' ~ACP-490 Add border style for #sm_guideBox\n&lt;&lt;&lt;\n!Overrides for Standard TW styles\n***/\n/*{{{*/\nbody {\n	position: static; /*Clint's IE fix part 1 (part 2 in TW now) */\n}\n/** LOSER ON IE6 without Clint's IE fix (see body section at top!) **/\n.tiddler {\n border: 1px solid [[ColorPalette::TertiaryLight]];\n	padding-bottom: 8px;\n	margin-left: 8px; 	/* Vastly different on IE vs FireFox! */\n	margin-bottom: 12px;\n}\n.headerForeground {\n	width: 100%;           /* Firefox 3 suddenly needed this but not on HeaderShadow */\n	padding: 2.5em 0em 1em 1em;\n}\n.headerShadow {\n	padding: 2.5em 0em 1em 1em;\n}\n.viewer input {\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace;\n	font-size: 1.0em;\n}\n.viewer select {\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace;\n	font-size: 1.0em;\n}\n.viewer .sortheader {\n	font-weight: normal;\n}\n.viewer .filelist table {\n	margin_bottom: 0px;\n}\n.viewer .fileList tr {\n	border: none;\n}\n.viewer .fileList td, .viewer .fileList th {\n	border: 0;\n	padding: 2px 8px 2px 8px;\n}\n.viewer .noBorder table, .viewer .noBorder th, .viewer .noBorder tr, .viewer .noBorder td {\n	border: 0;\n}\n.viewer .noBorder #sm_thumb {	/* For sysmon thumbnail */\n	border: 1px solid #eee;\n	padding: 0px;\n}\n.viewer .noBorder #sm_guideBox { /* For sysmon guider trackbox image */\n	border: 1px solid #eee;\n	padding: 0px;\n}\n.viewer iframe {\n	border: 1px dashed blue;\n}\ntextarea {\n	font-family:courier !important;\n}\n/*}}}*/\n/***\n!Special style for folded tiddlers\n***/\n/*{{{*/\n.collapsedTitle {\n	color: #888;\n	font-size: 1.3em;\n	font-weight: bold;\n}\n/*}}}*/\n/***\n!System Status Display Styles\n***/\n/*{{{*/\ndiv.progBarBg {\n	position:relative;\n	height:0.75em;\n background-color: [[ColorPalette::SecondaryPale]];\n}\ndiv.progBarFg {\n	position:absolute;\n	overflow: hidden;\n	height: 0.75em;\n	width:0px;\n background-color: [[ColorPalette::SecondaryDark]];\n}\ntd.telemetry {\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace;\n	font-size: 1em;\n background-color: [[ColorPalette::SecondaryPale]];\n	white-space: pre;\n color: [[ColorPalette::TertiaryLight]]; 	/* &quot;off&quot; state overridden by inner &lt;span&gt; tags */\n}\nspan.telemActive {\ncolor: [[ColorPalette::Foreground]];\n}\nspan.telemWarn {\n	color: red;\n}\nspan.telemOff {\ncolor: [[ColorPalette::TertiaryLight]];\n} /* Match color in td.telemetry */\ntd.telemlabel {\n	white-space: nowrap;\n}\ntextarea.scriptlog {\n	border: 1px solid #18f;\n	margin: 0;\n	padding: 0.5em;\n background: [[ColorPalette::SecondaryPale]];\n	color: black;\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace !important;\n	font-size: 8pt !important;\n	white-space: pre;\n	line-height: 110%;\n}\n\n/*}}}*/\n</div>
<div tiddler="BrewSky Current Weather" modifier="Brewington" modified="201505042318" created="201505040437" tags="Custom UserContent">&lt;&lt;miniBrowser hideControls '/uploads/BrewSkyWeather.htm'&gt;&gt;</div>
<div tiddler="Browser Compatibility" modifier="Bob Denny" modified="201108261702" created="200612060535" tags="Help UserContent">The web content is optimized for [[W3C|http://www.w3.org/]] standards compatibility. As of 2011, the situation with [[browser quirks|http://www.quirksmode.org/]] has improved considerably. As far as we know, this web site is compatible with recent versions of Google Chrome, Firefox, Safari, Internet Explorer, and Opera. @@If you have display problems with this web site, update your browser!@@\n!!!Touch Browsers\nThe last few years has also seen the advent of //touch// browsers in the iPhone, Android, and iPad. The early bugs in these ~WebKit based browsers have been overcome, allowing them to be used for Share Your Sky! Older Android phones will likely have problems, but any Android 2.2 (2010) or later phone will work fine.\n!!!Authoring with ~FireFox\nThe embedded server engine that powers ACP's web services has a bug that prevents FireFox from saving authored web content (authoring mode). We recommend you use [[Google Chrome|http://www.google.com/chrome]] for authoring. [[Switch to Authoring Mode|author.html]] to learn more.\n</div>
<div tiddler="Cal Frame Help" modifier="Bob Denny" modified="201406211917" created="200610280117" tags="Help UserContent hideUser">\nIf you want cal frames at a specific temperature, enable Require cooler temp and fill in the required temperature. Look at the [[System Status]] display to see the current cooler temperature. If you do this, the cal run will start with a {{{#chill}}} command, which will turn on the cooler if needed, then set the temperature and wait for up to 15 minutes. To succeed, the temperature must stay within plus/minus 2 degrees of the setpoint continuously for 60 seconds.</div>
<div tiddler="CalibrateInfoSlider" modifier="Bob Denny" modified="200612050216" created="200612050213" tags="Help UserContent hideUser">Calibrates the auto-guider. You should //not// have to do this unless you change your optical train. If you are not the observatory operator, you probably don't have to do this either!</div>
<div tiddler="Calibration Frames" modifier="Bob Denny" modified="201406211925" created="200610270315" tags="Observing UserContent">&lt;&lt;slider &quot;&quot; &quot;Cal Frame Help&quot; Help &quot;Helpful information&quot;&gt;&gt;\n\nUse this to acquire dark and bias calibration frames. To request a __bias frame__, simply set the exposure duration to zero. The system will automatically recognize that as a request for a bias frame. \n&lt;html&gt;&lt;form&gt;\n	&lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0&quot;&gt;\n		&lt;tr&gt;\n			&lt;th&gt;Use&lt;/th&gt;\n			&lt;th&gt;Count&lt;/th&gt;\n			&lt;th&gt;Duration&lt;/th&gt;\n			&lt;th&gt;Binning&lt;/th&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow1&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse1&quot; id=&quot;CalUse1&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount1&quot; id=&quot;CalCount1&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure1&quot; id=&quot;CalExposure1&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning1&quot; id=&quot;CalBinning1&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow2&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse2&quot; id=&quot;CalUse2&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount2&quot; id=&quot;CalCount2&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure2&quot; id=&quot;CalExposure2&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning2&quot; id=&quot;CalBinning2&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow3&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse3&quot; id=&quot;CalUse3&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount3&quot; id=&quot;CalCount3&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure3&quot; id=&quot;CalExposure3&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning3&quot; id=&quot;CalBinning3&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow4&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse4&quot; id=&quot;CalUse4&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount4&quot; id=&quot;CalCount4&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure4&quot; id=&quot;CalExposure4&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning4&quot; id=&quot;CalBinning4&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow5&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse5&quot; id=&quot;CalUse5&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount5&quot; id=&quot;CalCount5&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure5&quot; id=&quot;CalExposure5&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning5&quot; id=&quot;CalBinning5&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow6&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse6&quot; id=&quot;CalUse6&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount6&quot; id=&quot;CalCount6&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure6&quot; id=&quot;CalExposure6&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning6&quot; id=&quot;CalBinning6&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow7&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse7&quot; id=&quot;CalUse7&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount7&quot; id=&quot;CalCount7&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure7&quot; id=&quot;CalExposure7&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning7&quot; id=&quot;CalBinning7&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow8&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse8&quot; id=&quot;CalUse8&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount8&quot; id=&quot;CalCount8&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure8&quot; id=&quot;CalExposure8&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning8&quot; id=&quot;CalBinning8&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow9&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse9&quot; id=&quot;CalUse9&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount9&quot; id=&quot;CalCount9&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure9&quot; id=&quot;CalExposure9&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning9&quot; id=&quot;CalBinning9&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow10&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse10&quot; id=&quot;CalUse10&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount10&quot; id=&quot;CalCount10&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure10&quot; id=&quot;CalExposure10&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning10&quot; id=&quot;CalBinning10&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow11&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse11&quot; id=&quot;CalUse11&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount11&quot; id=&quot;CalCount11&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure11&quot; id=&quot;CalExposure11&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning11&quot; id=&quot;CalBinning11&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow12&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse12&quot; id=&quot;CalUse12&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount12&quot; id=&quot;CalCount12&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure12&quot; id=&quot;CalExposure12&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning12&quot; id=&quot;CalBinning12&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow13&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse13&quot; id=&quot;CalUse13&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount13&quot; id=&quot;CalCount13&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure13&quot; id=&quot;CalExposure13&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning13&quot; id=&quot;CalBinning13&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow14&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse14&quot; id=&quot;CalUse14&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount14&quot; id=&quot;CalCount14&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure14&quot; id=&quot;CalExposure14&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning14&quot; id=&quot;CalBinning14&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow15&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse15&quot; id=&quot;CalUse15&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount15&quot; id=&quot;CalCount15&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure15&quot; id=&quot;CalExposure15&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning15&quot; id=&quot;CalBinning15&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;CalRow16&quot; style=&quot;display:none;&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;CalUse16&quot; id=&quot;CalUse16&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalCount16&quot; id=&quot;CalCount16&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;CalExposure16&quot; id=&quot;CalExposure16&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;select name=&quot;CalBinning16&quot; id=&quot;CalBinning16&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr&gt;\n			&lt;td colspan=&quot;4&quot;&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;button&quot; title=&quot;Click to add another row&quot; onclick=&quot;DC3.Lib.expandoAddRow('Cal');&quot;&gt;More&lt;/a&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n	&lt;/table&gt;\n&amp;nbsp;&lt;input type=&quot;checkbox&quot; name=&quot;CalReqTemp&quot; value=&quot;yes&quot; /&gt;Require cooler temp\n&lt;input type=&quot;text&quot; name=&quot;CalTemp&quot; size=&quot;4&quot; value=&quot;-20&quot; /&gt; deg C&lt;br&gt;&lt;br&gt;\n&lt;/form&gt;&lt;/html&gt;&lt;&lt;PersistentForm&gt;&gt;&lt;&lt;PostForm &quot;&quot; &quot;/ac/aacqcal.asp&quot; &quot;Acquire Cal Frames&quot; &quot;Starts the cal frame acquisition process&quot;&gt;&gt;&lt;&lt;ValidateForm &quot;&quot; &quot;postit&quot;&gt;&gt;\n&lt;script&gt;DC3.Lib.expandoInitializeForm(&quot;Cal&quot;);&lt;/script&gt;\n</div>
<div tiddler="CaseSensitiveSearch" modifier="Bob Denny" modified="200610271419" created="200610271419" tags="Help UserContent hideUser">Turn this on to cause searching to be case-sensitive.</div>
<div tiddler="CenterScopeInfoSlider" modifier="Bob Denny" modified="201207091615" created="200612050133" tags="Help UserContent hideUser">Use this to perfect the pointing of your scope. It does a standard ACP pointing update. It takes an image, plate solves, then &lt;% if(Util.PointingCorrectionEnabled) { %&gt;adds a new mapping point to the pointing corrector, improving the accuracy in the area where the scope is currently pointed&lt;% } else { %&gt;syncs or centers the scope with the hyper-accurate coordinates thus obtained&lt;% }%&gt;.&lt;% if(Prefs.EnableAllSkySolving) { %&gt; All-sky plate solving is available on this observatory, so if the basic plate solution fails after being tried at two closely spaced locations, it will try to do an all-sky plate solution using [[Astrometry.net|http://astrometry.net]]. This often succeeds, and if the telescope supports syncing, will result in the telescope being re-synced to recover its pointing.&lt;% } %&gt;</div>
<div tiddler="Check Observing Plan" modifier="Bob Denny" modified="200610301528" created="200610232303" tags="UserContent Observing">&lt;&lt;slider &quot;&quot; &quot;Check Observing Plan Help&quot; Help &quot;Helpful information&quot;&gt;&gt;\n\n&lt;html&gt;&lt;table width=&quot;96%&quot; style=&quot;border:none;margin:1px;background:transparent&quot;&gt;&lt;iframe id=&quot;acheckplan&quot; src=&quot;/ac/acheckplan.asp&quot; width=&quot;100%&quot; height=&quot;0&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowtransparency style=&quot;border:none;&quot;&gt;&lt;/iframe&gt;&lt;/table&gt;&lt;/html&gt;&lt;script&gt;\n// This is for lost refresh on IE6\nif(document.all) { // IE\nvar iFrame = place.getElementsByTagName(&quot;iframe&quot;)[0];\niFrame .src = iFrame .src;\n}\n&lt;/script&gt;</div>
<div tiddler="Check Observing Plan Help" modifier="Bob Denny" modified="200611302111" created="200610240009" tags="Help UserContent hideUser">\nThis item provides you with a way to check an [[Observing Plan|Making Observing Plans]] before uploading it to your [[Plans Area|Observing Plans]] for running. Virtually any plan error will be detected, but there are a few things that can't be checked because it's designed to be used with the imager and telescope offline. The following things are not checked:\n*Filter requested but imager has no filters\n*Filter not specified but imager has filters\n*Filter name matches one of the imager's filters\n*Rotator PA given but imager has no rotator\n*Rotator PA not given, but imager has a rotator\n*#Orbital tracking (#trackon) specified but the mount doesn't support it\n*#Dome control directives (#domeopen/#domeclose) given but there is no dome controller\n*Errors in the syntax of orbital elements for solar system objects or NEOCP ephemerides\n*Explicit flat plan file specifications are not checked for existence.\nAnd of course, target visibility can't be checked because the plan will be run at a different time. All of the above will be checked at the start of an actual run, so be sure to look at the system console after starting a plan to make sure that one of these errors isn't detected. The plan checker is designed to eliminate almost all sources of errors before uploading the plan.</div>
<div tiddler="CheckboxPlugin" modifier="Bob Denny" modified="200609232044" created="200609122212" tags="plugin systemConfig">/***\n|''Name:''|CheckboxPlugin|\n|''Source:''|http://www.TiddlyTools.com/#CheckboxPlugin|\n|''Author:''|Eric Shulman - ELS Design Studios|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''~CoreVersion:''|2.0.10|\n\nAdd checkboxes to your tiddler content. Checkbox states can be preserved in the document by either automatically modifying the tiddler content or setting/removing tags on specified tiddlers, or they may be saved as local cookies by assigning an optional 'chkID' to the checkbox. Add custom javascript for programmatic initialization and onClick handling for any checkbox. Also provides access to checkbox DOM element data and tracks the checkbox state in TiddlyWiki's config.options[] internal data.\n\n!!!!!Usage\n&lt;&lt;&lt;\nThe checkbox syntax, including all optional parameters, is contained inside a matched set of [ and ] brackets.\n{{{ [x=id(title|tag){init_script}{onclick_script}] }}}\n\nAn alternative syntax lets you place the optional parameters ''outside'' the [ and ] brackets, and is provided for backward-compatibility with existing content that may include checkbox definitions based on earlier releases of this plugin:\n{{{ [x]=id(title|tag){init_script}{onclick_script} }}}\n\n//{{{\n[ ]or[_] and [x]or[X]\n//}}}\nSimple checkboxes. The current unchecked/checked state is indicated by the character between the {{{[}}} and {{{]}}} brackets (&quot;_&quot; means unchecked, &quot;X&quot; means checked). When you click on a checkbox, the current state is retained by directly modifying the tiddler content to place the corresponding &quot;_&quot; or &quot;X&quot; character in between the brackets\n//{{{\n[x=id]\n//}}}\nAssign an optional ID to the checkbox so you can use {{{document.getElementByID(&quot;id&quot;)}}} to manipulate the checkbox DOM element, as well as tracking the current checkbox state in {{{config.options[&quot;id&quot;]}}}. If the ID starts with &quot;chk&quot; the checkbox state will also be saved in a cookie, so it can be automatically restored whenever the checkbox is re-rendered (overrides any default {{{[x]}}} or {{{[_]}}} value). If a cookie value is kept, the &quot;_&quot; or &quot;X&quot; character in the tiddler content remains unchanged, and is only applied as the default when a cookie-based value is not currently defined.\n//{{{\n[x(title|tag)] or [x(title:tag)]\n//}}}\nInitializes and tracks the current checkbox state by setting or removing (&quot;TogglyTagging&quot;) a particular tag value from a specified tiddler. If you omit the tiddler title (and the | or : separator), the specified tag is assigned to the current tiddler. If you omit the tag value, as in {{{(title|)}}}, the default tag, {{{checked}}}, is assumed. Omitting both the title and tag, {{{()}}}, tracks the checkbox state by setting the &quot;checked&quot; tag on the current tiddler. When tag tracking is used, the &quot;_&quot; or &quot;X&quot; character in the tiddler content remains unchanged, and is not used to set or track the checkbox state. If a tiddler title named in the tag does not exist, the checkbox state defaults to //unselected//. When the checkbox is subsequently changed to //selected//, it will automatically (and silently) create the missing tiddler and then add the tag to it. //''NOTE: beginning with version 2.1.2 of this plugin, the &quot;|&quot; separator is the preferred separator between the title and tag name, as it avoids syntactic ambiguity when &quot;:&quot; is used within tiddler titles or tag names.''//\n//{{{\n[x{javascript}{javascript}]\n//}}}\nYou can define optional javascript code segments to add custom initialization and/or 'onClick' handling to a checkbox. The current checkbox state (and it's other DOM attributes) can be set or read from within these code segments by reference to the default context-object, 'this'.\n\nThe first code segment will be executed when the checkbox is initially displayed, so that you can programmatically determine it's starting checked/unchecked state. The second code segment (if present) is executed whenever the checkbox is clicked, so that you can perform programmed responses or intercept and override the checkbox state based on complex logic using the TW core API or custom functions defined in plugins (e.g. testing a particular tiddler title to see if certain tags are set or setting some tags when the checkbox is clicked).\n\nNote: if you want to use the default checkbox initialization processing with a custom onclick function, use this syntax: {{{ [x=id{}{javascript}] }}} \n&lt;&lt;&lt;\n!!!!!Configuration\n&lt;&lt;&lt;\nNormally, when a checkbox state is changed, the affected tiddlers are automatically re-rendered, so that any checkbox-dependent dynamic content can be updated. There are three possible tiddlers to be re-rendered, depending upon where the checkbox is placed, and what kind of storage method it is using.\n*''container'': the tiddler in which the checkbox is displayed. (e.g., this tiddler)\n*''tagged'': the tiddler that is being tagged (e.g., &quot;~MyTask&quot; when tagging &quot;~MyTask:done&quot;)\n*''tagging'': the &quot;tag tiddler&quot; (e.g., &quot;~done&quot; when tagging &quot;~MyTask:done&quot;)\nYou can set the default refresh handling for all checkboxes in your document by using the following javascript syntax either in a systemConfig plugin, or as an inline script. (Substitute true/false values as desired):\n{{{config.checkbox.refresh = { tagged:true, tagging:true, container:true };}}}\n\nYou can also override these defaults for any given checkbox by using an initialization function to set one or more of the refresh options. For example:\n{{{[_{this.refresh.container=false}]}}}\n&lt;&lt;&lt;\n!!!!!Examples\n&lt;&lt;&lt;\n//{{{\n[X] label\n[_] label\n//}}}\n&gt;checked and unchecked static default values\n&gt;[X] label\n&gt;[_] label\n//{{{\n[_=demo] label\n//}}}\n&gt;document-based value (id='demo', no cookie)\n&gt;[_=demo] label\n//{{{\n[_=chkDemo] label\n//}}}\n&gt;cookie-based value (id='chkDemo')\n&gt;[_=chkDemo] label\n//{{{\n[_(CheckboxPlugin|demotag)]\n[_(CheckboxPlugin|demotag){this.refresh.tagged=this.refresh.container=false}]\n//}}}\n&gt;tag-based value (TogglyTagging)\n&gt;[_(CheckboxPlugin|demotag)] toggle 'demotag' (and refresh tiddler display)\n&gt;[_(CheckboxPlugin|demotag){this.refresh.tagged=this.refresh.container=false}] toggle 'demotag' (no refresh)\n&gt;current tags: &lt;script&gt;return store.getTiddler(story.findContainingTiddler(place).id.substr(7)).tags.toString();&lt;/script&gt;\n&gt;&lt;script label=&quot;click to view current tags&quot;&gt;alert(store.getTiddler(story.findContainingTiddler(place).id.substr(7)).tags.toString());return false&lt;/script&gt;\n//{{{\n[X{this.checked=true}{alert(this.checked?&quot;on&quot;:&quot;off&quot;)}] message box with checkbox state\n//}}}\n&gt;custom init and onClick functions\n&gt;[X{this.checked=true}{alert(this.checked?&quot;on&quot;:&quot;off&quot;)}] message box with checkbox state\nRetrieving option values:\nconfig.options['demo']=&lt;script&gt;return config.options['demo']?&quot;true&quot;:&quot;false&quot;;&lt;/script&gt;\nconfig.options['chkDemo']=&lt;script&gt;return config.options['chkDemo']?&quot;true&quot;:&quot;false&quot;;&lt;/script&gt;\n\n!!!!!Installation\nimport (or copy/paste) the following tiddlers into your document:\n''CheckboxPlugin'' (tagged with &lt;&lt;tag systemConfig&gt;&gt;)\n&lt;&lt;&lt;\n!!!!!Revision History\n&lt;&lt;&lt;\n2006.05.04 - 2.1.3 fix use of findContainingTiddler() to check for a non-null return value, so that checkboxes won't crash when used outside of tiddler display context (such as in header, sidebar or mainmenu)\n2006.03.11 - 2.1.2 added &quot;|&quot; as delimiter to tag-based storage syntax (e.g. &quot;tiddler|tag&quot;) to avoid parsing ambiguity when tiddler titles or tag names contain &quot;:&quot;. Using &quot;:&quot; as a delimiter is still supported but is deprecated in favor of the new &quot;|&quot; usage. Based on a problem reported by JeffMason.\n2006.02.25 - 2.1.0 added configuration options to enable/disable forced refresh of tiddlers when toggling tags\n2006.02.23 - 2.0.4 when toggling tags, force refresh of the tiddler containing the checkbox.\n2006.02.23 - 2.0.3 when toggling tags, force refresh of the 'tagged tiddler' so that tag-related tiddler content (such as &quot;to-do&quot; lists) can be re-rendered.\n2006.02.23 - 2.0.2 when using tag-based storage, allow use [[ and ]] to quote tiddler or tag names that contain spaces:\n{{{[x([[Tiddler with spaces]]:[[tag with spaces]])]}}}\n2006.01.10 - 2.0.1 when toggling tags, force refresh of the 'tagging tiddler'. For example, if you toggle the &quot;systemConfig&quot; tag on a plugin, the corresponding &quot;systemConfig&quot; TIDDLER will be automatically refreshed (if currently displayed), so that the 'tagged' list in that tiddler will remain up-to-date.\n2006.01.04 - 2.0.0 update for ~TW2.0\n2005.12.27 - 1.1.2 Fix lookAhead regExp handling for {{{[x=id]}}}, which had been including the &quot;]&quot; in the extracted ID. \nAdded check for &quot;chk&quot; prefix on ID before calling saveOptionCookie()\n2005.12.26 - 1.1.2 Corrected use of toUpperCase() in tiddler re-write code when comparing {{{[X]}}} in tiddler content with checkbox state. Fixes a problem where simple checkboxes could be set, but never cleared.\n2005.12.26 - 1.1.0 Revise syntax so all optional parameters are included INSIDE the [ and ] brackets. Backward compatibility with older syntax is supported, so content changes are not required when upgrading to the current version of this plugin. Based on a suggestion by GeoffSlocock\n2005.12.25 - 1.0.0 added support for tracking checkbox state using tags (&quot;TogglyTagging&quot;)\nRevised version number for official post-beta release.\n2005.12.08 - 0.9.3 support separate 'init' and 'onclick' function definitions.\n2005.12.08 - 0.9.2 clean up lookahead pattern\n2005.12.07 - 0.9.1 only update tiddler source content if checkbox state is actually different. Eliminates unnecessary tiddler changes (and 'unsaved changes' warnings)\n2005.12.07 - 0.9.0 initial BETA release\n&lt;&lt;&lt;\n!!!!!Credits\n&lt;&lt;&lt;\nThis feature was created by EricShulman from [[ELS Design Studios|http:/www.elsdesign.com]]\n&lt;&lt;&lt;\n!!!!!Code\n***/\n//{{{\nversion.extensions.CheckboxPlugin = {major: 2, minor: 1, revision:3 , date: new Date(2006,5,4)};\n//}}}\n\n// // 1.2.x compatibility\n//{{{\nif (!window.story) window.story=window;\nif (!store.getTiddler) store.getTiddler=function(title){return store.tiddlers[title]}\nif (!store.addTiddler) store.addTiddler=function(tiddler){store.tiddlers[tiddler.title]=tiddler}\nif (!store.deleteTiddler) store.deleteTiddler=function(title){delete store.tiddlers[title]}\n//}}}\n\n//{{{\nconfig.checkbox = { refresh: { tagged:true, tagging:true, container:true } };\nconfig.formatters.push( {\n name: &quot;checkbox&quot;,\n match: &quot;\s\s[[xX_ ][\s\s]\s\s=\s\s(\s\s{]&quot;,\n lookahead: &quot;\s\s[([xX_ ])(\s\s])?(=[^\s\ss\s\s(\s\s]{]+)?(\s\s([^\s\s)]*\s\s))?({[^}]*})?({[^}]*})?(\s\s])?&quot;,\n handler: function(w)\n {\n var lookaheadRegExp = new RegExp(this.lookahead,&quot;mg&quot;);\n lookaheadRegExp.lastIndex = w.matchStart;\n var lookaheadMatch = lookaheadRegExp.exec(w.source)\n if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart)\n {\n // get params\n var checked=lookaheadMatch[1];\n var id=lookaheadMatch[3];\n var tag=lookaheadMatch[4];\n var fn_init=lookaheadMatch[5];\n var fn_click=lookaheadMatch[6];\n // create checkbox element\n var c = document.createElement(&quot;input&quot;);\n c.setAttribute(&quot;type&quot;,&quot;checkbox&quot;);\n c.onclick=onClickCheckbox;\n c.srcpos=w.matchStart+1; // remember location of &quot;X&quot;\n c.container=story.findContainingTiddler(w.output); if (c.container) c.container=c.container.id.substr(7); // tiddler containing checkbox\n c.refresh = { };\n c.refresh.container=config.checkbox.refresh.container;\n c.refresh.tagged=config.checkbox.refresh.tagged;\n c.refresh.tagging=config.checkbox.refresh.tagging;\n w.output.appendChild(c);\n // set default state\n c.checked=(checked.toUpperCase()==&quot;X&quot;);\n // get/set state by ID\n if (id) {\n c.id=id.substr(1); // trim off leading &quot;=&quot;\n if (config.options[c.id]!=undefined)\n c.checked=config.options[c.id];\n else\n config.options[c.id]=c.checked;\n }\n // get/set state by tag\n if (tag) {\n c.tiddler=c.container;\n c.tag=tag.substr(1,tag.length-2).trim(); // trim off parentheses\n var pos=c.tag.indexOf(&quot;|&quot;); if (pos==-1) var pos=c.tag.indexOf(&quot;:&quot;);\n if (pos==0) { c.tag=tag.substr(1); }\n if (pos&gt;0) { c.tiddler=c.tag.substr(0,pos).replace(/\s[\s[/g,&quot;&quot;).replace(/\s]\s]/g,&quot;&quot;); c.tag=c.tag.substr(pos+1); }\n c.tag.replace(/\s[\s[/g,&quot;&quot;).replace(/\s]\s]/g,&quot;&quot;);\n if (!c.tag.length) c.tag=&quot;checked&quot;;\n var t=store.getTiddler(c.tiddler);\n c.checked = (t &amp;&amp; t.tags)?(t.tags.find(c.tag)!=null):false;\n }\n if (fn_init) c.fn_init=fn_init.trim().substr(1,fn_init.length-2); // trim off surrounding { and } delimiters\n if (fn_click) c.fn_click=fn_click.trim().substr(1,fn_click.length-2);\n c.init=true; c.onclick(); c.init=false; // compute initial state and save in tiddler/config/cookie\n w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;\n }\n }\n }\n)\n//}}}\n\n//{{{\nfunction onClickCheckbox()\n{\n if (this.fn_init)\n // custom function hook to set initial state (run only once)\n { try { eval(this.fn_init); this.fn_init=null; } catch(e) { displayMessage(&quot;Checkbox init error: &quot;+e.toString()); } }\n else if (this.fn_click)\n // custom function hook to override or react to changes in checkbox state\n { try { eval(this.fn_click) } catch(e) { displayMessage(&quot;Checkbox click error: &quot;+e.toString()); } }\n if (this.id)\n // save state in config AND cookie (only when ID starts with 'chk')\n { config.options[this.id]=this.checked; if (this.id.substr(0,3)==&quot;chk&quot;) saveOptionCookie(this.id); }\n if ((!this.id || this.id.substr(0,3)!=&quot;chk&quot;) &amp;&amp; !this.tag) {\n // save state in tiddler content only if not using cookie or tag tracking\n var t=story.findContainingTiddler(this); if (t) {\n var t=store.getTiddler(t.id.substr(7));\n if (this.checked!=(t.text.substr(this.srcpos,1).toUpperCase()==&quot;X&quot;)) { // if changed\n t.set(null,t.text.substr(0,this.srcpos)+(this.checked?&quot;X&quot;:&quot;_&quot;)+t.text.substr(this.srcpos+1),null,null,t.tags);\n store.setDirty(true);\n }\n }\n }\n if (this.tag) {\n var t=store.getTiddler(this.tiddler);\n if (!t) { t=(new Tiddler()); t.set(this.tiddler,&quot;&quot;,config.options.txtUserName,(new Date()),null); store.addTiddler(t); } \n var tagged=(t.tags &amp;&amp; t.tags.find(this.tag)!=null);\n if (this.checked &amp;&amp; !tagged) { t.tags.push(this.tag); store.setDirty(true); }\n if (!this.checked &amp;&amp; tagged) { t.tags.splice(t.tags.find(this.tag),1); store.setDirty(true); }\n // if tag state has been changed, force a display update\n if (this.checked!=tagged) {\n if (this.refresh.tagged) story.refreshTiddler(this.tiddler,null,true); // the TAGGED tiddler\n if (this.refresh.tagging) story.refreshTiddler(this.tag,null,true); // the TAGGING tiddler\n }\n }\n // refresh containing tiddler (but not during initial rendering, or we get an infinite loop!)\n if (!this.init &amp;&amp; this.refresh.container &amp;&amp; this.container!=this.tiddler)\n story.refreshTiddler(this.container,null,true); // the tiddler CONTAINING the checkbox\n return true;\n}\n//}}}</div>
<div tiddler="ClassicPageTemplate" modifier="Bob Denny" modified="200609231817" created="200609190206" tags="pageTemplate systemContent">&lt;div class='header'&gt;\n&lt;div class='titleLine'&gt;\n&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;\n&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;\n&lt;div id='sidebar'&gt;\n&lt;div macro='gradient vert #ffffff #cc9900'&gt;\n&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id='displayArea'&gt;\n&lt;div id='messageArea'&gt;&lt;/div&gt;\n&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;\n&lt;/div&gt;</div>
<div tiddler="ClassicStyleSheet" modifier="Bob Denny" modified="201011172201" created="200609190205" tags="styleSheet systemContent">/***\n!TiddlyWiki Classic Color Scheme\nDesigned by Jeremy Ruston\nModified by Bob Denny 19-Sep-2006 for Share Your Sky! (add pale b/g to items, added .viewer {...} style def.)\n\n!!Revision History\n&lt;&lt;&lt;\n''2006.09.19 [rbd]'' Initial adaptation, add pale b/g to items, added .viewer {...} style def.\n''2006.10.08 [rbd]'' Much more work over last 21 days, add styles for System Monitor, clean up XP bar styles.\n''2006.10.23 [rbd]'' Remove height from &lt;input&gt; and &lt;select&gt;, was scrunching buttons.\n''2006.10.26 [rbd]'' Reduce height of header, indent title 0.5em more to 1em, complete telemetry colors.\n''2006.11.07 [rbd]'' Faint border for thumbnail, make progbars match rest of display,\n''2006.11.21 [rbd]'' Add .collapsedTitle for folded tiddlers\n''2010.11.17 [rbd]'' ~ACP-490 Add border style for #sm_guideBox\n&lt;&lt;&lt;\n!Colors Used\n*@@bgcolor(#630):color(#fff): #630@@\n*@@bgcolor(#930): #930@@\n*@@bgcolor(#996633): #963@@\n*@@bgcolor(#c90): #c90@@\n*@@bgcolor(#cf6): #cf6@@\n*@@bgcolor(#cc9): #cc9@@\n*@@bgcolor(#ba9): #ba9@@\n*@@bgcolor(#996): #996@@\n*@@bgcolor(#300):color(#fff): #300@@\n*@@bgcolor(#000000):color(#fff): #000@@\n*@@bgcolor(#666): #666@@\n*@@bgcolor(#888): #888@@\n*@@bgcolor(#aaa): #aaa@@\n*@@bgcolor(#ddd): #ddd@@\n*@@bgcolor(#eee): #eee@@\n*@@bgcolor(#ffffff): #fff@@\n*@@bgcolor(#f00): #f00@@\n*@@bgcolor(#ff3): #ff3@@\n!Generic Rules /%==============================================%/\n***/\n/*{{{*/\nbody {\n	background: #fff;\n	color: #000;\n	position: static; /*Clint's IE fix part 1 (part 2 in TW now) */\n}\ntextarea {\n	font-family:courier !important;\n}\na {\n	color: #963;\n}\na:hover {\n	background: #963;\n	color: #fff;\n}\na img {\n	border: 0;\n}\n.collapsedTitle {\n	color: #888;\n	font-size: 1.3em;\n	font-weight: bold;\n}\nh1, h2, h3, h4, h5 {\n	background: #cc9;\n}\n/*}}}*/\n/***\n!Header /%==================================================%/\n***/\n/*{{{*/\n.header {\n	background: #300;\n}\n.titleLine {\n	color: #fff;\n	padding: 2.5em 0em 1em 1em;\n}\n.titleLine a {\n	color: #cf6;\n}\n.titleLine a:hover {\n	background: transparent;\n}\n/*}}}*/\n/***\n!Main Menu /%=================================================%/\n***/\n/*{{{*/\n#mainMenu .button {\n	color: #930;\n}\n#mainMenu .button:hover {\n	color: #cf6;\n	background: #930;\n}\n#mainMenu li {\n	list-style: none;\n}\n/*}}}*/\n/***\n!Sidebar options /%=================================================%/\n~TiddlyLinks and buttons are treated identically in the sidebar and slider panel\n***/\n/*{{{*/\n#sidebar {\n	background: #c90;\n	right: 0;\n}\n#sidebarOptions a {\n	color: #930;\n	border: 0;\n	margin: 0;\n	padding: .25em .5em;\n}\n#sidebarOptions a:hover {\n	color: #cf6;\n	background: #930;\n}\n#sidebarOptions a:active {\n	color: #930;\n	background: #cf6;\n}\n#sidebarOptions .sliderPanel {\n	background: #eea;\n	margin: 0;\n}\n#sidebarOptions .sliderPanel a {\n	color: #930;\n}\n#sidebarOptions .sliderPanel a:hover {\n	color: #cf6;\n	background: #930;\n}\n#sidebarOptions .sliderPanel a:active {\n	color: #930;\n	background: #cf6;\n}\n/*}}}*/\n/***\n!Sidebar tabs /%=================================================%/\n***/\n/*{{{*/\n.tabSelected, .tabContents {\n	background: #eea;\n	border: 0;\n}\n.tabUnselected {\n	background: #c90;\n}\n#sidebarTabs {\n	background: #c90;\n}\n#sidebarTabs .tabSelected {\n	color: #cf6;\n	background: #963;\n}\n#sidebarTabs .tabUnselected {\n	color: #cf6;\n	background: #930;\n}\n#sidebarTabs .tabContents {\n	background: #963;\n}\n#sidebarTabs .txtMoreTab .tabSelected, #sidebarTabs .txtMoreTab .tabSelected:hover {\n	background: #930;\n	color: #cf6;\n}\n#sidebarTabs .txtMoreTab .tabUnselected, #sidebarTabs .txtMoreTab .tabUnselected:hover {\n	background: #300;\n	color: #cf6;\n}\n#sidebarTabs .txtMoreTab .tabContents {\n	background: #930;\n}\n#sidebarTabs .tabContents a {\n	color: #cf6;\n	border: 0;\n}\n#sidebarTabs .button.highlight, #sidebarTabs .tabContents a:hover {\n	background: #cf6;\n	color: #300;\n}\n/*}}}*/\n/***\n!Message Area /%=================================================%/\n***/\n/*{{{*/\n#messageArea {\n	background: #930;\n	color: #fff;\n}\n#messageArea a:link, #messageArea a:visited {\n	color: #c90;\n}\n#messageArea a:hover {\n	color: #963;\n	background: transparent;\n}\n#messageArea a:active {\n	color: #fff;\n}\n/*}}}*/\n/***\n!Popup /%=================================================%/\n***/\n/*{{{*/\n.popup {\n	background: #eea;\n	border: 1px solid #930;\n}\n.popup hr {\n	color: #963;\n	background: #963;\n	border-bottom: 1px;\n}\n.popup li.disabled {\n	color: #ba9;\n}\n.popup li a, .popup li a:visited {\n	color: #300;\n}\n.popup li a:hover {\n	background: #930;\n	color: #eea;\n}\n/*}}}*/\n/***\n!Tiddler Display /%=================================================%/\n***/\n/*{{{*/\n/** LOSER ON IE6 without Clint's IE fix (see body section at top!) **/\n.tiddler {\n	border: 1px solid #eee;\n	padding-bottom: 8px;\n	margin-left: 8px; 	/* Vastly different on IE vs FireFox! */\n	margin-bottom: 12px;\n}\n.tiddler .button {\n	color: #930;\n}\n.tiddler .button:hover {\n	color: #cf6;\n	background: #930;\n}\n.tiddler .button:active {\n	color: #fff;\n	background: #c90;\n}\n.shadow .title {\n	color: #888;\n}\n.title {\n	color: #422;\n}\n.subtitle {\n	color: #866;\n}\n.toolbar {\n	color: #aaa;\n}\n.toolbar a, .toolbar a:hover {\n	border: 0;\n}\n.tagging, .tagged {\n	border: 1px solid #fff;\n	background-color: #ffc;\n}\n.selected .tagging, .selected .tagged {\n	border: 1px solid #aa6;\n	background-color: #ffc;\n}\n.tagging .listTitle, .tagged .listTitle {\n	color: #999999;\n}\n.footer {\n	color: #ddd;\n}\n.selected .footer {\n	color: #888;\n}\n.sparkline {\n	background: #eea;\n	border: 0;\n}\n.sparktick {\n	background: #930;\n}\n.errorButton {\n	color: #ff0;\n	background: #f00;\n}\n.zoomer {\n	color: #963;\n	border: 1px solid #963;\n}\n/*}}}*/\n/***\n''The viewer is where the tiddler content is displayed'' /%------------------------------------------------%/\n***/\n/*{{{*/\n.viewer .button {\n	background: #c90;\n	color: #300;\n	border-right: 1px solid #300;\n	border-bottom: 1px solid #300;\n}\n.viewer .button:hover {\n	background: #eea;\n	color: #c90;\n}\n.viewer .imageLink {\n	background: transparent;\n}\n.viewer blockquote {\n	border-left: 3px solid #666;\n}\n.viewer input {\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace;\n	font-size: 1.0em;\n}\n.viewer select {\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace;\n	font-size: 1.0em;\n}\n.viewer table {\n	border: 2px solid #303030;\n}\n.viewer th, thead td {\n	background: #996;\n	border: 1px solid #606060;\n	color: #fff;\n}\n.viewer td, .viewer tr {\n	border: 1px solid #606060;\n}\n.viewer .sortheader {\n	font-weight: normal;\n}\n.viewer .fileList table {\n	border-color: #ff7f00;\n	margin-bottom: 0px;\n}\n.viewer .fileList tr {\n	border: none;\n}\n.viewer .fileList td, .viewer .fileList th {\n	border: 0;\n	padding: 2px 8px 2px 8px;\n}\n.viewer .noBorder table, .viewer .noBorder th, .viewer .noBorder tr, .viewer .noBorder td {\n	border: 0;\n}\n.viewer .noBorder #sm_thumb {	/* For sysmon thumbnail */\n	border: 1px solid #eee;\n	padding: 0px;\n}\n.viewer .noBorder #sm_guideBox { /* For sysmon guider trackbox image */\n	border: 1px solid #eee;\n	padding: 0px;\n}\n.viewer pre {\n	border: 1px solid #963;\n	background: #eea;\n}\n.viewer code {\n	color: #630;\n}\n.viewer hr {\n	border: 0;\n	border-top: dashed 1px #606060;\n	color: #666;\n}\n.viewer iframe {\n	border: 1px solid #963;\n}\n.highlight, .marked {\n	background: #ff3;\n}\n/*}}}*/\n/***\n''The editor replaces the viewer in the tiddler'' /%------------------------------------------------%/\n***/\n/*{{{*/\n.editor input {\n	border: 1px solid #000;\n}\n.editor textarea {\n	border: 1px solid #000;\n	width: 100%;\n}\n.editorFooter {\n	color: #aaa;\n}\n.editorFooter a {\n	color: #930;\n}\n.editorFooter a:hover {\n	color: #cf6;\n	background: #930;\n}\n.editorFooter a:active {\n	color: #fff;\n	background: #c90;\n}\n/*}}}*/\n/***\n!XP ~NavBar Style Overrides\n***/\n/*{{{*/\n\n.topItem {\n	background: url(&quot;im/bar-classic-up.png&quot;) no-repeat 0 0;\n	color:#cf6;\n}\n.topItemOver {\n	background: url(&quot;im/bar-classic-up-on.png&quot;) no-repeat 0 0;\n	color: #fff;\n}\n.topItemClose {\n	background: url(&quot;im/bar-classic-down.png&quot;) no-repeat 0 0;\n	color:#cf6;\n}\n.topItemCloseOver {\n	background: url(&quot;im/bar-classic-down-on.png&quot;) no-repeat 0 0;\n	color: #fff;\n}\n.dropMenu {\n	background-color: #963;\n	color: #fff;\n}\n.subItem, .subSubItem {\n	color: #fff;\n}\n.subItemOver, .subSubItemOver {\n	color: #fff;\n}\n.subItem a, .subSubItem a {\n	color: #cf6;\n}\n.subItemOver a, .subSubItemOver a {\n	color: #000;\n	background-color: #cf6;\n}\n/*}}}*/\n/***\n!System Status Display Styles\n***/\n/*{{{*/\ndiv.progBarBg {\n	position:relative;\n	height:0.75em;\n	background-color: #cf6;\n}\ndiv.progBarFg {\n	position:absolute;\n	overflow: hidden;\n	height: 0.75em;\n	width:0px;\n	background-color: #963;\n}\ntd.telemetry {\n	font-family: Lucida Console, Courier New, Courier, monospace;\n	font-size: 1em;\n	background-color: #cf6;\n	white-space: pre;\n	color: #c0c0c0;\n// &quot;off&quot; state overridden by inner &lt;span&gt; tags\n}\nspan.telemActive {\n	color: black;\n}\nspan.telemWarn {\n	color: #ff0000;\n}\nspan.telemOff {\n	color: #c0c0c0;\n} /* Match color in td.telemetry */\ntd.telemlabel {\n	white-space: nowrap;\n}\ntextarea.scriptlog {\n	border: 1px solid #963;\n	margin: 0;\n	padding: 0.5em;\n	background: #cf6;\n	color: black;\n	font-family: Lucida Console, Courier New, Courier, monospace !important;\n	font-size: 8pt !important;\n	white-space: pre;\n	line-height: 110%;\n}\n\n/*}}}*/\n</div>
<div tiddler="CloudSensor II" modifier="Bob Denny" modified="200611070059" created="200611070059" tags="Control UserContent">&lt;&lt;RemoteContent '/ac/aclarity2.asp' Refresh 'Refresh the Clarity info'&gt;&gt;</div>
<div tiddler="CollapseTiddlerPlugin" modifier="Bob Denny" modified="200611211428" created="200611211426" tags="plugin systemConfig">/***\n|''Name:''|CollapseTiddlersPlugin|\n|''Description:''|Command to collapse/restore tiddler display like WindowBlinds|\n|''Date:''|November 21, 2006|\n|''Source:''|[[CollapseTiddlerPlugin]]|\n|''Author:''|Bradley Meck, Eric Schulman, Bob Denny|\n|''License:''|unknown|\n|''Version:''|1.0.1|\n|''~CoreVersion:''|2.0.10/2.1.x|\n|''Browser:''|Firefox 1.5; Internet Explorer 6.0; Safari|\n|''Require:''|[[CollapsedTemplate]] and optionally [[WebCollapsedTemplate]]|\nThis contains 3 commands for use in the toolbar. \n!!Revision History\n&lt;&lt;&lt;\n''????.??.?? [?.?.?]'' Initial creation\n''2006.02.06 [?.?.?]'' ELS - Added check for readOnly flag to use alternative WebCollapsedTemplate\n''2006.02.24 [?.?.?]'' ELS - Added fallback to CollapsedTemplate if WebCollapsedTemplate is not found\n''2006.11.21 [1.0.1]'' RBD - Reformat, add complete info, describe, validate on TW 2.1.x, remove 'all' macros, change toooltip 'tiddler' to 'item'\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\n//{{{\nversion.extensions.collapseTiddler = {\n major: 1, minor: 0, revision: 1,\n date: new Date(2006, 11, 21), \n type: 'commands',\n source: &quot;#CollapseTiddlerPlugin&quot;\n};\n\nconfig.commands.collapseTiddler = {\n \n text: &quot;fold&quot;,\n tooltip: &quot;Collapse this tiddler&quot;,\n \n //\n // Common function, refactored (rbd)\n //\n findTemplate: function()\n {\n var t = (readOnly &amp;&amp; store.tiddlerExists(&quot;WebCollapsedTemplate&quot;)) ? &quot;WebCollapsedTemplate&quot; : &quot;CollapsedTemplate&quot;;\n if (!store.tiddlerExists(t)) { \n alert(&quot;Can't find 'CollapsedTemplate'&quot;); \n return null; \n }\n return t;\n },\n \n //\n // Collapse handler\n //\n handler: function(event, src, title)\n {\n var tid = story.findContainingTiddler(src);\n if(tid.getAttribute(&quot;template&quot;) != config.tiddlerTemplates[DEFAULT_EDIT_TEMPLATE]) {\n var t = this.findTemplate();\n if(t === null) return;\n if(tid.getAttribute(&quot;template&quot;) != t ) {\n tid.setAttribute(&quot;oldTemplate&quot;, tid.getAttribute(&quot;template&quot;));\n story.displayTiddler(null, title, t);\n }\n }\n }\n};\n\nconfig.commands.expandTiddler = {\n \n text: &quot;unfold&quot;,\n tooltip: &quot;Restore this tiddler&quot;,\n \n handler: function(event, src, title)\n {\n var tid = story.findContainingTiddler(src);\n story.displayTiddler(null, title, tid.getAttribute(&quot;oldTemplate&quot;));\n }\n};\n\nconfig.commands.collapseOthers = {\n \n text: &quot;focus&quot;,\n tooltip: &quot;Restore this tiddler and collapse all others&quot;,\n \n handler: function(event, src, title)\n {\n var tid = story.findContainingTiddler(src);\n story.forEachTiddler(\n function(title, tiddler) {\n if(tiddler.getAttribute(&quot;template&quot;) != config.tiddlerTemplates[DEFAULT_EDIT_TEMPLATE]) {\n var t = config.commands.collapseTiddler.findTemplate();\n if(t === null) return;\n if (tid == tiddler) \n t = tid.getAttribute(&quot;oldTemplate&quot;); // If this is null, wasn't collapsed anyway\n story.displayTiddler(null, title, t); // null here uses current template!\n }\n }\n );\n }\n};\n//}}}\n</div>
<div tiddler="CollapsedTemplate" modifier="Bob Denny" modified="200611211445" created="200611211427" tags="systemContent">&lt;div class='toolbar'&gt;\n&lt;span macro='toolbar expandTiddler collapseOthers -closeTiddler'&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class='collapsedTitle' macro='view title'&gt;&lt;/div&gt;</div>
<div tiddler="Common Questions" modifier="Bob Denny" modified="201108261744" created="200611010238" tags="Help UserContent">!File Access and Usage\n#__Where are my Plan, Image and Log Files__? &lt;% if(User.Username == &quot;localweb&quot;) { %&gt;You are running the web browser locally in the observatory, via the Use Web Browser button (localhost). Therefore, your documents are where they are usually stored when using the ACP console, in your Windows ''My Documents'' area, under ''ACP Observing''.&lt;% } else { %&gt;Open the My Documents menu bar on the left to see the Acquired Images, Observing Plans, and Run Logs selections. At the observatory, these documents are stored in the web browser's file storage area, set by the system administrator.&lt;% } %&gt;\n#__How do I upload an ACP observing plan__? &lt;% if(User.Username == &quot;localweb&quot;) { %&gt;You are running the web browser locally in the observatory, via the Use Web Browser button (localhost). Therefore you just store the plan in your local ''My Documents\sACP Observing\sPlans folder''.&lt;% } else { %&gt;Open the My Documents menu bar on the left to see the Observing Plans selection. In that item is an uploading form.&lt;% } %&gt;\n!Browser Issues\n#__I clicked the back arrow and everything disappeared! What happened__? This site uses advanced web techniques designed to avoid page changes. Things are displayed in bits within one page, and data is updated dynamically behind the scenes. This means you don't change web pages, ever. Leave the back and forward buttons alone. For more info, see [[Using This Web Site]].\n#__The display looks terrible, very old fashioned, and lots of things just don't work. What's going on__? You are using an old browser. This site was developed for the ~W3C standards in effect 10 years ago, and uses extensive Javascript and cookie services. Upgrade your browser to the latest version. Your browsing experience will be improved in all areas.\n#__Why does the display act crazy and look bad on my mobile phone or pad__? Only the most recent (as of 2011) iPhone, iPad, and Android browsers are good enough to handle the ACP web content. If your older phone or pad doesn't work well with our web site, there's not much we can do, sorry.\n</div>
<div tiddler="Computer Power" modifier="Brewington" modified="201505042318" created="201102090032" tags="Custom UserContent">&lt;&lt;miniBrowser hideControls http://192.168.1.40/index.htm&gt;&gt;</div>
<div tiddler="Contact Info" modifier="Brewington" modified="201505042319" created="201505040454" tags="Custom UserContent">I may be reached at eridanibrew AT gmail DOT com...\n\nMy blog https://brewobservatory.wordpress.com/ has more information and notes for very bored insomniacs.</div>
<div tiddler="Control" modifier="Bob Denny" modified="200611302133" created="200611302132" tags="systemContent deleteUser">''Tag'': Items which provide the user with control features. Always considered to be UserContent.</div>
<div tiddler="Custom" modifier="Bob Denny" modified="200803171717" created="200611072141" tags="deleteUser systemContent">''Tag'': Items which have been created after installation. __It's vital that any new items that you create be tagged Custom__. It allows you to identify any items which you have added or changed. It also allows ACP installers to preserve your custom content on updates that may require replacement of author.html and index.asp. See [[Importing and Exporting Items]] for tools that you can use to manage custom(ized) items.</div>
<div tiddler="CustomConfigPlugin" modifier="Bob Denny" modified="200611190630" created="200610060910" tags="systemConfig plugin">//{{{\n// Customizations that apply to both normal and ASP mode\n// Bob Denny 07-Oct-2006\n// 27-Oct-2006 Use unicode escapes for drop chars to can edit in (e.g.) PrimalScript.\n//\n// Shorten/clarify command names and add drop-down icons on appropriate commands\nconfig.commands.references.text = &quot;refs&quot; + (document.all?&quot;\su25BC&quot;:&quot;\su25BE&quot;); // UTF8 default is &quot;references&quot;\nconfig.commands.permalink.text = &quot;link&quot;; // default is &quot;permalink&quot;\nconfig.commands.closeOthers.text = &quot;close-others&quot;; // default is &quot;close others&quot;\nconfig.commands.jump.text = &quot;jump&quot; + (document.all?&quot; &quot;:&quot; &quot;);\n// Override default options\nconfig.options.chkHttpReadOnly = false\nconfig.options.txtUploadStoreUrl = &quot;twstore.asp&quot;\nconfig.options.txtUploadBackupDir = &quot;author-backup&quot;\n//}}}</div>
<div tiddler="DC3.Ajax" modifier="Bob Denny" modified="201504132358" created="200609170401" tags="systemConfig systemLib">/***\n|''Name:''|DC3.Ajax|\n|''Description:''|General purpose Ajax class|\n|''Date:''|April 12, 2015|\n|''Source:''|http://solo.dc3.com/tw/index.html#DC3.Ajax|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.0.6|\n|''~CoreVersion:''|2.0.11, 2.1.0|\n|''Require:''|//none//|\n!!Description\nAjax library\n!!Usage\nTBD\n!!Revision History\n&lt;&lt;&lt;\n''2006.09.16 [1.0.1]'' Initial creation, loosely patterned after BidiX Ajax\n''2006.09.20 [1.0.2]'' Add POST to core, refactor massively, now object can contain multiple methods. Add postForm() method.\n''2006.09.22 [1.0.3]'' Support posting hidden fields in postForm()\n''2006.09.26 [1.0.4]'' Change error reporting to popups. Include status code, status text and any body text in error popup.\n''2006.10.03 [1.0.5]'' Refactor post code, lowercase element type strings for tests, check out on TW 2.1.0\n''2015.04.12 [1.0.6]'' POST requests now include a header Cache-Control: no-cache to prevent caching of results.\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\nif (!window.DC3) window.DC3 = {};\nDC3.Ajax = \n{\n    sendRequest: function(method, url, postData, onComplete, clientParams)\n    {\n        var xmlhttp;\n        \n        try { \n            xmlhttp = new XMLHttpRequest(); \n        } catch (e) {\n            try { \n                xmlhttp = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;); \n            } catch (e) {\n                try { \n                    xmlhttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;); \n                } catch (e) { \n                    alert(e.description?e.description:e.toString()); \n                }\n            }\n        }\n        if (!xmlhttp) {\n            alert(&quot;Can't support AJAX: Update your browser!&quot;);\n            return;\n        }\n        if (window.netscape) {\n            try {\n                if (document.location.protocol.indexOf(&quot;http&quot;) == -1) {\n                    netscape.security.PrivilegeManager.enablePrivilege(&quot;UniversalBrowserRead&quot;);\n                }\n            } catch (e) { \n                alert(e.description ? e.description : e.toString()); \n            }\n        }\n        \n        xmlhttp.onreadystatechange = function ()                        // Completion event\n        {\n            if (xmlhttp.readyState == 4) {\n                if (xmlhttp.status == 200 || xmlhttp.status === 0) {\n                    onComplete(xmlhttp.responseText, clientParams);\n                } else {\n                    alert(xmlhttp.status + &quot; &quot; + xmlhttp.statusText + &quot;:\sn&quot; + xmlhttp.responseText);\n                }\n            }\n        };\n        \n        try {\n            xmlhttp.open(method, url, true);\n            if(method.toLowerCase() == 'post') {\n                xmlhttp.setRequestHeader(&quot;Content-Type&quot;,\n                    &quot;application/x-www-form-urlencoded&quot;);\n                xmlhttp.setRequestHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);\n                xmlhttp.send(postData);\n            } else if (config.browser.isIE) {   // Pathetic!\n                xmlhttp.send(); \n            } else { \n                xmlhttp.send(null); \n            }\n        } catch (e) { \n            alert(url + &quot;failed: &quot; + e.toString()); \n        }\n    },\n    \n    postForm: function(form, url, onComplete, clientParams)\n    {\n        var encode = function(name, val, last) {\n            return encodeURIComponent(name) + &quot;=&quot; + encodeURIComponent(val) + (last ? &quot;&quot; : &quot;&amp;&quot;);\n        };\n        var nElem = form.elements.length;\n        var fData = &quot;&quot;;\n        // Must hand-construct query string according to rules\n        for(var i = 0; i &lt; nElem; i++) {\n            var elem = form.elements[i];\n            var last = (i == nElem - 1);\n            switch(elem.type.toLowerCase()) {\n                case &quot;text&quot;:\n                case &quot;password&quot;:\n                case &quot;textarea&quot;:\n                case &quot;select-one&quot;:\n                case &quot;hidden&quot;:\n                    fData += encode(elem.name, elem.value, last);       // Encode even if empty\n                    break;\n                case &quot;checkbox&quot;:\n                case &quot;radio&quot;:\n                    if(elem.checked)\n                        fData += encode(elem.name, elem.value, last);\n                    break;\n                case &quot;select-multiple&quot;:\n                    for(var j = 0; j &lt; elem.options.length; j++) {\n                        if(elem.options[j].selected)                    // Encode only selected (may be none!)\n                            fData += encode(elem.name, elem.options[j].value);\n                    }\n                    break;\n                default:                                        // Others unsupported \n                    displayMessage(&quot;Ajax.postForm: &quot; + elem.type + &quot; form elements not supported.&quot;);\n                    return;                                     // BAIL OUT!\n            }\n        }\n        this.sendRequest(&quot;POST&quot;, url, fData, onComplete, clientParams);\n    }\n};\n//}}}\n \n</div>
<div tiddler="DC3.CatSearch" modifier="Bob Denny" modified="201407102031" created="200610040312" tags="systemConfig systemLib">/***\n|''Name:''|DC3.CatSearch|\n|''Description:''|Special purpose Ajax class for searching catalogs|\n|''Date:''|July 10,2014|\n|''Source:''|private|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|Copyright (C) 2006-2014, Robert B. Denny, Mesa, AZ|\n|''Version:''|1.3.1|\n|''~CoreVersion:''|2.1.3|\n|''Require:''|DC3.Ajax|\n!!Description\nLibrary of Javascript called from an observing form to fill in the &quot;RA&quot; and &quot;Dec&quot; fields of a form via an AJAX call to a remote ASP page. The remote ASP page takes the contents of the &quot;Target&quot; field of the form, tries to find a match in the catalog(s) and if a unique match is found, returns the coordinates. If no match or multiplematches are found, returns advisory message (TBD!).\n!!Usage\n@@WARNING: KLUDGE ALERT!@@ The response handler looks for onchange() handlers in the RA and Dec foem fields, but instead of calling them, it assumes that they are there because of a {{{&lt;&lt;PersistentForm&gt;&gt;}}} macro call, and calls that macro's onChange() method instead. I could not get it to let me call the onkeyup() methods. \n\n@@WARNING:@@ The events passed in the above calls to persistent-form are manufactured, and have only a target property. That's all that onChange() needs. I told you this was special purpose.\n!!Revision History\n&lt;&lt;&lt;\n''2006.10.03 [1.0.1]'' Initial creation, coordinate lookup from MiniSAC only\n''2006.10.04 [1.0.2]'' Add MiniSAC searching (Deep Sky Catalog Search tiddler)\n''2006.10.10 [1.0.3]'' Lookup now contains additional info. Display it.\n''2006.10.26 [1.0.4]'' Lookup now contains target name, display it instead of &quot;J2000&quot;. Comment out send/receive displayMessage() calls.\n''2006.11.04 [1.0.5]'' Server now sends error messages, only 'ok' code is tested. Add support for &quot;short form&quot; returns, used for solar system bodies (ephemerides).\n''2011.08.30 [1.1.1]'' ACP:693 Support for ValidateFormPlugin acting on the client form. Remove 'ephemeris' logic, Was never used and can't be validated.\n''2011.09.29 [1.1.2]'' ACP:713 On ephemeris targets, put 0 into RA/Dec so will form-validate\n''2012.08.26 [1.2.1]'' ACP:788 lookup() now also looks for (hidden) visOnly form field (for Scheduler input forms).\n''2014.07.10 [1.3.1]'' ACP:966 Change lookup field delimiters to '|' to avoid tripping on commas in decimal numbers on Euro systems.\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\nif (!window.DC3) window.DC3 = {};\nDC3.CatSearch = \n{\n    _findForm: function(place)\n    {\n		var forms = place.getElementsByTagName(&quot;form&quot;);\n		if(forms.length === 0) throw(&quot;No form in tiddler&quot;);\n        return forms[0];                                                // Return first form\n    },\n    \n	_findFormField: function(place, name)								// Private\n	{\n		var form = this._findForm(place);\n		var fields = form.getElementsByTagName(&quot;input&quot;);				// Search &lt;input&gt; fields first\n		for(var i = 0; i &lt; fields.length; i++) {\n			if(fields[i].name.toLowerCase() == name.toLowerCase()) {\n				switch(fields[i].type) {\n					case &quot;text&quot;:\n					case &quot;checkbox&quot;:\n					case &quot;hidden&quot;:\n						return fields[i];								// Return found field\n						break;											// (for lint)\n					case &quot;radio&quot;:										// Return only checked rb field\n						if(fields[i].checked) return fields[i];\n						break;\n					default:                                            // Silence JSLint\n					    break;\n				}\n			}\n		}\n		fields = form.getElementsByTagName(&quot;select&quot;);					// Nope, look for &lt;select&gt;\n		if(fields.length === 0) throw(&quot;No fields in form&quot;);\n		for(i = 0; i &lt; fields.length; i++) {\n			if(fields[i].name.toLowerCase() == name.toLowerCase())\n				return fields[i];\n		}\n		throw(&quot;field &quot; + name + &quot; not found&quot;);\n	},\n		\n	onLookupComplete: function(text, params)							// 'text' is what's sent back by remote\n	{\n		text = text.replace(/(^\ss*)|(\ss*$)/g, &quot;&quot;); 						// Trim off l/t junk!\n		if(text.substr(0, 2) == &quot;ok&quot;) {									// Found: &quot;ok,target[,hh:mm:ss.s,dd:mm:ss.ss,info&quot;]\n			var e = { target: null };									// Phoney event for onkeyup calls (specific to us!)\n			var bits = text.split(&quot;|&quot;);\n			if(bits.length &gt; 2) {										// If have coords (deep sky)\n				params.raField.value = bits[2];\n				params.decField.value = bits[3];\n			} else {													// Solar system target, ephemeris\n				params.raField.value = &quot;0&quot;;                             // Zeroes, allow passing validation\n				params.decField.value = &quot;0&quot;;\n			}\n			if(params.raField.onkeyup) {								// Trigger any &lt;PersistentForm&gt;&gt;\n				e.target = params.raField;\n				//??params.raField.onkeyup(e);\n				config.macros.PersistentForm.onChange(e);				// KLUDGE!\n			}\n			if(params.decField.onkeyup) {\n				e.target = params.decField;\n				//???params.decField.onkeyup(e);\n				config.macros.PersistentForm.onChange(e);				// KLUDGE!\n			}\n			if(params.form.bValidator) {                                // If there's a validator attached (&lt;&lt;ValidateForm&gt;&gt; plugin)\n			    params.form.bValidator.validate(false, $(params.raField));     // Revalidate the RA and Dec fields (always validated!)\n			    params.form.bValidator.validate(false, $(params.decField));\n			}\n			wikify(&quot;\sn----\snOK! &quot;, params.place);\n			if(bits.length &gt; 2) {\n				wikify(bits[1] + &quot; coordinates set... &quot; + bits[4], params.place);\n			} else {\n				wikify(bits[1] + &quot; found, coordinates will be calculated at image time&quot;, params.place);\n			}\n		} else {\n			wikify(&quot;\sn----\sn&quot; + text, params.place);					// Wikify some error message\n		}\n		//displayMessage(&quot;Received response.&quot;);\n	},\n	\n	lookup: function(place)												// Used in Acquire form pages for coordinate lookup\n	{\n	    var form = this._findForm(place);\n		var tgtField = this._findFormField(place, &quot;Target&quot;);\n		var raField = this._findFormField(place, &quot;RA&quot;);\n		var decField = this._findFormField(place, &quot;Dec&quot;);\n		var visOnly = this._findFormField(place, &quot;visOnly&quot;);\n\n		raField.value = &quot;&quot;;												// Clear the RA/Dec fields\n		decField.value = &quot;&quot;;\n		var e = { target: null };\n		if(raField.onkeyup) {											// (safety) Clear the persist cookies too\n			e.target = raField;\n			//??params.raField.onkeyup(e);\n			config.macros.PersistentForm.onChange(e);					// KLUDGE!\n		}\n		if(decField.onkeyup) {\n			e.target = decField;\n			//???params.decField.onkeyup(e);\n			config.macros.PersistentForm.onChange(e);					// KLUDGE!\n		}\n		\n		var complParams = {\n		    form: form,\n			place: place,\n			raField: raField,\n			decField: decField,\n			visOnly: visOnly\n		};\n		//displayMessage(&quot;Sending request...&quot;);\n		DC3.Ajax.sendRequest(&quot;post&quot;, \n					&quot;/ac/acatlookup.asp&quot;, \n					&quot;target=&quot; + escape(tgtField.value) + \n					    &quot;&amp;visOnly=&quot; + escape(visOnly.value),\n					DC3.CatSearch.onLookupComplete,\n					complParams);\n	},\n	\n	onSearchComplete: function(text, params)\n	{\n		text = text.replace(/(^\ss*)|(\ss*$)/g, &quot;&quot;); 						// Trim off l/t junk!\n		if(text == &quot;nm&quot;) {\n			wikify(&quot;\sn----\snNo matches. Click the Help button for hints.&quot;, params.place);\n		} else if(text.substr(0, 2) == &quot;er&quot;) {\n			wikify(&quot;\sn----\snCatalog error: &quot; +  text.substr(3), params.place);\n		} else {\n			var results = text.split(&quot;,&quot;);								// results[0] is 'mx' or count\n			for(var i = 1; i &lt; results.length; i++)						// For the rest of the items\n				params.resListField.options[i - 1] = new Option(results[i], results[i]);\n			if(results[0] == &quot;mx&quot;)\n				wikify(&quot;\sn----\snToo many matches, only the first 100 were returned.&quot;, params.place);\n			else\n				wikify(&quot;\sn----\sn&quot; + results[0] + &quot; matches found.&quot;, params.place);\n		}\n		//displayMessage(&quot;Received response.&quot;);\n	},\n	\n	search: function(place)\n	{\n		var patField = this._findFormField(place, &quot;pattern&quot;);\n		var matTypField = this._findFormField(place, &quot;matType&quot;);\n		var visField = this._findFormField(place, &quot;visOnly&quot;);\n		var resListField = this._findFormField(place, &quot;resList&quot;);\n		resListField.options.length = 0;								// Clear the list\n		var complParams = { \n			place: place,\n			resListField: resListField\n		};\n		var postData = &quot;pattern=&quot; + escape(patField.value) + &quot;&amp;&quot; +\n					&quot;type=&quot; + matTypField.value + &quot;&amp;&quot; + \n					&quot;visible=&quot; + (visField.checked ? &quot;true&quot; : &quot;false&quot;);\n		//displayMessage(&quot;Sending request...&quot;);\n		DC3.Ajax.sendRequest(&quot;post&quot;, \n					&quot;/ac/adscatsearch.asp&quot;, \n					postData,\n					DC3.CatSearch.onSearchComplete,\n					complParams);\n	}\n\n};\n//}}}\n \n</div>
<div tiddler="DC3.Lib" modifier="Bob Denny" modified="201401220142" created="200610050429" tags="systemConfig systemLib">/***\n|''Name:''|~DC3.Lib|\n|''Description:''|ACP Browser UI Support Library|\n|''Date:''|Jan 21, 2014|\n|''Source:''|private|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|Copyright (C) 2006-2014, Robert B. Denny, Mesa, AZ|\n|''Version:''|1.2.1|\n|''~CoreVersion:''|2.1.3|\n|''Require:''|//none//|\n!Description\nLibrary of misc. support code for the ACP Share Your Sky! web UI operating within the ~TiddlyWiki framework.\n!!Revision History\n&lt;&lt;&lt;\n''2006.10.04 [1.0.1]'' Initial creation\n''2006.10.05 [1.0.2]'' Use story.displayTiddler(), displayTiddler() deprecated in 2.1.0.\n''2006.10.07 [1.0.3]'' Add global for managing timer in system monitor tiddler\n''2006.10.10 [1.0.4]'' Add another global for system monitor flasher timer\n''2006.10.24 [1.0.5]'' Add postMkDir() and completion methods\n''2006.10.26 [1.0.6]'' Add postChdir() and completion methods\n''2006.11.17 [1.0.7]'' Add xxxAddRow() and xxxShowUsedRows() for expandable Color Series, Sky Flat, and Cal Frames items.\n''2007.11.18 [1.0.8]'' xxxAddRow() now pre-set and persist the 'use' checkbox on revealing a new row.\n''2006.11.28 [1.0.9]'' Add logOff and event proc for same. Shared by main menu and system status. Also now available anywhere you want a Release the Obs link.\n''2011.08.30 [1.1.1]'' GEM:693 Additional function for validation and behavior of Color Series expando rows.\n''2011.08.31 [1.1.1]'' GEM:693 More work. Reorganize, comment inline with code, divide code blocks for reading in UI, add functionality to support the flat and cal frams expandi forms similar to that for the color series form.\n''2011.08.31 [1.1.1]'' GEM:693 and GEM:695 Refactored expando form support to use one shared function for all forms by using unique prefixes in the name and id attributes.\n''2011.08.31 [1.1.1]'' GEM 693 Changing any expando row input field now auto-checks the Use box and arms validation.\n''2011.09.08 [1.1.1]'' GEM:693 Validation for expando rows &gt;= 10 fixed. \n''2011.09.11 [1.1.1]'' GEM:693 Oops, fix auto-check logic of expando rows that was broken by previous validation fix.\n''2014.01.21 [1.2.1]'' New function fillInnerHTML() and completion function. This was added in GEM:1084. Used in the &quot;Single Series&quot; form of Scheduler.\n&lt;&lt;&lt;\n!!Miscellaneous Functions\n***/\n//{{{\nif (!window.DC3) window.DC3 = {};\nDC3.Lib = \n{\n    sysMonRefreshTimerID: null,                                     // Global for system monitor refresh timer\n    sysMonFlashTimerID: null,                                       // Same for system monitor flasher timer\n    expandoFieldPats: ['Count', 'Exposure', 'Filter', 'Binning', 'PA'],\n    \n    //\n    // getPlace() - Find the enclosing viewer or tiddler div.\n    //\n    // This finds the enclosing viewer div, and if there is not one, it finds the parent \n    // tiddler div. Useful for (e.g.) calling wikify() to add stuff to the bottom of a \n    // tiddler. Note the (e.g.) the MainMenu is within a viewer div when it's being shown \n    // as a tiddler, but not when it is the 'real' main menu. Thus the 'catch'. This also \n    // applies to Javascript running in other than the viewer div of the tiddler (title/subtitle).\n    //\n    getPlace: function(node)                                        // Different than story.findContainingTiddler()\n    {\n        if(!node) throw(&quot;DC3.Lib.getPlace(): place not found.&quot;);\n        if((node.attributes[&quot;class&quot;] &amp;&amp; node.attributes[&quot;class&quot;].nodeValue == &quot;viewer&quot;) || node.attributes[&quot;tiddler&quot;]) {\n            return node;\n        } else {\n            return this.getPlace(node.parentNode);\n        }\n    },\n    //\n    // openTiddler() - Open a tiddler, animate from viewer div\n    //\n    // Normally, calling displayTiddler() from a Javascript onClick() event of a hyperlink \n    // would pass &quot;this&quot; as the &quot;place&quot; argument, causing the animation to emanate from \n    // the link. But you may want it to emanate from the whole viewer or tiddler. \n    // Calling this method uses getPlace() to find the enclosure and use that place. \n    // NOTE: Tiddlers will be opened at the bottom!\n    //\n    openTiddler: function(node, title)\n    {\n        story.displayTiddler(this.getPlace(node), title, null, config.options.chkAnimate, false);\n    },\n    \n    //\n    // logOff()/_logOffOnComplete() - Specialized AJAX call\n    //\n    // Used by links which want to provide logging off the observatory. At present this \n    // is Main Menu and System Status.\n    //\n    _logOffOnComplete: function(text, params) {\n        displayMessage(text);\n    },\n    \n    logOff: function() {\n        DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/aunlockobs.asp&quot;, &quot;&quot;, DC3.Lib._logOffOnComplete, null);\n    },\n//}}}\n/***\n!!Remote sourcing\n***/\n//{{{\n    //\n    // Insert remote HTML generated by the remote URL into the \n    // DOM node with the given nodeID. This is as low-level as it gets.\n    //\n    _onFillInnerHTMLComplete: function(text, node)              // Private\n    {\n        node.innerHTML = text;\n    },\n    \n    fillInnerHTML: function(url, nodeID)\n    {\n        DC3.Ajax.sendRequest('GET', url, &quot;&quot;, this._onFillInnerHTMLComplete, document.getElementById(nodeID));\n    },\n//}}}\n/***\n!!Remote File Support Functions\n***/\n//{{{\n    //\n    // postMkdir()/_postMkdirOnComplete() - Specialized AJAX call\n    //\n    // Used by the My Documents file manager tiddlers to post a create directory call from \n    // an a-button onClick() javascript call. See (e.g.) tiddler [[Observing Plans]] for \n    // usage of this.\n    //\n    _postMkdirOnComplete: function(text, params)\n    {\n        if(text.trim() != &quot;ok&quot;)\n            alert(text);\n        else\n            story.refreshTiddler(params.title, null, true);         // Always refresh, avoid confusion\n    },\n    \n    postMkdir: function(url, node)\n    {\n        var ans = prompt(&quot;Name the new folder:&quot;);\n        if(!ans) return;\n        var complParams = { \n            title: story.findContainingTiddler(node).id.replace(story.idPrefix, &quot;&quot;) // KLUDGE?\n        };\n        DC3.Ajax.sendRequest('POST', url, &quot;dir=&quot; + escape(ans), \n                DC3.Lib._postMkdirOnComplete, complParams);\n    },\n    //\n    // postChdir()/_postChdirOnComplete() - Specialized AJAX call\n    //\n    // Used in the Multiple Objects (plan) tiddler to change (sub) folders from \n    // an onChange() event of the folder selector droplist.\n    //\n    _postChdirOnComplete: function(text, params)\n    {\n        if(text.trim() != &quot;ok&quot;)\n            alert(text);\n        else\n            story.refreshTiddler(params.title, null, true);         // Always refresh, avoid confusion\n    },\n    \n    postChdir: function(node)\n    {\n        var complParams = { \n            title: story.findContainingTiddler(node).id.replace(story.idPrefix, &quot;&quot;) // KLUDGE?\n        };\n        DC3.Ajax.sendRequest('POST', &quot;/ac/aacqplan.asp&quot;, &quot;chdir=&quot; + escape(node.value), \n                DC3.Lib._postChdirOnComplete, complParams);\n    },\n//}}}\n/***\n!!Validation and Activation of Expando Rows in Forms\n***/\n//{{{\n    //\n    // expandoAddRow() - Reveal another row of image specs in the expando form\n    //\n    // Parameter 'pfx' is the prefix of the name/id attributes of the HTML elements\n    // that make up the expando part of the form.\n    //\n    expandoAddRow: function(pfx)\n    {\n        for(var i = 2; i &lt;= 16; i++)\n        {\n            var r = document.getElementById(pfx + &quot;Row&quot; + i);\n            if(r &amp;&amp; r.style.display == &quot;none&quot;) {\n                var u = document.getElementById(pfx + &quot;Use&quot; + i);\n                if(u) u.checked = true;\n                var e = { target: u };\n                config.macros.PersistentForm.onChange(e);\n                r.style.display = &quot;&quot;;\n                var ev = { target: u };\n                this.expandoControlRowValidation(ev);              // Initialize validation, see below!\n                break;\n            }\n        }\n    },\n    \n    //\n    // This is called from onChange events of the data controls in an expando\n    // row. The idea is to check the Use box and arm validation (as though the\n    // user checked the box). This helps prevent entering specs and forgetting\n    // to check the Use box.\n    //\n    expandoCheckUse: function(ev)\n    {\n        var pats = DC3.Lib.expandoFieldPats;                        // (need fully resolved name here, typ.)\n        var n = ev.target.name;                                     // Control name prefix-name-number\n        var pfx, row, pat;\n        for(var i = 0; i &lt; pats.length; i++)\n        {\n            pat = pats[i];\n            var j = n.search(pat)\n            if(pfx = n.substr(0, j))\n            {\n                row = n.substr(j + pat.length);                     // This has to namele 1 or 2 digit row numbers\n                break;\n            }\n        }\n        if(!pfx) return;                                            // Forget it\n        if(ev.target.value !== &quot;&quot;)                                  // If data in this field (now)\n        {\n            var u = document.getElementById(pfx + &quot;Use&quot; + row);     // The corresponding Use checkbox \n            if(!u.checked)\n            {\n                u.checked = true;                                   // Check it\n                var ev2 = { target: u };                            // Fake &quot;click&quot; event\n                DC3.Lib.expandoControlRowValidation(ev2);\n            }\n        }\n        //\n        // Extreme sleaze! The PersistentFormPlugin uses the onChange event for \n        // select type elements. So we'll chain to that. There are several places\n        // where this expando code assumes that both validation and persistence is\n        // being used for expando row forms.\n        //\n        if(ev.target.type == &quot;select-one&quot; || ev.target.type == &quot;select-multiple&quot;)\n            config.macros.PersistentForm.onChange(ev);\n    },\n    \n    //\n    // expandoInitializeForm() - Initialize expando rows of a form\n    //\n    // Initialize the expando rows. Make any of them which have their Use checkboxes set.\n    // All active rows must be initialized for validation, and any active rows which\n    // are hidden (due to original form construction) are made visible. The inactive rows\n    // do not need the services of expandoControlRowValidation() below.\n    //\n    // Parameter 'pfx' is the prefix of the name/id attributes of the HTML elements\n    // that make up the expando part of the form.\n    //\n    expandoInitializeForm: function(pfx)\n    {\n        for(var i = 1; i &lt;= 16; i++)\n        {\n            var u = document.getElementById(pfx + &quot;Use&quot; + i);\n//            u.onclick = this.expandoControlRowValidation;\n            u.onchange = this.expandoControlRowValidation;\n            if(u &amp;&amp; u.checked)\n            {\n                var r = document.getElementById(pfx + &quot;Row&quot; + i);\n                if(r &amp;&amp; r.style.display == &quot;none&quot;) {\n                    r.style.display = &quot;&quot;;\n                }\n                var ev = { target: u };\n                this.expandoControlRowValidation(ev);\n            }\n            //\n            // Arm the &quot;auto-check&quot; events\n            //\n            var e = document.getElementById(pfx + &quot;Count&quot; + i);\n            if(e) e.onchange = this.expandoCheckUse;\n            var e = document.getElementById(pfx + &quot;Exposure&quot; + i);\n            if(e) e.onchange = this.expandoCheckUse;\n            var e = document.getElementById(pfx + &quot;Filter&quot; + i);\n            if(e) e.onchange = this.expandoCheckUse;\n            var e = document.getElementById(pfx + &quot;Binning&quot; + i);\n            if(e) e.onchange = this.expandoCheckUse;\n            var e = document.getElementById(pfx + &quot;PA&quot; + i);\n            if(e) e.onchange = this.expandoCheckUse;\n        }\n    },\n    \n    //\n    // expandoControlRowValidation() - Control validation of expando rows\n    //\n    // This deserves special mention. It's called when the Color Series form is first opened\n    // (with a manufactured event object) as well as whenever one of the xxUsen checkboxes is\n    // toggled (via the onclick event). Note that onclick is used by the PersistentForm macro\n    // and we're hijacking that event for the management of validation in the image spec rows.\n    // Thus we must call PersistentForm.onChange() ourselves (again with manufactured event\n    // objects). \n    //\n    // The objective is to enable validation for the Count, Exposure, and PA fields of each image\n    // or flat info row, depending on whether the Use checkbox is on or off. This is really crazy\n    // and took me an entire day to get right. But it's worth it!!\n    //\n    // This is called via the onClick events of the Use checkboxes, and also by the initializer\n    // function above (but only for active rows).\n    // \n    expandoControlRowValidation: function(ev)\n    {\n        config.macros.PersistentForm.onChange(ev);                  // Remember our state\n        var _this = ev.target;                                      // Called outside of real events (initializing form)\n        var form = DC3.Lib.getPlace(_this).getElementsByTagName('form')[0]; \n        var validator = form.bValidator;                            // Only if ValidateForm macro invoked\n        if(validator)                                               // Only if validation\n        {\n            var n = ev.target.name;\n            var lu = n.search(/Use/);\n            var row = n.substr(lu + 3);                             // 'xxxUse&lt;n&gt; -&gt; 'n'\n            var pfx = n.substr(0, lu);                              // Prefix of form containing expando rows\n            var count = document.getElementById(pfx + 'Count' + row);\n            var exposure = document.getElementById(pfx + 'Exposure' + row);\n            var pa = document.getElementById(pfx + 'PA' + row);\n            if(_this.checked) {\n                // The different forms have different sets of fields\n                count.setAttribute('validate', 'number, required');\n                if(exposure) exposure.setAttribute('validate', 'number, required');\n                if(pa) pa.setAttribute('validate', 'number, required');\n                validator.reset();                                  // Required for validator to see the new fields\n            } else {\n                var ex;\n                count.value = &quot;&quot;;\n                ex = { target: count };\n                config.macros.PersistentForm.onChange(ex);\n                if(exposure) {\n                    exposure.value = &quot;&quot;;\n                    ex = { target: exposure };\n                    config.macros.PersistentForm.onChange(ex);\n                }\n                if(pa) {\n                    pa.value = &quot;&quot;;\n                    ex = { target: pa };\n                    config.macros.PersistentForm.onChange(ex);\n                }\n                validator.reset();                                  // This clears any visible error indications, then\n                count.removeAttribute('validate');                  // The validate attributes are removed\n                if(exposure) exposure.removeAttribute('validate');  // (the events are left wired but are harmless)\n                if(pa) pa.removeAttribute('validate');\n            }\n        }\n    },\n\n};\n//}}}\n</div>
<div tiddler="DC3.LightBox" modifier="Bob Denny" modified="201109262128" created="200612030313" tags="systemConfig systemLib">/***\n|''Name:''|~DC3.LightBox|\n|''Description:''|LightBox support library|\n|''Date:''|Aug 09, 2011|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.1.0|\n|''~CoreVersion:''|2.1.3|\n|''Browser:''|Most modern browsers|\n|''Require:''|jQuery 1.6.2 or later, LightBoxCSS (see below), support HTML in MarkupPreBody (see below), access to icon images in subdir ''im'' (showAlert() only)|\n!Description\nThis plugin implements a lightbox widget for ~TiddlyWiki. Via Javascript, you can display any HTML div in the lightbox, or use &quot;canned&quot; divs for displaying HTML message in a box or an alert with icon. The lightbox is closed by either clicking the X-icon or anywhere outside the lightbox. Only one lightbox can be active at a time. See the usage section below.\n!!Usage\nThis plugin is a __library__, not a macro. Thus, it must be tagged {{{systemConfig}}}, but it does not support macro invocation. It is callable only from Javascript so the [[InlineJavascriptPlugin|http://www.tiddlytools.com/#InlineJavascriptPlugin]] is a virtual necessity!\n|!Usage|!Sample Javascript|\n|Display HTML message|{{{DC3.LightBox.showContent(&quot;Some &lt;i&gt;message&lt;/i&gt;&quot;);}}}|\n|Display alert|{{{DC3.LightBox.showAlert(&quot;ok&quot;, &quot;All is well&quot;);}}}|\n|Display any DIV in a lightbox|{{{DC3.LightBox.showBox(&quot;myLightBox&quot;);}}}|\n|Close current lightbox|{{{DC3.LightBox.hideBox()}}}|\n*The frame for the showContent() and showAlert() methods should expand to enclose text, but this happens only on IE and not FireFox. To be safe, just keep your messages short and use showBox() and your own HTML div for &quot;big&quot; messages etc.\n*The first parameter to showAlert() is the icon name. This is simply translated to {{{im/icon.png}}}. The standard icon image files (below) are used with icon strings of &quot;error, &quot;info&quot;, &quot;ok&quot;, &quot;question&quot;, and &quot;warning&quot;. \n*The generalized showBox() method can be used to display images, media players, whatever you want! Just make up the HTML div, give it an id, then pass that ID to showBox().\n!!Advanced Usage - onClose\nAll three of the above methods support an optional parameter onClose, supplied as the last parameter in a call. It must evaluate to a function which is called (with no parameters) when the lightbox is about to close. If the onClose() function returns false, the lightbox will not be closed. For example \n{{{\nDC3.LightBox.showAlert(&quot;warning&quot;, &quot;Something &lt;em&gt;bad&lt;/em&gt; is about to happen&quot;, soundBuzzer);\n}}}\n!Installation\n#Paste this entire tiddler into a tiddler called DC3.LightBox and tag it {{{systemConfig}}}.\n#Paste the Required CSS (below) into a tiddler called LightBoxCSS and tag it {{{systemContent}}}.\n#Paste the content for MarkupPreBody (below) into MarkupPreBody.\n#Put the image files (below) into a subfolder ''im'' relative to the location of the TiddlyWiki. \n!!!Required CSS\nPaste into a tiddler called LightBoxCSS.\n{{{\n#lightBoxOverlay {\n    position:absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 90;   \n    background-color: #000;\n    -moz-opacity: 0.6;\n    opacity: .60;\n    filter: alpha(opacity=60);\n}\n#lightBoxOverlay[id]{ \n    position: fixed;\n}\n\ndiv.lightBox {\n    background: #2d2d2d;\n    color: #fff;\n    border: 2px solid #eee;\n}\n\nimg.lightBoxClose {\n    position: absolute;\n    top: -5px;\n    right: -5px;\n    margin: 0px;\n    cursor: pointer;\n}\n\ndiv.lightBoxAlert {\n    background: #2d2d2d;\n    color: #fff;\n    padding: 10px;\n    border: 2px solid #eee;\n}\n\ndiv.lightBoxAlertIcon {\n    position: absolute;\n    top: 8px;\n    left: 8px;\n    width: 48px;\n    height: 48px;\n}\n\ndiv.lightBoxAlertMessage {\n    margin-left: 56px;\n    margin-top: 14px;\n}\n}}}\n!!!Content for MarkupPreBody\n{{{\n&lt;!-- LightBox translucent overlay --&gt;\n&lt;div id=&quot;lightBoxOverlay&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt;\n&lt;!-- General use simple LightBox --&gt;\n&lt;div class=&quot;lightBox&quot; id=&quot;lightBox&quot; style=&quot;display:none&quot;&gt;\n    &lt;img class=&quot;lightBoxClose&quot; src=&quot;im/close.gif&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; alt=&quot;Close&quot; title=&quot;Close this window&quot; /&gt;\n    &lt;div id=&quot;lightBoxContent&quot;&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- General use Alert LightBox --&gt;\n&lt;div class=&quot;lightBoxAlert&quot; id=&quot;lightBoxAlert&quot; style=&quot;display:none&quot;&gt;\n    &lt;img class=&quot;lightBoxClose&quot; src=&quot;im/close.gif&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; alt=&quot;Close&quot; title=&quot;Close this window&quot; /&gt;\n    &lt;div class=&quot;lightBoxAlertIcon&quot;&gt;&lt;img id=&quot;lightBoxAlertIcon&quot; src=&quot;runtime&quot; alt=&quot;runtime&quot; title=&quot;runtime&quot;&gt;&lt;/div&gt;\n    &lt;div class=&quot;lightBoxAlertMessage&quot; id=&quot;lightBoxAlertMessage&quot;&gt;runtime&lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- End of LightBox --&gt;\n}}}\n!!!Images (close box and alert icons)\nThese must be in a subfolder ''im'' below the ~TiddlyWiki. You can get the images by right clicking on the links and //save target/link//, or right clicking on the images and //save image//. @@Note: The images below will display ugly in IE6, but they will display nice (with transparency) in the lightbox alerts, owing to the use of the DXFilters for transparency in the code.@@\n|[[close.gif|im/close.gif]]|[img[im/close.gif]]|[[error.png|im/error.png]]|[img[im/error.png]]|\n|[[info.png|im/info.png]]|[img[im/info.png]]|[[ok.png|im/ok.png]]|[img[im/ok.png]]|\n|[[question.png|im/question.png]]|[img[im/question.png]]|[[warning.png|im/warning.png]]|[img[im/warning.png]]|\n!!Credits\nThis TiddlyWiki library and CSS is an amalgamation of the techniques and code described in the following: \n* [[Original LightBox|http://www.huddletogether.com/projects/lightbox/]] by Lokesh Dhakar\n* [[Lightweight LightBox|http://www.pjhyett.com/posts/190-the-lightbox-effect-without-lightbox]] that can show any DIV by PJ Hyett\n* [[Better Modal Windows with LightBox|http://blog.feedmarker.com/2006/02/12/how-to-make-better-modal-windows-with-lightbox/]] by Bruno\nBruno's CSS for the overlay is much better than the first two, it is independent of any PNG image(s) and does not have CSS quirk-hacks for IE, nor does it use IE's DXFilters for PNG transparency. Of course for IE6, the DXFilters are used in the Javascript!\n!!Revision History\n&lt;&lt;&lt;\n''2006.12.02 [1.0.1]'' Initial creation\n''2006.12.03 [1.0.1]'' hideBox() no longer takes //id// just closes currently open box. Needed for overlay click/close.\n''2006.12.03 [1.0.1]'' Add support for special Alert type LightBox with switchable icon. Hack IE for alpha transparency. See inline comments. Add showContent(html), showAlert(icon, message)\n''2006.12.04 [1.0.1]'' Ignore show calls if box is already displayed. Optional callback for hideBox(), can prevent hiding. Allows modal box to be set up by caller.\n''2006.12.25 [1.0.1]'' Documentation and installation instructions\n''2007.01.11 [1.0.2]'' Add showing() function\n''2011.09.09 [1.1.0]'' Dynamically size the alert boxes (any with class 'lightBoxAlert'). @@Now requires jQuery.@@\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\n\n// Initialize style sheet from tiddler\nrefreshStyles(&quot;LightBoxCSS&quot;);\n\nif (!window.DC3) window.DC3 = {};\nwindow.DC3.LightBox = \n{\n    //\n    //Internal proterties\n    //\n    _curBox: null,                      // [sentinel]\n    _onClose: null,                     // [sentinel]\n    _alertImgDiv: null,                 // [sentinel]\n    _alertImgHTML: null,                // [sentinel]\n    \n    //\n    // Public interface\n    //\n    showing: function() {                                               // True if box showing\n        return (this._curBox !== null);\n    },\n    \n    showContent: function(content, onClose) {                           // Uses generic LightBox in MarkupPreBody\n        if(this._curBox) return;                                        // Ignore if box already showing (typ.)\n        document.getElementById(&quot;lightBoxContent&quot;).innerHTML = content;\n        this.showBox(&quot;lightBox&quot;, onClose);\n    },\n    \n    showAlert: function(icon, message, onClose) {                       // Uses standard alert LightBox in MarkupPreBody\n        if(this._curBox) return;\n        var icoElem = document.getElementById(&quot;lightBoxAlertIcon&quot;);\n        icoElem.src = &quot;im/&quot; + icon + &quot;.png&quot;;                            // Requires icon.png (48 x 48)\n        icoElem.title = icon;\n        icoElem.alt = icon;\n        document.getElementById(&quot;lightBoxAlertMessage&quot;).innerHTML = message;\n//      var box = document.getElementById(&quot;lightBoxAlert&quot;);\n//      var boxDims = this._getDimensions(box);\n//      box.style.width = Math.min(240, boxDims.width) + 'px';\n//      box.style.width = Math.min(boxDims.width, 480) + 'px';\n//      box.style.height = Math.min(42, boxDims.height) + 'px';\n//      //box.style.height = Math.max(box.style.height, 480) + 'px';\n        DC3.LightBox.showBox(&quot;lightBoxAlert&quot;, onClose);\n    },\n    \n    showBox: function(id, onClose) \n    {\n        if(this._curBox) return;\n        this._onClose = onClose;                                        // If valid, call this in hideBox. See comments there!\n        //\n        // Surprise! In IE, the height:100% in the #overlay CSS definition does\n        // not honor the z-order, and calculates the height to be the top margin!\n        // So, for IE, I have added this imperfect hack which ,forces the overlay\n        // size to the scroll size. This causes funny scrollbar behavior, but the\n        // alternatives I tried were really complex. \n        //\n        // Surprise #2! IE6 doesn't support alpha transparency in PNG images, and \n        // I use same for the icons in the LightBox Alert. Another hack needed.\n        // We can't just change the DIV from containing an IMG tag to using the\n        // bloody MS AlphaImageLoader, we also have to save the original IMG tag\n        // because the alert is multi-use: the image to be shown can be changed \n        // dynamically. When closing the Lightbox, we restore the original inner\n        // IMG tag and clear the filter style. On showing the box, we grab the path\n        // to the image file then zap the IMG tag, using the image file path in\n        // the filter/AlphaImageLoader. Egad!!!\n        //\n        var ovly = document.getElementById('lightBoxOverlay');\n        if(config.browser.isIE) {\n            var h1 = document.documentElement.scrollHeight;\n            var h2 = document.documentElement.offsetHeight;\n            ovly.style.height = Math.max(h1, h2);\n            ovly.style.width = document.documentElement.scrollWidth;\n            // Change icon div for IE proprietary\n            var alertDivs = document.getElementById(id).getElementsByTagName(&quot;div&quot;);\n            this._alertImgDiv = null;\n            for(var i in alertDivs) {\n                if(alertDivs[i].className &amp;&amp; alertDivs[i].className == &quot;lightBoxAlertIcon&quot;) {\n                    this._alertImgDiv = alertDivs[i];\n                    break;\n                }\n            }\n            if(this._alertImgDiv) {\n                var imgFile = this._alertImgDiv.firstChild.src;\n                this._alertImgHTML = this._alertImgDiv.innerHTML;       // Saved to allow dynamic change of image file\n                this._alertImgDiv.innerHTML = &quot;&quot;;\n                this._alertImgDiv.style.filter = &quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\s&quot;&quot; + imgFile + &quot;\s&quot;, sizingMethod=\s&quot;scale\s&quot;)&quot;;\n            }\n        }\n        ovly.style.display = 'block';\n        this._center(id);\n        this._curBox = id;\n        return false;\n    },\n    \n    hideBox: function()\n    {\n        if(!this._curBox) return;\n        if(this._onClose &amp;&amp; this._onClose() === false)                  // If onClose() returns false, refuse to close\n            return false;\n        document.getElementById(this._curBox).style.display = 'none';\n        document.getElementById('lightBoxOverlay').style.display = 'none';\n        this._curBox = null;                                            // Allow show calls once again\n        // Restore original non-IE image. Code may dynamically change image file!\n        if(this._alertImgDiv) {\n            this._alertImgDiv.innerHTML = this._alertImgHTML;\n            this._alertImgDiv.style.filter = &quot;&quot;;\n        }\n        return false;\n    },\n    \n    //\n    // Internal methods\n    //\n    _getDimensions: function(elem)      // Lifted from Prototype and made independent\n    {\n        if(elem.style.display != 'none')\n          return { width: elem.offsetWidth, height: elem.offsetHeight};\n        \n        // All *Width and *Height properties give 0 on elements with display none,\n        // so enable the elem temporarily\n        var els = elem.style;\n        var origVis = els.visibility;\n        var origPos = els.position;\n        els.visibility = 'hidden';\n        els.position = 'absolute';\n        els.display = '';\n        var origW = elem.clientWidth;\n        var origH = elem.clientHeight;\n        els.display = 'none';\n        els.position = origPos;\n        els.visibility = origVis;\n        return {width: origW, height: origH};\n    },\n    \n    //\n    // This is rather big. I'll have to look at more elegant way(s)\n    // of doing this... some day! :-)\n    //\n    _center: function(id)\n    {\n        var elem;\n        \n        try{\n            elem = document.getElementById(id);\n        }catch(e){\n            return;\n        }\n    \n        var my_width  = 0;\n        var my_height = 0;\n    \n        if ( typeof( window.innerWidth ) == 'number' ){\n            my_width  = window.innerWidth;\n            my_height = window.innerHeight;\n        } else if ( document.documentElement &amp;&amp; \n                 ( document.documentElement.clientWidth ||\n                   document.documentElement.clientHeight ) ){\n            my_width  = document.documentElement.clientWidth;\n            my_height = document.documentElement.clientHeight;\n        }\n        else if ( document.body &amp;&amp;\n                ( document.body.clientWidth || document.body.clientHeight ) ){\n            my_width  = document.body.clientWidth;\n            my_height = document.body.clientHeight;\n        }\n    \n        elem.style.position = 'absolute';\n        elem.style.zIndex   = 99;\n    \n        var scrollY = 0;\n    \n        if ( document.documentElement &amp;&amp; document.documentElement.scrollTop ){\n            scrollY = document.documentElement.scrollTop;\n        }else if ( document.body &amp;&amp; document.body.scrollTop ){\n            scrollY = document.body.scrollTop;\n        }else if ( window.pageYOffset ){\n            scrollY = window.pageYOffset;\n        }else if ( window.scrollY ){\n            scrollY = window.scrollY;\n        }\n    \n        var elementDimensions = this._getDimensions(elem);      // Measure box with message\n        \n        if(elem.className == &quot;lightBoxAlert&quot;) {                 // Constrain width\n            elem.style.width = &quot;&quot;;                              // Free box to be natural dimensions\n            elem.style.height = &quot;&quot;;\n            var hPad, vPad;\n            try {                                               // In case jQuery not available\n                var je = $(elem);                               // Use almighty jQuery to get these dims\n                hPad = je.innerWidth() - je.width();\n                vPad = je.innerHeight() - je.height();\n            } catch(ex) {\n                hPad = vPad = 10;                               // MUST BE SAME IN STYLE SHEET\n            }\n            var w = Math.max(240, elementDimensions.width - hPad);\n            w = Math.min(480, w);\n            elem.style.width = w + 'px';\n            elementDimensions = this._getDimensions(elem);      // Re-measure resized box\n            elem.style.height = Math.max(42, elementDimensions.height - vPad) + 'px';   // Assumre minimum height\n            elementDimensions = this._getDimensions(elem);      // Re-measure resized box\n        }\n        \n        var setX = ( my_width  - elementDimensions.width  ) / 2;\n        var setY = ( my_height - elementDimensions.height ) / 2 + scrollY;\n    \n        setX = ( setX &lt; 0 ) ? 0 : setX;\n        setY = ( setY &lt; 0 ) ? 0 : setY;\n    \n        elem.style.left = setX + &quot;px&quot;;\n        elem.style.top  = setY + &quot;px&quot;;\n            \n        elem.style.display  = 'block';\n    }\n};\n//}}}\n</div>
<div tiddler="DC3.TheSky" modifier="Bob Denny" modified="201401302315" created="201401141625" tags="systemConfig systemLib">/***\n|''Name:''|DC3.~TheSky|\n|''Description:''|Support for embedded browser in iOS version of Software Bisque's ~TheSky|\n|''Date:''|January 13, 2014|\n|''Source:''|private|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|Copyright (C) 2014, Robert B. Denny, Mesa, AZ|\n|''Version:''|1.1.0|\n|''~CoreVersion:''|2.1.3|\n|''Require:''|?????|\n!!Description\nLibrary of functions that support ~TheSky for iOS allowing the Field of View Indicator (FOVI) or a touched target to be used as the source of data to populate the target name, RA, Dec, and PA in the ACP web UI forms from the FOVI.\n!!Usage\nTO BE WRITTEN!\n!!Revision History\n&lt;&lt;&lt;\n''2014.01.13 [1.0.0]'' Initial creation\n''2014.01.30 [1.1.0]'' Format RA and Dec into sexagesimal, dynamic link switching, popup alert.\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\nif (!window.DC3) window.DC3 = {};\nDC3.TheSky = \n{\n    _findForm: function(place)\n    {\n        var forms = place.getElementsByTagName(&quot;form&quot;);\n        if(forms.length === 0) throw(&quot;No form in tiddler&quot;);\n        return forms[0];                                                // Return first form\n    },\n    \n    _findFormField: function(place, name)                               // Private\n    {\n        var form = this._findForm(place);\n        var fields = form.getElementsByTagName(&quot;input&quot;);                // Search &lt;input&gt; fields first\n        for(var i = 0; i &lt; fields.length; i++) {\n            if(fields[i].name.toLowerCase() == name.toLowerCase()) {\n                switch(fields[i].type) {\n                    case &quot;text&quot;:\n                    case &quot;checkbox&quot;:\n                    case &quot;hidden&quot;:\n                        return fields[i];                               // Return found field\n                        break;                                          // (for lint)\n                    case &quot;radio&quot;:                                       // Return only checked rb field\n                        if(fields[i].checked) return fields[i];\n                        break;\n                    default:                                            // Silence JSLint\n                        break;\n                }\n            }\n        }\n        fields = form.getElementsByTagName(&quot;select&quot;);                   // Nope, look for &lt;select&gt;\n        if(fields.length === 0) throw(&quot;No fields in form&quot;);\n        for(i = 0; i &lt; fields.length; i++) {\n            if(fields[i].name.toLowerCase() == name.toLowerCase())\n                return fields[i];\n        }\n        throw(&quot;field &quot; + name + &quot; not found&quot;);\n    },\n    \n    //\n    // Convert to sexagesimal with ':' and prec decimals on seconds\n    //\n    _toSexa: function (num, prec) {\n        var neg = (num &lt; 0);\n        num = Math.abs(num);\n        var hours   = Math.floor(num);\n        var minutes = Math.floor((num - hours) * 60);\n        var seconds = ((num - hours - (minutes / 60)) * 3600).toFixed(prec);\n    \n        if (hours   &lt; 10) { hours =   &quot;0&quot;  + hours;   }\n        if (neg)          { hours =   &quot;-&quot;  + hours;   }\n        if (minutes &lt; 10) { minutes = &quot;0&quot;  + minutes; }\n        if (seconds &lt; 10) { seconds = &quot;0&quot;  + seconds; }\n        return hours + ':' + minutes + ':' + seconds;\n    },\n    \n    //\n    // Switch the &quot;get&quot; link in a form from Catalog Search to TheSky.\n    // Safely do this by checking if form is visible. The form itself\n    // has a call for when it opens. THe form if the link IDs is the \n    // same for all of the forms.\n    //\n    switchLink: function (pfx) {\n        var elc = document.getElementById(pfx + &quot;_getCoords&quot;);\n        var els = document.getElementById(pfx + &quot;_getTheSky&quot;);\n        var eld = document.getElementById(pfx + &quot;_catSearch&quot;);\n        if (elc &amp;&amp; els) {\n            elc.style.display = &quot;none&quot;;                                 // Hide &quot;Catalog lookup&quot;\n            els.style.display = &quot;&quot;;                                     // Show &quot;Get from TheSky&quot;\n            eld.style.display = &quot;none&quot;;                                 // Hide &quot;Deep Sky Catalog&quot;\n        }\n    },\n\n    theSkyTarget: &quot;&quot;,                                                   // [sentinel] (typ.)\n    theSkyRightAscension: &quot;&quot;,\n    theSkyDeclination: &quot;&quot;,\n    theSkyPositionAngle: &quot;&quot;,\n    \n    //\n    // Called by TheSky via the UIWebView:stringByEvaluatingJavaScriptFromString as\n    // stringByEvaluatingJavaScriptFromString(&quot;DC3.TheSky.setTargetInfo(name, ra, dec, pa)&quot;). \n    // This sets the above variables which will populate the ACP UI forms when requested.\n    //\n    // DC3.TheSky.setTargetInfo(name, ra, dec, pa);\n    //\n    setTargetInfo: function(name, ra, dec, pa)\n    {\n        this.theSkyTarget = name;\n        this.theSkyRightAscension = this._toSexa(Number(ra), 2);\n        this.theSkyDeclination = this._toSexa(Number(dec), 1);\n        this.theSkyPositionAngle = (Number(pa).toFixed(1)).toString();\n        //\n        // Switch the links in the already open form tiddlers \n        // to the &quot;Get from TheSky&quot; links. Safe for closed tiddlers.\n        //\n        this.switchLink(&quot;simg&quot;);\n        this.switchLink(&quot;clr&quot;);\n        this.switchLink(&quot;sast&quot;);\n        this.switchLink(&quot;sphot&quot;);\n        //\n        DC3.LightBox.showAlert(&quot;info&quot;, &quot;Selected coordinates for &lt;span class=\s&quot;marked\s&quot;&gt;&quot; + \n                            name + &quot;&lt;/span&gt; are available from TheSky.&quot;);\n    },\n    \n    //\n    // The forms use this to tell if they should display the Deep Sky Catalog\n    // lookup link or the Get Coordinates from in the various acquisition forma.\n    //\n    theSkyInfoAvailable: function() \n    {\n        return this.theSkyTarget !== &quot;&quot;;\n    },\n    \n    //\n    // This call will fill in the coordinate into and also set the \n    // persistemt form cookies so other forms will show the coordinates.\n    // Called from the &quot;Get from TheSKy&quot; links in the input forms.\n    //\n    fillFormInfo: function(place)\n    {\n        if(this.theSkyTarget === &quot;&quot;) return;                            // No-op if no data (UI should prevent this)\n        var e = { target: null };                                       // Phoney event for validation\n        var tgtField = this._findFormField(place, &quot;Target&quot;);\n        tgtField.value = this.theSkyTarget;\n        if(tgtField.onkeyup) {                                          // Trigger any &lt;PersistentForm&gt; (typ.)\n            e.target = tgtField;\n            config.macros.PersistentForm.onChange(e);                   // KLUDGE! (typ.)\n        }\n        var raField = this._findFormField(place, &quot;RA&quot;);\n        raField.value = this.theSkyRightAscension;\n        if(raField.onkeyup) {                                           // Trigger any &lt;PersistentForm&gt; (typ.)\n            e.target = raField;\n            config.macros.PersistentForm.onChange(e);                   // KLUDGE! (typ.)\n        }\n        var decField = this._findFormField(place, &quot;Dec&quot;);\n        decField.value = this.theSkyDeclination;\n        if(decField.onkeyup) {                                          // Trigger any &lt;PersistentForm&gt; (typ.)\n            e.target = decField;\n            config.macros.PersistentForm.onChange(e);                   // KLUDGE! (typ.)\n        }\n        var paField = this._findFormField(place, &quot;PA&quot;);\n        paField.value = this.theSkyPositionAngle;\n        if(paField.onkeyup) {                                           // Trigger any &lt;PersistentForm&gt; (typ.)\n            e.target = paField;\n            config.macros.PersistentForm.onChange(e);                   // KLUDGE! (typ.)\n        }\n    }\n};\n//}}}\n</div>
<div tiddler="Dawn-Dusk Times" modifier="Bob Denny" modified="201109232145" created="201109232140" tags="UserContent">It's &lt;&lt;today&gt;&gt;\n\n&lt;&lt;RemoteContent '/ac/dawndusk.asp'&gt;&gt;</div>
<div tiddler="Deep Sky Catalog Search" modifier="Bob Denny" modified="201401140009" created="200609300051" tags="Observing UserContent">&lt;&lt;slider &quot;&quot; &quot;Deep Sky Catalog Search Help&quot; Help &quot;Helpful information&quot;&gt;&gt;\n&lt;html&gt;&lt;form&gt;\n&lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n&lt;tr valign=&quot;top&quot;&gt;\n &lt;td height=&quot;100%&quot;&gt;Search pattern:&lt;/td&gt;\n &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;pattern&quot; id=&quot;pattern&quot; size=&quot;10&quot; /&gt;&lt;/td&gt;\n &lt;td rowspan=&quot;3&quot;&gt;&lt;select name=&quot;resList&quot; id=&quot;resList&quot; size=&quot;10&quot; style=&quot;width:12em&quot; /&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr valign=&quot;top&quot;&gt;\n &lt;td height=&quot;100%&quot;&gt;&amp;nbsp;&lt;/td&gt;\n &lt;td&gt;&lt;input type=&quot;radio&quot; name=&quot;matType&quot; id=&quot;matType&quot; value=&quot;startsWith&quot; checked&gt;Starts with&lt;/input&gt;&lt;br&gt;&lt;input type=&quot;radio&quot; name=&quot;matType&quot; id=&quot;matType&quot; value=&quot;contains&quot;&gt;Contains&lt;/input&gt;&lt;br&gt;&lt;input type=&quot;radio&quot; name=&quot;matType&quot; id=&quot;matType&quot; value=&quot;regExp&quot;&gt;Regular Exp.&lt;/input&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr valign=&quot;bottom&quot;&gt;\n &lt;td align=&quot;center&quot;&gt;&lt;a class=&quot;button&quot; href=&quot;javascript:;&quot; onClick=&quot;DC3.CatSearch.search(DC3.Lib.getPlace(this))&quot; title=&quot;Search the catalogs&quot;&gt;Search&lt;/a&gt;&lt;/td&gt;\n &lt;td&gt;&lt;input name=&quot;visOnly&quot; type=&quot;checkbox&quot; id=&quot;visOnly&quot; value=&quot;true&quot; style=&quot;margin:0;&quot; checked&gt;&amp;nbsp;Visible only&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n&lt;/form&gt;&lt;/html&gt;&lt;script&gt;\nvar tgtName;\nvar origPlace = place;\nfunction setTargetInfo(title, place) {\n	switch(title) {\n		case &quot;Acquire a Single Image&quot;:\n		case &quot;Single Object Color Series&quot;:\n		case &quot;Schedule Astro-Imaging&quot;:\n		case &quot;Schedule Image Series&quot;:\n			var tgtField = DC3.CatSearch._findFormField(place, &quot;Target&quot;);\n			place = DC3.Lib.getPlace(tgtField); // assure in .viewer for wikify()!!!\n			tgtField.value = tgtName;\n			var e = { target: tgtField };\n			config.macros.PersistentForm.onChange(e);\n			DC3.CatSearch.lookup(place);\n			break;\n		default:\n			break;\n	}\n}\nfunction listSel(e) {\n	if(!e) e = window.event;\n	var tgt = resolveTarget(e);\n	tgtName = tgt.value;\n	if(tgtName !== &quot;&quot;) {\n		wikify(&quot;\sn----\snOK! Target name and coordinates remembered and sent to open forms.&quot;, origPlace);\n	    story.forEachTiddler(setTargetInfo);\n	}\n}\ndocument.getElementById(&quot;resList&quot;).onclick = listSel;&lt;/script&gt;\n</div>
<div tiddler="Deep Sky Catalog Search Help" modifier="Bob Denny" modified="201011202209" created="200610040348" tags="Help UserContent hideUser">To search, enter part of the object name into the field below. A list of catalog entries whose names contain your text will be returned. @@Clicking on a name in the list will send the name and coordinates to any open image acquisition forms.@@\n\nOur facility has a file of J2000 coordinates for over 70,000 designations of deep sky objects. The catalog is a combination of the [[Saguaro Astronomy Club (SAC) V7.9 catalog|http://www.saguaroastro.org/content/downloads.htm]] and the [[Third Reference Catalog of Bright Galaxies (RC3)|http://cdsweb.u-strasbg.fr/cgi-bin/Cat?VII/155]]. If the same object exists in both, coordinates from RC3 are used.\n\nAlmost all objects are listed by the catalog abbreviation, @@followed by a space@@, followed by the number in that catalog. Examples:\n{{{\n M 51 MCG -03-01-01 Bochum 15\n NGC 2100 vdB 150 Ced 122\n PGC 63008 PK 26-11.1 LBN 623\n UGC 11670 Abell 347 ESO 350-23\n}}}\n</div>
<div tiddler="DefaultTiddlers" modifier="Bob Denny" modified="200611060504" created="200609151819" tags="systemContent">[[Authoring System]]</div>
<div tiddler="Downloads" modifier="Bob Denny" modified="201408140100" created="200609292136" tags="UserContent">We suggest [[using FTP|Using FTP]]. &lt;&lt;RemoteContent '/files/aindex.asp' Refresh 'Refresh the file list'&gt;&gt;</div>
<div tiddler="EnableAnimations" modifier="Bob Denny" modified="200610271418" created="200610271418" tags="Help UserContent hideUser">Turn this off to disable the animations when opening items and slider panels. The task bars on the left will always animate.</div>
<div tiddler="FTP on Mac OS X" modifier="Bob Denny" modified="201011220150" created="201011220017" tags="Help UserContent">/%&lt;%\n ftp_port = &quot;:&quot; + Request.ServerVariables(&quot;FTP_PORT&quot;);\n if(ftp_port == &quot;:21&quot;) ftp_port = &quot;&quot;;\n host_name = Request.ServerVariables(&quot;FTP_HOST&quot;) + ftp_port;\n site_name = Prefs.SiteName;\n user_name = User.Username;\n%&gt;%/\n&lt;html&gt;\n&lt;img src=&quot;/im/ftp4.png&quot; hspace=&quot;8&quot; align=&quot;right&quot;&gt;\n&lt;/html&gt;In Mac OS X your files on &lt;%= site_name %&gt; can easily be added as a Shared item in the Finder.\n!!~One-Time Setup\nYou need to have Shared items visible in the Finder's sidebar.\n#In the Finder, choose Finder &gt; Preferences.\n#In the Finder Preferences window, click Sidebar.\n#Under Shared, turn on Connected servers.\n!!Connecting to ACP at &lt;%= site_name %&gt;\n#In the Finder, choose Go &gt; &quot;Connect to Server&quot;.\n#In the Server Address box type {{{ftp://&lt;%= host_name %&gt;/}}}. Be careful here!\n#Click the [+] button to add this to your favorite servers.\n#Click Connect. The &quot;name and password&quot; window should appear.\n#In the &quot;name and password&quot; window, enter your ACP username @@&lt;%= user_name %&gt;@@ and your password.\n#Check the &quot;Remember this password...&quot; box.\n#Click Connect. A new Finder window should open with the observatory folders shown.\nThe image on the right shows what it looks like in the Mac OS X Finder's sidebar, showing under the Shared section. The &quot;eject&quot; button disconnects the FTP connection. @@You should disconnect the FTP connection when you're not using it.@@ That's why we recommended you add it as a Favorite above. If you have problems, see [[Troubleshooting FTP]].\n</div>
<div tiddler="FTP on Windows 7" modifier="Bob Denny" modified="201011220227" created="201011220017" tags="Help UserContent">/%&lt;%\n ftp_port = &quot;:&quot; + Request.ServerVariables(&quot;FTP_PORT&quot;);\n if(ftp_port == &quot;:21&quot;) ftp_port = &quot;&quot;;\n host_name = Request.ServerVariables(&quot;FTP_HOST&quot;) + ftp_port;\n site_name = Prefs.SiteName;\n user_name = User.Username;\n%&gt;%/\nOn Windows 7 (and Vista), you can use the Explorer to do FTP transfers and other file operations. Once you get it working (see [[Troubleshooting FTP]]), it's really easy, since you see virtually the same pictures and use the same keys and mouse operations as for local files. \n!!One-time Setup\nBefore you can use Explorer for FTP, there are a couple of settings to make:\n#In the Control Panel, open Internet Options. \n#Select the Advanced tab.\n#In the Browsing section of the list make sure &quot;Enable FTP folder view&quot; is turned on. \n#Scroll further down and make sure that &quot;Use passive FTP&quot; is turned on (note, in rare circumstances you may have to turn this off, see [[Troubleshooting FTP]]).\n!!Connecting to &lt;%= site_name %&gt;\nAfter completing the one-time setup actions above:\n#On your desktop, open Computer\n#Right-click and select &quot;Add a network location&quot;. The Add Network Location Wizard will appear. Click Next.\n#In the &quot;Where...&quot; pane, select &quot;Choose a custom network location&quot;. Click Next.\n#In the &quot;Specify...&quot; pane, enter {{{ftp://&lt;%= host_name %&gt;/}}} Be careful here! Click Next.\n#On the &quot;User Name and Password&quot; panel, uncheck &quot;Log on anonymously&quot; and enter your ACP user name  @@&lt;%= user_name %&gt;@@. Click Next.\n#In the &quot;What...&quot; panel, you can give this network location any name you want. We recommend you name it @@&lt;%= site_name %&gt;@@. Click Next.\n#On the &quot;Completing...&quot; panel, leave the &quot;Open this network place...&quot; box checked. Click Finish.\n#After some time the &quot;Log on as&quot; window should appear. Enter your ACP password and check the &quot;Save password&quot; box. Click Log On.\nIf all went well, you should see an Explorer window open to &lt;%= site_name %&gt;. Use just as you do the Windows Explorer for local files. You can switch the sidebar to Folders view and easily navigate your files. If you close your view of the remote files, then after some time of inactivity, Windows will disconnect the FTP connection. Even though you close this window, the site will still appear in My Network Places. Simply double click to re-establish your FTP link to @@&lt;%= host_name %&gt;@@ here at @@&lt;%= site_name %&gt;@@. If you have problems, see [[Troubleshooting FTP]].\n</div>
<div tiddler="FTP on Windows XP" modifier="Bob Denny" modified="201011220150" created="201011220017" tags="Help UserContent">/%&lt;%\n ftp_port = &quot;:&quot; + Request.ServerVariables(&quot;FTP_PORT&quot;);\n if(ftp_port == &quot;:21&quot;) ftp_port = &quot;&quot;;\n host_name = Request.ServerVariables(&quot;FTP_HOST&quot;) + ftp_port;\n site_name = Prefs.SiteName;\n user_name = User.Username;\n%&gt;%/\nOn Windows XP, you can use the Explorer to do FTP transfers and other file operations. Once you get it working (see [[Troubleshooting FTP]]), it's really easy, since you see virtually the same pictures and use the same keys and mouse operations as for local files. \n!!One-time Setup\nBefore you can use Explorer and Network Places for FTP, there are a couple of settings to make:\n#In the Control Panel, open Internet Options. \n#Select the Advanced tab.\n#In the Browsing section of the list make sure &quot;Enable FTP folder view&quot; is turned on. \n#Scroll further down and make sure that &quot;Use passive FTP&quot; is turned on (note, in rare circumstances you may have to turn this off, see [[Troubleshooting FTP]]).\n!!Connecting to &lt;%= site_name %&gt;\nAfter completing the one-time setup actions above:\n#On your desktop, open My My Computer.\n#If needed, turn off folder view so the Explorer sidebar shows\n#Click My Network Places.\n#In the sidebar, click Add a Network Place. The Add Network Place Wizard will start. Click Next.\n#On the &quot;Where...&quot; panel, select &quot;Choose another network Location&quot;. Click Next.\n#On the &quot;What...&quot; panel, enter {{{ftp://&lt;%= host_name %&gt;/}}} Be careful here! Click Next.\n#On the &quot;User Name and Password&quot; panel, uncheck &quot;Log on anonymously&quot; and enter your ACP user name  @@&lt;%= user_name %&gt;@@. Click Next.\n#In the &quot;What...&quot; panel, you can give this network place any name you want. We recommend you name it @@&lt;%= site_name %&gt;@@. Click Next.\n#On the &quot;Completing...&quot; panel, leave the &quot;Open this network place...&quot; box checked. Click Finish.\n#After some time the &quot;Log on as&quot; window should appear. Enter your ACP password and check the &quot;Save password&quot; box. Click Log On.\nIf all went well, you should see an Explorer window open to &lt;%= site_name %&gt;. Use just as you do the Windows Explorer for local files. You can switch the sidebar to Folders view and easily navigate your files. If you close your view of the remote files, then after some time of inactivity, Windows will disconnect the FTP connection. Even though you close this window, the site will still appear in My Network Places. Simply double click to re-establish your FTP link to @@&lt;%= host_name %&gt;@@ here at @@&lt;%= site_name %&gt;@@. If you have problems, see [[Troubleshooting FTP]].\n</div>
<div tiddler="FindBrightStarInfoSlider" modifier="Bob Denny" modified="200612050337" created="200612050320" tags="Help UserContent hideUser">Runs the observatory's bright star locator. When it completes, a suitable &quot;bright&quot; star within a 5 degree distance of the starting telescope position will be in the center of the telescope's field of view. This is an engineering test procedure, unless you are the observatory owner working through teething pains you should expect that this will work.</div>
<div tiddler="FindFocalLengthsInfoSlider" modifier="Bob Denny" modified="200612050227" created="200612050225" tags="Help UserContent hideUser">Most useful when you change you optical train. This task will measure the exact focal length of your optics. &lt;% if(User.IsAdministrator) { %&gt;If this is significantly different than the focal length in ACP's telescope preferences, be sure to update the ACP value.&lt;% } else { %&gt;This value is always put into your images' FITS headers, so you can see it there without making this measurement.&lt;% } %&gt;</div>
<div tiddler="FindLimitingMagInfoSlider" modifier="Bob Denny" modified="200612050230" created="200612050227" tags="Help UserContent hideUser">Measures the limiting magnitude of the observatory and current skies. @@This is not an exact measurement@@, it is intended to be a rough guide to the capabilities of the observatory //and the current skies.// If you need a science-grade limiting magnitude measurement, take your own images and use a science-grade tool to reduce the data.</div>
<div tiddler="FirePageTemplate" modifier="Bob Denny" modified="200609231817" created="200609190215" tags="pageTemplate systemContent">&lt;div class='header' macro='gradient vert #390108 #900'&gt;\n&lt;div class='headerShadow'&gt;\n&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;\n&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class='headerForeground'&gt;\n&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;\n&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;\n&lt;div id='sidebar'&gt;\n&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;\n&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id='displayArea'&gt;\n&lt;div id='messageArea'&gt;&lt;/div&gt;\n&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;\n&lt;/div&gt;</div>
<div tiddler="FireStyleSheet" modifier="Bob Denny" modified="201505191755" created="200609190214" tags="styleSheet systemContent">/***\nAuthor: //unknown// - originally retrieved from Clint Checketts (http://www.checkettsweb.com) \n!!Revision History\n&lt;&lt;&lt;\n''2006.09.17 [rbd]'' Get rid of ghost blue borders on &lt;input&gt; and &lt;textarea&gt; elements within both the editor and the viewer content. Mute the background of &lt;input&gt; and &lt;textarea&gt; to reduce the glare of them against the dark background. Change highlighting color to match the style. Fix table cell borders so they show. Fix buttons so they don't display dotted underline hyperlink when clicked or hovered, brighten the normal text within buttons, perceptually it was too dark! Reformat rules to multi-line with tabs.\n''2006.09.18 [rbd]'' Add overrides for ~XP-style navbar used on Share Your Sky! main page.\n''2006.09.19 [rbd]'' More work on styles, improved bar graphics, tweaks for boxing, non-hyperlinked fonts. Looking good now.\n''2006.09.20 [rbd]'' Add background and border to tiddlers, adjust padding and bottom margin for same. Remove rbd marks and dead styles. Reduce header and sidebar borders to 1px. Added Clint Checketts' IE CSS hack to permit the .tiddler CSS to work correctly. How'd he EVER figure that out?\n''2006.09.30 [rbd]'' Fix &quot;dotted-line removal&quot; change above so buttons in viewer don't change size when highlighted. This made flickering buttons! Improve table colors in general, fix appearance of sortable table headers, add custom fileList class for the file list tables used in ~SyS.\n''2006.10.08 [rbd]'' Much more work over last 10 days, add styles for System Monitor.\n''2006.10.23 [rbd]'' Remove height from &lt;input&gt; and &lt;select&gt;, was scrunching buttons. Style &lt;input&gt; and &lt;select&gt; colors to match the rest. OOPS, looks like hell on IE.\n''2006.10.27 [rbd]'' Fix colors of SelectThemePlugin button and popup highlight. See inline comments for location.\n''2006.10.31 [rbd]'' Reorganize.\n''2006.11.07 [rbd]'' Faint border for sysmon thumbnail\n''2006.11.21 [rbd]'' Add .collapsedTitle for folded tiddlers\n''2009 01 09 [rbd]'' Firefox 3 compatibility. ~HeaderForeground needed width 100%\n''2010.11.17 [rbd]'' ~ACP-490 Add border style for #sm_guideBox\n''2010.11.21 [rbd]'' ~ACP-502 Explicitly color file &lt;input&gt; black on white so you can see the &quot;No file chosen&quot; or the selected file on ~WebKit browsers.\n''2011.09.29 [rbd]'' Dim tiddler and table text to #ddd, the bright white was annoying\n''2015.05.19 [rbd]'' ~ACP-1303 Alignment of text in MainMenu top bar\n&lt;&lt;&lt;\n!Colors Used\n*@@bgcolor(#ff7f00):color(#000): #ff7f00@@\n*@@bgcolor(#ffbf00):color(#000): #ffbf00@@\n*@@bgcolor(#fff):color(#000): #fff@@\n*@@bgcolor(#4c4c4c):color(#fff): #4c4c4c@@\n*@@bgcolor(#5f5f5f):color(#fff): #5f5f5f@@\n*@@bgcolor(#333):color(#fff): #333@@\n*@@bgcolor(#666):color(#fff): #666@@\n*@@bgcolor(#000030):color(#fff): #000030@@\n*@@bgcolor(#000080):color(#fff): #000080@@\n*@@bgcolor(#000):color(#fff): #000@@\n*@@bgcolor(#000040):color(#fff): #000040@@\n*@@bgcolor(#888):color(#fff): #888@@\n*@@bgcolor(#ddd):color(#000): #ddd@@\n*@@bgcolor(#ffe72f):color(#000): #ffe72f@@\n*@@bgcolor(#300000):color(#fff): #300000@@\n*@@bgcolor(#600000):color(#fff): #600000@@\n*@@bgcolor(#ffffcc):color(#000): #ffffcc@@\n*@@bgcolor(#fffacd):color(#000): #fffacd@@\n\n!Generic Layout Rules \n***/\n/*{{{*/\nbody {\n	background: #000;\n	position: static; /*Clint's IE fix part 1 (part 2 in TW now) */\n}\ntextarea {\n	font-family: courier !important; /* Fixed point font for editing */\n}\n.title {\n	color: #fffacd;\n	border-bottom: 1px dashed #333;\n}\n.subtitle {\n	color: #666;\n}\n.collapsedTitle {\n	color: #888;\n	font-size: 1.3em;\n	font-weight: bold;\n}\nh1, h2, h3, h4, h5 {\n	color: #fffacd;\n	background-color: #000040;\n	border-top: 1px solid #333;\n	border-bottom: 1px solid #333;\n}\n/*}}}*/\n/***\n!Link styles\n***/\n/*{{{*/\na, a.button, #mainMenu a.button, #sidebarOptions .sliderPanel a {\n	color: #ffbf00;\n	border: 0;\n}\na:hover, a.button:hover, #mainMenu a.button:hover, #sidebarOptions .sliderPanel a:hover #sidebarOptions .sliderPanel a:active {\n	color: #ff7f00;\n	border: 0;\n	border-bottom: #ff7f00 1px dashed;\n	background: transparent;\n	text-decoration: none;\n}\n#sidebarOptions a {\n	margin: 0;\n	color: #ffbf00;\n	border: 0;\n}\n#sidebarOptions a:active {\n	color: #ffbf00;\n	background-color: transparent;\n}\n#sidebarOptions a:hover {\n	color: #4c4c4c;\n	background-color: #ffbf00;\n}\n#sidebarTabs .tabContents a, #popup a {\n	color: #ffbf00;\n}\n#messageArea a:link, #messageArea a:visited {\n	color: #ffbf00;\n	text-decoration: none;\n}\n#messageArea a:hover, #messageArea a:active {\n	color: #ff7f00;\n}\n#messageArea .messageToolbar a {\n	border: 1px solid #ffbf00;\n	background: #4c4c4c;\n}\n.headerForeground a {\n	color: #fff;\n}\n.toolbar a.button {\n	border: 0;\n}\n.editorFooter a {\n	border: 0;\n}\n/*}}}*/\n/***\n!Header styles\n***/\n/*{{{*/\n.header {\n	border-bottom: 1px solid #ffbf00;\n	color: #fff;\n}\n.header a:hover {\n	border-bottom: 1px dashed #fff;\n}\n.headerForeground {\n	width: 100%;           /* Firefox 3 suddenly needed this but not on HeaderShadow */\n	padding: 2.5em 0em 1em 1em;\n}\n.headerShadow {\n	padding: 2.5em 0em 1em 1em;\n}\n/*}}}*/\n/***\n!Main menu styles\n***/\n/*{{{*/\n#mainMenu {\n	color: #fff;\n}\n#mainMenu h1 {\n	font-size: 1.1em;\n}\n#mainMenu li, #mainMenu ul {\n	list-style: none;\n	margin: 0;\n	padding: 0;\n}\n/*}}}*/\n/***\n!Sidebar styles \n***/\n/*{{{*/\n#sidebar {\n	right: 0;\n	color: #fff;\n	border: 1px solid #ffbf00;\n	border-width: 0 0 1px 1px;\n}\n#sidebarOptions {\n	background-color: #4c4c4c;\n	padding: 0;\n}\n#sidebarOptions .sliderPanel {\n	background-color: #333;\n	margin: 0;\n}\n#sidebarOptions input {\n	border: 1px solid #ffbf00;\n	background-color: #ffffcc;\n}\n#sidebarTabs .tabUnselected:hover, #sidebarTabs .tabContents {\n	background-color: #666;\n}\n#sidebarOptions .highlight {\n	color: #4c4c4c;\n	background-color: #ffbf00;\n}\n.listTitle {\n	color: #fff;\n}\n/* Special for SelectThemePlugin when \n   leaving popup open and mousing away*/\n#sidebarTabs {\n	background-color: #4c4c4c;\n}\n#sidebarTabs .tabSelected {\n	padding: 3px 3px;\n	cursor: default;\n	color: #ffbf00;\n	background-color: #666;\n}\n#sidebarTabs .tabUnselected {\n	color: #ffbf00;\n	background-color: #5f5f5f;\n	padding: 0 4px;\n}\n#sidebarTabs .tabContents a:hover {\n	color: #ff7f00;\n	background: transparent;\n}\n#sidebarTabs .txtMoreTab .tabUnselected {\n	color: #ffbf00;\n	background: #5f5f5f;\n}\n#sidebarTabs .txtMoreTab .tabSelected, #sidebarTabs .txtMoreTab .tab:hover, #sidebarTabs .txtMoreTab .tabContents {\n	color: #ffbf00;\n	background: #4c4c4c;\n}\n/*}}}*/\n/***\n!General tab styles\n***/\n/*{{{*/\n\n.tab.tabUnselected {\n	background-color: #666;\n}\n.tab.tabSelected, .tab.tabSelected:hover {\n	color: #ffbf00;\n	border: 0;\n	background-color: #4c4c4c;\n	cursor: default;\n}\n.tab.tabUnselected:hover {\n	color: #ffbf00;\n	border: 0;\n	background-color: #4c4c4c;\n}\n.tabContents {\n	background-color: #4c4c4c;\n	border: 0;\n}\n.tabContents .tabUnselected {\n	background: #5f5f5f;\n}\n.tabContents .tab:hover, .tabContents .tabContents, .tabContents .tabSelected {\n	background: #666;\n}\n/*}}}*/\n/***\n!Message area styles\n***/\n/*{{{*/\n#messageArea {\n	background-color: #666;\n	color: #fff;\n	border: 2px solid #ffbf00;\n}\n/*}}}*/\n/***\n!Popup styles \n***/\n/*{{{*/\n#popup {\n	color: #fff;\n	background-color: #4c4c4c;\n	border: 1px solid #ffbf00;\n}\n#popup a:hover {\n	background: transparent;\n	color: #ff7f00;\n	border: 0;\n}\n#popup hr {\n	color: #ffbf00;\n	background: #ffbf00;\n}\n/* Special for SelectTheme popmenu */\n#popup .currentlySelected {\n	color: #4c4c4c;\n	background: #ffbf00;\n}\n/*}}}*/\n/***\n!Tiddler Display styles\n***/\n/*{{{*/\n/** LOSER ON IE6 without Clint's IE fix (see body section at top!) **/\n.tiddler {\n	background: #000030;\n	border: 1px solid #000080;\n	padding-bottom: 8px;\n	margin-left: 8px; 	/* Vastly different on IE vs FireFox! */\n	margin-bottom: 12px;\n}\n#displayArea .button.highlight {\n	color: #ffbf00;\n	background: #4c4c4c;\n}\n.tiddler .button {\n	color: #888;\n}\n.tiddler .button:hover, .tiddler .button:active {\n	color: #ffbf00;\n	background-color: #4c4c4c;\n	border-bottom: 1px solid #4c4c4c; /* No dotted line in buttons */\n}\n.viewer {\n	color: #ddd;\n}\n.viewer table {\n	background: transparent;\n	color: #ddd;\n	border: 1px solid;\n}\n.viewer th {\n	background-color: #4c4c4c;\n	color: #fff;\n}\n.viewer hr {\n	color: #666;\n}\n.viewer input, .viewer select {\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace;\n	font-size: 1.0em;\n}\n.viewer input.upload {\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace;\n	font-size: 1.0em;\n	/* For WebKit's label style feedback */\n	color:#000;\n	background:#fff;\n}\n.viewer .sortheader {\n	font-weight: normal;\n}\n.viewer pre, .viewer code {\n	color: #ddd;\n	background-color: #4c4c4c;\n	border: 1px solid #ffbf00;\n}\n.viewer .button:hover, .viewer .button:active {\n	border: 1px solid #4c4c4c; /* Needed to avoid button size changing */\n}\n.viewer .fileList table {\n	border-color: #ff7f00;\n	margin-bottom: 0px;\n}\n/* For Share your Sky only */\n.viewer .fileList tr {\n	border: none;\n}\n.viewer .fileList td, .viewer .fileList th {\n	border: 0;\n	padding: 2px 8px 2px 8px;\n}\n.viewer .noBorder table, .viewer .noBorder th, .viewer .noBorder tr, .viewer .noBorder td, .viewer iframe {\n	border: 0;\n}\n.viewer .noBorder #sm_thumb {	/* For sysmon thumbnail */\n	border: 1px solid #000080;\n	padding: 0px;\n}\n.viewer .noBorder #sm_guideBox { /* For sysmon guider trackbox image */\n	border: 1px solid #000080;\n	padding: 0px;\n}\n/* End Share Your Sky */\n\n.toolbar {\n	color: #4c4c4c;\n}\n.footer {\n	color: #ddd;\n}\n.selectedTiddler .footer {\n	color: #888;\n}\n.editor textarea, .editor input {\n	border: 1px solid #ffbf00;\n	background-color: #ffffcc;\n}\n.editorFooter {\n	color: #aaa;\n}\n.tab {\n	-moz-border-radius-topleft: 3px;\n	-moz-border-radius-topright: 3px;\n}\n.tagging, .tagged {\n	background: #4c4c4c;\n	border: 1px solid #4c4c4c;\n}\n.selected .tagging, .selected .tagged {\n	background: #000;\n	border: 1px solid #ffbf00;\n}\n.tagging .button, .tagged .button {\n	color: #ffbf00;\n	border: 0;\n	padding: 0;\n}\n.tagging .button:hover, .tagged .button:hover {\n	background: transparent;\n}\n.tagging .listTitle, .tagged .listTitle, {\n color: #fff;\n}\n.tagClear {\n	margin-top: 1em; /* clear: both; Clint's IE fix part 2 now in TW 2.1.2 */\n}\n.highlight, .marked {\n	background-color: #000080;\n	color: #ffffff;\n}\n.cascade {\n	background: #4c4c4c;\n	color: #ddd;\n	border: 1px solid #ffbf00;\n}\n/*}}}*/\n/***\n!XP ~NavBar Style Overrides\n***/\n/*{{{*/\n.topItem {\n    display: table-cell;\n    vertical-align: middle;\n	background: url(&quot;im/fire-classic-up.png&quot;) no-repeat 0 0;\n	color: #ffbf00;\n}\n.topItemOver {\n    display: table-cell;\n    vertical-align: middle;\n	background: url(&quot;im/fire-classic-up-on.png&quot;) no-repeat 0 0;\n	color: #ffffff;\n}\n.topItemClose {\n    display: table-cell;\n    vertical-align: middle;\n	background: url(&quot;im/fire-classic-down.png&quot;) no-repeat 0 0;\n	color: #ffbf00;\n}\n.topItemCloseOver {\n    display: table-cell;\n    vertical-align: middle;\n	background: url(&quot;im/fire-classic-down-on.png&quot;) no-repeat 0 0;\n	color: #ffffff;\n}\n.subItem, .subSubItem, .subItemOver, .subSubItemOver {\n	color: #ffffff;\n}\n.dropMenu {\n	background-color: #4c4c4c;\n	color: #000;\n	border: 1px solid;\n	border-color: #4c4c4c #ff7f00 #ff7f00 #ff7f00;\n}\n/*}}}*/\n/***\n!System Status Display Styles\n***/\n/*{{{*/\ndiv.progBarBg {\n	position: relative;\n	height: 0.75em;\n	background-color: #300000;\n}\ndiv.progBarFg {\n	position: absolute;\n	overflow: hidden;\n	height: 0.75em;\n	width: 0px;\n	background-color: #ff7f00;\n}\ntd.telemetry {\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace;\n	font-size: 1em;\n	background-color: #300000;\n	white-space: pre;\n	color: #600000;\n}\nspan.telemActive {\n	color: #ccccff;\n}\nspan.telemWarn {\n	color: #ff0000;\n}\nspan.telemOff {\n	color: #600000; /* Match color in td.telemetry */\n}\ntd.telemlabel {\n	white-space: nowrap;\n}\ntextarea.scriptlog {\n	border: 1px solid #ffbf00;\n	margin: 0;\n	padding: 0.5em;\n	background: #300000;\n	color: #ffffff;\n	font-family: &quot;Lucida Console&quot;, &quot;Courier New&quot;, Courier, monospace !important;\n	font-size: 1em !important;\n	white-space: pre;\n	line-height: 110%;\n}\ntd.trackGraph {\n	background-color: #300000;\n}\n\n/*}}}*/\n</div>
<div tiddler="FocusOffsetsInfoSlider" modifier="Bob Denny" modified="200612050315" created="200612050231" tags="Help UserContent hideUser">Measures the focus offsets from a //reference filter// that you specify. This will tell you how close to par-focal the observatory filters are. If you need to, look at the [[Instruments &amp; Equipment]] item to see the names of the filters. \n\nYou may optionally have the new focus offset info made available to the observatory for observations. Please consider carefully whether the sky conditions warrant updating the permanent focus offsets for the observatory. Your decision affects the results others will get henceforth!</div>
<div tiddler="FontSizePlugin" modifier="Bob Denny" modified="200609232045" created="200609231520" tags="systemConfig macro plugin">/***\n|Name|FontSizePlugin|\n|Created by|SaqImtiaz|\n|Location|http://lewcid.googlepages.com/lewcid.html#FontSizePlugin|\n|Version|1.0|\n|Requires|~TW2.x|\n!Description:\nResize tiddler text on the fly. The text size is remembered between sessions by use of a cookie.\nYou can customize the maximum and minimum allowed sizes.\n(only affects tiddler content text, not any other text)\n\nAlso, you can load a TW file with a font-size specified in the url.\nEg: http://lewcid.googlepages.com/lewcid.html#font:110\n\n!Demo:\nTry using the font-size buttons in the sidebar, or in the MainMenu above.\n\n!Installation:\nCopy the contents of this tiddler to your TW, tag with systemConfig, save and reload your TW.\nThen put {{{&lt;&lt;fontSize &quot;font-size:&quot;&gt;&gt;}}} in your SideBarOptions tiddler, or anywhere else that you might like.\n\n!Usage\n{{{&lt;&lt;fontSize&gt;&gt;}}} results in &lt;&lt;fontSize&gt;&gt;\n{{{&lt;&lt;fontSize font-size: &gt;&gt;}}} results in &lt;&lt;fontSize font-size:&gt;&gt;\n\n!Customizing:\nThe buttons and prefix text are wrapped in a span with class fontResizer, for easy css styling.\nTo change the default font-size, and the maximum and minimum font-size allowed, edit the config.fontSize.settings section of the code below.\n\n!Notes:\nThis plugin assumes that the initial font-size is 100% and then increases or decreases the size by 10%. This stepsize of 10% can also be customized.\n\n!History:\n*27-07-06, version 1.0 : prevented double clicks from triggering editing of containing tiddler.\n*25-07-06, version 0.9\n\n!Code\n***/\n\n//{{{\nconfig.fontSize={};\n\n//configuration settings\nconfig.fontSize.settings =\n{\n defaultSize : 100, // all sizes in %\n maxSize : 200,\n minSize : 40,\n stepSize : 10\n};\n\n//startup code\nvar fontSettings = config.fontSize.settings;\n\nif (!config.options.txtFontSize)\n {config.options.txtFontSize = fontSettings.defaultSize;\n saveOptionCookie(&quot;txtFontSize&quot;);}\nsetStylesheet(&quot;.tiddler .viewer {font-size:&quot;+config.options.txtFontSize+&quot;%;}\sn&quot;,&quot;fontResizerStyles&quot;);\nsetStylesheet(&quot;#contentWrapper .fontResizer .button {display:inline;font-size:105%; font-weight:bold; margin:0 1px; padding: 0 3px; text-align:center !important;}\sn .fontResizer {margin:0 0.5em;}&quot;,&quot;fontResizerButtonStyles&quot;);\n\n//macro\nconfig.macros.fontSize={};\nconfig.macros.fontSize.handler = function (place,macroName,params,wikifier,paramString,tiddler)\n{\n\n var sp = createTiddlyElement(place,&quot;span&quot;,null,&quot;fontResizer&quot;);\n sp.ondblclick=this.onDblClick;\n if (params[0])\n createTiddlyText(sp,params[0]);\n createTiddlyButton(sp,&quot;+&quot;,&quot;increase font-size&quot;,this.incFont);\n createTiddlyButton(sp,&quot;=&quot;,&quot;reset font-size&quot;,this.resetFont);\n createTiddlyButton(sp,&quot;–&quot;,&quot;decrease font-size&quot;,this.decFont);\n}\n\nconfig.macros.fontSize.onDblClick = function (e)\n{\n if (!e) var e = window.event;\n e.cancelBubble = true;\n if (e.stopPropagation) e.stopPropagation();\n return false;\n}\n\nconfig.macros.fontSize.setFont = function ()\n{\n saveOptionCookie(&quot;txtFontSize&quot;);\n setStylesheet(&quot;.tiddler .viewer {font-size:&quot;+config.options.txtFontSize+&quot;%;}\sn&quot;,&quot;fontResizerStyles&quot;);\n}\n\nconfig.macros.fontSize.incFont=function()\n{\n if (config.options.txtFontSize &lt; fontSettings.maxSize)\n config.options.txtFontSize = (config.options.txtFontSize*1)+fontSettings.stepSize;\n config.macros.fontSize.setFont();\n}\n\nconfig.macros.fontSize.decFont=function()\n{\n\n if (config.options.txtFontSize &gt; fontSettings.minSize)\n config.options.txtFontSize = (config.options.txtFontSize*1) - fontSettings.stepSize;\n config.macros.fontSize.setFont();\n}\n\nconfig.macros.fontSize.resetFont=function()\n{\n\n config.options.txtFontSize=fontSettings.defaultSize;\n config.macros.fontSize.setFont();\n}\n\nconfig.paramifiers.font =\n{\n onstart: function(v)\n {\n config.options.txtFontSize = v;\n config.macros.fontSize.setFont();\n }\n};\n//}}}</div>
<div tiddler="Formatting Tables" modifier="Bob Denny" modified="200611060400" created="200611060319" tags="Authoring deleteUser">Table formatting is both powerful and (at first) intimidating. Actually, it's pretty easy once you get the knack. See the sample tables after the reference info. Note that all [[Basic Formatting]] can be used within the cells. \n|!Markup|!Meaning|\n| {{{|}}} |Column Seperator |\n| {{{!}}} |Header (Row or Column) |\n| {{{&gt;}}} |Column Span (picks up the followinng column) |\n| {{{~}}} |Row Span (picks up the row above)|\n| {{{|Left |}}} |Left Align |\n| {{{| Right|}}} |Right Align|\n| {{{| Center |}}} |Center Align |\n| {{{|Caption|c}}} |Table Caption (Can be at top or bottom)|\n| {{{|Footer|f}}} |Marks the row as being a footer row (will be wrapped with a {{{&lt;tfoot&gt;}}}, no special formatting is pre-defined for this but can be added to your own CSS)|\n| {{{|Header|h}}} |Marks the entire table as a [[Sortable Grid|SortableGridPlugin]]. @@No spanning columns allowed!@@ Please see the documentation in the SortableGridPlugin.|\n|&gt;|Note that the additional CSS classes evenRow and oddRow are automatically applied to all rows of the table. But evenRow is applied to the &quot;first&quot; row as per ~JavaScript convention (it is the zero'th row).|\n!!Simple Table\n{{{\n|!Heading 1|!Heading 2|\n|Item 11|Item 21|\n|Item 12|Item 22|\n}}}\n|!Heading 1|!Heading 2|\n|Item 11|Item 21|\n|Item 12|Item 22|\n!!Alignment Demo\n{{{\n|!Heading 1 xxxx|!Heading 2 xxx|\n|Default| Centered |\n|Left | Right|\n}}}\n|!Heading 1 xxxx|!Heading 2 xxx|\n|Default| Centered |\n|Left | Right|\n!!Spanning Demo\n{{{\n|!heading 1|!heading 2|\n|&gt;|colspan=2|\n|rowspan|left align |\n|~| center |\n}}}\n|!heading 1|!heading 2|\n|&gt;|colspan=2|\n|rowspan|left align |\n|~| center |\n</div>
<div tiddler="Getting Started" modifier="Bob Denny" modified="201408221741" created="200609252354" tags="Help UserContent">\nIt's a good idea to first become a bit familiar with the browser layout and how the controls work. See [[Using This Web Site]]. You can't hurt anything, so explore! Hints:\n*Use the slideout {{{Help}}} buttons! \n*To close an item, hover the mouse over it and use the close control that appears along top right.\n*The {{{Help Resources}}} menu bar on the left is your friend! Open it now.\n*__You can log off while your run is going__ and rejoin it later, or just let it complete on its own.\n\n&lt;html&gt;&lt;iframe width=&quot;640&quot; height=&quot;360&quot; src=&quot;//www.youtube.com/embed/uTcyKvQrLio?rel=0&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/html&gt;\n\n[[View the rest of the videos in a separate tab now|http://www.youtube.com/user/DC3Dreams]]</div>
<div tiddler="Help" modifier="Bob Denny" modified="200611302141" created="200611070436" tags="deleteUser systemContent">''Tag'': Items that observers can use for help. Some are available only as sliders, accessible via a Help button in another item. Always tagged as UserContent as well.</div>
<div tiddler="How to Specify Targets" modifier="Bob Denny" modified="201208282241" created="201109291517" tags="Help UserContent hideUser">[&gt;img[/im/tgtform.png]]Forms for submitting live observing and scheduled requests share a common set of controls for specifying targets. There are a few things to be aware of:\n#Coordinates are __always J2000__ and can be entered in either sexagesimal or decimal. The sexagesimal translator is very adaptable, most anything for delimiters will work.&lt;% if(rotAvail) { %&gt;\n#This observatory has an imager rotator so you must also supply the sky position angle (PA).&lt;% } %&gt;\n#You can supply coordinates, use the deep sky catalog to fill in the coordinates, or supply a minor planet spec and have the __ephemeris calculated at observation time__.\n!!Deep Sky Objects\nThe catalog has over 70,000 objects. They are indexed with the abbreviated name of the catalog, __a space__, then the object name/number in the catalog. For example, Messier object 104 is M 104. Note the space! \n\nIf you know the name, but don't know the coordinates, enter the name and click &quot;Get Coordinates or Ephemeris&quot;. If the object is found, the coordinates will appear in the fields.\n\nTo browse the catalog, you can use the [[Deep Sky Catalog|Deep Sky Catalog Search]] to search our databases. Of course, the object you want must be visible (above the low-horizon limit), the higher the better. The best way to pick a target is with a planetarium program like Starry Night or ~TheSky. Also, by default, only visible targets will be returned from a search of the [[Deep Sky Catalog|Deep Sky Catalog Search]].\n!!Minor Planets and Comets\nACP has automatic ephemeris calculation based on the Minor Planet Center's orbital elements database. To specify a minor planet, enter {{{MP}}} followed by a space, then the name or number (for numbered minor planets) or the MPC designation (packed or full, for unnumbered minor planets). For example, the following are equivalent:\n*Numbered minor planet: {{{MP 23257}}} or {{{MP Denny}}}\n*Unnumbered minor planet: {{{MP 2004 LB6}}} or {{{MP K04L06B}}}\nTo specify a comet, enter {{{CT}}} followed by a space, then the number, designation, or name of the comet. For example, the following are equivalent:\n*Numbered comet: {{{CT 00244P}}} or {{{CT 244P/Scotti}}}\n*Unnumbered comet: {{{CT CK12J010}}} or {{{C/2012 J1}}}\nNOTE: For the unnumbered comet by name, do not include the discoverer name in parentheses. In the above, the {{{(Catalina)}}} is omitted from {{{C/2012 J1}}}. \n\nTo check your target, click &quot;Get Coordinates or Ephemeris&quot;. The message that appears at the bottom of the item will tell you if it was found or not. The RA/Dec will be zeroes; the real coordinates are calculated at the time the image is taken.\n</div>
<div tiddler="Importing and Exporting Items" modifier="Bob Denny" modified="200805100122" created="200803171644" tags="Authoring deleteUser">A set of command line tools is provided with which you can export individual items into their own files, then later import them into author.html. These tools (scripts) were originally developed so that updates to ACP's web content could be done without replacing the entire ''author.html'' and ''index.asp'' files. You may find them useful as well. There are four tools, all of which must be used from a command shell (e.g. cmd.exe). Usage info will be displayed if you just type the name of the script with no arguments.\n&lt;&lt;&lt;\nThe easiest way to use these and other Windows scripts at the command line is to configure Windows (once) for command line scripting. At the command prompt, type \n{{{ cscript //NoLogo //H:CScript //S }}}\n(yes, double slashes!)\n&lt;&lt;&lt;\n!expi - Export an item\nThe source file can be any ACP content file, not just author.html. __Suggestion__: Don't include the name of the export file, let expi name it for you. It will have a file name of the item name and an extension of .item.\n{{{\n&gt; expi\nexpi.js V1.0: Export an item by name for later importing by impi.js\n\nUsage: &gt; expi author.html &quot;Item Name&quot; [expitem.item]\n\nIf [expitem.item] not given, creates file &quot;Item Name.item&quot;\nItem and file names with spaces in them must be quoted.\n}}}\nDon't attempt to edit the .item files.\n!impi - Import an item\nThe item contained in the export file is imported into the source (author.html) or a copy of it. You can import it directly into the source file (with a backup copy of the file saved before importing) or have the source file copied to a new content file with the imported item in it, leaving the source file unchanged. The source file can be any ACP content file, not just author.html.\n{{{\n&gt; impi\nimpi.js v1.2: Import an item from a file created by expi.js\n\nUsage: &gt; impi author.html &quot;Item Name.item&quot; [newauthor.html]\n\nIf newauthor.html not given, imports directly into author.html\nand saves original as author.html.bak.\n\nIf original item in author.html is tagged Custom it will be \nsaved to Item Name.author.orig.item.\n\nFiles with spaces in their names must be quoted.\n}}}\nNote that, if the source item to be replaced is tagged Custom, impi copies it out to a file before replacing it with the imported item. \n!cust - List items with [[Custom]] tag\nLists the items in the source file that are tagged [[Custom]], namely those that you have modified or added. Use this to identify the items you may want to export for safekeeping.\n{{{\n&gt; cust\ncust V1.0: List items with Custom tag.\n\nUsage: &gt; cust author.html\nItem and file names with spaces in them must be quoted.\n}}}\nThe item name, author, creation date, and last modification date are listed for each item tagged as [[Custom]].\n!deli - Delete an item\nDeletes an item from a source file. This is of limited use for authors as items can be deleted in the authoring environment as well.  Info is included here for completeness.\n{{{\n&gt; deli\ndeli.js v1.0: Delete an item\n\nUsage: &gt; deli author.html &quot;Item Name&quot;\n\nHarmless if item does not exist.\nSaves original as author.html.bak.\n\nIf item in author.html is tagged Custom, it will be\nsaved to Item Name.author.orig.item before deletion.\n\nFiles with spaces in their names must be quoted.\n}}}</div>
<div tiddler="InlineJavascriptPlugin" modifier="Bob Denny" modified="201107060014" created="200609120254" tags="macro plugin systemConfig">/***\n|''Name:''|InlineJavascriptPlugin|\n|''Source:''|http://solo.dc3.com/tw/index.html#InlineJavascriptPlugin|\n|''Authors:''|Eric Shulman - ELS Design Studios|\n|~|Bob Denny - DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''~CoreVersion:''|2.0.10|\n\nInsert Javascript executable code directly into your tiddler content. Lets you call directly into TW core utility routines, define new functions, calculate values, add dynamically-generated ~TiddlyWiki-formatted output into tiddler content, or perform any other programmatic actions each time the tiddler is rendered.\n\n!Usage\nWhen installed, this plugin adds new wiki syntax for surrounding tiddler content with {{{&lt;script&gt;}}} and {{{&lt;/script&gt;}}} markers, so that it can be treated as embedded javascript and executed each time the tiddler is rendered.\n\n''Deferred execution from an 'onClick' link''\nBy including a label=&quot;...&quot; parameter in the initial {{{&lt;script&gt;}}} marker, the plugin will create a link to an 'onclick' script that will only be executed when that specific link is clicked, rather than running the script each time the tiddler is rendered.\n\n''External script source files:''\nYou can also load javascript from an external source URL, by including a src=&quot;...&quot; parameter in the initial {{{&lt;script&gt;}}} marker (e.g., {{{&lt;script src=&quot;demo.js&quot;&gt;&lt;/script&gt;}}}).  This is particularly useful when incorporating third-party javascript libraries for use in custom extensions and plugins.  The 'foreign' javascript code remains isolated in a separate file that can be easily replaced whenever an updated library file becomes available.\n\n''Display script source in tiddler output''\nBy including the keyword parameter &quot;show&quot;, in the initial {{{&lt;script&gt;}}} marker, the plugin will include the script source code in the output that it displays in the tiddler.\n\n''Defining javascript functions and libraries:''\nAlthough the external javascript file is loaded while the tiddler content is being rendered, any functions it defines will not be available for use until //after// the rendering has been completed.  Thus, you cannot load a library and //immediately// use it's functions within the same tiddler.  However, once that tiddler has been loaded, the library functions can be freely used in any tiddler (even the one in which it was initially loaded).\n\nTo ensure that your javascript functions are always available when needed, you should load the libraries from a tiddler that will be rendered as soon as your TiddlyWiki document is opened.  For example, you could put your {{{&lt;script src=&quot;...&quot;&gt;&lt;/script&gt;}}} syntax into a tiddler called LoadScripts, and then add {{{&lt;&lt;tiddler LoadScripts&gt;&gt;}}} in your MainMenu tiddler.\n\nSince the MainMenu is always rendered immediately upon opening your document, the library will always be loaded before any other tiddlers that rely upon the functions it defines.  Loading an external javascript library does not produce any direct output in the tiddler, so these definitions should have no impact on the appearance of your MainMenu.\n\n''Creating dynamic tiddler content''\nAn important difference between this implementation of embedded scripting and conventional embedded javascript techniques for web pages is the method used to produce output that is dynamically inserted into the document:\n* In a typical web document, you use the document.write() function to output text sequences (often containing HTML tags) that are then rendered when the entire document is first loaded into the browser window.\n* However, in a ~TiddlyWiki document, tiddlers (and other DOM elements) are created, deleted, and rendered &quot;on-the-fly&quot;, so writing directly to the global 'document' object does not produce the results you want (i.e., replacing the embedded script within the tiddler content), and completely replaces the entire ~TiddlyWiki document in your browser window.\n* To allow these scripts to work unmodified, the plugin automatically converts all occurences of document.write() so that the output is inserted into the tiddler content instead of replacing the entire ~TiddlyWiki document.\n\nIf your script does not use document.write() to create dynamically embedded content within a tiddler, your javascript can, as an alternative, explicitly return a text value that the plugin can then pass through the wikify() rendering engine to insert into the tiddler display.  For example, using {{{return &quot;thistext&quot;}}} will produce the same output as {{{document.write(&quot;thistext&quot;)}}}.\n\n//Note: your script code is automatically 'wrapped' inside a function, {{{_out()}}}, so that any return value you provide can be correctly handled by the plugin and inserted into the tiddler.  To avoid unpredictable results (and possibly fatal execution errors), this function should never be redefined or called from ''within'' your script code.//\n\n''Accessing the ~TiddlyWiki DOM''\nThe plugin provides one pre-defined variable, 'place', that is passed in to your javascript code so that it can have direct access to the containing DOM element into which the tiddler output is currently being rendered.\n\nAccess to this DOM element allows you to create scripts that can:\n* vary their actions based upon the specific location in which they are embedded\n* access 'tiddler-relative' information (use findContainingTiddler(place))\n* perform direct DOM manipulations (when returning wikified text is not enough)\n\n!Examples\nan &quot;alert&quot; message box:\n&gt;&lt;script show&gt;\n	alert('InlineJavascriptPlugin: this is a demonstration message');\n&lt;/script&gt;\ndynamic output:\n&gt;&lt;script show&gt;\n	return (new Date()).toString();\n&lt;/script&gt;\nwikified dynamic output:\n&gt;&lt;script show&gt;\n	return &quot;link to current user: [[&quot;+config.options.txtUserName+&quot;]]&quot;;\n&lt;/script&gt;\ndynamic output using 'place' to get size information for current tiddler:\n&gt;&lt;script show&gt;\n   if (!window.story) window.story=window;\n   var title=story.findContainingTiddler(place).id.substr(7);\n   return title+&quot; is using &quot;+store.getTiddlerText(title).length+&quot; bytes&quot;;\n&lt;/script&gt;\ncreating an 'onclick' button/link that runs a script:\n&gt;&lt;script label=&quot;click here&quot; show&gt;\n   if (!window.story) window.story=window;\n   alert(&quot;Hello World!\snlinktext='&quot;+place.firstChild.data+&quot;'\sntiddler='&quot;+story.findContainingTiddler(place).id.substr(7)+&quot;'&quot;);\n&lt;/script&gt;\nloading a script from a source url:\n&gt;http://solo.dc3.com/tw/demo.js contains:\n&gt;&gt;{{{function demo() { alert('this output is from demo(), defined in demo.js') } }}}\n&gt;&gt;{{{alert('InlineJavascriptPlugin: demo.js has been loaded'); }}}\n&gt;&lt;script src=&quot;http://solo.dc3.com/tw/demo.js&quot; show&gt;\n	return &quot;loading demo.js...&quot;\n&lt;/script&gt;\n&gt;&lt;script label=&quot;click to execute demo() function&quot; show&gt;\n	demo()\n&lt;/script&gt;\n\n!Installation\nimport (or copy/paste) the following tiddlers into your document:\n''InlineJavascriptPlugin'' (tagged with &lt;&lt;tag systemConfig&gt;&gt;)\n\n!Revision History\n&lt;&lt;&lt;\n''2011.07.05 [1.5.2]'' Fix remote script demo. Also document 16-Sep-2006 fix for IE (see comments in code). Reformat documentation to make it clearer.\n''2006.06.01 [1.5.1]'' when calling wikify() on script return value, pass hightlightRegExp and tiddler params so macros that rely on these values can render properly\n''2006.04.19 [1.5.0]'' added 'show' parameter to force display of javascript source code in tiddler output\n''2006.01.05 [1.4.0]'' added support 'onclick' scripts.  When label=&quot;...&quot; param is present, a button/link is created using the indicated label text, and the script is only executed when the button/link is clicked.  'place' value is set to match the clicked button/link element.\n''2005.12.13 [1.3.1]'' when catching eval error in IE, e.description contains the error text, instead of e.toString().  Fixed error reporting so IE shows the correct response text.  Based on a suggestion by UdoBorkowski\n''2005.11.09 [1.3.0]'' for 'inline' scripts (i.e., not scripts loaded with src=&quot;...&quot;), automatically replace calls to 'document.write()' with 'place.innerHTML+=' so script output is directed into tiddler content.  Based on a suggestion by BradleyMeck\n''2005.11.08 [1.2.0]'' handle loading of javascript from an external URL via src=&quot;...&quot; syntax\n''2005.11.08 [1.1.0]'' pass 'place' param into scripts to provide direct DOM access \n''2005.11.08 [1.0.0]'' initial release\n&lt;&lt;&lt;\n!Credits\nThis feature was developed by EricShulman from [[ELS Design Studios|http:/www.elsdesign.com]] and is now maintained by Bob Denny of DC-3 Dreams, SP for the ACP Observatory Control Software web interface.\n\n!Code\n***/\n//{{{\nversion.extensions.inlineJavascript= {major: 1, minor: 5, revision: 2, date: new Date(2011,7,5)};\n\nconfig.formatters.push( {\n	name: &quot;inlineJavascript&quot;,\n	match: &quot;\s\s&lt;script&quot;,\n	lookahead: &quot;\s\s&lt;script(?: src=\s\s\s&quot;((?:.|\s\sn)*?)\s\s\s&quot;)?(?: label=\s\s\s&quot;((?:.|\s\sn)*?)\s\s\s&quot;)?( show)?\s\s&gt;((?:.|\s\sn)*?)\s\s&lt;/script\s\s&gt;&quot;,\n\n	handler: function(w) {\n		var lookaheadRegExp = new RegExp(this.lookahead,&quot;mg&quot;);\n		lookaheadRegExp.lastIndex = w.matchStart;\n		var lookaheadMatch = lookaheadRegExp.exec(w.source)\n		if(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.matchStart) {\n			if (lookaheadMatch[1]) { // load a script library\n				// make script tag, set src, add to body to execute, then remove for cleanup\n				//var script = document.createElement(&quot;script&quot;); script.src = lookaheadMatch[1];\n				//document.body.appendChild(script); document.body.removeChild(script);\n				// [rbd] Above n/g on IE. Cannot immediately remove. Give script\n				// an ID, remove if there, then make new one and add it. This assures\n				// it will get executed when the tiddler is rendered.\n				var script = document.getElementById(lookaheadMatch[1]); //**KLUDGE**\n				if(script) script = document.body.removeChild(script);\n				script = document.createElement(&quot;script&quot;); \n				script.src = lookaheadMatch[1];\n				script.id = lookaheadMatch[1];\n				document.body.appendChild(script);\n			}\n			if (lookaheadMatch[4]) { // there is script code\n				if (lookaheadMatch[3]) // show inline script code in tiddler output\n					wikify(&quot;{{{\sn&quot;+lookaheadMatch[0]+&quot;\sn}}}\sn&quot;,w.output);\n				if (lookaheadMatch[2]) { // create a link to an 'onclick' script\n					// add a link, define click handler, save code in link (pass 'place'), set link attributes\n					var link=createTiddlyElement(w.output,&quot;a&quot;,null,&quot;tiddlyLinkExisting&quot;,lookaheadMatch[2]);\n					link.onclick=function(){try{return(eval(this.code))}catch(e){alert(e.description?e.description:e.toString())}}\n					link.code=&quot;function _out(place){&quot;+lookaheadMatch[4]+&quot;};_out(this);&quot;\n					link.setAttribute(&quot;href&quot;,&quot;javascript:;&quot;); link.setAttribute(&quot;title&quot;,&quot;&quot;); link.style.cursor=&quot;pointer&quot;;\n				}\n				else { // run inline script code\n					var code=&quot;function _out(place){&quot;+lookaheadMatch[4]+&quot;};_out(w.output);&quot;\n					code=code.replace(/document.write\s(/gi,'place.innerHTML+=(');\n					try { var out = eval(code); } catch(e) { out = e.description?e.description:e.toString(); }\n					if (out &amp;&amp; out.length) wikify(out,w.output,w.highlightRegExp,w.tiddler);\n				}\n			}\n			w.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;\n		}\n	}\n} )\n//}}}\n</div>
<div tiddler="Instruments &amp; Equipment" modifier="Bob Denny" modified="200611070235" created="200611070105" tags="Control UserContent">&lt;&lt;RemoteContent '/ac/aequip.asp'&gt;&gt;</div>
<div tiddler="Item Level Structure" modifier="Bob Denny" modified="200611191808" created="200611060259" tags="Authoring deleteUser">!&quot;Document&quot; Structure\n|!Format|!Markup|!Example|\n|Headings|{{{!Heading 1}}}&lt;&lt;br&gt;&gt;&lt;&lt;br&gt;&gt;{{{!!Heading 2}}}|&lt;html&gt;&lt;h1&gt;Heading 1&lt;/h1&gt;&lt;h2&gt;Heading 2&lt;/h2&gt;&lt;/html&gt;|\n|Any HTML|{{{&lt;html&gt;&lt;p&gt;any valid xhtml&lt;/p&gt;&lt;/html&gt;}}}|&lt;html&gt;&lt;p&gt;any valid xhtml&lt;/p&gt;&lt;/html&gt;|\n|Block quotes|{{{&gt;Blockquote}}}&lt;&lt;br&gt;&gt;Can be nested using multiple '&gt;'&lt;&lt;br&gt;&gt;{{{&gt;&gt;Nested-Blockquote}}}|&lt;html&gt;&lt;blockquote&gt;Blockquote&lt;blockquote&gt;Nested-Blockquote&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;/html&gt;|\n|Blockquotes - Multiline|&lt;html&gt;&lt;code&gt;&lt;&lt;&lt;&lt;/code&gt;&lt;br/&gt;&lt;code&gt;multi-line&lt;/code&gt;&lt;code&gt;&lt;br/&gt;blockquote&lt;/code&gt;&lt;br/&gt;&lt;code&gt;&lt;&lt;&lt;&lt;/code&gt;&lt;/html&gt;&lt;&lt;br&gt;&gt;Note this uses the other angle bracket '&lt;'|&lt;html&gt;&lt;blockquote&gt;multi-line&lt;br/&gt;blockquote&lt;/blockquote&gt;&lt;/html&gt;|\n|Horizontal Rule|{{{----}}} (4 dashes on a line of their own)|&lt;html&gt;&lt;hr&gt;&lt;/html&gt;|\n|Images|{{{[img[favicon.ico]]}}}&lt;&lt;br&gt;&gt;Note that image files are always external to the TW file. To align the image to the right, add a '&gt;' after the initial '['&lt;&lt;br&gt;&gt;{{{[&gt;img[favicon.ico]]}}}|[img[favicon.ico]]&lt;&lt;br&gt;&gt;[&gt;img[favicon.ico]]|\n|Inline Comments|{{{/% .... %/}}}&lt;&lt;br&gt;&gt;Text between the markers will not be shown in view mode|Not shown: /% Not Shown %/|\n|Links|Any WikiWord (creates a link to a tiddler whether it exists or not).&lt;&lt;br&gt;&gt;Note that a WikiWord has to start with a capital letter and have a further mix of upper and lower case.|PageTemplate|\n|~|{{{[[Manual Link]]}}} (Especially for tiddlers with spaces in their titles)|[[Table of Contents]]|\n|~|{{{[[Pretty Link|Some Crafty Link]]}}}&lt;&lt;br&gt;&gt;Note: Makes an external link if the target does not yet exist (e.g. {{{[[Not Yet A Tiddler|NotYetATiddler]]}}})|[[Pretty Link|MainMenu]]&lt;&lt;br&gt;&gt;[[Not Yet A Tiddler|NotYetATiddler]]|\n|~|Automatic external link {{{http://acp.dc3.com/}}}|http://acp.dc3.com/|\n|~|Pretty external link&lt;&lt;br&gt;&gt;{{{[[ACP Home Page|http://acp.dc3.com/]]}}}|[[ACP Home Page|http://acp.dc3.com/]]|\n|List - Bulleted|{{{*Bullet List}}}|&lt;html&gt;&lt;ul&gt;&lt;li&gt;Bullet List&lt;/li&gt;&lt;/ul&gt;&lt;/html&gt;|\n|List - Numbered|{{{#Numbered List}}}|&lt;html&gt;&lt;ol&gt;&lt;li&gt;Numbered List&lt;/li&gt;&lt;/ol&gt;&lt;/html&gt;|\n|List - Nested|Both list types can be nested by using multiple * or #&lt;&lt;br&gt;&gt;Note that * and # must be the first character of the line as with all block format markup.&lt;&lt;br&gt;&gt;{{{*1st level}}}&lt;&lt;br&gt;&gt;{{{**2nd level}}}|&lt;html&gt;&lt;ul&gt;&lt;li&gt;1st level&lt;/li&gt;&lt;ul&gt;&lt;li&gt;2nd level&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/html&gt;|\n!Notes\nYou can use the custom CSS formatter in combination with headers and lists to allow new lines within the entry. e.g.:\n{{{\n#{{block{\nBullet 1\nSome text in the same bullet\n(Note that &quot;block&quot; can be anything, it is the formatters CSS class name)\n }}}\n# Bullet 2 \n}}}\n#{{block{\nBullet 1\nSome text in the same bullet\n}}}\n# Bullet 2</div>
<div tiddler="LightBoxCSS" modifier="Bob Denny" modified="201109111726" created="200612030307" tags="systemContent">/*{{{*/\n	\n#lightBoxOverlay {\n	position:absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	z-index: 90;\n	background-color: #000;\n	-moz-opacity: 0.6;\n	opacity: .60;\n	filter: alpha(opacity=60);\n}\n#lightBoxOverlay[id] { /* IE6 and below Can't See This */\n	position: fixed;\n}\ndiv.lightBox {\n	background: #2d2d2d;\n	color: #fff;\n	border: 2px solid #eee;\n}\nimg.lightBoxClose {\n	position: absolute;\n	top: -5px;\n	right: -5px;\n	margin: 0px;\n	cursor: pointer;\n}\ndiv.lightBoxAlert {\n	/* Dynamically Sized */\n	background: #2d2d2d;\n	color: #fff;\n	padding: 10px;\n	border: 2px solid #eee;\n}\ndiv.lightBoxAlertIcon {\n	position: absolute;\n	top: 8px;\n	left: 8px;\n	width: 48px;\n	height: 48px;\n}\ndiv.lightBoxAlertMessage {\n	margin: 14px 10px 10px 56px;\n}\n\n/*}}}*/\n</div>
<div tiddler="LightBoxTest" modifier="Bob Denny" modified="201109092107" created="200612030317" tags="">&lt;html&gt;\n&lt;div class=&quot;lightBox&quot; id=&quot;myLB&quot; style=&quot;display:none&quot;&gt;\n &lt;img class=&quot;lightBoxClose&quot; src=&quot;im/close.gif&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; alt=&quot;Close&quot; title=&quot;Close this window&quot; /&gt;\n&lt;div style=&quot;padding: 10px&quot;&gt;This is myLB&lt;/div&gt;\n&lt;/div&gt;\n\n\n&lt;div class=&quot;lightBox&quot; id=&quot;anotherLB&quot; style=&quot;display:none&quot;&gt;\n &lt;img class=&quot;lightBoxClose&quot; src=&quot;im/close.gif&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; alt=&quot;Close&quot; title=&quot;Close this window&quot; /&gt;\n&lt;div style=&quot;padding:10px; width:300px; height: 80px;&quot;&gt;This is anotherLB&lt;br&gt;\nIt has multiple lines&lt;br&gt;\nSee?&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=&quot;lightBoxAlert&quot; id=&quot;myBigAlert&quot; style=&quot;display:none&quot;&gt;\n &lt;img class=&quot;lightBoxClose&quot; src=&quot;im/close.gif&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; alt=&quot;Close&quot; title=&quot;Close this window&quot; /&gt;\n\n &lt;div class=&quot;lightBoxAlertIcon&quot;&gt;&lt;img src=&quot;im/info.png&quot; alt=&quot;info&quot;&gt;&lt;/div&gt;\n &lt;div class=&quot;lightBoxAlertMessage&quot;&gt;This is a test message for the LightBox alert. This is a test message for the LightBox alert. This is a test message for the LightBox alert. This is a test message for the LightBox alert. This is a test message for the LightBox alert. This is a test message for the LightBox alert. This is a test message for the LightBox alert. This is a test message for the LightBox alert. This is a test message for the LightBox alert. This is a test message for the LightBox alert.&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=&quot;lightBoxAlert&quot; id=&quot;mySmallAlert&quot; style=&quot;display:none&quot;&gt;\n &lt;img class=&quot;lightBoxClose&quot; src=&quot;im/close.gif&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; alt=&quot;Close&quot; title=&quot;Close this window&quot; /&gt;\n\n &lt;div class=&quot;lightBoxAlertIcon&quot;&gt;&lt;img src=&quot;im/info.png&quot; alt=&quot;info&quot;&gt;&lt;/div&gt;\n &lt;div class=&quot;lightBoxAlertMessage&quot;&gt;This is a test message.&lt;/div&gt;\n&lt;/div&gt;\n\n\n&lt;a href=&quot;javascript:;&quot; onclick=&quot;DC3.LightBox.showBox('myLB')&quot;&gt;Show myLB&lt;/a&gt;&lt;br&gt;\n&lt;a href=&quot;javascript:;&quot; onclick=&quot;DC3.LightBox.showBox('anotherLB')&quot;&gt;Show anotherLB&lt;/a&gt;&lt;br&gt;\n&lt;a href=&quot;javascript:;&quot; onclick=&quot;DC3.LightBox.showBox('myBigAlert')&quot;&gt;Show myBigAlert&lt;/a&gt;&lt;br&gt;\n&lt;a href=&quot;javascript:;&quot; onclick=&quot;DC3.LightBox.showBox('mySmallAlert')&quot;&gt;Show mySmallAlert&lt;/a&gt;&lt;br&gt;\n&lt;a href=&quot;javascript:;&quot; onclick=&quot;DC3.LightBox.showContent('&lt;div style=\s'padding:10px;\s'&gt;This uses the showContent() method!&lt;/div&gt;')&quot;&gt;Show using showContent()&lt;/a&gt;&lt;br&gt;\n&lt;a href=&quot;javascript:;&quot; onclick=&quot;DC3.LightBox.showAlert('ok', 'This uses the showAlert() method!')&quot;&gt;Show using showAlert()&lt;/a&gt;&lt;/html&gt;</div>
<div tiddler="Location" modifier="Brewington" modified="201505042319" created="200611071350" tags="Custom Help UserContent">The BrewSky Observatory is located outside of Casa Grande, Az.\n\nA welcome change from the prior location in upstate New York!</div>
<div tiddler="Log Off" modifier="Bob Denny" modified="200610250249" created="200609252340" tags="UserContent">Open [[System Status]] and use the &quot;Owner&quot; label/link to log off if you currently own the observatory.</div>
<div tiddler="Login Information" modifier="Bob Denny" modified="200611061738" created="200611061733" tags="Authoring Help deleteUser">Your Share Your Sky! login username and password. You must have administrator privileges to save changes.</div>
<div tiddler="LostScopeInfoSlider" modifier="Bob Denny" modified="201207070152" created="201207070134" tags="Help UserContent hideUser">Use this to recover from a &quot;lost&quot; telescope which is pointing at the wrong place in the sky. This utility takes an image of the sky currently seen by the telescope, then forces an //all-sky// plate solution and pointing update. The all-sky plate solution is done by the [[Astrometry.net|http://astrometry.net]] web service. After it completes, your telescope's coordinates should be correct for its current location. Of course, if it is having pointing or other problems, it can be inaccurate after a slew. If you have continuing problems, contact the observatory staff.</div>
<div tiddler="Macros" modifier="Bob Denny" modified="200611302118" created="200611060404" tags="Authoring deleteUser">Macros are shortcuts that do all sorts of things within an item. They allow you to write more exotic items than those containing [[Basic Formatting]].\n|!Macro|!Description|!Syntax|\n|br|Force a line break|{{{&lt;&lt;br&gt;&gt;}}}|\n|closeAll|Displays a button to close all displayed items&lt;&lt;br&gt;&gt;&lt;&lt;closeAll&gt;&gt;|{{{&lt;&lt;closeAll&gt;&gt;}}}|\n|gradient|&lt;&lt;gradient horiz #ff0000 #00ff00 #000000&gt;&gt;Produces a horizontal or vertical background gradient fill&gt;&gt;&lt;&lt;br&gt;&gt;There can be 2 or more colors in the format: #rrggbb (hex), or RGB(r,g,b) (CSS)&lt;&lt;br&gt;&gt;Other CSS formatting can also be added, e.g. {{{&lt;&lt;gradient vert #000000 #660000 #aa2222&gt;&gt;color:#ffffff;font-size:12pt;Darkness&gt;&gt;}}}|{{{&lt;&lt;gradient [horiz|vert] #ff0000 #00ff00 #000000&gt;&gt;Some text here&gt;&gt;}}}|\n|slider|Display a Slider (a collapsible display of another item) Note: Put quotes around the label if needing spaces&lt;&lt;br&gt;&gt;where: ''ID''=cookie name to be used to save the state of the slider, ''Item''=name of the item to include in the slider, ''Label''=label text of the slider button, ''tooltip''=text of the buttons tooltip|{{{&lt;&lt;slider ID Item [Label] [toolTip]&gt;&gt;}}}|\n|sparkline|Produces a sparkline graphic&lt;&lt;br&gt;&gt;e.g. &lt;&lt;sparkline 163 218 231 236 232 266 176 249 289 1041 1835 2285 3098 2101 1755 3283 3353 3335 2898 2224 1404 1354 1825 1839 2142 1942 1784 1145 979 1328 1611&gt;&gt;|{{{&lt;&lt;sparkline num1 num2 ... numN&gt;&gt;}}}|\n|tabs|Display Tabbed content (contents of tab provided by another item)|{{{&lt;&lt;tabs indentifier tabLabel tabName Item&gt;&gt;}}}|\n|tiddler|Display contents of another item inline|{{{&lt;&lt;tiddler Item&gt;&gt;}}}|\n|today|Display Today's Date, e.g.&lt;&lt;br&gt;&gt;&lt;&lt;today&gt;&gt;&lt;&lt;br&gt;&gt;&lt;&lt;today 0hh:0mm:0ss&gt;&gt;|&lt;&lt;br&gt;&gt;{{{&lt;&lt;today&gt;&gt;}}}&lt;&lt;br&gt;&gt;{{{&lt;&lt;today 0hh:0mm:0ss&gt;&gt;}}}|\n!Notes\nThe today macro take a DateFormatString as an optional argument. This string can be a combination of ordinary text, with some special characters that get substituted by parts of the date:\n* DDD - day of week in full (eg, &quot;Monday&quot;)\n* DD - day of month, 0DD - adds a leading zero\n* MMM - month in full (eg, &quot;July&quot;)\n* MM - month number, 0MM - adds leading zero\n* YYYY - full year, YY - two digit year\n* hh - hours, 0hh - adds a leading zero\n* mm - minutes, 0mm - adds a leading zero\n* ss - seconds, 0ss - adds a leading zero\nIf you need to supply a parameter that should be evaluated (e.g. a JavaScript variable), enclose the parameter in &lt;html&gt;&lt;code&gt;{{&lt;/code&gt;&lt;/html&gt; and &lt;html&gt;&lt;code&gt;}}&lt;/code&gt;&lt;/html&gt; rather than quotes. Note however, that the scope used in the evaluation is {{{global}}} rather than {{{local}}}. In other words, the evaluation is done ''before'' the parameter is passed to the macro/plugin so it cannot access any of the variables or functions defined within the macro/plugin.\n!Plugin Macros\nThe Share Your Sky! web content makes extensive use of special macros that are implemented in //plugins//. The ones that are useful to authors are lisited below, along with links to the plugins which implement them. The plugin items contain documentation on the use of the macros that they implement.\n|!Macro|!Description|!Plugin Item|\n|script|Allows embedding ~JavaScript within item text|InlineJavascriptPlugin|\n|persistentForm|Save/restore contents of HTML form(s) in an item|PersistentFormPlugin|\n|postForm|Send data in HTML form(s) in an item to the server|PostFormPlugin|\n|refreshIFrame|Manage an embedded HTML {{{&lt;iframe&gt;&gt;}}} in an item|RefreshIFramePlugin|\n|refreshTiddler|Refresh an entire tiddler, optional periodic refresh|RefreshTiddlerPlugin|\n|remoteContent|Fill an item with content from the server|RemoteContentPlugin|\n</div><div tiddler="MainMenu" modifier="Brewington" modified="201509231709" created="200609122139" tags="UserContent systemContent">&lt;html&gt;\n&lt;div class=&quot;navbar&quot;&gt;\n	&lt;!--&lt;% if(false) { %&gt;--&gt;\n	&lt;div class=&quot;mainDiv&quot;&gt;\n		&lt;div class=&quot;topItem&quot; &gt;Authoring&lt;/div&gt;\n		&lt;div class=&quot;dropMenu&quot; &gt;\n			&lt;div class=&quot;subMenu&quot; style=&quot;display:none;&quot;&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Authoring welcome and contents&quot; onClick=&quot;story.displayTiddler(this,'Authoring System',null,config.options.chkAnimate,false)&quot;&gt;Welcome&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Critical settings before authoring&quot; onClick=&quot;story.displayTiddler(this,'Authoring Setup',null,config.options.chkAnimate,false)&quot;&gt;Setup&lt;/a&gt; (required)&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Overview of the authoring process&quot; onClick=&quot;story.displayTiddler(this,'Authoring Roadmap',null,config.options.chkAnimate,false)&quot;&gt;Roadmap&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Markup for text styles&quot; onClick=&quot;story.displayTiddler(this,'Basic Formatting',null,config.options.chkAnimate,false)&quot;&gt;Basic Formatting&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Practice formatting here&quot; onClick=&quot;story.displayTiddler(this,'Sandbox',null,config.options.chkAnimate,false)&quot;&gt;Sandbox&lt;/a&gt; (practice area)&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Headings, images, lists, links, etc.&quot; onClick=&quot;story.displayTiddler(this,'Item Level Structure',null,config.options.chkAnimate,false)&quot;&gt;Item Level Structure&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;The many ways tables can be made&quot; onClick=&quot;story.displayTiddler(this,'Formatting Tables',null,config.options.chkAnimate,false)&quot;&gt;Formatting Tables&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Tags classify items by type&quot; onClick=&quot;story.displayTiddler(this,'Tag Usage',null,config.options.chkAnimate,false)&quot;&gt;Tag Usage&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Macros greatly expand the possibilities&quot; onClick=&quot;story.displayTiddler(this,'Macros',null,config.options.chkAnimate,false)&quot;&gt;Macros&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Using jQuery&quot; onClick=&quot;story.displayTiddler(this,'Using jQuery',null,config.options.chkAnimate,false)&quot;&gt;Using jQuery&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Save and restore custom items&quot; onClick=&quot;story.displayTiddler(this,'Importing and Exporting Items',null,config.options.chkAnimate,false)&quot;&gt;Importing &amp; Exporting&lt;/a&gt;&lt;/div&gt;\n			&lt;/div&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n	&lt;div style=&quot;text-align:left;margin:0&quot;&gt;Users see these:&lt;/div&gt;\n	&lt;!--&lt;% } %&gt;--&gt;\n	&lt;div class=&quot;mainDiv&quot;&gt;\n		&lt;div class=&quot;topItem&quot;&gt;Live Observing&lt;/div&gt;\n		&lt;div class=&quot;dropMenu&quot; &gt;\n			&lt;div class=&quot;subMenu&quot; style=&quot;display:none;&quot;&gt;\n				&lt;div class=&quot;subItem&quot;&gt;Single Object Imaging&lt;/div&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Acquire a single image&quot; onClick=&quot;story.displayTiddler(this,'Acquire a Single Image',null,config.options.chkAnimate,false)&quot;&gt;Single Image&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Acquire multiple images in multiple colors&quot; onClick=&quot;story.displayTiddler(this,'Single Object Color Series',null,config.options.chkAnimate,false)&quot;&gt;Color Series&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Image multiple targets using an observing plan&quot; onClick=&quot;story.displayTiddler(this,'Multiple Objects (Plan)',null,config.options.chkAnimate,false)&quot;&gt;Multiple Objects (Plan)&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Acquire dark and bias frames&quot; onClick=&quot;story.displayTiddler(this,'Calibration Frames',null,config.options.chkAnimate,false)&quot;&gt;Cal Frames (Dark/Bias)&lt;/a&gt;&lt;/div&gt;\n                &lt;!--&lt;% if(screenFlats) { %&gt;--&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Acquire standard automatic screen flats now&quot; onClick=&quot;story.displayTiddler(this,'Standard Flat Fields',null,config.options.chkAnimate,false)&quot;&gt;Standard Screen Flats&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Setup and do a one-time screen flat run now&quot; onClick=&quot;story.displayTiddler(this,'One-Time Flat Field Run',null,config.options.chkAnimate,false)&quot;&gt;One-Time Screen Flats&lt;/a&gt;&lt;/div&gt;\n                &lt;!--&lt;% } else { %&gt;--&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Acquire automatic sky flats&quot; onClick=&quot;story.displayTiddler(this,'Standard Flat Fields',null,config.options.chkAnimate,false)&quot;&gt;Standard Sky Flats&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Setup and do a one-time sky flat run&quot; onClick=&quot;story.displayTiddler(this,'One-Time Flat Field Run',null,config.options.chkAnimate,false)&quot;&gt;One-Time Sky Flats&lt;/a&gt;&lt;/div&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n				&lt;div class=&quot;subItem&quot;&gt;Special Tasks&lt;/div&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;First subsub status&quot; onClick=&quot;story.displayTiddler(this,'System Status',null,config.options.chkAnimate,false)&quot;&gt;First subsub status&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Status and control center for the observatory&quot; onClick=&quot;story.displayTiddler(this,'System Status',null,config.options.chkAnimate,false)&quot;&gt;System Status Disp.&lt;/a&gt;&lt;/div&gt;\n                &lt;!--&lt;% if(screenFlats) { %&gt;--&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Set up standard automatic screen flats&quot; onClick=&quot;story.displayTiddler(this,'Setup Standard Flat Fields',null,config.options.chkAnimate,false)&quot;&gt;Setup Screen Flats&lt;/a&gt;&lt;/div&gt;\n                &lt;!--&lt;% } else { %&gt;--&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Set up standard automatic sky flats&quot; onClick=&quot;story.displayTiddler(this,'Setup Standard Flat Fields',null,config.options.chkAnimate,false)&quot;&gt;Setup Sky Flats&lt;/a&gt;&lt;/div&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Release the observatory&quot; onClick=&quot;DC3.Lib.logOff();&quot;&gt;Release the Obs.&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Find objects in our 70,000+ object deep sky catalog&quot; onClick=&quot;story.displayTiddler(this,'Deep Sky Catalog Search',null,config.options.chkAnimate,false)&quot;&gt;Deep Sky Catalog&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Pre-compile and check an observing plan&quot; onClick=&quot;story.displayTiddler(this,'Check Observing Plan',null,config.options.chkAnimate,false)&quot;&gt;Obs. Plan Checker&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Lotsa objects &quot; onClick=&quot;story.displayTiddler(this,'Deep Sky Catalog Search',null,config.options.chkAnimate,false)&quot;&gt;Lotsa Objects Last subsub&lt;/a&gt;&lt;/div&gt;\n			&lt;/div&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n	&lt;div class=&quot;mainDiv&quot;&gt;\n		&lt;div class=&quot;topItem&quot;&gt;New MainDiv&lt;/div&gt;\n		&lt;div class=&quot;dropMenu&quot; &gt;\n			&lt;div class=&quot;subMenu&quot; style=&quot;display:none;&quot;&gt;\n				&lt;div class=&quot;subItem&quot;&gt;First Level&lt;/div&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Get single image&quot; onClick=&quot;story.displayTiddler(this,'Acquire a Single Image',null,config.options.chkAnimate,false)&quot;&gt;MyGet Single Image&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Get multiple images&quot; onClick=&quot;story.displayTiddler(this,'Single Object Color Series',null,config.options.chkAnimate,false)&quot;&gt;MyGet Color Series&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Observing plan&quot; onClick=&quot;story.displayTiddler(this,'Multiple Objects (Plan)',null,config.options.chkAnimate,false)&quot;&gt;MyGet Multiple Objects (Plan)&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;Second Level&lt;/div&gt;\n				&lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;More Status&quot; onClick=&quot;story.displayTiddler(this,'System Status',null,config.options.chkAnimate,false)&quot;&gt;MySystem Status Disp.&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=&quot;subSubItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Find some stuff&quot; onClick=&quot;story.displayTiddler(this,'Deep Sky Catalog Search',null,config.options.chkAnimate,false)&quot;&gt;MyDeep Sky Catalog&lt;/a&gt;&lt;/div&gt;\n			&lt;/div&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n	&lt;!--&lt;% if(schInst) { %&gt;--&gt;\n	&lt;div class=&quot;mainDiv&quot;&gt;\n		&lt;div class=&quot;topItem&quot; &gt;Scheduled&lt;/div&gt;\n		&lt;div class=&quot;dropMenu&quot; &gt;\n			&lt;div class=&quot;subMenu&quot; style=&quot;display:none;&quot;&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;/sc/index.asp&quot; target=&quot;_blank&quot; title=&quot;Show the Scheduler\s's Database of requests&quot;&gt;Schedule Browser&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Request color data for astro-imaging&quot; onClick=&quot;story.displayTiddler(this,'Schedule Astro-Imaging',null,config.options.chkAnimate,false)&quot;&gt;Astro-Imaging&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Request a single series of images&quot; onClick=&quot;story.displayTiddler(this,'Schedule Image Series',null,config.options.chkAnimate,false)&quot;&gt;Single Series&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Enter requests from RTML&quot; onClick=&quot;story.displayTiddler(this,'Submit RTML Request',null,config.options.chkAnimate,false)&quot;&gt;Upload RTML&lt;/a&gt;&lt;/div&gt;\n			&lt;/div&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n	&lt;!--&lt;% } %&gt;--&gt;\n	&lt;!--&lt;% if(User.Username != &quot;localweb&quot;) { %&gt;--&gt;\n	&lt;div class=&quot;mainDiv&quot;&gt;\n		&lt;div class=&quot;topItem&quot; &gt;My Documents&lt;/div&gt;\n		&lt;div class=&quot;dropMenu&quot; &gt;\n			&lt;div class=&quot;subMenu&quot; style=&quot;display:none;&quot;&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Your acquired images&quot; onClick=&quot;story.displayTiddler(this,'Acquired Images',null,config.options.chkAnimate,false)&quot;&gt;Acquired Images&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Your observing plans&quot; onClick=&quot;story.displayTiddler(this,'Observing Plans',null,config.options.chkAnimate,false)&quot;&gt;Observing Plans&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;My observing plans&quot; onClick=&quot;story.displayTiddler(this,'Observing Plans',null,config.options.chkAnimate,false)&quot;&gt;MyObserving Plans&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Your run logs&quot; onClick=&quot;story.displayTiddler(this,'Run Logs',null,config.options.chkAnimate,false)&quot;&gt;Run Logs&lt;/a&gt;&lt;/div&gt;\n			&lt;/div&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n	&lt;!--&lt;% } %&gt;--&gt;\n	&lt;div class=&quot;mainDiv&quot;&gt;\n		&lt;div class=&quot;topItem&quot; &gt;Shared Files&lt;/div&gt;\n		&lt;div class=&quot;dropMenu&quot; &gt;\n			&lt;div class=&quot;subMenu&quot; style=&quot;display:none;&quot;&gt;\n				&lt;!--&lt;% if(User.CanUpload) { %&gt;--&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Upload and share files with other observers&quot; onClick=&quot;story.displayTiddler(this,'Shared File Area',null,config.options.chkAnimate,false)&quot;&gt;Shared File Area&lt;/a&gt;&lt;/div&gt;\n				&lt;!--&lt;% } else { %&gt;--&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Files shared by other observers&quot; onClick=&quot;story.displayTiddler(this,'Shared File Area',null,config.options.chkAnimate,false)&quot;&gt;Shared File Area&lt;/a&gt;&lt;/div&gt;\n				&lt;!--&lt;% } %&gt;--&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Downloads provided by the staff&quot; onClick=&quot;story.displayTiddler(this,'Downloads',null,config.options.chkAnimate,false)&quot;&gt;Downloads&lt;/a&gt;&lt;/div&gt;\n			&lt;/div&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n	&lt;div class=&quot;mainDiv&quot;&gt;\n		&lt;div class=&quot;topItem&quot; &gt;Observatory Info&lt;/div&gt;\n		&lt;div class=&quot;dropMenu&quot; &gt;\n			&lt;div class=&quot;subMenu&quot; style=&quot;display:none;&quot;&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Status and control center&quot; onClick=&quot;story.displayTiddler(this,'System Status',null,config.options.chkAnimate,false)&quot;&gt;System Status Disp.&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Detailed weather forecast information&quot; onClick=&quot;story.displayTiddler(this,'Weather Forecast',null,config.options.chkAnimate,false)&quot;&gt;Weather Forecast&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Detailed current weather data&quot; onClick=&quot;story.displayTiddler(this,'BrewSky Current Weather',null,config.options.chkAnimate,false)&quot;&gt;Current Weather&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Detailed specs on our instruments and equipment&quot; onClick=&quot;story.displayTiddler(this,'Instruments & Equipment',null,config.options.chkAnimate,false)&quot;&gt;Instruments &amp; Equipment&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;BrewSky Power&quot; onClick=&quot;story.displayTiddler(this,'Computer Power',null,config.options.chkAnimate,false)&quot;&gt;Power System&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Geographic location and elevation&quot; onClick=&quot;story.displayTiddler(this,'Location',null,config.options.chkAnimate,false)&quot;&gt;Location&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Upcoming dawn and dusk times of various types&quot; onClick=&quot;story.displayTiddler(this,'Dawn-Dusk Times',null,config.options.chkAnimate,false)&quot;&gt;Dawn-Dusk Times&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;How to contact the observatory staff&quot; onClick=&quot;story.displayTiddler(this,'Contact Info',null,config.options.chkAnimate,false)&quot;&gt;Contact Info&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Feed your newsreader with observatory events&quot; onClick=&quot;story.displayTiddler(this,'RSS Feed',null,config.options.chkAnimate,false)&quot;&gt;&lt;img src=&quot;/im/feed-icon-14x14.png&quot; border=&quot;0&quot; width=&quot;14&quot; height=&quot;14&quot; align=&quot;absmiddle&quot;&gt;&nbsp;RSS Events Feed&lt;/a&gt;&lt;/div&gt;\n			&lt;/div&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n	&lt;div class=&quot;mainDiv&quot;&gt;\n		&lt;div class=&quot;topItem&quot; &gt;Help Resources&lt;/div&gt;\n		&lt;div class=&quot;dropMenu&quot; &gt;\n			&lt;div class=&quot;subMenu&quot; style=&quot;display:none;&quot;&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Welcome',null,config.options.chkAnimate,false)&quot;&gt;First Add&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Welcome',null,config.options.chkAnimate,false)&quot;&gt;Second Add&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Welcome',null,config.options.chkAnimate,false)&quot;&gt;Welcome&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Using This Web Site',null,config.options.chkAnimate,false)&quot;&gt;Using This Web Site&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Getting Started',null,config.options.chkAnimate,false)&quot;&gt;Getting Started&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Common Questions',null,config.options.chkAnimate,false)&quot;&gt;Common Questions&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Making Observing Plans',null,config.options.chkAnimate,false)&quot;&gt;Making Obs. Plans&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Using FTP',null,config.options.chkAnimate,false)&quot;&gt;Using FTP&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Welcome',null,config.options.chkAnimate,false)&quot;&gt;Last Add&lt;/a&gt;&lt;/div&gt;\n			&lt;/div&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n	&lt;div class=&quot;mainDiv&quot;&gt;\n		&lt;div class=&quot;topItem&quot; &gt;Toolbox&lt;/div&gt;\n		&lt;div class=&quot;dropMenu&quot; &gt;\n			&lt;div class=&quot;subMenu&quot; style=&quot;display:none;&quot;&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Various observatory tasks and tests&quot; onClick=&quot;story.displayTiddler(this,'Utility Tasks',null,config.options.chkAnimate,false)&quot;&gt;Utility Tasks&lt;/a&gt;&lt;/div&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;Pre-compile and check an observing plan&quot; onClick=&quot;story.displayTiddler(this,'Check Observing Plan',null,config.options.chkAnimate,false)&quot;&gt;Obs. Plan Checker&lt;/a&gt;&lt;/div&gt;\n				&lt;!--&lt;% if(User.IsAdministrator) { %&gt;--&gt;\n				&lt;div class=&quot;subItem&quot;&gt;&lt;a href=&quot;author.html&quot; title=&quot;Make changes to web content&quot;&gt;Authoring System&lt;/a&gt;&lt;/div&gt;\n				&lt;!--&lt;% } %&gt;--&gt;\n			&lt;/div&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n&lt;/div&gt;\n&lt;/html&gt;\n&lt;&lt;XPMenu&gt;&gt;\n</div><div tiddler="Making Flat Plans" modifier="Bob Denny" modified="200805092349" created="200611082046" tags="Help UserContent deleteUser">@@UNUSED FOR NOW (tagged deleteUser)@@\nRather than use the [[Automatic Sky Flats]] form, you can make your own flat plan and upload it to your [[Observing Plans]] folder. The simplest approach is to create a single flat plan called defaultflat.txt. If you want separate flat plans for dawn and dusk, you can create two flat plans defaultdawnflats.txt and defaultduskflats.txt. The following is a simplified explanation; to access the full (advanced) capabilities of ACP's flat planning, see the help for ACP itself.\n!!Filter Order\nThe order of flat sets must be as they would be taken at dusk - with the filter/binning resulting in the lowest sensitivity used first (when the sky is brightest).\n&lt;&lt;&lt;\nFilter sensitivity for sky-flats is not the same as for night imaging. Often Red will be the least sensitive. For sky-flats, you are imaging a blue sky! Also, higher binning is much more sensitive so list your lowest binning levels first, regardless of the filter.\n&lt;&lt;&lt;\n!!Example (no rotator)\n{{{\n;\n; Sample Flat Plan (no rotator)\n;\n5, Luminance, 1\n5, Red, 2\n5, Green, 2\n5, Blue, 2\n}}}\nThis takes 5 flats in Luminance at binning 1, followed by 5 flats each in Red, Green, then Blue, all at binning 2. \n!!Syntax\nThe three comma-separated items are \n# count\n# filter\n# binning\nYou can put in spaces for clarity (as in the example), they are ignored. The semicolon starts a comment. Comments are ignored.\n!!Rotators\nIf you have an imager rotator, the flat specs need one more field: the sky position angle (PA). For example:\n{{{\n;\n; Sample Flat Plan (PA = 0 deg.)\n;\n5, Luminance, 1, 0\n5, Red, 2, 0\n5, Green, 2, 0\n5, Blue, 2, 0\n}}}\nUsually, you'll set the PA to 0 degrees (as in the example) but for the absolute best accuracy you need to acquire flats at the same PA as your images. As usual for rotators, this gets complicated. What if you acquire images of two targets at different ~PAs? Then you need to take flats at each of the two ~PAs. But that can be time consuming and you may run out of flat time. One way around this is to do one PA at dusk (with a defaultduskflat plan) and the other at dawn (with a defaultdawnflat plan). \n!!!Rotated Flats with German Mounts\nIf your telescope is a German Equatorial Mount (GEM), the flat system automatically splits your flats into two sets, half taken at the specified PA and the other half at PA + 180 degrees. The assumption is that you acquire your images across the meridian, where the seeing is best. When your target transits, the mount flips and the rotator rolls the imager over 180 degrees so that the (sky) PA is the same and your guide star will still be on the internal guided chip. Mechanically and optically, though, the imager has rotated 180 degrees, thus the flats will be different. The flat images will be marked &quot;east&quot; (looking east of the meridian) and &quot;west&quot; (looking west of the meridian) so you can tell which is which.\n\nIf you take the simplified approach, setting the PA to 0, then you also don't care about the difference between the east and west flats, and you can combine them into one master flat. </div>
<div tiddler="Making Observing Plans" modifier="Bob Denny" modified="201408140059" created="200609292313" tags="Help UserContent">After you've used the [[Single Image|Acquire a Single Image]] and [[Color Series|Single Object Color Series]] live-observing modes a few times, you may be interested in acquiring images of multiple targets. This is //essential// for science work, but __it is also the best way to do astro-imaging__. Rather than sitting on one object all night and getting lots of data at low elevations through a lot of air, consider doing three targets over three nights, all at high elevations, crossing the meridian. &lt;% if(Telescope.Connected &amp;&amp; Telescope.AlignmentMode == 2) { %&gt;You never have to worry about the meridian and flipping, even though our mount is a German equatorial! Just plan across the meridian and let our system take care of flipping.&lt;% } %&gt;\n\nIn order to do this, you need to upload an __Observing Plan__ then run it. Planning a night's multi-target run is difficult without visualization tools. Fortunately, we provide a //free// Windows tool for making plans, ACP Planner. It works best with Imaginova's ~StarryNight Pro and Pro Plus, and Software Bisque's ~TheSky, but it can also be used by itself. Take a few moments to [[view the ACP Planner videos|https://www.youtube.com/playlist?list=PLBBA0B21E71E4B22B]] now!\n!Installing ACP Planner\n#[[Download ACP Planner|http://acp.dc3.com/get-planner.html]]\n#Run the installer\n!Using ACP Planner\nOnce again, you should [[view the ACP Planner videos|https://www.youtube.com/playlist?list=PLBBA0B21E71E4B22B]] now!\n#Start ACP Planner and read the help info, or just dive in and run ~TheSky or ~StarryNight. For ~TheSky, you also need to start ~TheSky Plan Capture applet. Planner support is built into ~StarryNight.\n#Make a plan, &lt;% if(User.Username != &quot;localweb&quot;) { %&gt;upload it to your [[Observing Plans]] area at the observatory.&lt;% } else { %&gt;put it into your plans folder (My Documents\sACP Astronomy\sPlans).&lt;% } %&gt;\n!Advanced Planning\nYou can also make plans by hand, using Notepad or any other text editor. They are very easy to understand, yet extremely flexible. For advanced usage, this is the way to go. Any heavy-duty observing run needs careful planning, after all, and once you know the //what// and //when// for your observing run, you can type up a plan for the observatory. The details of this would make this web content too big, so we've provided you with the ACP socumentation set in the [[Downloads]] area. Download ~ACPHelp.zip and unzip all of the files to some folder. Then double click @@ACP Help.chm@@. Look in the Making Observing Plans section. If you get stuck, ask us for help on the [[DC-3 Dreams Communication Center|http://forums.dc3.com/]].</div>
<div tiddler="MarkupPostHead" modifier="Bob Denny" modified="201408091941" created="200610311234" tags="deleteUser systemContent">&lt;!--{{{--&gt;\n&lt;!-- Load JQuery and plugins used herein --&gt;\n&lt;script language='javascript' type='text/javascript' src='/ac/jquery-1.6.2.min.js'&gt;&lt;/script&gt;\n&lt;script language='javascript' type='text/javascript' src='/ac/jquery.sparkline.min.js'&gt;&lt;/script&gt;\n&lt;script language='javascript' type='text/javascript' src='/ac/jquery.bvalidator.js'&gt;&lt;/script&gt;\n&lt;!-- Special cookie processing for TW  --&gt;\n&lt;script language='javascript' type='text/javascript'&gt;\nwindow.loadOptionsCookie_orig_DC3 = window.loadOptionsCookie;\nwindow.loadOptionsCookie = function()\n{\n	if(safeMode)\n	return;\n	var cookies = document.cookie.split(&quot;;&quot;);\n	for(var c = 0; c &lt; cookies.length; c++)\n	{\n		var p = cookies[c].indexOf(&quot;=&quot;);\n		if(p != -1)\n		{\n			var name = cookies[c].substr(0,p).trim();\n			if(name.substr(0, 6) == &quot;tw_opt&quot;)                   // Found the 'tw_opt' cookie\n			{\n				var value = cookies[c].substr(p + 1).trim();    // This has all the options\n				var fc = value.split(&quot;&amp;&quot;);\n				for(var i = 0; i &lt; fc.length; i++) \n				{\n					p = fc[i].indexOf(&quot;:&quot;);\n					name = fc[i].substr(0, p).trim();\n					value = fc[i].substr(p + 1).trim();\n					switch(name.substr(0,3))\n					{\n						case &quot;txt&quot;:\n						case &quot;pas&quot;:                             // for UploadPlugin\n						    config.options[name] = unescape(value);\n						    break;\n						case &quot;chk&quot;:\n						    config.options[name] = (value == &quot;true&quot;);\n						    break;\n					}\n				}\n				return;                                         // Don't look at more cookies            \n			}\n		}\n	}\n};\n//\n// For the Moon Avoidance live spreadsheet in Moon Avoidance Lorentzian Help.\n//\nfunction mah_calc()\n{\n	var d = document.getElementById('mah_inDist').value;\n	var w = document.getElementById('mah_inWidth').value;\n	for (a = 0; a &lt; 16; a++)\n	{\n		document.getElementById(&quot;mah_dist&quot; + a).innerHTML = (d / (1.0 + Math.pow(((0.5 - (a / 29.5)) / (w / 29.5)), 2))).toFixed(0);\n	}\n}\n&lt;/script&gt;\n&lt;!--}}}--&gt;</div>
<div tiddler="MarkupPreBody" modifier="Bob Denny" modified="201011161928" created="200612030322" tags="systemContent deleteUser">&lt;!--{{{--&gt;\n&lt;!-- LightBox translucent overlay --&gt;\n&lt;div id=&quot;lightBoxOverlay&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt;\n&lt;!-- General use simple LightBox --&gt;\n&lt;div class=&quot;lightBox&quot; id=&quot;lightBox&quot; style=&quot;display:none&quot;&gt;\n	&lt;img class=&quot;lightBoxClose&quot; src=&quot;im/close.gif&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; alt=&quot;Close&quot; title=&quot;Close this window&quot; /&gt;\n	&lt;div id=&quot;lightBoxContent&quot;&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- General use Alert LightBox --&gt;\n&lt;div class=&quot;lightBoxAlert&quot; id=&quot;lightBoxAlert&quot; style=&quot;display:none&quot;&gt;\n	&lt;img class=&quot;lightBoxClose&quot; src=&quot;im/close.gif&quot; onclick=&quot;DC3.LightBox.hideBox()&quot; alt=&quot;Close&quot; title=&quot;Close this window&quot; /&gt;\n	&lt;div class=&quot;lightBoxAlertIcon&quot;&gt;&lt;img id=&quot;lightBoxAlertIcon&quot; src=&quot;runtime&quot; alt=&quot;runtime&quot; title=&quot;runtime&quot;&gt;&lt;/div&gt;\n	&lt;div class=&quot;lightBoxAlertMessage&quot; id=&quot;lightBoxAlertMessage&quot;&gt;runtime&lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- End of LightBox --&gt; \n&lt;!--}}}--&gt;\n</div>
<div tiddler="MarkupPreHead" modifier="Bob Denny" modified="201411191741" created="200609090050" tags="deleteUser systemContent">&lt;!-- Enabling autodiscovery of RSS feed --&gt;\n&lt;link rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot; title=&quot;Observing events at &lt;%= Prefs.SiteName %&gt;&quot; href=&quot;/ac/arss.asp&quot; /&gt;\n&lt;!-- Defeating IE6 b/g image loading bug --&gt;\n&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&gt;\ntry {\n document.execCommand(&quot;BackgroundImageCache&quot;, false, true);\n} catch(err) {}\n&lt;/script&gt;\n&lt;!-- Loading spash screen --&gt;\n&lt;style type=&quot;text/css&quot;&gt;\n#contentWrapper {display:none;}\n&lt;/style&gt;\n&lt;div id=&quot;SplashScreen&quot; style=&quot;background-color:black; position:absolute; top:0; left:0; width:100%; height:100%;&quot;&gt;\n&lt;div style=&quot;border: 0px solid navy; border-radius: 8px; -moz-border-radius: 8px; -webkit-border-radius: 8px; outline: none; box-shadow: 0 0 32px #4444ff; -moz-box-shadow: 0 0 32px #4444ff; -webkit-box-shadow: 0 0 32px #4444ff; display: block; text-align: center; width: 600px; margin: 100px auto; padding: 10px 10px 10px 10px;; color:#FFA; font-size: 24px; font-family:Tahoma; background-color:#000030;&quot;&gt;&lt;table border=&quot;0&quot; cellpadding=&quot;10px&quot;&gt;&lt;tr&gt;&lt;td&gt;&lt;img src=&quot;im/dc3logo.jpg&quot;/&gt;&lt;/td&gt;&lt;td&gt;&lt;img src=&quot;im/loading.gif&quot; align=&quot;absmiddle&quot; height=&quot;32&quot; width=&quot;32&quot; /&gt;&amp;nbsp;Loading &lt;%= Prefs.SiteName %&gt;...&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;\n&lt;!-- Server-side static initialization and support functions&lt;%\nvar __fso = new ActiveXObject(&quot;Scripting.FileSystemObject&quot;);\nvar __port = &quot;:&quot; + Request.ServerVariables(&quot;SERVER_PORT&quot;);\nif(__port == &quot;:80&quot;) __port = &quot;&quot;;\nvar feedUri = &quot;feed://&quot; + Request.ServerVariables(&quot;SERVER_NAME&quot;) + __port + &quot;/ac/arss.asp&quot;; \nvar camAvail = false;\ntry { camAvail = Camera.LinkEnabled; } catch (ex) { camAvail = false; }\nvar __fso = new ActiveXObject(&quot;Scripting.FileSystemObject&quot;);\nvar rotAvail = Rotator.Configured;\nvar ditherMainPixels = (Prefs.AutoGuiding.SensorPlateScale !== 0)\nvar schInst = false;\nvar schAvail = false;\nvar schUserPrio = false;\nvar schPerAF = false;\nvar schDB;\nvar acpAutoCal = false;\nvar filtNames = null;\nvar filtNameOpts = &quot;&quot;;\nvar filtNameOptsSch = &quot;&quot;;\nvar binVals = null;\nvar binValOpts = &quot;&quot;;\nvar screenFlats = false;\nvar __st;\ntry {\n    __st = __fso.OpenTextFile(Prefs.WebRoot + &quot;\s\sFilterNames.txt&quot;);\n    __st.ReadLine();\n    var __buf = __st.ReadLine();\n    if(__buf.search(/no filters/i) == -1) {\n        filtNames = new Array();\n        while (!__st.AtEndOfStream) {\n            filtNames.push(__st.ReadLine());\n        }\n    }\n    __st.Close();\n	buf = bufs = &quot;&quot;;    // Bufs for scheduler flavor, names not numbers\n	if(filtNames == null) {\n		buf += &quot;&lt;option value=\s&quot;0\s&quot;&gt;N/A&lt;/option&gt;&quot;;\n		bufs += &quot;&lt;option&gt;N/A&lt;/option&gt;&quot;;\n	} else {\n		var cf = Prefs.CameraPrefs.ClearFilterNumber;\n		for (var i = 0; i &lt; filtNames.length; i++) {\n			buf += &quot;&lt;option value=\s&quot;&quot; + i + &quot;\s&quot;&quot;;\n			bufs += &quot;&lt;option &quot;;\n			if(i == cf) {\n			    buf += &quot; selected&quot;;\n			    bufs += &quot; selected&quot;;\n			}\n			buf += &quot;&gt;&quot; + filtNames[i] + &quot;&lt;/option&gt;&quot;;\n			bufs += &quot;&gt;&quot; + filtNames[i] + &quot;&lt;/option&gt;&quot;;\n		}\n	}\n	filtNameOpts = Server.HTMLEncode(buf);\n	filtNameOptsSch = Server.HTMLEncode(bufs);\n} catch(ex) { }\ntry {\n    __st = __fso.OpenTextFile(Prefs.WebRoot + &quot;\s\sBinningVals.txt&quot;);\n    __st.ReadLine();\n	buf = &quot;&quot;;\n    while (!__st.AtEndOfStream)\n    {\n        var i = __st.ReadLine();\n        buf += Server.HTMLEncode(&quot;&lt;option value=\s&quot;&quot; + i + &quot;\s&quot;&gt;&quot; + i + &quot;&lt;/option&gt;&quot;);\n    }\n    __st.Close();\n    binValOpts = buf;\n} catch(ex) {\n    binValOpts = Server.HTMLEncode(&quot;&lt;option value=\s&quot;1\s&quot;&gt;1&lt;/option&gt;&quot;);\n}\ntry {\n    __st = __fso.OpenTextFile(ACPApp.ConfigPath + &quot;\s\sAutoFlatConfig.txt&quot;);\n    buf = __st.ReadAll();\n    __st.Close();\n    if (buf.search(/FlatMode\ss+Sky/i) &lt; 0)\n        screenFlats = true;\n} catch(ex) { }\n\nacpAutoCal = Prefs.CameraPrefs.AutoCalibrate;\n\nschInst = Scheduler.Installed;\nif (schInst) {\n    schAvail = Scheduler.Available;\n    schUserPrio = Scheduler.UserPriorities;\n    schPerAF = Scheduler.PeriodicAutoFocus;\n    schDB = Scheduler.Database;\n}\n    \nfunction filterNameOptions()\n{\n	return filtNameOpts;\n}\nfunction filterNameOptionsSch()     // Option values are the names not the numbers\n{\n	return filtNameOptsSch;\n}\nfunction binningOptions()\n{\n    return binValOpts;\n}\n%&gt;--&gt;\n</div>
<div tiddler="MiniBrowserPlugin" modifier="Brewington" modified="201102090033" created="201102090033" tags="Custom hideUser systemConfig">/***\n|Name|MiniBrowserPlugin|\n|Source|http://www.TiddlyTools.com/#MiniBrowserPlugin|\n|Version|1.2.1|\n|Author|Eric Shulman - ELS Design Studios|\n|License|http://www.TiddlyTools.com/#LegalStatements &lt;br&gt;and [[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|~CoreVersion|2.1|\n|Type|plugin|\n|Requires|PlayerPlugin (optional, recommended)|\n|Overrides||\n|Description|embedded browser-in-browser with favorites lists and media support|\n!!!!!Usage\n&lt;&lt;&lt;\n{{{&lt;&lt;miniBrowser noplayer hidecontrols URL TiddlerName TiddlerName TiddlerName...&gt;&gt;}}}\n* ''noplayer'' (optional)&lt;br&gt;disables support for embedded media player (using [[PlayerPlugin]], if installed)\n* ''hidecontrols'' (optional)&lt;br&gt;hide initial display of minibrowser controls (except for 'show controls' checkbox)&lt;br&gt;//note: if no initial URL is specified, controls will be shown anyway//\n* ''URL'' (optional)&lt;br&gt;specifies an initial URL to open when the mini browser is rendered\n* ''TiddlerName'', ''TiddlerName''... (optional)&lt;br&gt;indicates one or more tiddlers containing &quot;HR-separated&quot; lists of favorites.&lt;br&gt;//notes: if no tiddler is specified, [[MiniBrowserList]] is used by default. In addition, when adding/deleting favorites, the plugin automatically updates [[MiniBrowserList]], regardless of any alternative lists of favorites stored in separate tiddlers. After changes to [[MiniBrowserList]] are made, you can then use cut/paste to manually move entries from that tiddler into other tiddlers.//\n&lt;&lt;&lt;\n!!!!!Example\n&gt;{{{&lt;&lt;miniBrowser&gt;&gt;}}}&lt;br&gt;{{smallform small{&lt;&lt;miniBrowser&gt;&gt;}}}\n&gt;{{{&lt;&lt;miniBrowser hidecontrols http://www.TiddlyWiki.com&gt;&gt;}}}&lt;br&gt;{{smallform small{&lt;&lt;miniBrowser hidecontrols http://www.TiddlyWiki.com&gt;&gt;}}}\n!!!!!Revisions\n&lt;&lt;&lt;\n2008.04.07 [1.2.1] added txtMiniBrowserWidth and txtMiniBrowserHeight. cleanup init handling (somewhat)\n2008.04.06 [1.2.0] added support for specifying initial URL to view (suggested by Richard Berg). When opening a URL, select matching entry (if any) in bookmarks droplist. Added support for hiding minibrowser controls.\n2008.01.19 [1.1.0] added support for optional extra favorites lists stored in separate tiddlers\n2007.10.15 [1.0.0] combined MiniBrowser and MediaCenter inline scripts and converted to true plugin\n2006.03.01 [0.0.0] inline script\n&lt;&lt;&lt;\n!!!!!Code\n***/\n//{{{\nversion.extensions.MiniBrowser={major: 1, minor: 2, revision: 1, date: new Date(2008,4,6)};\n//}}}\n//{{{\nconfig.shadowTiddlers.MiniBrowser=&quot;&lt;&lt;miniBrowser&gt;&gt;&quot;;\n//}}}\n//{{{\nif (config.options.txtMiniBrowserWidth==undefined) config.options.txtMiniBrowserWidth=&quot;100%&quot;;\nif (config.options.txtMiniBrowserHeight==undefined) config.options.txtMiniBrowserHeight=&quot;480&quot;;\n//}}}\n//{{{\nconfig.macros.miniBrowser= {\n favoritesList:\n &quot;MiniBrowserList&quot;,\n handler: function(place,macroName,params,wikifier,paramString,tiddler) {\n\n var noPlayer=params[0]&amp;&amp;params[0].toLowerCase()==&quot;noplayer&quot;; if (noPlayer) params.shift();\n if (!config.macros.player) noPlayer=true; // if PlayerPlugin not installed\n var hideControls=params[0]&amp;&amp;params[0].toLowerCase()==&quot;hidecontrols&quot;; if (hideControls) params.shift();\n var url=(params[0]&amp;&amp;!store.tiddlerExists(params[0]))?params.shift():&quot;&quot;;\n hideControls=hideControls&amp;&amp;url.length; // if no initial URL, then show controls anyway\n var w=config.options.txtMiniBrowserWidth;\n var h=config.options.txtMiniBrowserHeight;\n\n // create form\n var guid=new Date().getTime()+Math.random().toString(); // globally unique ID\n var html=this.html;\n html=html.replace(/%id%/g,guid);\n html=html.replace(/%noplayer%/g,noPlayer?&quot;true&quot;:&quot;&quot;);\n html=html.replace(/%hidecontrols%/g,hideControls?&quot;none&quot;:&quot;block&quot;);\n html=html.replace(/%favorites%/g,params[0]||config.macros.miniBrowser.favoritesList);\n createTiddlyElement(place,&quot;span&quot;).innerHTML=html;\n\n // init form\n document.getElementById(&quot;minibrowser_controls_&quot;+guid).style.display=hideControls?&quot;none&quot;:&quot;block&quot;;\n document.getElementById(&quot;minibrowser_resize_&quot;+guid).style.display=hideControls?&quot;none&quot;:&quot;block&quot;;\n document.getElementById(&quot;minibrowser_togglecontrols_&quot;+guid).checked=!hideControls;\n document.getElementById(&quot;minibrowser_form_&quot;+guid).url.value=url;\n document.getElementById(&quot;minibrowser_form_&quot;+guid).w.value=w;\n document.getElementById(&quot;minibrowser_form_&quot;+guid).h.value=h;\n if (noPlayer) { // hide &quot;type&quot; list no PlayerPlugin\n document.getElementById(&quot;minibrowser_type_&quot;+guid).style.display=&quot;none&quot;;\n document.getElementById(&quot;minibrowser_url_&quot;+guid).style.width=&quot;36%&quot;;\n }\n\n // load bookmarks droplist from HR-separated tiddler contents\n var b=document.getElementById(&quot;minibrowser_bookmarks_&quot;+guid);\n while (b.options[1]) b.options[1]=null; // clear list but leave 'prompt' item\n var p; while (p=params.shift()) this.getFavorites(b,p); // load custom bookmarks\n if (b.length&lt;2) this.getFavorites(b,config.macros.miniBrowser.favoritesList); // default list\n\n // load initial URL (if any)\n var place=document.getElementById(&quot;minibrowser_player_&quot;+guid);\n this.load(place,guid,&quot;&quot;,&quot;&quot;,w,h,true,noPlayer);\n this.go(document.getElementById(&quot;minibrowser_form_&quot;+guid));\n },\n getFavorites: function(list,tid) {\n var txt=store.getTiddlerText(tid); if (!txt||!txt.trim().length) return;\n var parts=txt.split(&quot;\sn----\sn&quot;);\n for (var p=0; p&lt;parts.length; p++) {\n var lines=parts[p].split(&quot;\sn&quot;);\n var label=lines.shift()||&quot;&quot;; // 1st line=display text\n var value=lines.shift()||&quot;&quot;; // 2nd line=item value\n var indent=value&amp;&amp;value.length?&quot;\sxa0\sxa0&quot;:&quot;&quot;;\n list.options[list.length]=new Option(indent+label,value,false,false);\n }\n },\n load: function(place,id,type,url,w,h,showcontrols,noPlayer) {\n if (noPlayer) {\n if (!place) place=document.getElementById(id).parentNode;\n place.innerHTML=&quot;&lt;iframe name='&quot;+id+&quot;' id='&quot;+id+&quot;' \s\n src='&quot;+url+&quot;' width='&quot;+w+&quot;' height='&quot;+h+&quot;' \s\n style='background:#fff;border:1px solid'&gt;&lt;/iframe&gt;&quot;\n } else\n config.macros.player.loadURL(place,id,type,url,w,h,showcontrols);\n },\n go: function(f) {\n var url=f.url.value.trim();\n if (!url.length) url=f.url.value=f.bookmarks.value.trim();\n if (!url.length) { this.done(f); return false; }\n var id=f.playerID.value;\n document.getElementById(&quot;minibrowser_player_&quot;+id).style.display=&quot;block&quot;;\n document.getElementById(&quot;minibrowser_controls2_&quot;+id).style.display=&quot;block&quot;;\n this.load(null,id,f.type.value,f.url.value,f.w.value,f.h.value,f.ctrls.checked,f.noPlayer.value==&quot;true&quot;);\n var matched=false; for (var i=0; i&lt;f.bookmarks.options.length; i++) // select matching bookmark\n if (f.bookmarks.options[i].value==url) { f.bookmarks.selectedIndex=i; matched=true; break; }\n if (!matched) f.bookmarks.selectedIndex=0;\n f.done.disabled=false;\n return false;\n },\n done: function(f) {\n var id=f.playerID.value;\n this.load(null,id,null,null,f.w.value,0,f.ctrls.checked,f.noPlayer.value==&quot;true&quot;);\n document.getElementById(&quot;minibrowser_player_&quot;+id).style.display=&quot;none&quot;;\n document.getElementById(&quot;minibrowser_controls2_&quot;+id).style.display=&quot;none&quot;;\n f.done.disabled=true; \n return false;\n },\n fit: function(place) {\n var trim=89; // fudge factor to account for the other controls + padding + borders. ADJUST THIS VALUE TO FIT LAYOUT\n var t=story.findContainingTiddler(place);\n if (!t) { t=place; while (t &amp;&amp; t.className!='floatingPanel') t=t.parentNode; } if (!t) return;\n var w=&quot;100%&quot;; // horizontal stretching via CSS works, but vertical stretching doesn't... so:\n var h=t.offsetHeight-trim; // workaround: get containing panel/tiddler height and subtract &quot;trim&quot; height\n var f=place.form;\n this.load(null,f.playerID.value,f.type.value,f.url.value,w,h,f.ctrls.checked,f.noPlayer.value==&quot;true&quot;); // reload player with new size\n place.form.w.value=w; place.form.h.value=h; // update width/height input fields\n },\n add: function(place,title) {\n var v=place.value; if (!v.length) return;\n var d=prompt(&quot;Please enter a description for\sn&quot;+place.value); if (!d || !d.length) return;\n var who=config.options.txtUserName;\n var when=new Date();\n var tid=store.getTiddler(title);\n var txt=&quot;%0\sn%1\sn----\sn%2&quot;.format([d,v,tid?tid.text:&quot;&quot;]);\n store.saveTiddler(title,title,txt,who,when,tid?tid.tags:[],tid?tid.fields:{});\n if (!tid) story.displayTiddler(story.findContainingTiddler(place),title);\n else story.refreshTiddler(title,1,true);\n var here=story.findContainingTiddler(place);\n if (here) story.refreshTiddler(here.getAttribute(&quot;tiddler&quot;),1,true);\n },\n del: function(place,title) {\n var v=place.value; if (!v.length) return;\n var d=place.options[place.selectedIndex].text; if (!d.length) return;\n if (!confirm(&quot;Are you sure you want to remove this favorite?\sn\sn&quot;+d+&quot;\sn&quot;+v)) return;\n var tid=store.getTiddler(title); if (!tid) return;\n var who=config.options.txtUserName;\n var when=new Date();\n var pat='%0\sn%1\sn----\sn'.format([d.replace(/\sxa0/g,''),v]); var re=new RegExp(pat,&quot;i&quot;);\n var txt=tid.text.replace(re,&quot;&quot;);\n store.saveTiddler(title,title,txt,who,when,tid?tid.tags:[],tid?tid.fields:{});\n story.refreshTiddler(title,1,true);\n var here=story.findContainingTiddler(place);\n if (here) story.refreshTiddler(here.getAttribute(&quot;tiddler&quot;),1,true);\n },\n html: &quot;&lt;form id='minibrowser_form_%id%' style='display:block;margin:0;padding:0' onsubmit='return config.macros.miniBrowser.go(this);'&gt;&lt;!-- \s\n --&gt;&lt;nobr&gt;&lt;input type='hidden' name='playerID' value='%id%'&gt;&lt;input type='hidden' name='noPlayer' value='%noplayer%'&gt;&lt;!-- \s\n --&gt;&lt;div id='minibrowser_controls_%id%' style='display:%hidecontrols%'&gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='&lt;' title='back' style='font-size:8pt;width:3%' \s\n onclick='try{window.frames[\s&quot;player_%id%\s&quot;].history.go(-1)}catch(e){window.history.go(-1)}' &gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='&gt;' title='forward' style='font-size:8pt;width:3%' \s\n onclick='try{window.frames[\s&quot;player_%id%\s&quot;].history.go(+1)}catch(e){window.history.go(+1)}'&gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='+' title='refresh'style='font-size:8pt;width:3%' \s\n onclick='try{window.frames[\s&quot;player_%id%\s&quot;].location.reload()}catch(e){;}'&gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='x' title='stop'style='font-size:8pt;width:3%' \s\n onclick='window.stop()'&gt;&lt;!-- \s\n --&gt;&lt;select name='bookmarks' id='minibrowser_bookmarks_%id%' size='1' style='font-size:8pt;width:20%' \s\n onchange='this.form.url.value=this.value; return config.macros.miniBrowser.go(this.form);'&gt;&lt;!-- \s\n --&gt;&lt;option value=''&gt;bookmarks...&lt;/option&gt;&lt;!-- \s\n --&gt;&lt;/select&gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='add' title='add URL to the bookmarks' style='font-size:8pt;width:5%' \s\n favorites=\s&quot;%favorites%\s&quot; \s\n onclick='config.macros.miniBrowser.add(this.form.url,this.getAttribute(\s&quot;favorites\s&quot;));'&gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='del' title='remove URL from the bookmarks' style='font-size:8pt;width:5%' \s\n favorites=\s&quot;%favorites%\s&quot; \s\n onclick='config.macros.miniBrowser.del(this.form.bookmarks,this.getAttribute(\s&quot;favorites\s&quot;));'&gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='edit' title='edit the bookmarks list' style='font-size:8pt;width:5%' \s\n favorites=\s&quot;%favorites%\s&quot; \s\n onclick='story.displayTiddler(null,this.getAttribute(\s&quot;favorites\s&quot;),2)'&gt;&lt;!-- \s\n --&gt;&lt;input type='text' name='url' id='minibrowser_url_%id%' size='60' value='' style='font-size:8pt;width:23%' \s\n onfocus='this.select()'&gt;&lt;!-- \s\n --&gt;&lt;select name='type' id='minibrowser_type_%id%' size='1' style='font-size:8pt;width:13%'&gt;&lt;!-- \s\n --&gt;&lt;option value=''&gt;media type...&lt;/option&gt;&lt;!-- \s\n --&gt;&lt;option value=''&gt;auto-detect&lt;/option&gt;&lt;!-- \s\n --&gt;&lt;option value='iframe'&gt;web page&lt;/option&gt;&lt;!-- \s\n --&gt;&lt;option value='windows'&gt;windows media&lt;/option&gt;&lt;!-- \s\n --&gt;&lt;option value='realone'&gt;real one&lt;/option&gt;&lt;!-- \s\n --&gt;&lt;option value='quicktime'&gt;quicktime&lt;/option&gt;&lt;!-- \s\n --&gt;&lt;option value='flash'&gt;flash&lt;/option&gt;&lt;!-- \s\n --&gt;&lt;option value='image'&gt;jpg/gif/png&lt;/option&gt;&lt;!-- \s\n --&gt;&lt;/select&gt;&lt;!-- \s\n --&gt;&lt;input type='submit' value='go' title='view URL in embedded player' style='font-size:8pt;width:4%'&gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='open' title='view URL in a separate player' style='font-size:8pt;width:6%' \s\n onclick='if (this.form.url.value.length) window.open(this.form.url.value)'&gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='done' name='done' disabled title='disconnect from URL' style='font-size:8pt;width:6%' \s\n onclick='return config.macros.miniBrowser.done(this.form);'&gt;&lt;!-- \s\n --&gt;&lt;/div&gt;&lt;!-- \s\n --&gt;&lt;div id='minibrowser_player_%id%' style='display:none;text-align:center'&gt;&lt;/div&gt;&lt;!-- \s\n --&gt;&lt;span id='minibrowser_controls2_%id%' style='margin-top:2px;display:none;font-size:8pt;'&gt;&lt;!-- \s\n --&gt;&lt;div id='minibrowser_resize_%id%' style='display:%hidecontrols%;float:right;font-size:8pt'&gt;&lt;!-- \s\n --&gt; size: &lt;input type='text' name='w' size='3' value='' style='font-size:8pt;' \s\n onfocus='this.select()'&gt;&lt;!-- \s\n --&gt;x&lt;input type='text' name='h' size='3' value='' style='font-size:8pt;' \s\n onfocus='this.select()'&gt;&lt;!-- \s\n --&gt; &lt;input type='submit' value='set' style='font-size:8pt;width:5%' \s\n onclick='var f=this.form; \s\n if(!f.w.value.trim().length) f.w.value=config.options.txtMiniBrowserWidth; \s\n if(!f.h.value.trim().length) f.h.value=config.options.txtMiniBrowserHeight; \s\n config.options.txtMiniBrowserWidth=f.w.value; config.options.txtMiniBrowserHeight=f.h.value; \s\n saveOptionCookie(\s&quot;txtMiniBrowserWidth\s&quot;); saveOptionCookie(\s&quot;txtMiniBrowserHeight\s&quot;);'&gt;&lt;!-- \s\n --&gt;&lt;input type='submit' value='reset' style='font-size:8pt;width:5%' \s\n onclick='var f=this.form; f.ctrls.checked=true; f.w.value=\s&quot;100%\s&quot;; f.h.value=\s&quot;480\s&quot;; \s\n config.options.txtMiniBrowserWidth=f.w.value; config.options.txtMiniBrowserHeight=f.h.value; \s\n saveOptionCookie(\s&quot;txtMiniBrowserWidth\s&quot;); saveOptionCookie(\s&quot;txtMiniBrowserHeight\s&quot;);'&gt;&lt;!-- \s\n --&gt;&lt;input type='button' value='fit' title='resize player to fit containing window' style='font-size:8pt;width:5%' \s\n onclick='config.macros.miniBrowser.fit(this)'&gt;&lt;!-- \s\n --&gt;&lt;/div&gt;&lt;!-- \s\n --&gt; &lt;input type='checkbox' name='ctrls' id='minibrowser_togglecontrols_%id%' title='toggle minibrowser controls' CHECKED \s\n onclick='document.getElementById(\s&quot;minibrowser_controls_%id%\s&quot;).style.display=this.checked?\s&quot;block\s&quot;:\s&quot;none\s&quot;; \s\n document.getElementById(\s&quot;minibrowser_resize_%id%\s&quot;).style.display=this.checked?\s&quot;block\s&quot;:\s&quot;none\s&quot;;' \s\n &gt;&lt;a href='' title='toggle minibrowser controls' \s\n onclick='this.previousSibling.click();return false;'&gt;show controls&lt;/a&gt;&lt;!-- \s\n --&gt;&lt;/span&gt;&lt;!-- \s\n --&gt;&lt;/nobr&gt;&lt;/form&gt; \s\n &quot;\n}\n//}}}</div>
<div tiddler="ModeSwitchPlugin" modifier="Bob Denny" modified="200804140300" created="200609220435" tags="plugin systemConfig">//{{{\n//\n// Change the user interface when the page was rendered via ACP/ASP for\n// end users. Note that these changes eliminate the possibility of users\n// viewing, editing, or saving tiddlers, so the replacement tiddlers\n// that control the UI are temporary only. Also the aspMode variable\n// is global and can be used by any JS, plugin, macro, etc. It also\n// adds 'excludeLists' tags to all tiddlers that are tagged with\n// 'hideUser'. This allows those tiddlers to be seen while editing\n// in HTML mode, but hides them from users in ASP mode! Do the same\n// for obvious hidden things, systemConfig!\n//\n// 21-Sep-06	rbd		Initial edit\n// 22-Sep-06	rbd		Replace 'tiddler' with 'item' in user mode messages\n// 23-Sep-06	rbd		Add FontSize to sidebar, add side-bar (toggle) to tiddler toolbar\n//						Auto-hide systemContent. Add excludeLists tag to temp tiddlers\n//						used to control UI changes. Add temp TabTags tiddler to call \n//						the allTagsEx macro, which hides tags in the tags tab using the\n//						same rules as regular tiddlers.\n// 25-Sep-05	rbd		Add single-page and open-at-top options\n// 27-Oct-06	rbd		More overrides, add excludeSearch where adding excludeLists.\n//						Refactor code that adds excludeXxx tags into function.\n// 01-Nov-06	rbd		Add RSS icon to [[SideBarOptions]]\n// 04-Nov-06	rbd		Switch DefaultTiddlers to those used at run time\n// 21-Nov-06	rbd		Add support for [[CollapseTiddlerPlugin]]\n// 22-Nov-06	rbd		New hiding tag hideLocalUser used to hide tiddlers (e.g. the\n//						My Documents ones) only if user is 'localweb'.\n// 25-Nov-06    rbd     Fix bogus syntax on hideLocalUser feature.\n// 08-Apr-08	rbd		Hide side-bar by default, add tooltip for sidebar toggler.\n// 13-Apr-08	rbd		New StartupItems in author environment turns into DefaultTiddlers\n//						in user mode... allows authors to change default tiddlers on open.\n//\n\nfunction _modeSwitchHideTiddler(tiddler)\n{\n	if(!tiddler.isTagged(&quot;excludeLists&quot;))\n		tiddler.assign(undefined, undefined, undefined, undefined, tiddler.getTags() + &quot; excludeLists&quot;);\n	if(!tiddler.isTagged(&quot;excludeSearch&quot;))\n		tiddler.assign(undefined, undefined, undefined, undefined, tiddler.getTags() + &quot; excludeSearch&quot;);\n}\n\nvar aspMode = (document.location.pathname.lastIndexOf(&quot;.asp&quot;) != -1);\nif(aspMode)\n{\n	//\n	// Change the user interface in several places\n	//\n	var _temp = store.createTiddler(&quot;SideBarTabs&quot;);		// Will get existing safely.\n	_temp.assign(undefined, &quot;&lt;&lt;tabs txtMainTab Items 'All Items' TabAll Categories 'Items by category' TabTags&gt;&gt;&quot;, \n					&quot;System&quot;, undefined, &quot;excludeLists excludeSearch&quot;);\n	_temp = store.createTiddler(&quot;TabTags&quot;);\n	_temp.assign(undefined, &quot;&lt;&lt;allTagsEx&gt;&gt;&quot;, 			// Supresses tag-tiddlers too!\n					&quot;System&quot;, undefined, &quot;excludeLists excludeSearch&quot;);\n	_temp = store.createTiddler(&quot;SideBarOptions&quot;);\n	_temp.assign(undefined, &quot;&lt;html&gt;&lt;a href=\s&quot;&lt;%= feedUri %&gt;\s&quot;&gt;&lt;img src=\s&quot;/im/feed-icon-14x14.png\s&quot; &quot; + \n						&quot;border=\s&quot;0\s&quot; title=\s&quot;Subscribe to RSS feed\s&quot; width=\s&quot;14\s&quot; height=\s&quot;14\s&quot; &quot; +\n						&quot;align=\s&quot;right\s&quot;&gt;&lt;/a&gt;&lt;/html&gt;&quot; + \n						&quot;&lt;&lt;search&gt;&gt;&lt;&lt;closeAll&gt;&gt;&lt;&lt;themeSelect style 'select theme'&gt;&gt;&quot; + \n						&quot;&lt;&lt;fontSize 'font: '&gt;&gt;&lt;&lt;slider chkSliderOptionsPanel OptionsPanel &quot; + \n						&quot;'options »' 'Change options'&gt;&gt;&quot;, \n					&quot;System&quot;, undefined, &quot;excludeLists excludeSearch&quot;);\n	_temp = store.createTiddler(&quot;OptionsPanel&quot;);\n	_temp.assign(undefined,\n						&quot;These options are saved in your browser. Click on a label for help.\sn\sn&quot; +\n						&quot;&lt;&lt;option chkSinglePageMode&gt;&gt; SingleItemDisplay\sn&quot; +\n						&quot;&lt;&lt;option chkTopOfPageMode&gt;&gt; OpenNewItemAtTop\sn&quot; + \n						&quot;&lt;&lt;option chkRegExpSearch&gt;&gt; RegExpSearch\sn&quot;+\n						&quot;&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; CaseSensitiveSearch\sn&quot;+\n						&quot;&lt;&lt;option chkAnimate&gt;&gt; EnableAnimations&quot;,\n					&quot;System&quot;, undefined, &quot;excludeLists excludeSearch&quot;);\n	_temp = store.createTiddler(&quot;ViewTemplate&quot;);\n	_temp.assign(undefined,\n						&quot;&lt;div class='toolbar'&gt;\sn&quot; + \n						&quot; &lt;span macro='toolbar collapseTiddler -closeTiddler closeOthers references jump'&gt;&lt;/span&gt;\sn&quot; +\n						&quot; &lt;span macro='toggleSideBar side-bar \s&quot;hide/show side-bar\s&quot; hide'&gt;&lt;/span&gt;\sn&quot; +\n						&quot;&lt;/div&gt;&quot; + \n						&quot;&lt;div class='title' macro='view title'&gt;&lt;/div&gt;\sn&quot; + \n						&quot;&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;\sn&quot; +\n						&quot;&lt;div class='tagClear'&gt;&lt;/div&gt;&quot;,\n					&quot;System&quot;, undefined, &quot;excludeLists excludeSearch&quot;);\n	store.saveTiddler(&quot;StartupItems&quot;, &quot;DefaultTiddlers&quot;, undefined, undefined, undefined, &quot;excludeLists excludeSearch&quot;);\n\n	var i;\n	//\n	// These hide tiddlers with certain tags from the user environment\n	//\n	_temp = store.getTaggedTiddlers(&quot;hideUser&quot;);		// Array (typ.)\n	if(_temp.length &gt; 0) {\n		for(i = 0; i &lt; _temp.length; i++) _modeSwitchHideTiddler(_temp[i]);\n	}\n	if('&lt;%= User.Username %&gt;' == 'localweb') {			// Hide only from 'localweb' user\n		_temp = store.getTaggedTiddlers(&quot;hideLocalUser&quot;);\n		if(_temp.length &gt; 0) {\n			for(i = 0; i &lt; _temp.length; i++) _modeSwitchHideTiddler(_temp[i]);\n		}\n	}\n	_temp = store.getTaggedTiddlers(&quot;systemContent&quot;);\n	if(_temp.length &gt; 0) {\n		for(i = 0; i &lt; _temp.length; i++) _modeSwitchHideTiddler(_temp[i]);\n	}\n	_temp = store.getTaggedTiddlers(&quot;systemConfig&quot;);\n	if(_temp.length &gt; 0) {\n		for(i = 0; i &lt; _temp.length; i++) _modeSwitchHideTiddler(_temp[i]);\n	}\n	store.setDirty(false); // Prevent dirty warning from the above adjustments\n	//\n	// supress 'tiddler' in a some popups and tooltips\n	//\n	config.messages.undefinedTiddlerToolTip = &quot;The item '%0' doesn't exist&quot;;\n	config.commands.closeTiddler.tooltip = &quot;Close this item&quot;;\n	config.commands.closeOthers.tooltip = &quot;Close all other items&quot;;\n	config.commands.collapseTiddler.tooltip = &quot;Collapse this item&quot;;\n	config.commands.expandTiddler.tooltip = &quot;Restore this item&quot;;\n	config.commands.collapseOthers.tooltip = &quot;Restore this item and collapse all others&quot;;\n	config.commands.references.tooltip = &quot;Show items that link to this one&quot;;\n	config.commands.jump.tooltip = &quot;Jump to another open item&quot;;\n	config.macros.list.all.prompt = &quot;All items in alphabetical order&quot;;\n	config.macros.closeAll.prompt = &quot;Close all displayed items&quot;;\n	config.macros.allTags.tooltip = &quot;Show items tagged with '%0'&quot;;\n	config.macros.search.prompt = &quot;Search all items&quot;;\n	config.macros.search.successMsg = &quot;%0 items found matching %1&quot;;\n	config.macros.search.failureMsg = &quot;No items found matching %0&quot;;\n	config.views.wikified.tag.openAllTooltip = &quot;Open all of these items&quot;;\n	config.views.wikified.tag.tooltip = &quot;Show items tagged with '%0'&quot;;\n	config.views.wikified.tag.popupNone = &quot;No other items tagged with '%0'&quot;;\n	config.views.wikified.defaultText = &quot;The item '%0' doesn't exist. You can create it in the Share Your Sky! authoring environment.&quot;;\n}\n//}}}</div>
<div tiddler="Moon Avoidance Lorentzian Help" modifier="Bob Denny" modified="201504132216" created="201407101726" tags="Help UserContent hideUser">Moon Avoid implements the ~Moon-Avoidance Lorentzian, which varies the avoidance distance from the Moon based on its phase. At full moon the Observation will need to be at its farthest from the Moon. __As the brightness decreases with phase, the Observation can be done closer__.\n\nMoon Avoid takes two parameters: ''distance'' (degrees) and ''width'' (days). Observations will not be scheduled if the target is within distance/(1+(age/width)^2) of the moon. This means at full moon the avoidance will be ''distance'', and ''width'' days before (or after) the avoidance will be one half ''distance''. @@If you are unsure what to use@@, start out with distance=120 and width=14, meaning that at full moon the target must be at least 120 degrees away and at 1st or 3rd quarter (half-illuminated) the target would need to be at least 90 degrees away.\n\nThanks to ACP Expert user Dick Berg for the idea of a live spreadsheet to help visualize this. His spreadsheet has been translated to HTML/Javascript and is given below. Enter values for ''distance'' and ''width'' below and you can see the resulting minimum angular distance from the Moon in the table day by day from new to full Moon.\n&lt;html&gt;\n&lt;table border=&quot;1&quot; style=&quot;margin-bottom: 4px;&quot; cellpadding=&quot;2&quot;&gt;\n	&lt;tr&gt;&lt;th&gt;Distance&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;mah_inDist&quot; id=&quot;mah_inDist&quot; onKeyUp=&quot;mah_calc();&quot; size=&quot;4&quot; value=&quot;120&quot;&gt;&lt;/td&gt;&lt;/tr&gt;\n	&lt;tr&gt;&lt;th&gt;Width&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;mah_inWidth&quot; id=&quot;mah_inWidth&quot; onKeyUp=&quot;mah_calc();&quot; size=&quot;4&quot; value=&quot;14&quot;&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;table border=&quot;1&quot;&gt;\n	&lt;tr&gt;\n		&lt;th scope=&quot;col&quot;&gt;Age&amp;nbsp;(days)&lt;/th&gt;\n		&lt;th scope=&quot;col&quot;&gt;Distance&amp;nbsp;(deg.)&lt;/th&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;0&amp;nbsp;(new)&lt;/td&gt;\n		&lt;td id=&quot;mah_dist0&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;1&lt;/td&gt;\n		&lt;td id=&quot;mah_dist1&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;2&lt;/td&gt;\n		&lt;td id=&quot;mah_dist2&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;3&lt;/td&gt;\n		&lt;td id=&quot;mah_dist3&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;4&lt;/td&gt;\n		&lt;td id=&quot;mah_dist4&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;5&lt;/td&gt;\n		&lt;td id=&quot;mah_dist5&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;6&lt;/td&gt;\n		&lt;td id=&quot;mah_dist6&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;7&lt;/td&gt;\n		&lt;td id=&quot;mah_dist7&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;8&lt;/td&gt;\n		&lt;td id=&quot;mah_dist8&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;9&lt;/td&gt;\n		&lt;td id=&quot;mah_dist9&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;10&lt;/td&gt;\n		&lt;td id=&quot;mah_dist10&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;11&lt;/td&gt;\n		&lt;td id=&quot;mah_dist11&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;12&lt;/td&gt;\n		&lt;td id=&quot;mah_dist12&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;13&lt;/td&gt;\n		&lt;td id=&quot;mah_dist13&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;14&lt;/td&gt;\n		&lt;td id=&quot;mah_dist14&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n	&lt;tr&gt;\n		&lt;td&gt;15&amp;nbsp;(full)&lt;/td&gt;\n		&lt;td id=&quot;mah_dist15&quot;&gt;&amp;nbsp;&lt;/td&gt;\n	&lt;/tr&gt;\n&lt;/table&gt;\n&lt;/html&gt;\nNote: When Moon Avoid rejects an Observation, its Plan will not be re-checked for observability until the next night. The ~Moon-Avoidance Lorentzian was formulated by the [[Berkeley Automated Imaging Telescope (BAIT)|http://astro.berkeley.edu/bait/public_html/]] team.\n&lt;script&gt;\nmah_calc();\n&lt;/script&gt;\n</div>
<div tiddler="Multiple Objects (Plan)" modifier="Bob Denny" modified="200611012325" created="200609252332" tags="Observing UserContent">&lt;&lt;slider &quot;&quot; &quot;Run Plan Help&quot; Help &quot;Helpful information&quot;&gt;&gt;\n\n&lt;&lt;RemoteContent &quot;/ac/aacqplan.asp&quot;&gt;&gt;</div>
<div tiddler="My Documents Help" modifier="Bob Denny" modified="200610241322" created="200609270051" tags="Help UserContent hideUser">\nTo download a file, right-click on its link and select //Save link as// or //Save target as//. Binary files like FITS images and zip files can be downloaded by just clicking on the link, but other files like images and text files will just appear in a new browser window. The table may be sorted by clicking on a column header. Clicking again will sort it in reverse. If uploading is allowed here, and you have upload privileges, the upload controls will be visible above the directory listing.\n\n@@For multiple operations on files, we recommend you use our File Transfer Protocol server.@@ See [[Using FTP]].</div>
<div tiddler="Observing" modifier="Bob Denny" modified="200611302139" created="200611302139" tags="">''Tag'': Items which directly relate to observing. Always tagged as UserContent as well.</div>
<div tiddler="Observing Plans" modifier="Bob Denny" modified="201011221636" created="200609292134" tags="UserContent hideLocalUser">We suggest [[using FTP|Using FTP]]. &lt;&lt;RemoteContent '/plans/&lt;%= User.username %&gt;/aindex.asp' Refresh 'Refresh the file list'&gt;&gt;</div>
<div tiddler="One-Time Flat Field Run" modifier="Bob Denny" modified="201406212000" created="200804041734" tags="Observing UserContent">&lt;% if(!screenFlats) { %&gt;&lt;&lt;slider &quot;&quot; &quot;Sky Flats Help&quot; &quot;Help for Sky Flats&quot; &quot;Helpful information&quot;&gt;&gt;\n&lt;% } %&gt;\nThis item allows you to do a one-time flat field run per your specifications. Use this for special situations where you can't use the standard flat sets.\n\nThis will start immediately&lt;% if(!screenFlats) { %&gt;, then sit waiting until the next dusk or dawn, whichever comes first&lt;% } else { %&gt; and use the light panel/screen to acquire the flats. If needed, the dome/roof will be closed while this runs, and if it was open it will be re-opened afterward&lt;% } %&gt;.\n&lt;html&gt;&lt;form id=&quot;OFlatPlanForm&quot;&gt;\n	&lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0&quot;&gt;\n		&lt;tr&gt;\n			&lt;th align=&quot;left&quot;&gt;Use&lt;/th&gt;\n			&lt;th align=&quot;left&quot;&gt;Count&lt;/th&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;th align=&quot;left&quot;&gt;Filter&lt;/th&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;th align=&quot;left&quot;&gt;Binning&lt;/th&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;th align=&quot;left&quot;&gt;Sky PA&lt;/th&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow1&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse1&quot; id=&quot;OFlatUse1&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount1&quot; id=&quot;OFlatCount1&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter1&quot; id=&quot;OFlatFilter1&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning1&quot; id=&quot;OFlatBinning1&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA1&quot; id=&quot;OFlatPA1&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow2&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse2&quot; id=&quot;OFlatUse2&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount2&quot; id=&quot;OFlatCount2&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter2&quot; id=&quot;OFlatFilter2&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning2&quot; id=&quot;OFlatBinning2&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA2&quot; id=&quot;OFlatPA2&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow3&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse3&quot; id=&quot;OFlatUse3&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount3&quot; id=&quot;OFlatCount3&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter3&quot; id=&quot;OFlatFilter3&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning3&quot; id=&quot;OFlatBinning3&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA3&quot; id=&quot;OFlatPA3&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow4&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse4&quot; id=&quot;OFlatUse4&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount4&quot; id=&quot;OFlatCount4&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter4&quot; id=&quot;OFlatFilter4&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning4&quot; id=&quot;OFlatBinning4&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA4&quot; id=&quot;OFlatPA4&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow5&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse5&quot; id=&quot;OFlatUse5&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount5&quot; id=&quot;OFlatCount5&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter5&quot; id=&quot;OFlatFilter5&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning5&quot; id=&quot;OFlatBinning5&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA5&quot; id=&quot;OFlatPA5&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow6&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse6&quot; id=&quot;OFlatUse6&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount6&quot; id=&quot;OFlatCount6&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter6&quot; id=&quot;OFlatFilter6&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning6&quot; id=&quot;OFlatBinning6&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA6&quot; id=&quot;OFlatPA6&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow7&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse7&quot; id=&quot;OFlatUse7&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount7&quot; id=&quot;OFlatCount7&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter7&quot; id=&quot;OFlatFilter7&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning7&quot; id=&quot;OFlatBinning7&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA7&quot; id=&quot;OFlatPA7&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow8&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse8&quot; id=&quot;OFlatUse8&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount8&quot; id=&quot;OFlatCount8&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter8&quot; id=&quot;OFlatFilter8&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning8&quot; id=&quot;OFlatBinning8&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA8&quot; id=&quot;OFlatPA8&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow9&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse9&quot; id=&quot;OFlatUse9&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount9&quot; id=&quot;OFlatCount9&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter9&quot; id=&quot;OFlatFilter9&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning9&quot; id=&quot;OFlatBinning9&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA9&quot; id=&quot;OFlatPA9&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow10&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse10&quot; id=&quot;OFlatUse10&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount10&quot; id=&quot;OFlatCount10&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter10&quot; id=&quot;OFlatFilter10&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning10&quot; id=&quot;OFlatBinning10&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA10&quot; id=&quot;OFlatPA10&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow11&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse11&quot; id=&quot;OFlatUse11&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount11&quot; id=&quot;OFlatCount11&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter11&quot; id=&quot;OFlatFilter11&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning11&quot; id=&quot;OFlatBinning11&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA11&quot; id=&quot;OFlatPA11&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow12&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse12&quot; id=&quot;OFlatUse12&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount12&quot; id=&quot;OFlatCount12&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter12&quot; id=&quot;OFlatFilter12&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning12&quot; id=&quot;OFlatBinning12&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA12&quot; id=&quot;OFlatPA12&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow13&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse13&quot; id=&quot;OFlatUse13&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount13&quot; id=&quot;OFlatCount13&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter13&quot; id=&quot;OFlatFilter13&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning13&quot; id=&quot;OFlatBinning13&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA13&quot; id=&quot;OFlatPA13&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow14&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse14&quot; id=&quot;OFlatUse14&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount14&quot; id=&quot;OFlatCount14&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter14&quot; id=&quot;OFlatFilter14&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning14&quot; id=&quot;OFlatBinning14&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA14&quot; id=&quot;OFlatPA14&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow15&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse15&quot; id=&quot;OFlatUse15&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount15&quot; id=&quot;OFlatCount15&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter15&quot; id=&quot;OFlatFilter15&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning15&quot; id=&quot;OFlatBinning15&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA15&quot; id=&quot;OFlatPA15&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;OFlatRow16&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;OFlatUse16&quot; id=&quot;OFlatUse16&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatCount16&quot; id=&quot;OFlatCount16&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatFilter16&quot; id=&quot;OFlatFilter16&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;OFlatBinning16&quot; id=&quot;OFlatBinning16&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;OFlatPA16&quot; id=&quot;OFlatPA16&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr&gt;\n			&lt;td colspan=&quot;5&quot;&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;button&quot; title=&quot;Click to add another row&quot; onclick=&quot;DC3.Lib.expandoAddRow('OFlat');&quot;&gt;More&lt;/a&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n	&lt;/table&gt;\n&lt;/form&gt;&lt;/html&gt;&lt;&lt;PersistentForm&gt;&gt;&lt;&lt;PostForm &quot;FlatPlanForm&quot; &quot;/ac/aacqflat.asp&quot; &quot;Acquire Flat Fields&quot; &quot;Starts the flat field acquisition process&quot;&gt;&gt;&lt;&lt;ValidateForm &quot;&quot; &quot;postit&quot;&gt;&gt;\n&lt;script&gt;DC3.Lib.expandoInitializeForm('OFlat');&lt;/script&gt;\n</div>
<div tiddler="Open or Close" modifier="Bob Denny" modified="200611282159" created="200609252337" tags="Control UserContent">&lt;script&gt;\nif(&quot;&lt;%= User.IsAdministrator %&gt;&quot; == &quot;True&quot;) alert('admin');\n&lt;/script&gt;\nOpen [[System Status]] and use the &quot;Shutter&quot; and &quot;Dome&quot; labels (which are links) to control the dome. You can open and close the shutter, as well as control slaving and home or park the dome. Hover the mouse over the labels to see what clicking will do, given the current state of the dome.\n</div>
<div tiddler="OpenNewItemAtTop" modifier="Bob Denny" modified="200610271421" created="200610271421" tags="Help UserContent hideUser">Turn this on to have all newly opened items appear at the top. Otherwise they are opened 'nearby' the item from which the new item was opened.</div>
<div tiddler="OptionsPanel" modifier="Bob Denny" modified="200611061736" created="200611060447" tags="">Click the labels for help\n[[Author Name]]: &lt;&lt;br&gt;&gt;&lt;&lt;option txtUserName&gt;&gt;\n[[Username|Login Information]]: &lt;&lt;br&gt;&gt;&lt;&lt;option txtUploadUserName&gt;&gt;\n[[Password|Login Information]]: &lt;&lt;br&gt;&gt;&lt;&lt;option pasUploadPassword&gt;&gt;\n&lt;&lt;option chkRegExpSearch&gt;&gt; RegExpSearch\n&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; CaseSensitiveSearch\n&lt;&lt;option chkAnimate&gt;&gt; EnableAnimations\n----\nAdvancedOptions\nPluginManager</div>
<div tiddler="PersistentFormPlugin" modifier="Bob Denny" modified="201109120013" created="200609211837" tags="systemConfig macro plugin">/***\n|''Name:''|PersistentFormPlugin|\n|''Description:''|Save HTML form states in cookies|\n|''Date:''|Oct 18, 2006|\n|''Source:''|http://solo.dc3.com/tw/index.html#PersistentFormPlugin|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.1.0|\n|''~CoreVersion:''|2.0.11, 2.1.0|\n|''Browser:''|Firefox 1.5; Internet Explorer 6.0; Safari|\nThis macro adds field persistence to HTML forms embedded in tiddlers, and an optional reset button to clear the form and erase any persisted field values. See the [[PostFormPlugin]]. Persistence is done using the same scheme that ~TiddlyWiki's options use, cookies. \n!Usage\nIf you have only one HTML form in your tiddler and don't need a reset button, simply include the macro call {{{&lt;&lt;PersistentForm&gt;&gt;}}}. \n\nIf you want to include a reset button, which will clear the form and the saved values //for that form only//, specify the third parameter, which is the label for the button and the fourth parameter, which is its tooltip, for example:\n\n{{{&lt;&lt;PersistentForm &quot;formId&quot; &quot;1&quot; &quot;Forget&quot; &quot;Reset and forget saved form values&quot;&gt;&gt;}}}\n\nThis will cause a button labeled &quot;Forget&quot; to appear at the macro invocation location, apply to form &quot;formId, and it will keep the saved form values for 1 day.\n!!Parameters\n# (optional) ID of form to be persisted (default is first or only form in tiddler)\n# (optional) lifetime of persistence cookies, days (default = 7)\n# (optional) Label of reset button for the form (default = no reset button)\n# (optional) Tooltip for reset button (if specified in param 3)\n!Notes\nThe value names are //not// uniquified to each form, //on purpose//. Thus, it is possible for a TiddlyWiki with several forms to share the same information. When someone fills out one of those forms, the same info will appear in the other forms as long as the form field names in both are the same. You are responsible for choosing form field names that are unique to each form if you want this isolation.\n\nA single cookie is baked by this plugin. It is named {{{pfc}}} and has a value that is the concatenation of all persisted form field name/value pairs as {{{name:value&amp;name:value...}}}\n!!Example\nChange some of the fields, close and reopen this tiddler. See that the fields are restored. Then click the forget button, see the form clear. Close and reopen this tiddler again and see that the form is still cleared.\n&lt;html&gt;&lt;form id=&quot;myForm&quot;&gt;\nText: &lt;input type=&quot;text&quot; name = &quot;txt&quot; width=&quot;40&quot; value=&quot;&quot;&gt;&lt;/input&gt;\n&lt;input type=&quot;checkbox&quot; name=&quot;ckbox&quot;&gt;Check this!&lt;/input&gt;&lt;br&gt;\nPassword: &lt;input type=&quot;password&quot; name=&quot;pass&quot; value=&quot;&quot;&gt;&lt;/input&gt;&lt;br&gt;\nSingle select:&amp;nbsp;&lt;select name=&quot;sel&quot;&gt;\n&lt;option value=&quot;a&quot;&gt;Type A&lt;/option&gt;\n&lt;option value=&quot;b&quot;&gt;Type B&lt;/option&gt;\n&lt;option value=&quot;c&quot;&gt;Type C&lt;/option&gt;\n&lt;/select&gt;&amp;nbsp;&amp;nbsp;Multiple select:&amp;nbsp;\n&lt;select multiple size=&quot;3&quot; name=&quot;selmult&quot;&gt;\n&lt;option value=&quot;1&quot;&gt;Type 1&lt;/option&gt;\n&lt;option value=&quot;2&quot;&gt;Type 2&lt;/option&gt;\n&lt;option value=&quot;3&quot;&gt;Type 3&lt;/option&gt;\n&lt;/select&gt;&lt;br&gt;\n&lt;input type=&quot;radio&quot; name=&quot;rbtn&quot; value=&quot;rb1&quot;&gt;Button 1&lt;/input&gt;&lt;br&gt;\n&lt;input type=&quot;radio&quot; name=&quot;rbtn&quot; value=&quot;rb2&quot;&gt;Button 2&lt;/input&gt;&lt;br&gt;\n&lt;input type=&quot;radio&quot; name=&quot;rbtn&quot; value=&quot;rb3&quot;&gt;Button 3&lt;/input&gt;&lt;br&gt;\n&lt;textarea name=bigtext rows=&quot;5&quot; cols=&quot;10&quot;&gt;&lt;/textarea&gt;&lt;br&gt;\n&lt;/form&gt;&lt;/html&gt;&lt;&lt;PersistentForm &quot;myForm&quot; &quot;1&quot; &quot;Forget&quot; &quot;Forget saved values&quot;&gt;&gt;\n!!Revision History\n&lt;&lt;&lt;\n''2006.09.20 [1.0.1]'' Initial creation\n''2006.09.29 [1.0.2]'' Unsupported elements just skipped, allows submit etc. to be present.\n''2006.09.29 [1.0.3]'' Optional param form id to support multiple forms. Optional param to set expiry, now defaults to 7 days. New reset() method to delete all cookies for the target form.\n''2006.10.03 [1.0.4]'' Fix initialization of select-multiple fields, add optional button for resetting form and forgetting cookies, validate on TW 2.1.0, improve doc.\n''2006.10.18 [1.1.0]'' Embed all form data into a single cookie.\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\nversion.extensions.PersistentForm = {\n major: 1, minor: 1, revision: 0,\n date: new Date(2006, 10, 3), \n type: 'macro',\n source: &quot;http://solo.dc3.com/tw/index.html#PersistentFormPlugin&quot;\n};\n\nconfig.macros.PersistentForm = \n{\n    expiry: 7,                                                      // Expiry, days (used in onChange())\n    \n    persistDict: { },                                               // Persistence data cache\n    \n    //\n    // Turn PersistentForm cookie data into an associative array\n    //\n    loadPersistDict: function()\n    {\n        // Find pfc cookie\n        var cookies = document.cookie.split(&quot;;&quot;);\n        for(var i = 0; i &lt; cookies.length; i++)\n        {\n            var p = cookies[i].indexOf(&quot;=&quot;);\n            if(p != -1)\n            {\n                var name = cookies[i].substr(0, p).trim();\n                if(name.substr(0, 3) == &quot;pfc&quot;)                      // Found the 'pfc' cookie\n                {\n                    var value = cookies[i].substr(p + 1).trim();    // This has the form contents\n                    var fc = value.split(&quot;&amp;&quot;);\n                    for(i = 0; i &lt; fc.length; i++)\n                    {\n                        p = fc[i].indexOf(&quot;:&quot;);\n                        name = fc[i].substr(0, p).trim();\n                        if(name !== &quot;&quot;) {\n                            value = fc[i].substr(p + 1).trim();\n                            this.persistDict[name] = value;\n                        }\n                    }\n                    return;\n                }\n            }\n        }\n    },\n    \n    storePersistDict: function()\n    {\n        var c = &quot;pfc=&quot;;\n        var empty = true;\n        for(var name in this.persistDict) \n            c += name + &quot;:&quot; + this.persistDict[name] + &quot;&amp;&quot;;\n        if(c.length &gt; 4) {\n            c = c.substr(0, c.length - 1);                          // Remove trailing '&amp;'\n            empty = false;\n        }\n        c += &quot;; expires=&quot; +\n                new Date(new Date().getTime() + (86400000 * this.expiry)).toGMTString() +\n                &quot;; path=/&quot;;\n        document.cookie = c;\n        if(empty)                                           // Don't save empty cookie\n            document.cookie = &quot;pfc=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/&quot;;\n    },\n    \n    getTargetForm: function(formId, place)\n    {\n        var forms = place.getElementsByTagName(&quot;form&quot;);\n        if(forms.length === 0) {\n            displayMessage(&quot;PersistentForm: No form in tiddler!&quot;);\n            return null;\n        }\n        var form = null;                                            // Find the target form\n        if(formId === &quot;&quot;) {\n            form = forms[0];\n        } else {\n            for(var i = 0; i &lt; forms.length; i++) {\n                if(forms[i].id == formId) {\n                    form = forms[i];\n                    break;\n                }\n            }\n        }\n        if(form === null) {\n            displayMessage(&quot;PersistentForm: No form '&quot; + formId + &quot;' in tiddler.&quot;);\n            return null;\n        }\n        return form;\n    },\n    \n    handler: function(place, macroName, params, wikifier, paramString, tiddler) \n    {\n        var formId = params[0] ? params[0] : &quot;&quot;;                    // Empty means 1st/only form\n        this.expiry = params[1] ? params[1] : 7;                    // Default to 7 day\n        var label = params[2] ? params[2] : &quot;&quot;;                     // Default to no forget button\n        var prompt = params[3] ? params[3] : &quot;&quot;;                    // Empty tooltip\n        \n        var form = this.getTargetForm(formId, place);\n        if(form === null) return;\n        this.loadPersistDict();\n        // Enumerate form elements and set values as possible\n        var nElem = form.elements.length;\n        for(var i = 0; i &lt; nElem; i++) {\n            var elem = form.elements[i];\n            var elemPersistVal = this.persistDict ? this.persistDict[elem.name] : &quot;&quot;;   // Handle no cookie case\n            switch(elem.type) {\n                case &quot;text&quot;:\n                case &quot;password&quot;:\n                case &quot;textarea&quot;:\n                    if(elemPersistVal) elem.value = unescape(elemPersistVal);\n                    elem.onkeyup = this.onChange;\n                    break;\n                case &quot;select-one&quot;:\n                    if(elemPersistVal) elem.value = unescape(elemPersistVal);\n                    elem.onchange = this.onChange;\n                    break;\n                case &quot;radio&quot;:\n                    elem.checked = (elemPersistVal == elem.value);\n                    elem.onclick = this.onChange;\n                    break;\n                case &quot;checkbox&quot;:\n                    if(elemPersistVal) elem.checked = (elemPersistVal == &quot;true&quot;);\n                    elem.onclick = this.onChange;\n                    break;\n                case &quot;select-multiple&quot;:\n                    if(elemPersistVal) {\n                        var sels = elemPersistVal.split(&quot;,&quot;);       // Array of selected option #s\n                        for(var j = 0; j &lt; elem.options.length; j++)\n                            elem.options[j].selected = sels.contains(j.toString());\n                    }\n                    elem.onchange = this.onChange;\n                    break;\n                default:                                            // Others unsupported \n                    //displayMessage(&quot;PersistentForm: &quot; + elem.type + &quot; form elements not supported.&quot;);\n                    break;                                          // Keep going\n            }\n        }\n        \n        if(label !== &quot;&quot;)\n            createTiddlyButton(place, label, prompt, \n                            function() {\n                                config.macros.PersistentForm.reset(place, form);\n                                return false;\n                            } );\n    },\n    \n    onChange: function(e)\n    {\n        if (!e) e = window.event;           // Ugh!\n        var elem = e.target;\n        if(!elem) elem = e.srcElement;      // Ugh Ugh!\n        var val;\n        switch(elem.type)\n        {\n            case &quot;text&quot;:\n            case &quot;password&quot;:\n            case &quot;select-one&quot;:\n            case &quot;radio&quot;:\n            case &quot;textarea&quot;:\n                val = escape(elem.value);\n                break;\n            case &quot;checkbox&quot;:\n                val = elem.checked ? &quot;true&quot; : &quot;false&quot;;\n                break;\n            case &quot;select-multiple&quot;:                                 // &quot;i,l,n&quot; #s of sel'd items\n                var sels = &quot;&quot;;\n                for(var j = 0; j &lt; elem.options.length; j++) {\n                    if(elem.options[j].selected)                    // Encode only selected (may be none!)\n                        sels += j + &quot;,&quot;;\n                }\n                if(sels) sels = sels.substr(0, sels.length -1);     // Remove trailing comma\n                val = sels;\n                break;\n        }\n        config.macros.PersistentForm.persistDict[elem.name] = val;\n        config.macros.PersistentForm.storePersistDict();\n    },\n    \n    //\n    // Delete cookies for given form/owner, clear the form\n    //\n    reset: function(place, form)\n    {\n        if(form === null) return;\n        var nElem = form.elements.length;\n        for(var i = 0; i &lt; nElem; i++)\n            delete this.persistDict[form.elements[i].name];\n        this.storePersistDict();\n        form.reset();\n    }\n};\n//}}}\n</div>
<div tiddler="PinSystemStatusPlugin" modifier="Bob Denny" modified="200611270349" created="200611270235" tags="systemConfig plugin">/***\n|''Name:''|PinSystemStatusPlugin|\n|''Description:''|Force System Status tiddler to stay at top|\n|''Date:''|Nov 26, 2006|\n|''Author:''|Bob Denny|\n|''License:''|//none//|\n|''Version:''|1.0.1|\n|''~CoreVersion:''|2.1.3|\n!!Revision History\n&lt;&lt;&lt;\n''2006.11.26 [1.0.1]'' Bob Denny - Initial edit\n&lt;&lt;&lt;\n!! Hijack Code\n***/\n//{{{\nif(version.major == 2 &amp;&amp; version.minor == 1)\n{\n Story.prototype.displayTiddler = function(srcElement,title,template,animate,slowly)\n {\n var place = document.getElementById(this.container);\n var tiddlerElem = document.getElementById(this.idPrefix + title);\n if(tiddlerElem)\n this.refreshTiddler(title,template);\n else\n {\n var before;\n if(title == &quot;System Status&quot;) {\n before = place.firstChild;\n } else {\n before = this.positionTiddler(srcElement);\n if(before &amp;&amp; before.id == this.idPrefix + &quot;System Status&quot;)\n before = before.nextSibling;\n }\n tiddlerElem = this.createTiddler(place,before,title,template);\n }\n if(srcElement &amp;&amp; typeof srcElement !== &quot;string&quot;)\n {\n if(anim &amp;&amp; config.options.chkAnimate &amp;&amp; (animate == undefined || animate === true))\n anim.startAnimating(new Cascade(title,srcElement,tiddlerElem,slowly),new Scroller(tiddlerElem,slowly));\n else\n window.scrollTo(0,ensureVisible(tiddlerElem));\n }\n };\n}\nelse\n alert(&quot;PinSystemStaturPlugin works only with TiddlyWiki 2.1.x&quot;);\n//}}}</div>
<div tiddler="PostFormPlugin" modifier="Bob Denny" modified="201109011632" created="200609201643" tags="systemConfig plugin macro">/***\n|''Name:''|PostFormPlugin|\n|''Description:''|Post from form, wikify response|\n|''Date:''|Sep 1, 2011|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.3.1|\n|''~CoreVersion:''|2.1.3|\n|''Require:''|[[DC3.Ajax|http://solo.dc3.com/tw/index.html#DC3.Ajax]] 1.0.5+, [[DC3.LightBox|http://solo.dc3.com/tw/#LightBoxPlugin]] (optional)|\n!!Description\nThis macro replaces the normal submit button for an HTML form contained in a tiddler. More than one form may appear in the tiddler, and this macro may be invoked on any of them. In addition, multiple invocations of this macro may appear in a tiddler, allowing you to provide posting from more than one form in a tiddler. \n\nThe macro invocation is replaced by wikified/styled button. The button's label and tooltip can be optionally specified as macro parameters. Clicking this button causes the contents of the form specified by the first (required) parameter to be ~POSTed to the URI that is the second (required) macro parameter. A standard message appears stating that the form data has been posted, then a second message appears when the response is received.\n\nThe macro also supports an optional parameter which causes a &quot;confirm&quot; popup to appear with specified text and one which causes the tiddler to be automatically refreshed following completion of the form post cycle.\n!!Integration with ValidateForm\nIf the ValidateForm macro (see [[ValidateFormPlugin]]) is invoked on the target form, then this macro will automatically call for validation just before posting to the remote server. Only if validation succeeds will the post be made. There is no specific action required of the programmer, PostForm just knows.\n!!Form Search Scope\nThe macro searches for its form within the scope of the macro handler's 'place' parameter. Normally, this is the tiddler viewer area. However, it is possible to include forms within a wikitext object such as a table cell. In this case, only forms within that table cell will be found by the macro (which also needs to be in that same table cell). This has some implications:\n# The form invocation must be within the same scope as the form it is controlling.\n# If only one form appears within a scope it need not be named, and the first parameter (the form name, see below) may be &quot;&quot;.\n!!Usage\nCreate one or more forms in the tiddler, using {{{&lt;html&gt;}}} tags to enclose the form as usual. The form does not need to have {{{action}}} or {{{method}}} attributes, {{{&lt;form&gt;}}} is enough. If you have more than one form in the scope, you must give each one a name, for example, {{{&lt;form name='form1'&gt;}}}. Add form elements (text fields, checkboxes, etc.). each with a name and a value, per HTML. \n\nAt the location you want the post button to appear, invoke the PostForm macro. Remember the invocation must be in the same scope as the form! The macro has several parameters. If you need to include a parameter as a placeholder, use &quot;&quot;:\n\n|!Param|!Description|\n|''1''|The name of the form, or &quot;&quot;. If &quot;&quot; is given, the first form in the scope is posted even though there may be multiple forms in the scope.|\n|''2''|The URI of the remote form processor (typically a PHP, ASP, or CGI page). See the URI Formats section below.|\n|''3''|(optional) The label of the submit button, default &quot;Submit&quot;|\n|''4''|(optional) The tooltip of the submit button, default &quot;Submit form to server&quot;|\n|''5''|(optional) The text for a yes/no &quot;confirm&quot; popup that will be displayed after clicking the submit button and before posting the form to the server, default &quot;&quot; (no popup). Use this for an &quot;Are you sure&quot;, for example.|\n|''6''|(optional) If given and not &quot;false&quot;, the tiddler will be refreshed after the server has responded to the post. This can be very useful when combined with the RefreshTiddlerPlugin!|\n!!URI Formats\nThe second parameter is the URI of the remote form processor. If the ~TiddlyWiki itself is being read via HTTP from that same server and folder, then only the name of the form processor need be given. This approach makes it possible to move the ~TiddlyWiki and its form processors from one place to another on the net, without having to edit the URI parameter(s) of form post buttons. If the ~TiddlyWiki is being read from local disk, then you'll need to give the complete URI to the remote form processor. If you are unsure, just give the complete URI of the form processor.\n!!Security Issues\nYou may encounter security issues when using this plugin. Suppose you are reading the ~TiddlyWiki from one server, yet the ~PostForm macro specifies a form processor on a different server (different domain name). By default, most browsers will reject this cross-site operation. You may be able to override it, but in general this sort of thing is best avoided!\n!!Remote Form Processor\nThe remote form processor (e.g. PHP, ASP, CGI) is expected to return nothing or text with content type text/plain. If any text is returned, you have a choice of displaying it in a [[LightBox|http://solo.dc3.com/tw/#LightBoxPlugin]] alert or having it wikified and inserted //temporarily// at the end of the tiddler. To display the response in a ~LightBox alert, begin the response text with {{{[lba xx]}}} where xx is the icon name (ok, info, error, question, or warning). For appended wikitext, if the tiddler is closed and reopened, the response text will be gone. If the form is submitted more than once without closing the tiddler, multiple responses will be appended to the tiddler display. If the auto-refresh parameter is supplied, the tiddler will be refreshed after the post and any response text will be discarded.\n!!Examples\nHere's a simple form which is set to post to a mythical PHP page.\n{{{\n&lt;html&gt;&lt;form&gt;\n&lt;input type=&quot;text&quot; name = &quot;txt&quot; width=&quot;40&quot; value=&quot;Yo Mama!&quot;&gt;&lt;/input&gt;\n&lt;input type=&quot;checkbox&quot; name=&quot;ckbox&quot; checked&gt;Check this!&lt;/input&gt;\n&lt;/form&gt;&lt;/html&gt;&lt;&lt;PostForm &quot;&quot; &quot;formtest.php&quot;&gt;&gt;\n}}}\n&lt;html&gt;&lt;form&gt;\n&lt;input type=&quot;text&quot; name = &quot;txt&quot; width=&quot;40&quot; value=&quot;Yo Mama!&quot;&gt;&lt;/input&gt;\n&lt;input type=&quot;checkbox&quot; name=&quot;ckbox&quot; checked&gt;Check this!&lt;/input&gt;\n&lt;/form&gt;&lt;/html&gt;&lt;&lt;PostForm &quot;&quot; &quot;formtest.php&quot;&gt;&gt;\n!!Revision History\n&lt;&lt;&lt;\n''2006.09.20 [1.0.1]'' Initial creation\n''2006.09.26 [1.1.1]'' Support multiple forms in a tiddler, ask, auto-refresh, Lint checked. Add documentation.\n''2006.10.03 [1.1.2]'' Validate with TW 2.1.0. No changes needed.\n''2006.10.24 [1.1.3]'' Comment out debugging displayMessage() calls\n''2007.10.15 [1.2.1]'' Add support for displaying response in LightBox\n''2008.04.02 [1.2.2]'' Fix multiple form support. Update version.extensions (cosmetic)\n''2011.08.29 [1.3.1]'' Add integration with new ValidateFormPlugin\n''2011.09.01 [1.3.1]'' Fix &quot;no form&quot; error message (just spotted by luck)\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\nversion.extensions.PostForm = {\n major: 1, minor: 3, revision: 1,\n date: new Date(2011, 8, 29), \n type: 'macro',\n source: &quot;http://solo.dc3.com/tw/index.html#PostFormPlugin&quot;\n};\n\nconfig.macros.PostForm = \n{\n    onComplete: function(text, params) \n    {\n        //displayMessage(&quot;Post completed successfully.&quot;);\n        text = text.replace(/(^\ss*)|(\ss*$)/g, &quot;&quot;); // Trim off l/t junk!\n        if(text) {\n            if(text.search(/\s[lba /) != -1) {      // Pop LB alert\n                var icon = text.replace(/([\ss\sS]*\s[lba )([a-z]+)(\s][\ss\sS]*)/, &quot;$2&quot;);\n                var msg = text.replace(/([\sS\ss]*\s[lba [a-z]+\s])(.*)([\ss\sS]*)/, &quot;$2&quot;);\n                DC3.LightBox.showAlert(icon, msg);\n            } else {\n                wikify(text, params.place);\n            }\n        }\n        if(params.refresh)\n            story.refreshTiddler(params.tiddler.title, null, true);\n    },\n    \n    handler: function(place, macroName, params, wikifier, paramString, tiddler) \n    {\n        var label = params[2] ? params[2] : &quot;Submit&quot;;\n        var prompt = params[3] ? params[3] : &quot;Submit form to server&quot;;\n        var ask = params[4] ? params[4] : &quot;&quot;;\n        var refresh = params[5] ? true : false;\n        var complParams = { \n            place: place,\n            tiddler: tiddler,\n            refresh: refresh\n        };\n        var forms = place.getElementsByTagName(&quot;form&quot;);\n        if(forms.length === 0) {\n            displayMessage(&quot;PostForm: No form in tiddler!&quot;);\n            return;\n        }\n        var form = null;\n        if(forms.length == 1 || params[0] === &quot;&quot;) { // Only 1 or unspecified\n            form = forms[0];                        // First form in the tiddler\n        } else {\n            for(var i = 0; i &lt; forms.length; i++) {\n                if(forms[i].name == params[0]) {\n                    form = forms[i];                // Named form\n                    break;\n                }\n            }\n            if(form === null) {                     // Not found by name\n                displayMessage(&quot;PostForm: No form \s&quot;&quot; + params[0] + &quot;\s&quot;in tiddler!&quot;);\n                return;\n            }\n        }\n        createTiddlyButton(place, label, prompt, \n            function () {\n                if(ask) { if(!confirm(ask)) return false; }\n                if(form.bValidator &amp;&amp; !form.bValidator.validate())\n                    return false;\n                //displayMessage(&quot;Posting data to server...&quot;);\n                DC3.Ajax.postForm(form, params[1], \n                    config.macros.PostForm.onComplete, complParams);\n                return false;\n            } );\n    }\n};\n//}}}\n</div>
<div tiddler="RSS Feed" modifier="Bob Denny" modified="200611020247" created="200611020207" tags="">&lt;html&gt;&lt;a href=&quot;&lt;%= feedUri %&gt;&quot;&gt;&lt;img src=&quot;/im/feed-icon-28x28.png&quot; border=&quot;0&quot; title=&quot;Click to subscribe&quot; width=&quot;28&quot; height=&quot;28&quot; align=&quot;right&quot;&gt;&lt;/a&gt;&lt;/html&gt;You can subscribe to an [[RSS feed|&lt;%= feedUri %&gt;]] of observing events from &lt;%= Prefs.SiteName %&gt;. The feed's &quot;articles&quot; are just one-liners describing the event, such as &quot;Joe Astronomer started a run ...&quot;. \n\nNote that the __time of the event is the time of the article__, no explicit time is included in the articles themselves. This avoids having UTC times to deal with. The reader takes care of converting the article times into //your// local time.</div>
<div tiddler="RefreshIFramePlugin" modifier="Bob Denny" modified="200610060705" created="200609230001" tags="systemConfig plugin macro">/***\n|''Name:''|RefreshIFramePlugin|\n|''Description:''|Refresh an entire tiddler with optional periodic re-refresh|\n|''Date:''|Oct 6, 2006|\n|''Source:''|http://solo.dc3.com/tw/index.html#RefreshIFramePlugin|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.0.4|\n|''~CoreVersion:''|2.0.11, 2.1.0|\n|''Browser:''|Firefox 1.5; Internet Explorer 6.0; Safari|\n|''Require:''|CheckboxPlugin (http://www.TiddlyTools.com/#CheckboxPlugin)|\n!Description\nThis macro provides a tiddler with an &lt;iframe&gt; refresh control. This permits refreshing just the iframe, avoiding flashing due to refreshing the entire tiddler. Normally, a refresh button appears at the location of the macro invocation. Clicking this button causes the contents of the tiddler to be refreshed. Optionally, a checkbox may also be displayed with which the user can enable and disable automatic periodic refresh of the tiddler at an interval specified by the third parameter. Finally, for special applications, a fourth parameter may be given, and if &quot;true&quot; both the button and the checkbox will be hidden, and the tiddler will simply refresh periodically at the interval given by the third parameter.\n\n@@There is a //lot// you can do with iframes in a tiddler@@. For more information see my ~TiddkyWiki [[Magic With &lt;iframe&gt;|http://solo.dc3.com/tw/HandlingIframes.html]]. \n!Usage\nThis plugin supports tiddlers with a single &lt;iframe&gt;, thus it assiciates itself with the first/only &lt;iframe&gt; in a tiddler. To add refreshing, simply invoke the macro (with optional parameters as desired, see below) wherever you want the button and optional checkbox to appear.\n\nThere are four optional parameters:\n|!Parameter|!Description|\n|''1''|(optional) Button label, default &quot;Refresh&quot;|\n|''2''|(optional) Button tooltip, default &quot;Refresh the remote frame&quot;|\n|''3''|(optional) Periodic refresh interval, sec., default 0 (no periodic refresh checkbox)|\n|''4''|(optional) If present and &quot;true&quot; and parameter 3 &gt; 0 all controls will be hidden and the tiddler will refresh periodically whenever it is visible.|\n!!Revision History\n&lt;&lt;&lt;\n''2006.09.22 [1.0.1]'' Initial creation, from RefreshTiddler\n''2006.09.29 [1.0.2]'' Refresh checkbox cookie names different from RefreshTiddler.\n''2006.10.03 [1.0.3]'' Add parameter to hide button and checkbox while doing periodic refresh. Expand documentation, lint check, validate with ~TiddlyWiki 2.1.0\n''2006.10.03 [1.0.4]'' Handle race condition on IE - initial refresh lost. Force refresh at end of handler(). Disable container refreshing for checkbox, see CheckboxPlugin.\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\nversion.extensions.RefreshIFrame = {\n major: 1, minor: 0, revision: 4,\n date: new Date(2006, 10, 6), \n type: 'macro',\n source: &quot;#RefreshIFramePlugin&quot;\n};\n\nconfig.macros.RefreshIFrame = \n{\n states: { }, // Associative array of refresh states indexed by tiddler name\n \n handler: function(place, macroName, params, wikifier, paramString, tiddler)\n {\n var tidTitle = tiddler.title; // Shortcut\n if(!this.states[tidTitle]) this.states[tidTitle] = { // Array of state objects for refreshed tiddlers\n iframe: null,\n butLabel: &quot;&quot;,\n butTooltip: &quot;&quot;,\n refInterval: 0,\n doRefresh: false,\n initPerRef: false,\n timerId: 0,\n chkBox: null\n };\n var state = this.states[tidTitle]; // Shortcut\n var iframes = place.getElementsByTagName(&quot;iframe&quot;);\n if(iframes.length === 0) {\n displayMessage(&quot;PostForm: No iframe in tiddler!&quot;);\n return;\n }\n state.iframe = iframes[0]; // Only 1st iframe\n state.butLabel = params[0] ? params[0] : &quot;Refresh&quot;; // Make these react to edits\n state.butTooltip = params[1] ? params[1] : &quot;Refresh the remote frame&quot;;\n state.refInterval = params[2] ? params[2] : 0; // 0 = no periodic refresh checkbox\n var hidden = params[3] &amp;&amp; params[3].toLowerCase() == &quot;true&quot; &amp;&amp; state.refInterval &gt; 0;\n if(!hidden) { // Unless want hidden\n var btn = createTiddlyButton(place, state.butLabel, state.butTooltip, this.onButClick);\n btn.name = tidTitle; // Set button name to tiddler name (see onButClick())\n if(state.refInterval &gt; 0) // If periodic refresh wanted\n {\n wikify(&quot; [ =chkPerRefIfr&quot; + tiddler.created.convertToYYYYMMDDHHMM() + // Uniquify chkbox ID\n &quot;{config.macros.RefreshIFrame.states[\s&quot;&quot; + tidTitle + &quot;\s&quot;].chkBox = this; &quot; + \n &quot;this.refresh.container=false;}&quot; +\n &quot;{config.macros.RefreshIFrame.onChkClick(\s&quot;&quot; + tidTitle + &quot;\s&quot;);}] &quot; + \n state.butLabel + &quot; every &quot; + state.refInterval + &quot; seconds&quot;, place);\n state.timerId = 0;\n if(!state.initPerRef) this.onChkClick(tidTitle); // Simulate checkbox click (state already from cookie)\n }\n } else if(state.refInterval &gt; 0 &amp;&amp; !state.initPerRef) { // Hidden, if per ref and not started, start it\n if(state.timerId) clearTimeout(state.timerId);\n this.startRefresh(tidTitle); \n state.initPerRef = true;\n }\n state.iframe.src = state.iframe.src; // Refresh!\n },\n \n onButClick: function(e) \n {\n if(!e) e = window.event;\n var tidTitle = resolveTarget(e).name; // Name is the tiddler name!\n //displayMessage(&quot;but &quot; + tidTitle);\n var iframe = config.macros.RefreshIFrame.states[tidTitle].iframe;\n iframe.src = iframe.src; // Refresh!\n return false;\n },\n \n onChkClick: function(tidTitle) \n {\n var state = this.states[tidTitle];\n if(state.chkBox.checked) {\n if(state.timerId) clearTimeout(state.timerId);\n this.startRefresh(tidTitle); \n } else { \n state.doRefresh = false;\n }\n state.initPerRef = true;\n },\n \n startRefresh: function(tidTitle) \n {\n var state = this.states[tidTitle];\n state.doRefresh = true;\n //displayMessage(&quot;st &quot; + tidTitle + &quot; &quot; + state.refInterval);\n state.timerId = setTimeout(&quot;config.macros.RefreshIFrame.reRefresh(\s&quot;&quot; + \n tidTitle + &quot;\s&quot;)&quot;, state.refInterval * 1000);\n },\n \n reRefresh: function(tidTitle)\n {\n var state = this.states[tidTitle];\n state.timerId = 0;\n if(!state.doRefresh) return;\n // Kill re-refresh cycle if tiddler closed or edited\n var tidElem = document.getElementById(story.idPrefix + tidTitle); // DON'T GET CUTE! THIS IS CORRECT!\n //**BUGBUG** Hardwired to EditTemplate!\n if(!tidElem || tidElem.attributes['template'].value == &quot;EditTemplate&quot;) // Prevent hidden or editing\n {\n state.initPerRef = false;\n return;\n }\n //displayMessage(&quot;re &quot; + tidTitle + &quot; &quot; + state.refInterval);\n state.iframe.src = state.iframe.src; // Refresh!\n state.timerId = setTimeout(&quot;config.macros.RefreshIFrame.reRefresh(\s&quot;&quot; + \n tidTitle + &quot;\s&quot;)&quot;, state.refInterval * 1000);\n }\n};\n//}}}\n</div>
<div tiddler="RefreshTiddlerPlugin" modifier="Bob Denny" modified="201107060013" created="200609122221" tags="systemConfig macro plugin">/***\n|''Name:''|RefreshTiddlerPlugin|\n|''Description:''|Refresh an entire tiddler with optional periodic re-refresh|\n|''Date:''|July 5, 2011|\n|''Source:''|http://solo.dc3.com/tw/index.html#RefreshTiddlerPlugin|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.1.1|\n|''~CoreVersion:''|2.0.11, 2.1.0|\n|''Require:''|[[CheckboxPlugin]]|\n\n!Usage\nThis macro provides a tiddler with refresh control. At a minimum, a refresh button appears at the location of the macro invocation. Clicking this button causes the contents of the tiddler to be refreshed. Optionally, a checkbox may also be displayed with which the user can enable and disable automatic periodic refresh of  the tiddler at a specified interval.\nThere are three optional parameters\n|!Parameter|!Description|\n|''1''|Button label, default &quot;Refresh&quot;|\n|''2''|Button tooltip, default &quot;Refresh this item&quot;|\n|''3''|Periodic refresh interval, sec., default 0 (no periodic refresh checkbox)|\n|''4''|(optional) If present and &quot;true&quot; and parameter 3 &gt; 0 all controls will be hidden and the tiddler will refresh periodically whenever it is visible.|\n\n!Examples\nTypically, an item that needs refreshing is used to display remote dynamic content. This could be some remote text generated by a server side script (ASP, PHP, etc., or a remote image that changes periodically (weather stations often generate these). The techniques for each of these differ:\n\n''Remote Text Generated by Script (PHP, ASP, etc.)''\nThis uses the [[RemoteContentPlugin]] to insert the remote text, which can be wikitext. You do not need the refresh controls of [[RemoteContentPlugin]].\n{{{\n&lt;&lt;RemoteContent &quot;http://foo.bar.com/stuff.php&quot;&gt;&gt;\n&lt;&lt;RefreshTiddlerPlugin Refresh &quot;Refresh the Stuff display&quot;&gt;&gt;\n}}}\nThis will display the wikitext generated by the remote script stuff.php. A button labeled Refresh, with a tooltip of &quot;Refresh the Stuff display&quot; will appear at the bottom of the item.\n\n''Remote Image that Changes Periodically''\nThis plugin is commonly used to display @@remote images which change over time@@, such as weather station outputs. Browser image caching often prevents the image from being refreshed, even though the usual HTTP cache-control protocol is in use. To force bypassing the browser cache for the displayed image, use the [[InlineJavascriptPlugin]] capability and construct the wikitext in Javascript so that the image URL has a query string which is a large unique number:\n{{{\n&lt;script&gt;\n    return &quot;[img[http://myweather.org/img/curweather.jpg?&quot;\n        + new Date().getTime() + &quot;]]&quot;;\n&lt;/script&gt;\nUpdated every 5 minutes\n&lt;&lt;RefreshTiddler xx 'xx' 300 true&gt;&gt;\n}}}\nThis will display the current version of the image curweather.jpg, and refresh every 5 minutes. No refresh button or checkbox will appear, so a text message informing the user of the 5 minute refresh interval was inserted below the image.\n\n!Revision History\n&lt;&lt;&lt;\n\n''2006.09.13 [1.0.1]'' Initial creation, several days\n''2006.09.22 [1.0.2]'' Make periodic refresh checkbox optional\n''2006.09.29 [1.0.3]'' Refresh checkbox cookie names different from RefreshIframe.\n''2006.10.03 [1.0.4]'' Lint check, validate on TW 2.1.0.\n''2011.07.05 [1.1.1]'' Add 4th parameter for no checkbox but periodic refresh (like [[RefreshIFramePlugin]]). Change default button text 'tiddler' to 'item'. Add doc on how to display dynamically changing images. Restore code indentation that was destroyed by Internet Exploder.\n&lt;&lt;&lt;\n\n!Code\n***/\n//{{{\nversion.extensions.RefreshTiddler = {\n major: 1, minor: 1, revision: 1,\n date: new Date(2011, 7, 5), \n type: 'macro',\n source: &quot;#RefreshTiddlerPlugin&quot;\n};\n\nconfig.macros.RefreshTiddler = \n{\n	states: { },													// Associative array of refresh states indexed by tiddler name\n    \n	handler: function(place, macroName, params, wikifier, paramString, tiddler)\n	{\n		var tidTitle = tiddler.title;								// Shortcut\n		if(!this.states[tidTitle]) this.states[tidTitle] = {		// Array of state objects for refreshed tiddlers\n				butLabel: &quot;&quot;,\n				butTooltip: &quot;&quot;,\n				refInterval: 0,\n				doRefresh: false,\n				initPerRef: false,\n				timerId: 0,\n				chkBox: null\n				};\n		var state = this.states[tidTitle];							// Shortcut\n		state.butLabel = params[0] ? params[0] : &quot;Refresh&quot;; 		// Make these react to edits\n		state.butTooltip = params[1] ? params[1] : &quot;Refresh this item&quot;;\n		state.refInterval = params[2] ? params[2] : 0;				// 0 = no periodic refresh checkbox\n		var hidden = params[3] &amp;&amp; params[3].toLowerCase() == &quot;true&quot; &amp;&amp; state.refInterval &gt; 0;\n		if(!hidden)	{												// Unless want hidden\n    		var btn = createTiddlyButton(place, state.butLabel, state.butTooltip, this.onButClick);\n    		btn.name = tidTitle;									// Set button name to tiddler name (see onButClick())\n    		if(state.refInterval &gt; 0) 								// If periodic refresh wanted\n    		{\n    			wikify(&quot; [ =chkPerRefTid&quot; + tiddler.created.convertToYYYYMMDDHHMM() + // Uniquify chkbox ID\n    				&quot;{config.macros.RefreshTiddler.states[\s&quot;&quot; + tidTitle + &quot;\s&quot;].chkBox = this;}&quot; +\n    				&quot;{config.macros.RefreshTiddler.onChkClick(\s&quot;&quot; +  tidTitle + &quot;\s&quot;);}] &quot; + \n    				state.butLabel + &quot; every &quot; + state.refInterval + &quot; seconds&quot;, place);\n    			state.timerId = 0;\n    			if(!state.initPerRef) this.onChkClick(tidTitle);	// Simulate checkbox click (state already from cookie)\n    		}\n    	} else if(state.refInterval &gt; 0 &amp;&amp; !state.initPerRef) {		// Hidden, if per ref and not started, start it\n			if(state.timerId) clearTimeout(state.timerId);\n			this.startRefresh(tidTitle); \n			state.initPerRef = true;\n		}\n	},\n    \n	onButClick: function(e) \n	{\n		if(!e) e = window.event;\n		var tidTitle = resolveTarget(e).name;						// Name is the tiddler name!\n		//displayMessage(&quot;but &quot; + tidTitle);\n		story.refreshTiddler(tidTitle, null, true);\n		return false;\n	},\n    \n	onChkClick: function(tidTitle) \n	{\n		var state = this.states[tidTitle];\n		if(state.chkBox.checked) {\n			if(state.timerId) clearTimeout(state.timerId);\n			this.startRefresh(tidTitle); \n		} else { \n			state.doRefresh = false;\n		}\n		state.initPerRef = true;\n	},\n    \n	startRefresh: function(tidTitle) \n	{\n		var state = this.states[tidTitle];\n		state.doRefresh = true;\n		//displayMessage(&quot;st &quot; + tidTitle + &quot; &quot; + state.refInterval);\n		state.timerId = setTimeout(&quot;config.macros.RefreshTiddler.reRefresh(\s&quot;&quot; + \n						tidTitle + &quot;\s&quot;)&quot;, state.refInterval * 1000);\n	},\n    \n	reRefresh: function(tidTitle)\n	{\n		var state = this.states[tidTitle];\n		state.timerId = 0;\n		if(!state.doRefresh) return;\n		// Kill re-refresh cycle if tiddler closed or edited\n		var tidElem = document.getElementById(story.idPrefix + tidTitle);  // DON'T GET CUTE! THIS IS CORRECT!\n		//**BUGBUG** Hardwired to EditTemplate!\n		if(!tidElem || tidElem.attributes['template'].value == &quot;EditTemplate&quot;) // Prevent hidden or editing\n		{\n			state.initPerRef = false;\n			return;\n		}\n		//displayMessage(&quot;re &quot; + tidTitle + &quot; &quot; + state.refInterval);\n		story.refreshTiddler(tidTitle, null, true);\n		state.timerId = setTimeout(&quot;config.macros.RefreshTiddler.reRefresh(\s&quot;&quot; + \n						tidTitle + &quot;\s&quot;)&quot;, state.refInterval * 1000);\n	}\n};\n//}}}\n</div>
<div tiddler="RegExpSearch" modifier="Bob Denny" modified="200610271419" created="200610271419" tags="Help UserContent hideUser">Turn this on to use regular expression patterns for searching. If you don't kow what a regular expression is, leave it off.</div>
<div tiddler="RemoteContentPlugin" modifier="Bob Denny" modified="201401220029" created="200609170352" tags="systemConfig plugin macro">/***\n|''Name:''|RemoteContentPlugin|\n|''Description:''|Insert content from server with [Update] button|\n|''Date:''|Jan 21,2014|\n|''Source:''|[[RemoteContentPlugin]]|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|2.0.1|\n|''~CoreVersion:''|2.1.3|\n|''Browser:''|Chrome; Internet Explorer 8+; Firefox; Safari|\n|''Require:''|[[DC3.Ajax]] 1.0.4+|\nThis macro allows remotely generated text (raw or wikified) to be inserted into a tiddler, along with an //optional// refresh button below the inserted text. This is different from the RefreshTiddlerPlugin, which is used (e.g.) to refresh an embedded &lt;iframe&gt; and adds just the refresh button and optional periodic refresh checkbox and nothing else.\n!!Usage\nPlace this macro in a tiddler where you want refreshable remote content to be inserted. There are up to 3 parameters:\n|!Parameter|!Meaning|\n|''1'' (required)|URI of the remote content (typically dynamic). The inserted text is //wikified// by default, that is, it is rendered as wiki text. Thus the remote content can contain any wiki formatting sequences, including stuff wrapped in &lt;html&gt; tags. An optional parameter allows the text to be inserted raw, without wikification (new behavior in 2014). |\n|''2'' (optional)|Label of refresh button. If not given, no refresh button is displayed.|\n|''3'' (optional)|Prompt (tooltip) of refresh button. Valid only if previous parameter is given. If not supplied and a refresh button is requested, this will default to &quot;Refresh from remote data&quot;|\n|''4'' (optional)|Literally &quot;raw&quot; to bypass the newline stripping and wikification process.|\n\n!!!Examples:\n{{{\n&lt;&lt;RemoteContent &quot;http://foo.bar.com/stuff.php&quot;&gt;&gt;\n&lt;&lt;RemoteContent &quot;http://foo.bar.com/stuff.php&quot; &quot;Try again&quot; &quot;Try to fetch data again&quot;&gt;&gt;\n&lt;&lt;RemoteContent &quot;http://foo.bar.com/stuff.php&quot; &quot;&quot; &quot;&quot; &quot;raw&quot;&gt;&gt;\n}}}\n!!Revision History\n&lt;&lt;&lt;\n''2006.09.16 [1.0.1]'' Initial creation\n''2006.09.19 [1.0.2]'' Add parameters to make refresh button optional. This allows the macro to be used inline in tiddler text to grab stuff from the server and insert it. Remove unused msg property and string.\n''2006.09.20 [1.0.3]'' Refactored for new DC3.Ajax signature, code cleanup\n''2006.09.26 [1.0.4]'' Fix wikify() call in onComplete() to include tiddler parameter.\n''2006.10.05 [1.0.5]'' Strip \sr characters from remote text before calling wikify() in onComplete(). These were fooling the wikify formatter for (at least) &lt;html&gt; blocks that contained one or more.\n''2014.01.21 [2.1.0]'' Add 4th parameter &quot;raw&quot; to suppress wikification and \sr stripping.\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\nversion.extensions.RemoteContent = {\n major: 2, minor: 0, revision: 1,\n date: new Date(2014, 1, 21), \n type: 'macro',\n source: &quot;#RemoteContentPlugin&quot;\n};\n\nconfig.macros.RemoteContent = \n{\n	onComplete: function(text, params) \n	{\n	    if (params.raw) {\n	        createTiddlyText(params.place, &quot;raw:&quot; + text);\n	    } else {\n    		text = text.replace(/\sr/mg, &quot;&quot;);\n    		wikify(text, params.place, &quot;&quot;, params.tiddler);\n    		if(params.label) {\n    			wikify(&quot;&lt;&lt;RemoteContentUpdate &quot; + params.url + \n    				&quot; [[&quot; + params.tiddler.title + &quot;]] \s&quot;&quot; + params.label +\n    				&quot;\s&quot; \s&quot;&quot; + params.prompt + &quot;\s&quot;&gt;&gt;&quot;, params.place);\n    		}\n    	}\n	},\n	\n	handler: function(place, macroName, params ,wikifier, paramString, tiddler) \n	{\n		var complParams = { \n			url: params[0],\n			place: place,\n			tiddler: tiddler,\n			label: params[1] ? params[1] : &quot;&quot;,\n			prompt: params[2] ? params[2] : &quot;&quot;,\n			raw: params[3] == &quot;raw&quot;\n		};\n		DC3.Ajax.sendRequest('GET', params[0], &quot;&quot;, this.onComplete, complParams);\n	}\n};\n//}}}\n\n//{{{\nconfig.macros.RemoteContentUpdate = \n{\n	handler: function(place ,macroName, params) {\n		var url = params[0];\n		var title = params[1];\n		var label = params[2];\n		var prompt = params[3] ? params[3] : &quot;Refresh remote data&quot;;\n		createTiddlyButton(place, label, prompt, \n			function () {\n				story.refreshTiddler(title, null, true);\n				return false;\n			}\n		);\n	}\n};\n//}}}\n</div>
<div tiddler="Run Logs" modifier="Bob Denny" modified="201011221634" created="200609292135" tags="UserContent hideLocalUser">If you have lots of logs, this could take a long time to appear. We suggest [[using FTP|Using FTP]].\n\n&lt;&lt;RemoteContent '/logs/&lt;%= User.Username %&gt;/aindex.asp' Refresh 'Refresh the file list'&gt;&gt;</div>
<div tiddler="Run Plan Help" modifier="Bob Denny" modified="201101162030" created="200610232105" tags="Help UserContent hideUser">\nThis item lets you start an [[Observing Plan|Making Observing Plans]] that you have prepared in advance. Observing plans are typically used for //multiple target// runs or runs that use ACP's more advanced features. For more information on observing plans, see [[Making Observing Plans]].</div>
<div tiddler="Run Script Help" modifier="Bob Denny" modified="200611012324" created="200611012322" tags="Help UserContent hideUser">\nThis item allows you to run one of the [[Utility Scripts]] that the staff has provided, or that someone has uploaded. If the script requests user input, you will see one or more input forms appear here some time after the script has started.\n\nSelect a [[Utility Script|Utility Scripts]] from the list box below then click the button to start it. As usual, any outoput from it will appear in the [[System Status]] run log panel.</div>
<div tiddler="Sandbox" modifier="Bob Denny" modified="200611070316" created="200611060420" tags="Authoring deleteUser">Edit this item (just double-click anywhere inside or use the edit link in the upper right) and see what happens. Play with the various formatting markup and macros. This will not be seen by end users.\n\nHere is some //italic// text, some ''bold'', and __underlined__. You can link to an external site with a naked URI like http://acp.dc3.com/ or make a [[Hyperlink| http://acp.dc3.com/]] to an external site. The page will appear in a separate tab or window of the browser. It won't replace the current page!</div>
<div tiddler="Schedule Astro-Imaging" modifier="Bob Denny" modified="201501161712" created="201108290107" tags="Observing UserContent">&lt;&lt;slider &quot;&quot; &quot;Schedule Astro-Imaging Help&quot; Help &quot;Helpful information&quot;&gt;&gt;\n&lt;html&gt;\n&lt;form name=&quot;scast_form&quot; id=&quot;scast_form&quot;&gt;\n    &lt;h2 id=&quot;SAstSect1&quot; title=&quot;Click to toggle section visibility&quot;&gt;1. Object and Coordinates&lt;/h2&gt;\n    &lt;div id=&quot;SAstSlide1&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Target Name:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Target&quot; id=&quot;SAstTarget&quot; size=&quot;14&quot; value=&quot;&quot; validate=&quot;required&quot;&gt;\n                    &lt;input type=&quot;hidden&quot; name=&quot;visOnly&quot; id=&quot;sAstVisOnly&quot; value=&quot;false&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;\n                    &lt;a id=&quot;sast_getCoords&quot; href=&quot;javascript:;&quot; onClick=&quot;DC3.CatSearch.lookup(DC3.Lib.getPlace(this), null);&quot; title=&quot;Look up coordinates or calculate planetary ephemeris&quot;&gt;&amp;nbsp;Get Coordinates or Ephemeris&lt;/a&gt;\n                    &lt;a id=&quot;sast_getTheSky&quot; style=&quot;display:none;&quot; href=&quot;javascript:;&quot; onClick=&quot;DC3.TheSky.fillFormInfo(DC3.Lib.getPlace(this));&quot; title=&quot;Fill in the coordinates from the current target in TheSky&quot;&gt;&amp;nbsp;Get Coordinates From TheSky&lt;/a&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Right Asc. (hrs):&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;RA&quot; id=&quot;SAstRA&quot; size=&quot;12&quot; value=&quot;&quot; validate=&quot;sexanum[0:24],required&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;a id=&quot;sast_catSearch&quot; href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Deep Sky Catalog Search',null,config.options.chkAnimate,false)&quot; \n                        title=&quot;Open the Deep Sky Catalog Search Item&quot;&gt;&amp;nbsp;Deep Sky Catalog Search&lt;/a&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Declination (deg):&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Dec&quot; id=&quot;SAstDec&quot; size=&quot;12&quot; value=&quot;&quot; validate=&quot;sexanum[-90:90],required&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&amp;nbsp;&lt;i&gt;(coordinates in J2000)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Pos. Angle (deg):&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;PA&quot; id=&quot;SAstPA&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;number,between[0:360],required&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&amp;nbsp;&lt;i&gt;(true/sky PA, required)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;h2 id=&quot;SAstSect2&quot; title=&quot;Click to toggle section visibility&quot;&gt;2. Images (request each color separately)&lt;/h2&gt;\n    &lt;div id=&quot;SAstSlide2&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Total time:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;TotalTime&quot; id=&quot;SAstTotTime&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;number,required&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&amp;nbsp;&lt;i&gt;(hours, may extend over multiple nights)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Exposure time:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ExposureTime&quot; id=&quot;SAstExpTime&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;number,required&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&amp;nbsp;&lt;i&gt;(seconds, for each individual exposure)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;Filter:&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;Filter&quot; id=&quot;SAstFilter&quot;&gt;&lt;%= filterNameOptionsSch() %&gt;&lt;/select&gt;&lt;/td&gt;\n                &lt;td&gt;&amp;nbsp;&lt;/td&gt;\n            &lt;!--&lt;%} else { %&gt;--&gt;\n                &lt;td colspan=&quot;3&quot;&gt;&amp;nbsp&lt;span class=&quot;marked&quot;&gt;(this observatory has no filters)&lt;/span&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Binning:&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;Binning&quot; id=&quot;SAstBinning&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n                &lt;td&gt;&amp;nbsp;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Dithering:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Dither&quot; id=&quot;SAstDither&quot; size=&quot;5&quot; value=&quot;0.0&quot; validate=&quot;number,required&quot;&gt;&lt;/td&gt;\n			    &lt;!--&lt;% if(ditherMainPixels) { %&gt;--&gt;\n			    &lt;td&gt;&lt;i&gt;(main imager pixels rms, -1.0 for auto)&lt;/i&gt;&lt;/td&gt;\n			    &lt;!--&lt;% } else { %&gt;--&gt;\n                &lt;td&gt;&lt;i&gt;(pixels rms &lt;img src=&quot;/im/tinyInfo.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;If guided: guider pixels. If unguided: main imager pixels.&quot;&gt; -1.0 for auto)&lt;/i&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% if(!schPerAF) { %&gt;--&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Auto Focus:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;AutoFocus&quot; id=&quot;SAstAF&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;img src=&quot;/im/tinyInfo.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;Automatic focus management has been disabled.&quot;&gt; Autofocus before each block of images&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;!--&lt;% if(!acpAutoCal) { %&gt;--&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Auto Calibrate:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;AutoCal&quot; id=&quot;SAstCal&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt; Perform full calibration after acquiring&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Hot Pixels:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;HotPix&quot; id=&quot;SAstHot&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt; Remove hot pixels after calibration&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;h2 id=&quot;SAstSect3&quot; title=&quot;Click to toggle section visibility&quot;&gt;3. Priority and Constraints&lt;/h2&gt;\n    &lt;div id=&quot;SAstSlide3&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Priority:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Priority&quot; id=&quot;SAstPriority&quot; size=&quot;5&quot; value=&quot;0&quot; validate=&quot;number,required&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(schUserPrio) { %&gt;--&gt;\n                &lt;td&gt;&lt;i&gt;(each observer has own priority scale)&lt;/i&gt;&lt;/td&gt;\n            &lt;!--&lt;%} else { %&gt;--&gt;\n                &lt;td&gt;&lt;i&gt;(all observers share priority scale)&lt;/i&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Horizon:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Horizon&quot; id=&quot;SAstHorizon&quot; size=&quot;5&quot; value=&quot;35&quot;  validate=&quot;number,between[0:85]&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(degrees, must be above this altitude)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Hour Angle:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;HAEast&quot; id=&quot;SAstHAEast&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;sexanum[-12:12]&quot;&gt;&amp;nbsp;&amp;nbsp;\n                    &lt;input type=&quot;text&quot; name=&quot;HAWest&quot; id=&quot;SAstHAWest&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;sexanum[-12:12]&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(Hours E, W, -east, must be within HA range)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Moon Avoid:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;MADist&quot; id=&quot;SAstMADist&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;between[1:120]&quot;&gt;&amp;nbsp;&amp;nbsp;\n                    &lt;input type=&quot;text&quot; name=&quot;MAWidth&quot; id=&quot;SAstWidth&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;between[1:14]&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(distance degrees, width days &lt;img src=&quot;/im/tinyInfo.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;Moon Avoidance Lorentzian&quot;&gt; &lt;a href=&quot;javascript:;&quot; title=&quot;Moon Avoidance Lorentzian Help&quot;\n                         onClick=&quot;story.displayTiddler(this,'Moon Avoidance Lorentzian Help',null,config.options.chkAnimate,false)&quot;&gt;Moon Avoid Help&lt;/a&gt;)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Moon Down:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;MDown&quot; id=&quot;SAstMDown&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(Moon must be below horizon, ignore Moon Avoid)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Sky Condition:&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SkyCond&quot; id=&quot;SAstSkyCond&quot;&gt;\n                        &lt;option value=&quot;4&quot;&gt;Excellent&lt;/option&gt;\n                        &lt;option value=&quot;3&quot; selected&gt;Good&lt;/option&gt;\n                        &lt;option value=&quot;2&quot;&gt;Fair&lt;/option&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;td&gt;(Sky must be at least this good)&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;h2 id=&quot;SAstSect4&quot; title=&quot;Click to toggle section visibility&quot;&gt;4. Timing Controls&lt;/h2&gt;\n    &lt;div id=&quot;SAstSlide4&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Block Time:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SAstBlockTime&quot; id=&quot;SAstBlockTime&quot; size=&quot;5&quot; value=&quot;1&quot;  validate=&quot;number,between[0.5:4.0]&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(hours, &lt;img src=&quot;/im/tinyWarn.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; hspace=&quot;6&quot; title=&quot;Use with care. Each block of images is separately scheduled. The longer the block time is, the more chances it will fail for weather. Too many hours in a block and you don't need a scheduler, right?&quot; /&gt; divide images into blocks of time up to this long, default 1 hour, 0.5 - 4 hrs)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Monitor Interval:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SAstMonitorInt&quot; id=&quot;SAstMonitorInt&quot; size=&quot;5&quot; value=&quot;0&quot;  validate=&quot;number&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(days, requeue every 'n' days forever or until &quot;Must Run Before&quot;)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Must Run After:&lt;/td&gt;\n                &lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;SAstMustAfter&quot; id=&quot;SAstMustAfter&quot; size=&quot;20&quot; value=&quot;&quot; validate=&quot;idatetime&quot;&gt;\n                &amp;nbsp&lt;i&gt;(UTC, ex: 2011/03/30 03:12:44)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Must Run Before:&lt;/td&gt;\n                &lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;SAstMustBefore&quot; id=&quot;SAstMustBefore&quot; size=&quot;20&quot; value=&quot;&quot; validate=&quot;idatetime&quot;&gt;\n                &amp;nbsp&lt;i&gt;(UTC, ex: 2011/03/30 03:12:44)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Fixed Time:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SAstFixedTime&quot; id=&quot;SAstFixedTime&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(override dispatcher, &lt;img src=&quot;/im/tinyWarn.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;Forces run at Must Run After time. The Must Run Before time and Monitor Mode are ignored.&quot; /&gt; &lt;u&gt;use with caution!&lt;/u&gt;)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;input type=&quot;checkbox&quot; name=&quot;autoSubmit&quot; id=&quot;SAstAutoSubmit&quot; value=&quot;yes&quot;&gt;Enable requests immediately&lt;/input&gt;    \n&lt;/form&gt;\n&lt;/html&gt;\n&lt;&lt;PersistentForm&gt;&gt;&lt;&lt;PostForm &quot;&quot; &quot;/ac/asastroimage.asp&quot; &quot;Submit Request&quot; &quot;Sends this request to the scheduler&quot;&gt;&gt;&lt;&lt;ValidateForm &quot;&quot; &quot;postit&quot;&gt;&gt;&lt;script&gt;\n//&lt;% if(!acpAutoCal) { %&gt;\n$('#SAstCal').change(function () {\n        if(this.checked) {\n            $('#SAstHot').fadeTo('slow', 1.0);\n            $('#SAstHot').prop('disabled', false);\n        } else {\n            $('#SAstHot').prop('disabled', true);\n            $('#SAstHot').fadeTo('slow', 0.2);\n        }\n    });\n//&lt;% } %&gt;\n// DC3.TheSky.setTargetInfo() and DC3.TheSky.switchLink() depend on the link IDs!\nif(DC3.TheSky.theSkyInfoAvailable()) DC3.TheSky.switchLink(&quot;sast&quot;);\n$('#SAstSect1').click(function () {\n      $('#SAstSlide1').fadeToggle('slow');\n    });\n$('#SAstSect2').click(function () {\n      $('#SAstSlide2').fadeToggle('slow');\n    });\n$('#SAstSect3').click(function () {\n      $('#SAstSlide3').fadeToggle('slow');\n    });\n$('#SAstSect4').click(function () {\n      $('#SAstSlide4').fadeToggle('slow');\n      if($('#SAstFixedTime').is(':checked')) {\n          $('#SAstMonitorInt').fadeTo('slow', 0.2);\n          $('#SAstMustBefore').fadeTo('slow', 0.2);\n      }\n    });\n$('#SAstFixedTime').change(function() {\n      if($('#SAstFixedTime').is(':checked')) {\n          $('#SAstMonitorInt').fadeTo('slow', 0.2);\n          $('#SAstMustBefore').fadeTo('slow', 0.2);\n      } else {\n          $('#SAstMonitorInt').fadeTo('slow', 1.0);\n          $('#SAstMustBefore').fadeTo('slow', 1.0);\n      }\n    });\n//&lt;% if(!acpAutoCal) { %&gt;\n// Init the HotPix checkbox per AutoCal\n$('#SAstCal').trigger(jQuery.Event('change'));\n//&lt;% } %&gt;\n//Pre-collapse here, do NOT use display:none, validation will fail\n$('#SAstSlide3').fadeOut(0);\n$('#SAstSlide4').fadeOut(0);\n&lt;/script&gt;\n</div>
<div tiddler="Schedule Astro-Imaging Help" modifier="Bob Denny" modified="201407101754" created="201109170047" tags="Help UserContent hideUser">\nSubmit a request to the scheduler for astro-imaging data. The strategy is unusual. Each submission requests some number of hours in a single color/band with a specified sub-exposure time. If more than an hour is requested, the work is split up into one or more hour-long plans, each of which is separately scheduled. This allows the scheduler to work its magic. You will never be able to guess when your observing will be done! But it will be done, and under the conditions you specify. Who has a crystal ball? \n\nSee [[How to Specify Targets]]. Normally, the request will be entered in a disabled state, requiring you to enable it with the [[Schedule Browser|/sc/index.asp]] before it can run. If you're brave (certain that you've entered a correct request), check the ''Enable requests immediately'' box and your  request will be runnable without further action. This does //not// mean it will run immediately, of course.\n\nThe form should be self-evident, but here are a few things to note:\n* Newly created projects won't appear in the Select Project list until you refresh your browser. It's OK to keep using the same &quot;new&quot; project name repeatedly.\n* Here details on the useful [[Moon Avoid constraint|Moon Avoidance Lorentzian Help]]\n* Be very careful using the Timing features (section 4). You can easily create impossible situations. Relax and let the scheduler do its job!\n* You can force the request to start right now (section 4), but it will kill any run in progress. Also, if constraints aren't met it will fail right now. Again, use with care.</div>
<div tiddler="Schedule Image Series" modifier="Bob Denny" modified="201501161712" created="201109021604" tags="">&lt;&lt;slider &quot;&quot; &quot;Schedule Image Series Help&quot; Help &quot;Helpful information&quot;&gt;&gt;\n&lt;html&gt;\n&lt;!-- This was the &quot;photometry&quot; form, hence the SPhotxxx names, which remain --&gt;\n&lt;form name=&quot;SPhotForm&quot; id=&quot;SPhotForm&quot;&gt;\n    &lt;h2 id=&quot;SPhotSect1&quot; title=&quot;Click to toggle section visibility&quot;&gt;1. Scheduler Project&lt;/h2&gt;\n    &lt;div id=&quot;SPhotSlide1&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Select Project:&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;Project&quot; id=&quot;SPhotProject&quot;&gt;&lt;/select&gt;&amp;nbsp;(select existing project, or...) &lt;a href=&quot;javascript:;&quot; onClick='DC3.Lib.fillInnerHTML(&quot;/ac/asgenprojlist.asp&quot;, &quot;SPhotProject&quot;);'&gt;Refresh Project List&lt;/a&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;New Project:&lt;/td&gt;\n                &lt;td&gt;&lt;input class=&quot;txt&quot; name=&quot;NewProject&quot; type=&quot;text&quot; id=&quot;SPhotNewProject&quot; \n                size=&quot;25&quot; /&gt;&amp;nbsp;(...create new project with this name)&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;h2 id=&quot;SPhotSect2&quot; title=&quot;Click to toggle section visibility&quot;&gt;2. Object and Coordinates&lt;/h2&gt;\n    &lt;div id=&quot;SPhotSlide2&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Target Name:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Target&quot; id=&quot;SPhotTarget&quot; size=&quot;14&quot; value=&quot;&quot; validate=&quot;required&quot;&gt;\n                    &lt;input type=&quot;hidden&quot; name=&quot;visOnly&quot; id=&quot;sPhotVisOnly&quot; value=&quot;false&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;\n                    &lt;a id=&quot;sphot_getCoords&quot; href=&quot;javascript:;&quot; onClick=&quot;DC3.CatSearch.lookup(DC3.Lib.getPlace(this), null);&quot; title=&quot;Look up coordinates or calculate planetary ephemeris&quot;&gt;&amp;nbsp;Get Coordinates or Ephemeris&lt;/a&gt;\n                    &lt;a id=&quot;sphot_getTheSky&quot; style=&quot;display:none;&quot; href=&quot;javascript:;&quot; onClick=&quot;DC3.TheSky.fillFormInfo(DC3.Lib.getPlace(this));&quot; title=&quot;Fill in the coordinates from the current target in TheSky&quot;&gt;&amp;nbsp;Get Coordinates From TheSky&lt;/a&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Right Asc. (hrs):&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;RA&quot; id=&quot;SPhotRA&quot; size=&quot;12&quot; value=&quot;&quot; validate=&quot;sexanum[0:24],required&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;a id=&quot;sphot_catSearch&quot; href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Deep Sky Catalog Search',null,config.options.chkAnimate,false)&quot; \n                        title=&quot;Open the Deep Sky Catalog Search Item&quot;&gt;&amp;nbsp;Deep Sky Catalog Search&lt;/a&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Declination (deg):&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Dec&quot; id=&quot;SPhotDec&quot; size=&quot;12&quot; value=&quot;&quot; validate=&quot;sexanum[-90:90],required&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&amp;nbsp;&lt;i&gt;(coordinates in J2000)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Pos. Angle (deg):&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;PA&quot; id=&quot;SPhotPA&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;number,between[0:360],required&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&amp;nbsp;&lt;i&gt;(true/sky PA, required)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;h2 id=&quot;SPhotSect3&quot; title=&quot;Click to toggle section visibility&quot;&gt;3. Images and Processing&lt;/h2&gt;\n    &lt;div id=&quot;SPhotSlide3&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Use&lt;/th&gt;\n                &lt;th&gt;Count&lt;/th&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;th&gt;Filter&lt;/th&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;th&gt;Duration&lt;/th&gt;\n                &lt;th&gt;Binning&lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow1&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse1&quot; id=&quot;SPhotUse1&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount1&quot; id=&quot;SPhotCount1&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter1&quot; id=&quot;SPhotFilter1&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure1&quot; id=&quot;SPhotExposure1&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning1&quot; id=&quot;SPhotBinning1&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow2&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse2&quot; id=&quot;SPhotUse2&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount2&quot; id=&quot;SPhotCount2&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter2&quot; id=&quot;SPhotFilter2&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure2&quot; id=&quot;SPhotExposure2&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning2&quot; id=&quot;SPhotBinning2&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow3&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse3&quot; id=&quot;SPhotUse3&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount3&quot; id=&quot;SPhotCount3&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter3&quot; id=&quot;SPhotFilter3&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure3&quot; id=&quot;SPhotExposure3&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning3&quot; id=&quot;SPhotBinning3&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow4&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse4&quot; id=&quot;SPhotUse4&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount4&quot; id=&quot;SPhotCount4&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter4&quot; id=&quot;SPhotFilter4&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure4&quot; id=&quot;SPhotExposure4&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning4&quot; id=&quot;SPhotBinning4&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow5&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse5&quot; id=&quot;SPhotUse5&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount5&quot; id=&quot;SPhotCount5&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter5&quot; id=&quot;SPhotFilter5&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure5&quot; id=&quot;SPhotExposure5&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning5&quot; id=&quot;SPhotBinning5&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow6&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse6&quot; id=&quot;SPhotUse6&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount6&quot; id=&quot;SPhotCount6&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter6&quot; id=&quot;SPhotFilter6&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure6&quot; id=&quot;SPhotExposure6&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning6&quot; id=&quot;SPhotBinning6&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow7&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse7&quot; id=&quot;SPhotUse7&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount7&quot; id=&quot;SPhotCount7&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter7&quot; id=&quot;SPhotFilter7&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure7&quot; id=&quot;SPhotExposure7&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning7&quot; id=&quot;SPhotBinning7&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow8&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse8&quot; id=&quot;SPhotUse8&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount8&quot; id=&quot;SPhotCount8&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter8&quot; id=&quot;SPhotFilter8&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure8&quot; id=&quot;SPhotExposure8&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning8&quot; id=&quot;SPhotBinning8&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow9&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse9&quot; id=&quot;SPhotUse9&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount9&quot; id=&quot;SPhotCount9&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter9&quot; id=&quot;SPhotFilter9&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure9&quot; id=&quot;SPhotExposure9&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning9&quot; id=&quot;SPhotBinning9&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow10&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse10&quot; id=&quot;SPhotUse10&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount10&quot; id=&quot;SPhotCount10&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter10&quot; id=&quot;SPhotFilter10&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure10&quot; id=&quot;SPhotExposure10&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning10&quot; id=&quot;SPhotBinning10&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow11&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse11&quot; id=&quot;SPhotUse11&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount11&quot; id=&quot;SPhotCount11&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter11&quot; id=&quot;SPhotFilter11&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure11&quot; id=&quot;SPhotExposure11&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning11&quot; id=&quot;SPhotBinning11&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow12&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse12&quot; id=&quot;SPhotUse12&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount12&quot; id=&quot;SPhotCount12&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter12&quot; id=&quot;SPhotFilter12&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure12&quot; id=&quot;SPhotExposure12&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning12&quot; id=&quot;SPhotBinning12&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow13&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse13&quot; id=&quot;SPhotUse13&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount13&quot; id=&quot;SPhotCount13&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter13&quot; id=&quot;SPhotFilter13&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure13&quot; id=&quot;SPhotExposure13&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning13&quot; id=&quot;SPhotBinning13&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow14&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse14&quot; id=&quot;SPhotUse14&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount14&quot; id=&quot;SPhotCount14&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter14&quot; id=&quot;SPhotFilter14&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure14&quot; id=&quot;SPhotExposure14&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning14&quot; id=&quot;SPhotBinning14&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow15&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse15&quot; id=&quot;SPhotUse15&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount15&quot; id=&quot;SPhotCount15&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter15&quot; id=&quot;SPhotFilter15&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure15&quot; id=&quot;SPhotExposure15&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning15&quot; id=&quot;SPhotBinning15&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr id=&quot;SPhotRow16&quot; style=&quot;display:none&quot;&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotUse16&quot; id=&quot;SPhotUse16&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotCount16&quot; id=&quot;SPhotCount16&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotFilter16&quot; id=&quot;SPhotFilter16&quot;&gt;\n                        &lt;%= filterNameOptionsSch() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotExposure16&quot; id=&quot;SPhotExposure16&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SPhotBinning16&quot; id=&quot;SPhotBinning16&quot;&gt;\n                        &lt;%= binningOptions() %&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td colspan=&quot;5&quot;&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;button&quot; title=&quot;Click to add another row&quot; onclick=&quot;DC3.Lib.expandoAddRow('SPhot');&quot;&gt;More&lt;/a&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Dithering:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotDither&quot; id=&quot;SPhotDither&quot; size=&quot;5&quot; value=&quot;0.0&quot; validate=&quot;number,required&quot;&gt;&lt;/td&gt;\n			    &lt;!--&lt;% if(ditherMainPixels) { %&gt;--&gt;\n			    &lt;td colspan=&quot;3&quot;&gt;&lt;i&gt;(main imager pixels, -1.0 for auto)&lt;/td&gt;\n			    &lt;!--&lt;% } else { %&gt;--&gt;\n                &lt;td colspan=&quot;3&quot;&gt;&lt;i&gt;(pixels rms &lt;img src=&quot;/im/tinyInfo.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; \n                        align=&quot;absmiddle&quot; hspace=&quot;6&quot; title=&quot;If guided: guider pixels. If unguided: main imager pixels.&quot; /&gt;\n                        -1.0 for auto)&lt;/i&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% if(!schPerAF) { %&gt;--&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Auto Focus:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;AutoFocus&quot; id=&quot;SPhotAF&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td colspan=&quot;3&quot;&gt;&lt;i&gt;&lt;img src=&quot;/im/tinyInfo.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;Automatic focus management has been disabled.&quot;&gt; Autofocus before each block of images&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;!--&lt;% if(!acpAutoCal) { %&gt;--&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Auto Calibrate:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;AutoCal&quot; id=&quot;SPhotCal&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt; Perform full calibration after acquiring&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Hot Pixels:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;HotPix&quot; id=&quot;SPhotHot&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt; Remove hot pixels after calibration&lt;/td&gt;\n            &lt;/tr&gt;\n    &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;h2 id=&quot;SPhotSect4&quot; title=&quot;Click to toggle section visibility&quot;&gt;4. Constraints&lt;/h2&gt;\n    &lt;div id=&quot;SPhotSlide4&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Horizon:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Horizon&quot; id=&quot;SPhotHorizon&quot; size=&quot;5&quot; value=&quot;35&quot;  validate=&quot;between[0:85]&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(degrees, must be above this altitude)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Hour Angle:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;HAEast&quot; id=&quot;SPhotHAEast&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;sexanum[-12:12]&quot;&gt;&amp;nbsp;&amp;nbsp;\n                    &lt;input type=&quot;text&quot; name=&quot;HAWest&quot; id=&quot;SPhotHAWest&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;sexanum[-12:12]&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(Hours E, W, -east, must be within HA range)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Air Mass Range:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;AmLow&quot; id=&quot;SPhotAmLow&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;between[1:10]&quot;&gt;&amp;nbsp;&amp;nbsp;\n                    &lt;input type=&quot;text&quot; name=&quot;AmHigh&quot; id=&quot;SPhotAmHigh&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;between[1:10]&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(max, min - relative air mass &lt;img src=&quot;/im/tinyInfo.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;Use a minimum of 1.0 for 'air mass below' constraint&quot; /&gt; must be within this range)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Moon Avoid:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;MADist&quot; id=&quot;SPhotMADist&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;between[1:120]&quot;&gt;&amp;nbsp;&amp;nbsp;\n                    &lt;input type=&quot;text&quot; name=&quot;MAWidth&quot; id=&quot;SPhotMAWidth&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;between[1:14]&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(distance degrees, width days &lt;img src=&quot;/im/tinyInfo.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;Moon Avoidance Lorentzian&quot; /&gt; &lt;a href=&quot;javascript:;&quot; title=&quot;Moon Avoidance Lorentzian Help&quot;\n                         onClick=&quot;story.displayTiddler(this,'Moon Avoidance Lorentzian Help',null,config.options.chkAnimate,false)&quot;&gt;Moon Avoid Help&lt;/a&gt;)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Moon Down:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;MDown&quot; id=&quot;SPhotMDown&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(Moon must be below horizon, ignore Moon Avoid)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Sky Condition:&lt;/td&gt;\n                &lt;td&gt;&lt;select name=&quot;SkyCond&quot; id=&quot;SPhotSkyCond&quot;&gt;\n                        &lt;option value=&quot;4&quot;&gt;Excellent&lt;/option&gt;\n                        &lt;option value=&quot;3&quot; selected&gt;Good&lt;/option&gt;\n                        &lt;option value=&quot;2&quot;&gt;Fair&lt;/option&gt;\n                    &lt;/select&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(Sky must be at least this good)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;h2 id=&quot;SPhotSect5&quot; title=&quot;Click to toggle section visibility&quot;&gt;5. Priority and Series&lt;/h2&gt;\n    &lt;div id=&quot;SPhotSlide5&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Priority:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Priority&quot; id=&quot;SPhotPriority&quot; size=&quot;5&quot; value=&quot;0&quot; validate=&quot;number,required&quot;&gt;&lt;/td&gt;\n                &lt;!--&lt;% if(schUserPrio) { %&gt;--&gt;\n                &lt;td&gt;&lt;i&gt;(each observer has own priority scale)&lt;/i&gt;&lt;/td&gt;\n                &lt;!--&lt;%} else { %&gt;--&gt;\n                &lt;td&gt;&lt;i&gt;(all observers share priority scale)&lt;/i&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Repeat Series:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotRepeat&quot; id=&quot;SPhotRepeat&quot; size=&quot;5&quot; value=&quot;1&quot;  validate=&quot;number,required&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(repeat entire image set this many times)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Best Efforts:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotBestEfforts&quot; id=&quot;SPhotBestEfforts&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(OK if series terminates early)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;h2 id=&quot;SPhotSect6&quot; title=&quot;Click to toggle section visibility&quot;&gt;6. Timing and Monitor Mode&lt;/h2&gt;\n    &lt;div id=&quot;SPhotSlide6&quot;&gt;\n        &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Monitor Interval:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotMonitorInt&quot; id=&quot;SPhotMonitorInt&quot; size=&quot;5&quot; value=&quot;0&quot;  validate=&quot;number&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(days, requeue every 'n' days forever or until &quot;Must Run Before&quot;)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Must Run After:&lt;/td&gt;\n                &lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotMustAfter&quot; id=&quot;SPhotMustAfter&quot; size=&quot;20&quot; value=&quot;&quot; validate=&quot;idatetime&quot;&gt;\n                &amp;nbsp&lt;i&gt;(UTC, ex: 2014/03/30 03:12:44)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Must Run Before:&lt;/td&gt;\n                &lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;SPhotMustBefore&quot; id=&quot;SPhotMustBefore&quot; size=&quot;20&quot; value=&quot;&quot; validate=&quot;idatetime&quot;&gt;\n                &amp;nbsp&lt;i&gt;(UTC, ex: 2014/03/30 03:12:44)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Fixed Time:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotFixedTime&quot; id=&quot;SPhotFixedTime&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(override dispatcher &lt;img src=&quot;/im/tinyWarn.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;Forces run at Must Run After time. The Must Run Before time and Monitor Mode are ignored.&quot; /&gt; &lt;u&gt;use with caution!&lt;/u&gt;)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Run Now:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SPhotRunNow&quot; id=&quot;SPhotRunNow&quot; size=&quot;0&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;i&gt;(start immediately &lt;img src=&quot;/im/tinyWarn.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;Interrupts current Observation if running and starts this immediately&quot; /&gt; if constraints met)&lt;/i&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;input type=&quot;checkbox&quot; name=&quot;autoSubmit&quot; id=&quot;SPhotAutoSubmit&quot; value=&quot;yes&quot;&gt;Enable requests immediately&lt;/input&gt;\n&lt;/form&gt;\n&lt;/html&gt;\n&lt;&lt;PersistentForm&gt;&gt;&lt;&lt;PostForm &quot;&quot; &quot;/ac/asphotosingle.asp&quot; &quot;Submit Request&quot; &quot;Sends this request to the scheduler&quot;&gt;&gt;&lt;&lt;ValidateForm &quot;&quot; &quot;postit&quot;&gt;&gt;&lt;script&gt;\n//&lt;% if(!acpAutoCal) { %&gt;\n$('#SPhotCal').change(function () {\n        if(this.checked) {\n            $('#SPhotHot').fadeTo('slow', 1.0);\n            $('#SPhotHot').prop('disabled', false);\n        } else {\n            $('#SPhotHot').prop('disabled', true);\n            $('#SPhotHot').fadeTo('slow', 0.2);\n        }\n    });\n//&lt;% } %&gt;\n// DC3.TheSky.setTargetInfo() and DC3.TheSky.switchLink() depend on the link IDs!\nif(DC3.TheSky.theSkyInfoAvailable()) DC3.TheSky.switchLink(&quot;sphot&quot;);\nDC3.Lib.expandoInitializeForm(&quot;SPhot&quot;);\n$('#SPhotSect1').click(function () {\n      $('#SPhotSlide1').fadeToggle('slow');\n    });\n$('#SPhotSect2').click(function () {\n      $('#SPhotSlide2').fadeToggle('slow');\n    });\n$('#SPhotSect3').click(function () {\n      $('#SPhotSlide3').fadeToggle('slow');\n    });\n$('#SPhotSect4').click(function () {\n      $('#SPhotSlide4').fadeToggle('slow');\n    });\n$('#SPhotSect5').click(function () {\n      $('#SPhotSlide5').fadeToggle('slow');\n    });\n$('#SPhotSect6').click(function () {\n      $('#SPhotSlide6').fadeToggle('slow');\n      if($('#SPhotRunNow').is(':checked') || $('#SPhotFixedTime').is(':checked')) {\n          $('#SPhotMonitorInt').fadeTo('slow', 0.2);\n          $('#SPhotMustBefore').fadeTo('slow', 0.2);\n      }\n      if($('#SPhotRunNow').is(':checked')) {\n          $('#SPhotMustAfter').fadeTo('slow', 0.2);\n          $('#SPhotFixedTime').fadeTo('slow', 0.2);\n      }\n    });\n$('#SPhotRunNow').change(function() {\n      if($('#SPhotRunNow').is(':checked')) {\n          $('#SPhotMonitorInt').fadeTo('slow', 0.2);\n          $('#SPhotMustAfter').fadeTo('slow', 0.2);\n          $('#SPhotMustBefore').fadeTo('slow', 0.2);\n          $('#SPhotFixedTime').fadeTo('slow', 0.2);\n      } else {\n          $('#SPhotMustAfter').fadeTo('slow', 1.0);\n          $('#SPhotFixedTime').fadeTo('slow', 1.0);\n          if($('#SPhotFixedTime').is(':checked')) {\n              $('#SPhotMonitorInt').fadeTo('slow', 0.2);\n              $('#SPhotMustBefore').fadeTo('slow', 0.2);\n          } else {\n              $('#SPhotMonitorInt').fadeTo('slow', 1.0);\n              $('#SPhotMustBefore').fadeTo('slow', 1.0);\n          }\n      }\n    });\n$('#SPhotFixedTime').change(function() {\n      if($('#SPhotFixedTime').is(':checked')) {\n          $('#SPhotMonitorInt').fadeTo('slow', 0.2);\n          $('#SPhotMustBefore').fadeTo('slow', 0.2);\n      } else {\n          $('#SPhotMonitorInt').fadeTo('slow', 1.0);\n          $('#SPhotMustBefore').fadeTo('slow', 1.0);\n      }\n    });\n//&lt;% if(!acpAutoCal) { %&gt;\n// Init the HotPix checkbox per AutoCal\n$('#SPhotCal').trigger(jQuery.Event('change'));\n//&lt;% } %&gt;\n//Pre-collapse here, do NOT use display:none, validation will fail\n$('#SPhotSlide4').fadeOut(0);\n$('#SPhotSlide5').fadeOut(0);\n$('#SPhotSlide6').fadeOut(0);\n//\n// This refreshes the Project list...\n//\nDC3.Lib.fillInnerHTML(&quot;/ac/asgenprojlist.asp&quot;, &quot;SPhotProject&quot;);\n&lt;/script&gt;\n</div>
<div tiddler="Schedule Image Series Help" modifier="Bob Denny" modified="201407101754" created="201109112153" tags="Help UserContent hideUser">\nSubmit a request to the scheduler for a series of images to be done within a single block of time. See [[How to Specify Targets]]. Normally, the request will be entered in a disabled state, requiring you to enable it with the [[Schedule Browser|/sc/index.asp]] before it can run. If you're brave (certain that you've entered a correct request), check the ''Enable requests immediately'' box and your  request will be runnable without further action. This does //not// mean it will run immediately, of course.\n\nThe form should be self-evident, but here are a few things to note:\n* Newly created projects won't appear in the Select Project list until you refresh your browser. It's OK to keep using the same &quot;new&quot; project name repeatedly.\n* Here details on the useful [[Moon Avoid constraint|Moon Avoidance Lorentzian Help]]\n* Be very careful using the Timing features (section 6). You can easily create impossible situations. Relax and let the scheduler do its job!\n* You can force the request to start right now (section 6), but it will kill any run in progress. Also, if constraints aren't met it will fail right now. Again, use with care.</div>
<div tiddler="SelectThemePlugin" modifier="Bob Denny" modified="200610272141" created="200609190204" tags="systemConfig plugin macro">/***\n\n''This plugin was previously called StyleChooser.''\n\n|Name|SelectThemePlugin|\n|Created by|SimonBaird and SaqImtiaz, modified for private use with Share Your Sky! by Bob Denny|\n|Location|Original: http://lewcid.googlepages.com/lewcid.html#SelectThemePlugin, Modified: [[SelectThemePlugin]]|\n|Version|1.2.4a|\n|Requires|~TW2.x|\n!Description\n*An alternative style switcher, can be used to switch just stylesheets and/or pagetemplates, or a combination of both (a theme)\n*you //must// add your own stylesheets and pagetemplates.\n!Usage\n* You must to have fetch or create some styleSheets and pageTemplates to use this plugin.\n**You can either get a ThemePack like BigThemePack which automatically adds themes to ThemeSelect.\n**or create tiddlers with styleSheets and pageTemplates and tag them styleSheets and pageTemplates respectively.\n* Put {{{&lt;&lt;themeSelect style 'Select theme'&gt;&gt;}}} in your SideBarOptions.\n!Creating Theme Packs\n*You can create your own theme pack if you like. Instructions can be found [[here.|CreateThemePack]]\n!History\n* 17-Oct-06 v1.2.5, [rbd] Remove code for TW &lt; 2.0.11. Reformat code and lint. Remove code to select theme in URL. Change hijack from deprecated applyPageTemplate to refreshPageTemplate. Remove code for [none] and [default] items in style chooser, as well as the line below, and make Fire the default theme instead of the built-in ~StyleSheet/~PageTemplate. Add parameter for tooltip on switcher dropdown. Use unicode escapes for drop-arrows so this can be edited in PrimalScript, etc. Various wording changes.\n* 10-Oct-06, v1.2.4a, [rbd] Changed defaults to FireStyleSheet/FirePageTemplate for new ACP application.\n* 08-Sep-06, v1.2.4, fixed bug with TW2.1\n* 15-May-06, v1.2.3, added paramifier so you can put theme on url, eg http://www.somewhere.com/twfile.html#theme:Berry2, thanks Clint (Simon).\n* 28-Apr-o6, v1.2.2, fixed bug with opening TW after deleting themepacks. (Saq)\n* 26-Apr-06, v1.2.1, more code optimization, dropdowns now updated on the fly. (Saq)\n* 25-Apr-06, v1.2.0, added 3rd party ThemePack support, and made various other improvements.(Simon &amp; Saq)\n* 24-Apr-06, v1.1.0, added: no styles and default styles options,&lt;&lt;br&gt;&gt;support for ThemePack, support for tag variations(Saq)\n* 21-Apr-06, v1.0.0, Reworked dropdowns to include option for pagetemplates (Saq)\n* 21-Apr-06, v0.9.0, Rewrote and added Saq's lovely dropdown select (Simon)\n* 20-Apr-06, v0.0.1, Basic switcher working (Simon)\n!Examples\n|!Source|!Output|h\n|{{{&lt;&lt;themeSelect style&gt;&gt;}}} for a dropdown with StyleSheets|&lt;&lt;themeSelect style&gt;&gt;|\n|{{{&lt;&lt;themeSelect pagetemplate&gt;&gt;}}} for a dropdown with PageTemplates|&lt;&lt;themeSelect pagetemplate&gt;&gt;|\n|{{{&lt;&lt;themeSelect style customlabel&gt;&gt;}}} to use a custom label|&lt;&lt;themeSelect style customlabel&gt;&gt;|\n|{{{&lt;&lt;themeSelect style customlabel customtooltip&gt;&gt;}}} to use a custom label and tooltip|&lt;&lt;themeSelect style customlabel customtooltip&gt;&gt;|\n* When applying a stylesheet or template, it also looks for a template or stylesheet respectively based on naming convention, eg MyFunkyStyleSheet and MyFunkyPageTemplate.\n!Notes\n* See also http://www.tiddlytools.com/#SelectStyleSheetPlugin for a more feature-rich style sheet switcher\n! Ideas\n* do ViewTemplate also?\n* Pretty up the [x] bit\n!Code\n***/\n//{{{\nversion.extensions.SelectThemePlugin =\n{\n major: 1, minor: 2, revision: 5,\n date: new Date(2006,10,27),\n type: 'macro',\n source: &quot;http://lewcid.googlepages.com/lewcid.html#SelectTheme&quot;\n};\n// -----------\n// Static data\n// -----------\nconfig.SelectTheme =\n{\n things:\n {\n style:\n {\n tag: [&quot;StyleSheets&quot;,&quot;StyleSheet&quot;,&quot;styleSheet&quot;,&quot;styleSheets&quot;,&quot;stylesheet&quot;,&quot;stylesheets&quot;],\n theDefault: &quot;FireStyleSheet&quot;, // Default, must exist!\n suffix: &quot;StyleSheet&quot;,\n notify: refreshStyles,\n cookie: &quot;txtStyleSheet&quot;,\n otherThing: &quot;pagetemplate&quot;,\n label: &quot;Choose StyleSheet: &quot;,\n tooltip: &quot;Choose a StyleSheet&quot;\n },\n pagetemplate:\n {\n tag: [&quot;PageTemplates&quot;,&quot;PageTemplate&quot;,&quot;pageTemplates&quot;,&quot;pageTemplate&quot;,&quot;pagetemplate&quot;,&quot;pagetemplates&quot;],\n theDefault: &quot;FirePageTemplate&quot;, // Default, must exist!\n suffix: &quot;PageTemplate&quot;,\n notify: refreshPageTemplate,\n cookie: &quot;txtPageTemplate&quot;,\n otherThing: &quot;style&quot;,\n label: &quot;Choose PageTemplate: &quot;,\n tooltip: &quot;Choose a PageTemplate&quot;\n }\n }\n};\n\nTiddlyWiki.prototype.removeNotification = function(title,fn)\n{\n for (var i=0;i&lt;this.namedNotifications.length;i++) {\n if((this.namedNotifications[i].name == title) &amp;&amp; (this.namedNotifications[i].notify == fn))\n this.namedNotifications.splice(i,1);\n }\n};\n\nvar things = config.SelectTheme.things;\n// var specialCases=config.SelectTheme.specialCases;\n\nfor (var zz in things)\n{\n // make sure we have a value\n if (!config.options[things[zz].cookie])\n config.options[things[zz].cookie] = things[zz].theDefault;\n // remove core notify\n store.removeNotification(things[zz].theDefault,things[zz].notify);\n // and add our one\n store.addNotification(config.options[things[zz].cookie],things[zz].notify);\n}\n\n//checks to see if a tiddler exists in store or as a shadow.\nTiddlyWiki.prototype.isTiddler= function (title)\n{\n return store.tiddlerExists(title) || store.isShadowTiddler(title);\n};\n\n//hijack new core function &amp; make sure template exists\nwindow.refreshPageTemplate_themeSelect=window.refreshPageTemplate;\nwindow.refreshPageTemplate = function(title)\n{\n if(!store.isTiddler(title))\n {\n title = things.pagetemplate.theDefault;\n }\n refreshPageTemplate_themeSelect(title);\n};\n\nTiddlyWiki.prototype.makeActiveTheme = function(what, title, alsoCheckOtherThing)\n{\n var thing = things[what];\n if (!store.isTiddler(title))\n title = thing.theDefault;\n var oldTitle = config.options[thing.cookie];\n // remove old style element from DOM\n if (what == &quot;style&quot;)\n {\n var oldStyleElement = document.getElementById(oldTitle);\n oldStyleElement.parentNode.removeChild(oldStyleElement);\n }\n store.removeNotification(oldTitle,thing.notify);\n store.addNotification(title,thing.notify);\n store.notify(title);\n config.options[thing.cookie] = title;\n saveOptionCookie(thing.cookie);\n if (alsoCheckOtherThing)\n this.makeActiveTheme(thing.otherThing,\n title.replace(new RegExp(thing.suffix+&quot;$&quot;),&quot;&quot;) + things[thing.otherThing].suffix,\n false);\n};\n\nfunction switchTheme(e)\n{\n if (!e) e = window.event;\n var theTarget = resolveTarget(e);\n var theLink = theTarget;\n var switchTo= theLink.getAttribute(&quot;switchTo&quot;);\n var mode = theLink.getAttribute(&quot;mode&quot;);\n if ((config.options[things[mode].cookie])!=switchTo)\n {\n store.makeActiveTheme(mode,switchTo,true);\n }\n return(false);\n}\n\nconfig.macros.themeSelect = { };\nconfig.macros.themeSelect.dropdownchar = (document.all ? &quot;\su25BC&quot; : &quot;\su25BE&quot;); // UTF8!!!\nconfig.macros.themeSelect.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n var arrow = config.macros.themeSelect.dropdownchar;\n var mode = params[0];\n var label = (params[1] ? params[1] : things[mode].label) + arrow;\n var tooltip= params[2] ? params[2] : things[mode].tooltip;\n var cookie = (config.options[things[mode].cookie]);\n var onclick = function(e)\n {\n if (!e) e = window.event;\n var popup = Popup.create(this);\n var tagged=[];\n store.forEachTiddler(function(title,tiddler)\n {\n if ((tiddler.tags).containsAny(things[mode].tag))\n {\n tagged.push(tiddler.title);\n }\n }\n );\n \n //this function used later to create buttons\n var createThemeButton = function(switchTo)\n {\n var theButton = createTiddlyButton(createTiddlyElement(popup,&quot;li&quot;),text,null,switchTheme,useClass);\n theButton.setAttribute(&quot;switchTo&quot;,switchTo);\n theButton.setAttribute(&quot;mode&quot;,mode);\n };\n \n //create buttons for all explicit stylesheet tiddlers\n for(var t=0; t&lt;tagged.length; t++)\n {\n var useClass = &quot;tiddlyLinkExisting&quot;;\n var text = (tagged[t]).replace((things[mode].suffix),&quot;&quot;);\n if (tagged[t] == (cookie) )\n {\n text += &quot; [x]&quot;;\n useClass = &quot;currentlySelected&quot;;\n }\n createThemeButton(tagged[t]);\n }\n \n // Route events\n Popup.show(popup, false);\n e.cancelBubble = true;\n if (e.stopPropagation)\n e.stopPropagation();\n return(false);\n };\n \n var createdropperButton = function(place)\n {\n var sp = createTiddlyElement(place,&quot;span&quot;,null,&quot;ThemeChooserButton&quot;);\n var theDropDownBtn = createTiddlyButton(sp,label,tooltip,onclick);\n };\n \n createdropperButton(place);\n \n}; // End of config.macros.themeSelect\n\nsetStylesheet(&quot;.popup li a.currentlySelected {background:#ccc;color:black;font-weight:bold;}&quot;,&quot;currentlySelectedStyle&quot;); // could do better probably...\n\nconfig.macros.layoutChooser=config.macros.themeSelect;\n\nconfig.macros.applyTheme =\n{\n handler: function (place,macroName,params,wikifier,paramString,tiddler)\n {\n var theme = params[0];\n var label = params[1]?params[1]:'Apply theme &quot;' + theme + '&quot;';\n var tooltip = 'Apply the &quot;'+theme+'&quot; theme to this display';\n createTiddlyButton(place,\n label,\n tooltip,\n function() { store.makeActiveTheme(&quot;style&quot;,theme+things.style.suffix,true); }\n );\n }\n};\n//}}}</div>
<div tiddler="Setup Standard Flat Fields" modifier="Bob Denny" modified="201406231638" created="200611171728" tags="Observing UserContent">&lt;% if(!screenFlats) { %&gt;&lt;&lt;slider &quot;&quot; &quot;Sky Flats Help&quot; &quot;Help for Sky Flats&quot; &quot;Helpful information&quot;&gt;&gt;\n&lt;% } %&gt;\nSet up the standard flats to be taken when the Dusk Flats and/or Dawn Flats checkboxes are used in the [[Single Object Color Series]] form. The standard flats are also used by the [[Standard Flat Fields]] item. \n&lt;html&gt;&lt;form id=&quot;SFlatPlanForm&quot;&gt;\n	&lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0&quot;&gt;\n		&lt;tr&gt;\n			&lt;th align=&quot;left&quot;&gt;Use&lt;/th&gt;\n			&lt;th align=&quot;left&quot;&gt;Count&lt;/th&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;th align=&quot;left&quot;&gt;Filter&lt;/th&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;th align=&quot;left&quot;&gt;Binning&lt;/th&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;th align=&quot;left&quot;&gt;Sky PA&lt;/th&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow1&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse1&quot; id=&quot;SFlatUse1&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount1&quot; id=&quot;SFlatCount1&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter1&quot; id=&quot;SFlatFilter1&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning1&quot; id=&quot;SFlatBinning1&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA1&quot; id=&quot;SFlatPA1&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow2&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse2&quot; id=&quot;SFlatUse2&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount2&quot; id=&quot;SFlatCount2&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter2&quot; id=&quot;SFlatFilter2&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning2&quot; id=&quot;SFlatBinning2&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA2&quot; id=&quot;SFlatPA2&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow3&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse3&quot; id=&quot;SFlatUse3&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount3&quot; id=&quot;SFlatCount3&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter3&quot; id=&quot;SFlatFilter3&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning3&quot; id=&quot;SFlatBinning3&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA3&quot; id=&quot;SFlatPA3&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow4&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse4&quot; id=&quot;SFlatUse4&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount4&quot; id=&quot;SFlatCount4&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter4&quot; id=&quot;SFlatFilter4&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning4&quot; id=&quot;SFlatBinning4&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA4&quot; id=&quot;SFlatPA4&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow5&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse5&quot; id=&quot;SFlatUse5&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount5&quot; id=&quot;SFlatCount5&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter5&quot; id=&quot;SFlatFilter5&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning5&quot; id=&quot;SFlatBinning5&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA5&quot; id=&quot;SFlatPA5&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow6&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse6&quot; id=&quot;SFlatUse6&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount6&quot; id=&quot;SFlatCount6&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter6&quot; id=&quot;SFlatFilter6&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning6&quot; id=&quot;SFlatBinning6&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA6&quot; id=&quot;SFlatPA6&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow7&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse7&quot; id=&quot;SFlatUse7&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount7&quot; id=&quot;SFlatCount7&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter7&quot; id=&quot;SFlatFilter7&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning7&quot; id=&quot;SFlatBinning7&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA7&quot; id=&quot;SFlatPA7&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow8&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse8&quot; id=&quot;SFlatUse8&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount8&quot; id=&quot;SFlatCount8&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter8&quot; id=&quot;SFlatFilter8&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning8&quot; id=&quot;SFlatBinning8&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA8&quot; id=&quot;SFlatPA8&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow9&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse9&quot; id=&quot;SFlatUse9&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount9&quot; id=&quot;SFlatCount9&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter9&quot; id=&quot;SFlatFilter9&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning9&quot; id=&quot;SFlatBinning9&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA9&quot; id=&quot;SFlatPA9&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow10&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse10&quot; id=&quot;SFlatUse10&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount10&quot; id=&quot;SFlatCount10&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter10&quot; id=&quot;SFlatFilter10&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning10&quot; id=&quot;SFlatBinning10&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA10&quot; id=&quot;SFlatPA10&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow11&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse11&quot; id=&quot;SFlatUse11&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount11&quot; id=&quot;SFlatCount11&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter11&quot; id=&quot;SFlatFilter11&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning11&quot; id=&quot;SFlatBinning11&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA11&quot; id=&quot;SFlatPA11&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow12&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse12&quot; id=&quot;SFlatUse12&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount12&quot; id=&quot;SFlatCount12&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter12&quot; id=&quot;SFlatFilter12&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning12&quot; id=&quot;SFlatBinning12&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA12&quot; id=&quot;SFlatPA12&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow13&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse13&quot; id=&quot;SFlatUse13&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount13&quot; id=&quot;SFlatCount13&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter13&quot; id=&quot;SFlatFilter13&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning13&quot; id=&quot;SFlatBinning13&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA13&quot; id=&quot;SFlatPA13&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow14&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse14&quot; id=&quot;SFlatUse14&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount14&quot; id=&quot;SFlatCount14&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter14&quot; id=&quot;SFlatFilter14&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning14&quot; id=&quot;SFlatBinning14&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA14&quot; id=&quot;SFlatPA14&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow15&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse15&quot; id=&quot;SFlatUse15&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount15&quot; id=&quot;SFlatCount15&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter15&quot; id=&quot;SFlatFilter15&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning15&quot; id=&quot;SFlatBinning15&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA15&quot; id=&quot;SFlatPA15&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr id=&quot;SFlatRow16&quot; style=&quot;display:none&quot;&gt;\n			&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;SFlatUse16&quot; id=&quot;SFlatUse16&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatCount16&quot; id=&quot;SFlatCount16&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatFilter16&quot; id=&quot;SFlatFilter16&quot;&gt;&lt;%= filterNameOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n			&lt;td&gt;&lt;select name=&quot;SFlatBinning16&quot; id=&quot;SFlatBinning16&quot;&gt;&lt;%= binningOptions() %&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n			&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;SFlatPA16&quot; id=&quot;SFlatPA16&quot; size=&quot;4&quot; value=&quot;0.0&quot;&gt;&lt;/td&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n		&lt;/tr&gt;\n		&lt;tr&gt;\n			&lt;td colspan=&quot;5&quot;&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;button&quot; title=&quot;Click to add another row&quot; onclick=&quot;DC3.Lib.expandoAddRow('SFlat');&quot;&gt;More&lt;/a&gt;&lt;/td&gt;\n		&lt;/tr&gt;\n&lt;!--&lt;% if(screenFlats) { %&gt;--&gt;\n                &lt;input type=&quot;hidden&quot; name=&quot;SFlatPlanType&quot; value=&quot;both&quot; /&gt;\n&lt;!--&lt;% } else { %&gt;--&gt;\n		&lt;tr&gt;\n			&lt;td colspan=&quot;5&quot;&gt;Saved standard flat plan type:&lt;/td&gt;\n		&lt;/tr&gt;\n		&lt;tr&gt;\n			&lt;td colspan=&quot;5&quot;&gt;\n				&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;SFlatPlanType&quot; value=&quot;both&quot; checked /&gt;Same at dusk and dawn&lt;/label&gt;\n				&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;SFlatPlanType&quot; value=&quot;dusk&quot; /&gt;Dusk&lt;/label&gt;\n				&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;SFlatPlanType&quot; value=&quot;dawn&quot; /&gt;Dawn&lt;/label&gt;\n			&lt;/td&gt;\n		&lt;/tr&gt;\n&lt;!--&lt;% } %&gt;--&gt;\n	&lt;/table&gt;\n&lt;/form&gt;&lt;/html&gt;&lt;&lt;PersistentForm&gt;&gt;&lt;&lt;PostForm &quot;&quot; &quot;/ac/adefflat.asp&quot; &quot;Save Flat Plan&quot; &quot;Upload this flat plan to your plans folder&quot;&gt;&gt;&lt;&lt;ValidateForm &quot;&quot; &quot;postit&quot;&gt;&gt;\n&lt;script&gt;DC3.Lib.expandoInitializeForm('SFlat');&lt;/script&gt;</div>
<div tiddler="Shared File Area" modifier="Bob Denny" modified="201011221637" created="200609292136" tags="UserContent">We suggest [[using FTP|Using FTP]]. &lt;&lt;RemoteContent '/uploads/aindex.asp' Refresh 'Refresh the file list'&gt;&gt;</div>
<div tiddler="SideBarOptions" modifier="Bob Denny" modified="200611191857" created="200609090013" tags="systemContent">&lt;html&gt;&lt;a href=&quot;&lt;%= feedUri %&gt;&quot;&gt;&lt;img src=&quot;/im/feed-icon-14x14.png&quot; border=&quot;0&quot; title=&quot;Subscribe to RSS feed&quot; width=&quot;14&quot; height=&quot;14&quot; align=&quot;right&quot;&gt;&lt;/a&gt;&lt;/html&gt;&lt;&lt;search&gt;&gt;&lt;&lt;closeAll&gt;&gt;&lt;&lt;themeSelect style 'select theme' 'Select a color theme for display'&gt;&gt;&lt;&lt;fontSize &quot;font: &quot;&gt;&gt;&lt;&lt;newTiddler&gt;&gt;&lt;&lt;saveChanges&gt;&gt;&lt;&lt;upload&gt;&gt;[[Test Live|index.asp]]&lt;&lt;slider chkSliderOptionsPanel OptionsPanel 'options »' 'Change advanced options'&gt;&gt;</div>
<div tiddler="SimpleLoopInfoSlider" modifier="Bob Denny" modified="200612051907" created="200612051906" tags="Help UserContent hideUser">This just tests the console by printing a message every second. To stop it, use the Stop Run button in the System Status log panel (at the bottom).</div>
<div tiddler="Single Object Color Series" modifier="Bob Denny" modified="201406232033" created="200609252335" tags="Observing UserContent">&lt;&lt;slider &quot;&quot; &quot;Single Object Help&quot; Help &quot;Helpful information&quot;&gt;&gt;\n&lt;html&gt;\n&lt;form&gt;\n    &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0&quot;&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Target Name:&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Target&quot; id=&quot;clr_tgt&quot; size=&quot;14&quot; value=&quot;&quot; validate=&quot;required&quot;&gt;\n                &lt;input type=&quot;hidden&quot; name=&quot;visOnly&quot; id=&quot;clr_visOnly&quot; value=&quot;true&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;\n                &lt;a id=&quot;clr_getCoords&quot; href=&quot;javascript:;&quot; onClick=&quot;DC3.CatSearch.lookup(DC3.Lib.getPlace(this), null);&quot; title=&quot;Look up coordinates or calculate planetary ephemeris&quot;&gt;&amp;nbsp;Get Coordinates or Ephemeris&lt;/a&gt;\n                &lt;a id=&quot;clr_getTheSky&quot; style=&quot;display:none;&quot; href=&quot;javascript:;&quot; onClick=&quot;DC3.TheSky.fillFormInfo(DC3.Lib.getPlace(this));&quot; title=&quot;Fill in the coordinates from the current target in TheSky&quot;&gt;&amp;nbsp;Get Coordinates From TheSky&lt;/a&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Right Asc. (hrs):&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;RA&quot; id=&quot;clr_ra&quot; size=&quot;12&quot; value=&quot;&quot; validate=&quot;sexanum[0:24],required&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;a id=&quot;clr_catSearch&quot; href=&quot;javascript:;&quot; onClick=&quot;story.displayTiddler(this,'Deep Sky Catalog Search',null,config.options.chkAnimate,false)&quot; title=&quot;Open the Deep Sky Catalog Search Item&quot;&gt;&amp;nbsp;Deep Sky Catalog Search&lt;/a&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Declination (deg):&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;Dec&quot; id=&quot;clr_dec&quot; size=&quot;12&quot; value=&quot;&quot; validate=&quot;sexanum[-90:90],required&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&amp;nbsp;&lt;i&gt;(coordinates in J2000)&lt;/i&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;!--&lt;% if(rotAvail) { %&gt;--&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Pos. Angle (deg):&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;PA&quot; size=&quot;5&quot; value=&quot;&quot; validate=&quot;between[0:360],required&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&amp;nbsp;&lt;i&gt;(true/sky PA, required)&lt;/i&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;!--&lt;% } %&gt;--&gt; \n        &lt;!--&lt;% if(!filtNames) { %&gt;--&gt;\n        &lt;tr&gt;\n            &lt;td colspan=&quot;3&quot;&gt;&lt;span class=&quot;marked&quot;&gt;Note: There are no filters on this system&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;!--&lt;% } %&gt;--&gt;\n    &lt;/table&gt;\n    &lt;table class=&quot;noBorder&quot; style=&quot;border:0;margin-left:0;margin-top:0&quot;&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Use&lt;/th&gt;\n            &lt;th&gt;Count&lt;/th&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;th&gt;Filter&lt;/th&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;th&gt;Duration&lt;/th&gt;\n            &lt;th&gt;Binning&lt;/th&gt;\n            &lt;td&gt;&amp;nbsp&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow1&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse1&quot; id=&quot;ColorUse1&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount1&quot; id=&quot;ColorCount1&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter1&quot; id=&quot;ColorFilter1&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure1&quot; id=&quot;ColorExposure1&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning1&quot; id=&quot;ColorBinning1&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;!--&lt;% if(Prefs.Autofocus.Enabled) { %&gt;--&gt;\n                \n                &lt;input type=&quot;checkbox&quot; name=&quot;AF&quot; value=&quot;yes&quot; title=&quot;Focus the system before acquiring the first image&quot;&gt;\n                Auto focus at start\n                &lt;/input&gt;\n                &amp;nbsp;&amp;nbsp; \n                &lt;!--&lt;% } %&gt;--&gt;\n                \n                &lt;!--&lt;% if(Prefs.CameraPrefs.AutoCalibrate) { %&gt;--&gt;\n                    &lt;input type=&quot;checkbox&quot; checked disabled name=&quot;Cal&quot; value=&quot;yes&quot; title=&quot;Observatory calibrates all images&quot;&gt;Auto calibrate&lt;/input&gt;\n                &lt;!--&lt;% } else { %&gt;--&gt;\n                    &lt;input type=&quot;checkbox&quot; name=&quot;Cal&quot; value=&quot;yes&quot; title=&quot;Apply calibration frames after imaging&quot;&gt;Auto calibrate&lt;/input&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow2&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse2&quot; id=&quot;ColorUse2&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount2&quot; id=&quot;ColorCount2&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter2&quot; id=&quot;ColorFilter2&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure2&quot; id=&quot;ColorExposure2&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning2&quot; id=&quot;ColorBinning2&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;!--&lt;% if(Prefs.Autofocus.Enabled) { %&gt;--&gt;\n                \n                &lt;input type=&quot;checkbox&quot; name=&quot;PerAF&quot; value=&quot;yes&quot; title=&quot;Does not do an initial AF at plan start&quot;&gt;\n                Periodic auto focus\n                &lt;/input&gt;\n                every\n                &lt;input type=&quot;text&quot; name=&quot;PerAFInt&quot; size=&quot;4&quot; value=&quot;30&quot; validate=&quot;between[10:720]&quot;&gt;\n                minutes\n                &lt;/input&gt;\n                \n                &lt;!--&lt;% } %&gt;--&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow3&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse3&quot; id=&quot;ColorUse3&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount3&quot; id=&quot;ColorCount3&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter3&quot; id=&quot;ColorFilter3&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure3&quot; id=&quot;ColorExposure3&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning3&quot; id=&quot;ColorBinning3&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(ditherMainPixels) { %&gt;--&gt;\n            &lt;td&gt;Dithering: &lt;input type=&quot;text&quot; name=&quot;Dither&quot; size=&quot;5&quot; value=&quot;0.0&quot; validate=&quot;number,required&quot;&gt; (main imager pixels rms, -1.0 for auto)&lt;/td&gt;\n            &lt;!--&lt;% } else { %&gt;--&gt;\n            &lt;td&gt;Dithering: &lt;input type=&quot;text&quot; name=&quot;Dither&quot; size=&quot;5&quot; value=&quot;0.0&quot; validate=&quot;number,required&quot;&gt; (pixels rms &lt;img src=&quot;/im/tinyInfo.png&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;none&quot; align=&quot;absmiddle&quot; \n                        hspace=&quot;6&quot; title=&quot;If guided: guider pixels. If unguided: main imager pixels.&quot;&gt; -1.0 for auto)&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow4&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse4&quot; id=&quot;ColorUse4&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount4&quot; id=&quot;ColorCount4&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter4&quot; id=&quot;ColorFilter4&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure4&quot; id=&quot;ColorExposure4&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning4&quot; id=&quot;ColorBinning4&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;td&gt;\n                &lt;!--&lt;% if(!screenFlats) { %&gt;--&gt;\n                &lt;input type=&quot;checkbox&quot; name=&quot;DuskFlats&quot; value=&quot;yes&quot; title=&quot;Requires defaultduskflat or defaultflat&quot;&gt;\n                Dusk Flats\n                &lt;/input&gt;\n                &amp;nbsp;&amp;nbsp;\n                &lt;input type=&quot;checkbox&quot; name=&quot;DawnFlats&quot; value=&quot;yes&quot; title=&quot;Requires defaultdawnflat or defaultflat&quot;&gt;\n                Dawn Flats\n                &lt;/input&gt;\n                &lt;!--&lt;% } else { %&gt;--&gt;\n                &lt;input type=&quot;checkbox&quot; name=&quot;ScreenFlats&quot; value=&quot;yes&quot; title=&quot;Requires defaultflat&quot;&gt;\n                Standard screen flats (at end)\n                &lt;/input&gt;\n                &lt;!--&lt;% } %&gt;--&gt;\n                &lt;!--&lt;% if(User.IsAdministrator) { %&gt;--&gt; \n                &amp;nbsp;&amp;nbsp;\n                &lt;input type=&quot;checkbox&quot; name=&quot;Shutdown&quot; value=&quot;yes&quot; title=&quot;Ignored if Dawn Flats enabled&quot;&gt;\n                Shutdown at run end\n                &lt;/input&gt;&lt;/td&gt;\n                &lt;!--&lt;% } %&gt;--&gt; \n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow5&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse5&quot; id=&quot;ColorUse5&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount5&quot; id=&quot;ColorCount5&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter5&quot; id=&quot;ColorFilter5&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure5&quot; id=&quot;ColorExposure5&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning5&quot; id=&quot;ColorBinning5&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow6&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse6&quot; id=&quot;ColorUse6&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount6&quot; id=&quot;ColorCount6&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter6&quot; id=&quot;ColorFilter6&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure6&quot; id=&quot;ColorExposure6&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning6&quot; id=&quot;ColorBinning6&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow7&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse7&quot; id=&quot;ColorUse7&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount7&quot; id=&quot;ColorCount7&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter7&quot; id=&quot;ColorFilter7&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure7&quot; id=&quot;ColorExposure7&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning7&quot; id=&quot;ColorBinning7&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow8&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse8&quot; id=&quot;ColorUse8&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount8&quot; id=&quot;ColorCount8&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter8&quot; id=&quot;ColorFilter8&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure8&quot; id=&quot;ColorExposure8&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning8&quot; id=&quot;ColorBinning8&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow9&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse9&quot; id=&quot;ColorUse9&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount9&quot; id=&quot;ColorCount9&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter9&quot; id=&quot;ColorFilter9&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure9&quot; id=&quot;ColorExposure9&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning9&quot; id=&quot;ColorBinning9&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow10&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse10&quot; id=&quot;ColorUse10&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount10&quot; id=&quot;ColorCount10&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter10&quot; id=&quot;ColorFilter10&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure10&quot; id=&quot;ColorExposure10&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning10&quot; id=&quot;ColorBinning10&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow11&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse11&quot; id=&quot;ColorUse11&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount11&quot; id=&quot;ColorCount11&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter11&quot; id=&quot;ColorFilter11&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure11&quot; id=&quot;ColorExposure11&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning11&quot; id=&quot;ColorBinning11&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow12&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse12&quot; id=&quot;ColorUse12&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount12&quot; id=&quot;ColorCount12&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter12&quot; id=&quot;ColorFilter12&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure12&quot; id=&quot;ColorExposure12&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning12&quot; id=&quot;ColorBinning12&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow13&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse13&quot; id=&quot;ColorUse13&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount13&quot; id=&quot;ColorCount13&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter13&quot; id=&quot;ColorFilter13&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure13&quot; id=&quot;ColorExposure13&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning13&quot; id=&quot;ColorBinning13&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow14&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse14&quot; id=&quot;ColorUse14&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount14&quot; id=&quot;ColorCount14&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter14&quot; id=&quot;ColorFilter14&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure14&quot; id=&quot;ColorExposure14&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning14&quot; id=&quot;ColorBinning14&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow15&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse15&quot; id=&quot;ColorUse15&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount15&quot; id=&quot;ColorCount15&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter15&quot; id=&quot;ColorFilter15&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure15&quot; id=&quot;ColorExposure15&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning15&quot; id=&quot;ColorBinning15&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=&quot;ColorRow16&quot; style=&quot;display:none&quot;&gt;\n            &lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;ColorUse16&quot; id=&quot;ColorUse16&quot; value=&quot;yes&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorCount16&quot; id=&quot;ColorCount16&quot; size=&quot;4&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;!--&lt;% if(filtNames) { %&gt;--&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorFilter16&quot; id=&quot;ColorFilter16&quot;&gt;\n                    &lt;%= filterNameOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n            &lt;!--&lt;% } %&gt;--&gt;\n            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;ColorExposure16&quot; id=&quot;ColorExposure16&quot; size=&quot;5&quot; value=&quot;&quot;&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;select name=&quot;ColorBinning16&quot; id=&quot;ColorBinning16&quot;&gt;\n                    &lt;%= binningOptions() %&gt;\n                &lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td colspan=&quot;5&quot;&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;button&quot; title=&quot;Click to add another row&quot; onclick=&quot;DC3.Lib.expandoAddRow('Color');&quot;&gt;More&lt;/a&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/form&gt;\n&lt;/html&gt;&lt;&lt;PersistentForm&gt;&gt;&lt;&lt;PostForm &quot;&quot; &quot;/ac/aacqform.asp&quot; &quot;Acquire Images&quot; &quot;Starts the image acquisition process&quot;&gt;&gt;&lt;&lt;ValidateForm &quot;&quot; &quot;postit&quot;&gt;&gt;&lt;script&gt;\nDC3.Lib.expandoInitializeForm(&quot;Color&quot;);\n// DC3.TheSky.setTargetInfo() and DC3.TheSky.switchLink() depend on the link IDs!\nif(DC3.TheSky.theSkyInfoAvailable()) DC3.TheSky.switchLink(&quot;clr&quot;);\n&lt;/script&gt;\n</div>
<div tiddler="Single Object Help" modifier="Bob Denny" modified="201406231650" created="200610040313" tags="Help UserContent hideUser">\nThis is one of the forms that allow you to acquire one or more images of a //single target//. The observatory needs two things:\n#The name and possibly the J2000 coordinates &lt;% if(rotAvail) { %&gt;and sky position angle (PA) &lt;% } %&gt;of the target (see below), and\n#the specs of the image(s) you want taken.\nThis form provides you with a way to specify both. Note that coordinates are always J2000 and can be entered in either sexagesimal or decimal. The sexagesimal translator is very adaptable, most anything for delimiters will work.\n\n//Color Series Only//: &lt;% if(screenFlats) { %&gt;The use of Standard Screen Flats requires require a //standard flat plan//. See [[Setup Standard Flat Fields]]. Flats will be acquired (using the light panel or screen) at the end of the run.&lt;% } else { %&gt;The use of Dawn Flats and Dusk Flats require a //standard flat plan//. See [[Setup Standard Flat Fields]]. Also, selecting Dusk Flats will cause the run to wait until the //next// dusk, so you __must start a run with Dusk Flats before dusk!__ After dusk flats, it wall wait until astronomical night to start your live images. Finally, if your image series finishes too late, you'll miss the dawn flats.&lt;% } %&gt;\n!!Deep Sky Objects\nThe catalog has over 70,000 objects. They are indexed with the abbreviated name of the catalog, a space, then the object name/number in the catalog. For example, Messier object 104 is {{{M 104}}}. Note the space! \n\nIf you know the name, but don't know the coordinates, enter the name and click &quot;Get Coordinates or Ephemeris&quot;. If the object is found, the coordinates will appear in the fields.\n\nTo browse the catalog, you can use the [[Deep Sky Catalog|Deep Sky Catalog Search]] to search our databases. Of course, the object you want must be visible (above the low-horizon limit), the higher the better. The best way to pick a target is with a planetarium program like Starry Night or ~TheSky. Also, by default, only visible targets will be returned from a search of the [[Deep Sky Catalog|Deep Sky Catalog Search]].\n!!Minor Planets and Comets\nACP has automatic ephemeris calculation based on the Minor Planet Center's orbital elements database. To specify a minor planet, enter {{{MP}}} followed by a space, then the name or number (for numbered minor planets) or the MPC designation (packed or full, for unnumbered minor planets). For example, the following are equivalent:\n*Numbered minor planet: {{{MP 23257}}} or {{{MP Denny}}}\n*Unnumbered minor planet: {{{MP 2004 LB6}}} or {{{MP K04L06B}}}\nTo specify a comet, enter {{{CT}}} followed by a space, then the number, designation, or name of the comet. For example, the following are equivalent:\n*Numbered comet: {{{CT 00244P}}} or {{{CT 244P/Scotti}}}\n*Unnumbered comet: {{{CT CK12J010}}} or {{{C/2012 J1}}}\nNOTE: For the unnumbered comet by name, do not include the discoverer name in parentheses. In the above, the {{{(Catalina)}}} is omitted from {{{C/2012 J1}}}. \n\nTo check your target, click &quot;Get Coordinates or Ephemeris&quot;. The message that appears at the bottom of the item will tell you if it was found or not. The RA/Dec will be zeroes; the real coordinates are calculated at the time the image is taken.\n!!Major Planets\nSimply enter the name of the planet. Moon is not supported.</div>
<div tiddler="SingleItemDisplay" modifier="Bob Denny" modified="200610271423" created="200610271423" tags="Help UserContent hideUser">Turn this on to force newly opened items to //replace// the currently visible one. This can be useful on systems with small displays.</div>
<div tiddler="SingleOptionsCookiePlugin" modifier="YourName" modified="200610311233" created="200610302221" tags="systemConfig plugin">/***\n|''Name:''|SingleOptionsCookiePlugin|\n|''Description:''|Hijack to save options cookies in a single large cookie|\n|''Date:''|Oct 30, 2006|\n|''Source:''|http://solo.dc3.com/tw/index.html#SingleOptionsCookiePlugin|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.0.0|\n|''~CoreVersion:''|2.0.11, 2.1.0/1/2|\n|''Browser:''|Firefox 1.5/2.0; Internet Explorer 6.0; Safari|\nThis plugin alters the core options behavior, storing all options values in a single cookie. It also has an addition so that options starting with 'pas' are saved, as needed by BidiX's UploadPlugin. The options cookie stuff hijack must be removed from UploadPlugin!\n!Usage\n#Install the plugin.\n#Copy the loadOptionsCookie code to MarkupPostHead and comment it out in the plugin.\n#Assure that the load/save option hijack is commented out of UploadPlugin\n!Notes\nA single cookie is baked by this plugin. It is named {{{tw_opt}}} and has a value that is the concatenation of all persisted options as {{{name:value&amp;name:value...}}}\n\n@@HACK ALERT@@ - After wrestling for 4 hours with trying to fake the UploadPlugin &quot;save password&quot; checkbox, I gave up. The checkbox does nothing and the password is always saved.\n!!Revision History\n&lt;&lt;&lt;\n''2006.10.30 [1.0.0]'' Initial creation\n&lt;&lt;&lt;\n!!MarkupPostHead\nThis must be moved to MarkupPostHead as it must run before main()\n***/\n//{{{\n/*** snip ***\n&lt;script language='JavaScript' type='text/javascript'&gt;\nwindow.loadOptionsCookie_orig_DC3 = window.loadOptionsCookie;\nwindow.loadOptionsCookie = function()\n{\n if(safeMode)\n return;\n var cookies = document.cookie.split(&quot;;&quot;);\n for(var c = 0; c &lt; cookies.length; c++)\n {\n var p = cookies[c].indexOf(&quot;=&quot;);\n if(p != -1)\n {\n var name = cookies[c].substr(0,p).trim();\n if(name.substr(0, 6) == &quot;tw_opt&quot;) // Found the 'tw_opt' cookie\n {\n var value = cookies[c].substr(p + 1).trim(); // This has all options\n var fc = value.split(&quot;&amp;&quot;);\n for(var i = 0; i &lt; fc.length; i++)\n {\n p = fc[i].indexOf(&quot;:&quot;);\n name = fc[i].substr(0, p).trim();\n value = fc[i].substr(p + 1).trim();\n switch(name.substr(0,3))\n {\n case &quot;txt&quot;:\n case &quot;pas&quot;: // for UploadPlugin\n config.options[name] = unescape(value);\n break;\n case &quot;chk&quot;:\n config.options[name] = (value == &quot;true&quot;);\n break;\n }\n }\n return; // Don't look at more cookies\n }\n }\n }\n};\n&lt;/script&gt;\n*** snip ***/\n/*}}}\n!!Plugin Code\n{{{*/\nversion.extensions.SingleOptionsCookie = {\n major: 1, minor: 0, revision: 0,\n date: new Date(2006, 30, 3), \n type: 'core hijack',\n source: &quot;http://solo.dc3.com/tw/index.html#SingleOptionsCookiePlugin&quot;\n};\n\nwindow.saveOptionCookie_orig_DC3 = window.saveOptionCookie;\nwindow.saveOptionCookie = function(optName)\n{\n if(safeMode)\n return;\n if(window.saveOptionCookie_orig_PasswordTweak) // Unmodified UploadPlugin?\n displayMessage(&quot;Options support in UploadPlugin must be disabled!&quot;);\n\n\n var cookies = document.cookie.split(&quot;;&quot;);\n var opts = { };\n for(var c = 0; c &lt; cookies.length; c++)\n {\n var p = cookies[c].indexOf(&quot;=&quot;);\n if(p != -1)\n {\n var name = cookies[c].substr(0,p).trim();\n if(name.substr(0, 6) == &quot;tw_opt&quot;) // Found the 'tw_opt' cookie\n {\n var value = cookies[c].substr(p + 1).trim(); // This has all options\n var fc = value.split(&quot;&amp;&quot;);\n for(var i = 0; i &lt; fc.length; i++)\n {\n p = fc[i].indexOf(&quot;:&quot;);\n name = fc[i].substr(0, p).trim();\n value = fc[i].substr(p + 1).trim();\n switch(name.substr(0,3))\n {\n case &quot;txt&quot;:\n case &quot;pas&quot;: // for UploadPlugin\n opts[name] = unescape(value);\n break;\n case &quot;chk&quot;:\n opts[name] = (value == &quot;true&quot;);\n break;\n }\n }\n }\n }\n }\n\n opts[optName] = config.options[optName]; // Pick up new value from live options\n c = &quot;tw_opt=&quot;;\n var z;\n for(name in opts) \n {\n switch(name.substr(0,3))\n {\n case &quot;txt&quot;:\n c += name + &quot;:&quot; + escape(opts[name].toString()) + &quot;&amp;&quot;;\n break;\n case &quot;chk&quot;:\n c += name + &quot;:&quot; + (opts[name] ? &quot;true&quot; : &quot;false&quot;) + &quot;&amp;&quot;;\n// if(name == &quot;chkpasUploadPassword&quot;) // UploadPlugin Special case!\n// {\n// var z = &quot;pasUploadPassword&quot;;\n// if (opts[name])\n// c += z + &quot;:&quot; + escape(config.options[z]) + &quot;&amp;&quot;;\n// }\n break;\n case &quot;pas&quot;:\n// if (opts[&quot;chk&quot; + name]) // More upload weirdness\n c += name + &quot;:&quot; + escape(opts[name].toString()) + &quot;&amp;&quot;; // Only save pas if chk is present\n break;\n }\n }\n c = c.substr(0, c.length - 1); // Remove trailing '&amp;'\n c += &quot;; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/&quot;;\n document.cookie = c;\n};\n//}}}\n</div>
<div tiddler="SinglePageModePlugin" modifier="Bob Denny" modified="200609252234" created="200609252234" tags="systemConfig macro plugin">/***\n|''Name:''|SinglePageModePlugin|\n|''Source:''|http://www.TiddlyTools.com/#SinglePageModePlugin|\n|''Author:''|Eric Shulman - ELS Design Studios|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''~CoreVersion:''|2.0.10|\n\nNormally, as you click on the links in TiddlyWiki, more and more tiddlers are displayed on the page. The order of this tiddler display depends upon when and where you have clicked. Some people like this non-linear method of reading the document, while others have reported that when many tiddlers have been opened, it can get somewhat confusing.\n\n!!!!!Usage\n&lt;&lt;&lt;\nSinglePageMode allows you to configure TiddlyWiki to navigate more like a traditional multipage web site with only one item displayed at a time. When SinglePageMode is enabled, the title of the current tiddler is automatically displayed in the browser window's titlebar and the browser's location URL is updated with a 'permalink' for the current tiddler so that it is easier to create a browser 'bookmark' for the current tiddler.\n\nEven when SinglePageMode is disabled (i.e., displaying multiple tiddlers is permitted), you can reduce the potential for confusion by enable TopOfPageMode, which forces tiddlers to always open at the top of the page instead of being displayed following the tiddler containing the link that was clicked.\n&lt;&lt;&lt;\n!!!!!Configuration\n&lt;&lt;&lt;\nWhen installed, this plugin automatically adds checkboxes in the AdvancedOptions tiddler so you can enable/disable the plugin behavior. For convenience, these checkboxes are also included here:\n\n&lt;&lt;option chkSinglePageMode&gt;&gt; Display one tiddler at a time\n&lt;&lt;option chkTopOfPageMode&gt;&gt; Always open tiddlers at the top of the page\n&lt;&lt;&lt;\n!!!!!Installation\n&lt;&lt;&lt;\nimport (or copy/paste) the following tiddlers into your document:\n''SinglePageModePlugin'' (tagged with &lt;&lt;tag systemConfig&gt;&gt;)\n^^documentation and javascript for SinglePageMode handling^^\n\nWhen installed, this plugin automatically adds checkboxes in the ''shadow'' AdvancedOptions tiddler so you can enable/disable this behavior. However, if you have customized your AdvancedOptions, you will need to ''manually add these checkboxes to your customized tiddler.''\n&lt;&lt;&lt;\n!!!!!Revision History\n&lt;&lt;&lt;\n''2006.07.04 [2.2.1]'' in hijack for displayTiddlers(), suspend TPM as well as SPM so that DefaultTiddlers displays in the correct order.\n''2006.06.01 [2.2.0]'' added chkTopOfPageMode (TPM) handling\n''2006.02.04 [2.1.1]'' moved global variable declarations to config.* to avoid FireFox 1.5.0.1 crash bug when assigning to globals\n''2005.12.27 [2.1.0]'' hijack displayTiddlers() so that SPM can be suspended during startup while displaying the DefaultTiddlers (or #hash list). Also, corrected initialization for undefined SPM flag to &quot;false&quot;, so default behavior is to display multiple tiddlers\n''2005.12.27 [2.0.0]'' Update for TW2.0\n''2005.11.24 [1.1.2]'' When the back and forward buttons are used, the page now changes to match the URL. Based on code added by Clint Checketts\n''2005.10.14 [1.1.1]'' permalink creation now calls encodeTiddlyLink() to handle tiddler titles with spaces in them\n''2005.10.14 [1.1.0]'' added automatic setting of window title and location bar ('auto-permalink'). feature suggestion by David Dickens.\n''2005.10.09 [1.0.1]'' combined documentation and code in a single tiddler\n''2005.08.15 [1.0.0]'' Initial Release\n&lt;&lt;&lt;\n!!!!!Credits\n&lt;&lt;&lt;\nThis feature was developed by EricShulman from [[ELS Design Studios|http:/www.elsdesign.com]].\nSupport for BACK/FORWARD buttons adapted from code developed by Clint Checketts\n&lt;&lt;&lt;\n!!!!!Code\n***/\n//{{{\nversion.extensions.SinglePageMode= {major: 2, minor: 2, revision: 1, date: new Date(2006,7,3)};\n\nif (config.options.chkSinglePageMode==undefined) config.options.chkSinglePageMode=false;\nconfig.shadowTiddlers.AdvancedOptions += &quot;\sn&lt;&lt;option chkSinglePageMode&gt;&gt; Display one tiddler at a time&quot;;\n\nif (config.options.chkTopOfPageMode==undefined) config.options.chkTopOfPageMode=false;\nconfig.shadowTiddlers.AdvancedOptions += &quot;\sn&lt;&lt;option chkTopOfPageMode&gt;&gt; Always open tiddlers at the top of the page&quot;;\n\nconfig.SPMTimer = 0;\nconfig.lastURL = window.location.hash;\nfunction checkLastURL()\n{\n if (!config.options.chkSinglePageMode)\n { window.clearInterval(config.SPMTimer); config.SPMTimer=0; return; }\n if (config.lastURL == window.location.hash)\n return;\n var tiddlerName = convertUTF8ToUnicode(decodeURI(window.location.hash.substr(1)));\n tiddlerName=tiddlerName.replace(/\s[\s[/,&quot;&quot;).replace(/\s]\s]/,&quot;&quot;); // strip any [[ ]] bracketing\n if (tiddlerName.length) story.displayTiddler(null,tiddlerName,1,null,null);\n}\n\nif (Story.prototype.SPM_coreDisplayTiddler==undefined) Story.prototype.SPM_coreDisplayTiddler=Story.prototype.displayTiddler;\nStory.prototype.displayTiddler = function(srcElement,title,template,animate,slowly)\n{\n if (config.options.chkSinglePageMode) {\n window.location.hash = encodeURIComponent(String.encodeTiddlyLink(title));\n config.lastURL = window.location.hash;\n document.title = wikifyPlain(&quot;SiteTitle&quot;) + &quot; - &quot; + title;\n story.closeAllTiddlers();\n if (!config.SPMTimer) config.SPMTimer=window.setInterval(function() {checkLastURL();},1000);\n }\n if (config.options.chkTopOfPageMode) { story.closeTiddler(title); window.scrollTo(0,0); srcElement=null; }\n this.SPM_coreDisplayTiddler(srcElement,title,template,animate,slowly)\n}\n\nif (Story.prototype.SPM_coreDisplayTiddlers==undefined) Story.prototype.SPM_coreDisplayTiddlers=Story.prototype.displayTiddlers;\nStory.prototype.displayTiddlers = function(srcElement,titles,template,unused1,unused2,animate,slowly)\n{\n // suspend single-page mode when displaying multiple tiddlers\n var saveSPM=config.options.chkSinglePageMode; config.options.chkSinglePageMode=false;\n var saveTPM=config.options.chkTopOfPageMode; config.options.chkTopOfPageMode=false;\n this.SPM_coreDisplayTiddlers(srcElement,titles,template,unused1,unused2,animate,slowly);\n config.options.chkSinglePageMode=saveSPM; config.options.chkTopOfPageMode=saveTPM;\n}\n//}}}</div>
<div tiddler="SiteSubtitle" modifier="Bob Denny" modified="200609252316" created="200609090002" tags="systemContent">\n[[Welcome]] &lt;%= User.Name %&gt;</div>
<div tiddler="SiteTitle" modifier="Bob Denny" modified="200609221437" created="200609090001" tags="systemContent">&lt;%= Prefs.SiteName %&gt;</div>
<div tiddler="Sky Flats Help" modifier="Bob Denny" modified="201406211950" created="200611040449" tags="Help UserContent hideUser">Fill in the specs for the flat fields you want to acquire. The order of flat sets must be as they would be taken at __dusk__ - with the filter/binning resulting in the __lowest sensitivity used first__ (when the sky is brightest). __Filter sensitivity for sky-flats is not the same as for night imaging__. Often red will be the least sensitive. For sky-flats, you are imaging a blue sky! Also, higher binning is much more sensitive so list your lowest binning levels first, regardless of the filter. \n\nFor common LRGB imaging (L at binning 1 and RGB at binning 2) try the order\n# L at binning 1\n# R at binning 2\n# G at binning 2\n# B at binning 2\nNarrow-band filters (~H-Alpha, etc.) should come first since they transmit far less light than color filters.</div>
<div tiddler="SortableGridPlugin" modifier="Bob Denny" modified="200611042058" created="200609262204" tags="systemConfig plugin">/***\n|''Name:''|SortableGridPlugin|\n|''Description:''|Provide live sorting of tables by column|\n|''Date:''|Nov 4, 2006|\n|''Source:''|[[SortableGridPlugin|http://solo.dc3.com/tw/plugins.html#SortableGridPlugin]]|\n|''Author:''|Stuart Langridge, Demian Johnson, Bob Denny|\n|''License:''|See Below|\n|''Version:''|1.1.2|\n|''~CoreVersion:''|2.0.11 and 2.1.x|\n|''Browser:''|Firefox 1.5/2.0; Internet Explorer 6.0/7.0; Safari|\n!!Description\n@@Please note that this works only with TiddlyWiki 2.0.11 and 2.1.0/1/2@@\n\nThis plugin provides live sorting of tables by clicking on a column header. To sort in reverse, click the same column header a second time. An arrow in the sort column shows the direction of sorting. \n\nIt works by trying to automatically detect the type of data in a column, then sorting by the rules for that data type. Note that the data in the first row (before sorting for the first time) is used for type detection, so if other data types exist in the column below the first row, the results will be unpredictable. If it //can// recognize the string as prticular type it //will// sort that column by that type. Moral: keep all of your data in a column the same type. The following data types are checked in the order shown (in other words the table shows the precedence of type detection):\n\n|!Type |!Description|\n|Date|Various formats for dates, specifically any string format that can be converted to a date/time by Javascript's Date.Parse() method.|\n|Currency|Any string beginning with $, £, or € followed by a numeric string (except no leading sign). Note that it does not do currency conversion, the raw currency values are sorted numerically. {{{/^[$|£|€]{1}\sd*\s.{0,1}\sd+$/}}}|\n|Numeric|Data must consist purely of digits, optional leading plus or minus sign, a single period. Javascript cannot handle the Continental virgule (comma decimal point). {{{/^[\s+|\s-]{0,1}\sd*\s.{0,1}\sd+$/}}}|\n|File Size|Numeric string (except no leading sign) with b, Kb, Mb, or Gb at the end. Sorts according to the actual value represented by the notation. {{{/^\sd*\s.{0,1}\sd+[K|M|G]{0,1}b$}}}|\n|Text|Anything that does not match the formats listed below. Text is sorted without regard to character case.|\n!!Installation\nFollow the usual procedure for installing a plugin: Edit this tiddler, copy, paste into a new tiddler in your TW, and tag it systemConfig. Close, Save, and Shift-Reload your TW's page. The table below (in Example) should have hot column headers and be sortable.\n!!Usage\nTo make a table sortable, append an {{{h}}} to the end of the first row. If the table is thus marked as sortable, the formatter will add a CSS class {{{sortable}}} to the generated {{{&lt;table&gt;}}} element. Thus you can use CSS to alter the appearance of the sortable table and/or its elements.\n!!Example\n|Name |Salary |Extension |Performance |File Size |Start date |h\n|Bloggs, Fred |$12000.00 |1353 |+1.2 |74.2Kb |Aug 19, 2003 21:34:00 |\n|Bloggs, Fred |$12000.00 |1353 |1.2 |3350b |09/18/2003 |\n|Bloggs, Fred |$12000 |1353 |1.200 |55.2Kb |August 18, 2003 |\n|Bloggs, Fred |$12000.00 |1353 |1.2 |2100b |07/18/2003 |\n|Bloggs, Fred |$12000.00 |1353 |01.20 |6.156Mb |08/17/2003 05:43 |\n|Turvey, Kevin |$191200.00 |2342 |-33 |1b |02/05/1979 |\n|Mbogo, Arnold |$32010.12 |2755 |-21.673 |1.2Gb |09/08/1998 |\n|Shakespeare, Bill |£122000.00|3211 |6 |33.22Gb |12/11/1961 |\n|Shakespeare, Hamlet |£9000 |9005 |-8 |3Gb |01/01/2002 |\n|Fitz, Marvin |€3300.30 |5554 |+5 |4Kb |05/22/1995 |\n!!Revision History\n&lt;&lt;&lt;\n''2003.11.?? [?.?.?]'' Stuart Langridge (http://www.kryogenix.org/code/browser/sorttable/) - Core code for DHTML sortable tables. Copyright and license for his code has been carried forward and applies to subsequent additions.\n''2006.02.14 [1.0.0]'' Demian Johnson - Initial release, adaptation of Langridge code to TiddlyWiki.\n''2006.09.29 [1.1.0]'' Bob Denny - Add standard-format plugin documentation, reformat and tabify code for readability, refactor references to plugin, add new &quot;file size&quot; detection and sorting, add sterling and euro to currency detection, allow any real numbers including optional sign and either period or comma for decimal point for numeric sorting, make RegExp matching strict for currency and numeric, clean up lint warnings, correct spelling of Hamlet's name.\n''2006.10.19 [1.1.1]'' Bob Denny - Allow use with TW 2.1.1 and 2.1.2, hijack is identical with 2.1.0.\n''2006.11.04 [1.1.2]'' Bob Denny - Oh hell, accept 2.1.x, bit again by 2.1.3 which was OK.\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\n//\n// Begin SORTABLE.JS\n// This Code is:\n// Code downloaded from the Browser Experiments section of kryogenix.org is \n// licenced under the so-called MIT licence. The license is below.\n// ----------------------------------------\n// Copyright (c) 1997-date Stuart Langridge\n// ----------------------------------------\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this \n// software and associated documentation files (the &quot;Software&quot;), to deal in the Software \n// without restriction, including without limitation the rights to use, copy, modify, merge, \n// publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons \n// to whom the Software is furnished to do so, subject to the following conditions:\n//\n// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, \n// INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR \n// PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE \n// FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR \n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER \n// DEALINGS IN THE SOFTWARE.\n//\n// Modified under the same aforementioned terms by Demian Johnston, 2006\n// Further modified under the same aforementioned terms by Bob Denny, 2006: \n// 1. Add flexible date/time \n// 2. Use 'this' instead of full dotted names \n// 3. Re-indent and tabify after being munged by TW/IE bu\n// 4. Add &quot;file size&quot; sensing and sorting. Validate with Javascript Lint \n//\nversion.extensions.PersistentForm = {\n major: 1, minor: 1, revision: 2,\n date: new Date(2006, 11, 4), \n type: 'extension',\n source: &quot;http://solo.dc3.com/tw/plugins.html#SortableGridPlugin&quot;\n};\n//}}}\n\n//{{{\nconfig.macros.sortableGridPlugin = { SORT_COLUMN_INDEX: 0 };\n\nconfig.macros.sortableGridPlugin.ts_makeSortable = function(table) \n{\n var firstRow;\n if (table.rows &amp;&amp; table.rows.length &gt; 0) {\n firstRow = table.rows[0];\n }\n if (!firstRow) return;\n \n // We have a first row: assume it's the header, and make its contents clickable links\n for (var i=0;i&lt;firstRow.cells.length;i++) {\n var cell = firstRow.cells[i];\n var txt = config.macros.sortableGridPlugin.ts_getInnerText(cell);\n cell.innerHTML = '&lt;a href=&quot;#&quot; class=&quot;sortheader&quot; onclick=&quot;config.macros.sortableGridPlugin.ts_resortTable(this);return false;&quot;&gt;' +\n txt + '&lt;span class=&quot;sortarrow&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/a&gt;';\n }\n};\n//}}}\n\n//{{{\nconfig.macros.sortableGridPlugin.ts_getInnerText = function(el) \n{\n if (typeof el == &quot;string&quot;) return el;\n if (typeof el == &quot;undefined&quot;) { return el; }\n if (el.innerText) return el.innerText; //Not needed but it is faster\n var str = &quot;&quot;;\n var cs = el.childNodes;\n var l = cs.length;\n for (var i = 0; i &lt; l; i++) {\n switch (cs[i].nodeType) \n {\n case 1: //ELEMENT_NODE\n str += config.macros.sortableGridPlugin.ts_getInnerText(cs[i]);\n break;\n case 3: //TEXT_NODE\n str += cs[i].nodeValue;\n break;\n }\n }\n return str;\n};\n\nconfig.macros.sortableGridPlugin.getParent = function(el, pTagName) \n{\n if (el === null) \n return null;\n else if (el.nodeType == 1 &amp;&amp; el.tagName.toLowerCase() == pTagName.toLowerCase()) // Gecko bug, supposed to be uppercase\n return el;\n else\n return config.macros.sortableGridPlugin.getParent(el.parentNode, pTagName);\n};\n//}}}\n\n//{{{\nconfig.macros.sortableGridPlugin.ts_resortTable = function(lnk) \n{\n var M = config.macros.sortableGridPlugin;\n // get the span\n var span;\n for (var ci = 0; ci &lt; lnk.childNodes.length; ci++) {\n if (lnk.childNodes[ci].tagName &amp;&amp; lnk.childNodes[ci].tagName.toLowerCase() == 'span') \n span = lnk.childNodes[ci];\n }\n var td = lnk.parentNode;\n var column = td.cellIndex;\n var table = M.getParent(td,'TABLE');\n \n // Work out a type for the column\n if (table.rows.length &lt;= 1) return;\n var itm = M.ts_getInnerText(table.rows[1].cells[column]);\n var sortfn = M.ts_sort_caseinsensitive;\n if(!isNaN(Date.parse(itm)))\n sortfn = M.ts_sort_date;\n else if(itm.match(/^[$|£|€]{1}\sd*\s.{0,1}\sd+$/)) \n sortfn = M.ts_sort_currency;\n else if(itm.match(/^[\s+|\s-]{0,1}\sd*\s.{0,1}\sd+$/)) \n sortfn = M.ts_sort_numeric;\n else if(itm.match(/^\sd*\s.{0,1}\sd+[K|M|G]{0,1}b$/))\n sortfn = M.ts_sort_fileSize;\n M.SORT_COLUMN_INDEX = column;\n var firstRow = new Array();\n var newRows = new Array();\n for (var i = 0; i &lt; table.rows[0].length; i++) { firstRow[i] = table.rows[0][i]; }\n for (var j = 1; j &lt; table.rows.length; j++) { newRows[j-1] = table.rows[j]; }\n \n newRows.sort(sortfn);\n var ARROW;\n if (span.getAttribute(&quot;sortdir&quot;) == 'down') {\n ARROW = '&amp;nbsp;&amp;nbsp;&amp;uarr;';\n newRows.reverse();\n span.setAttribute('sortdir','up');\n } else {\n ARROW = '&amp;nbsp;&amp;nbsp;&amp;darr;';\n span.setAttribute('sortdir','down');\n }\n \n // We appendChild rows that already exist to the tbody, so it moves them \n // rather than creating new ones. Don't do sortbottom rows\n for ( i=0;i&lt;newRows.length;i++) { \n if (!newRows[i].className || (newRows[i].className &amp;&amp; (newRows[i].className.indexOf('sortbottom') == -1))) \n table.tBodies[0].appendChild(newRows[i]);\n }\n // do sortbottom rows only\n for ( i=0;i&lt;newRows.length;i++) { \n if (newRows[i].className &amp;&amp; (newRows[i].className.indexOf('sortbottom') != -1)) \n table.tBodies[0].appendChild(newRows[i]);\n }\n \n // Delete any other arrows there may be showing\n var allspans = document.getElementsByTagName(&quot;span&quot;);\n for ( ci=0;ci&lt;allspans.length;ci++) {\n if (allspans[ci].className == 'sortarrow') {\n if (M.getParent(allspans[ci],&quot;table&quot;) == M.getParent(lnk,&quot;table&quot;)) { // in the same table as us?\n allspans[ci].innerHTML = '&amp;nbsp;&amp;nbsp;&amp;nbsp;';\n }\n }\n }\n \n span.innerHTML = ARROW;\n};\n//}}}\n\n//{{{\nconfig.macros.sortableGridPlugin.ts_sort_fileSize = function(a, b) \n{\n var M = config.macros.sortableGridPlugin;\n var convert = function(str)\n {\n var val;\n var i;\n if((i = str.indexOf(&quot;Kb&quot;)) != -1)\n val = 1024.0 * str.substr(0, i);\n else if((i = str.indexOf(&quot;Mb&quot;)) != -1)\n val = 1048576.0 * str.substr(0, i);\n else if((i = str.indexOf(&quot;Gb&quot;)) != -1)\n val = 1073741824.0 * str.substr(0, i);\n else\n val = 1.0 * str.substr(0, str.length - 1);\n return val;\n };\n \n var aa = M.ts_getInnerText(a.cells[M.SORT_COLUMN_INDEX]);\n var bb = M.ts_getInnerText(b.cells[M.SORT_COLUMN_INDEX]);\n var v1 = convert(aa);\n var v2 = convert(bb);\n if(v1 == v2) return 0;\n if(v1 &lt; v2) return -1;\n return 1;\n};\n\nconfig.macros.sortableGridPlugin.ts_sort_date = function(a, b) \n{\n var M = config.macros.sortableGridPlugin;\n // Handles dates per the rules of Date.parse()\n var aa = M.ts_getInnerText(a.cells[M.SORT_COLUMN_INDEX]);\n var bb = M.ts_getInnerText(b.cells[M.SORT_COLUMN_INDEX]);\n var dt1 = Date.parse(aa);\n var dt2 = Date.parse(bb);\n if (dt1 == dt2) return 0;\n if (dt1 &lt; dt2) return -1;\n return 1;\n};\n\nconfig.macros.sortableGridPlugin.ts_sort_currency = function(a, b) \n{ \n var M = config.macros.sortableGridPlugin;\n var aa = M.ts_getInnerText(a.cells[M.SORT_COLUMN_INDEX]).replace(/[^0-9.]/g,'');\n var bb = M.ts_getInnerText(b.cells[M.SORT_COLUMN_INDEX]).replace(/[^0-9.]/g,'');\n return parseFloat(aa) - parseFloat(bb);\n};\n\nconfig.macros.sortableGridPlugin.ts_sort_numeric = function(a, b) \n{ \n var M = config.macros.sortableGridPlugin;\n var aa = parseFloat(M.ts_getInnerText(a.cells[M.SORT_COLUMN_INDEX]));\n if (isNaN(aa)) aa = 0;\n var bb = parseFloat(M.ts_getInnerText(b.cells[M.SORT_COLUMN_INDEX])); \n if (isNaN(bb)) bb = 0;\n return aa-bb;\n};\n\nconfig.macros.sortableGridPlugin.ts_sort_caseinsensitive = function(a, b) \n{\n var M = config.macros.sortableGridPlugin;\n var aa = M.ts_getInnerText(a.cells[M.SORT_COLUMN_INDEX]).toLowerCase();\n var bb = M.ts_getInnerText(b.cells[M.SORT_COLUMN_INDEX]).toLowerCase();\n if (aa == bb) return 0;\n if (aa &lt; bb) return -1;\n return 1;\n};\n\n// config.macros.sortableGridPlugin.ts_sort_default = function(a, b) \n// {\n// var M = config.macros.sortableGridPlugin;\n// var aa = M.ts_getInnerText(a.cells[M.SORT_COLUMN_INDEX]);\n// var bb = M.ts_getInnerText(b.cells[M.SORT_COLUMN_INDEX]);\n// if (aa == bb) return 0;\n// if (aa &lt; bb) return -1;\n// return 1;\n// };\n//\n//}}}\n\n//{{{\n// end Code downloaded from the Browser Experiments section of kryogenix.org\n// end Copyright (c) 1997-date Stuart Langridge//\n// END SORTABLE.JS//\n//}}}\n\n//{{{\n//\n//\n// CORE HIJACK WARNINGS: \n// (1) Depends on the table formatter being first in the config.formatters array\n// (2) Version-specifics - test on your version before adding to the logic here!\n//\nif(version.major == 2 &amp;&amp; version.minor === 0 &amp;&amp; version.revision == 11)\n{\n config.formatters[0].handler = function(w)\n {\n var table = createTiddlyElement(w.output,&quot;table&quot;);\n w.nextMatch = w.matchStart;\n var lookaheadRegExp = new RegExp(this.lookahead,&quot;mg&quot;);\n var currRowType = null, nextRowType;\n var rowContainer, rowElement;\n var prevColumns = [];\n var rowCount = 0;\n var want_sortable=0;\n do {\n lookaheadRegExp.lastIndex = w.nextMatch;\n var lookaheadMatch = lookaheadRegExp.exec(w.source);\n var matched = lookaheadMatch &amp;&amp; lookaheadMatch.index == w.nextMatch;\n if(matched)\n {\n nextRowType = lookaheadMatch[2];\n if(nextRowType != currRowType)\n rowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);\n currRowType = nextRowType;\n if(currRowType == &quot;c&quot;)\n {\n if(rowCount === 0)\n rowContainer.setAttribute(&quot;align&quot;,&quot;top&quot;);\n else\n rowContainer.setAttribute(&quot;align&quot;,&quot;bottom&quot;);\n w.nextMatch = w.nextMatch + 1;\n w.subWikify(rowContainer,this.rowTerminator);\n table.insertBefore(rowContainer,table.firstChild);\n }\n else\n {\n var rowClass = (rowCount &amp; 1) ? &quot;oddRow&quot; : &quot;evenRow&quot;;\n rowElement = createTiddlyElement(rowContainer,&quot;tr&quot;,null,rowClass);\n this.rowHandler(w,rowElement,prevColumns);\n }\n if(currRowType == &quot;h&quot;) {\n want_sortable=1;\n }\n rowCount++;\n }\n } while(matched);\n if (want_sortable) {\n table.setAttribute(&quot;class&quot;,&quot;sortable&quot;);\n config.macros.sortableGridPlugin.ts_makeSortable(table);\n }\n };\n} \nelse if(version.major == 2 &amp;&amp; version.minor == 1)\n{\n config.formatters[0].handler = function(w)\n {\n var table = createTiddlyElement(w.output,&quot;table&quot;);\n var prevColumns = [];\n var currRowType = null;\n var rowContainer;\n var rowCount = 0;\n var want_sortable = 0;\n \n w.nextMatch = w.matchStart;\n this.lookaheadRegExp.lastIndex = w.nextMatch;\n var lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n while(lookaheadMatch &amp;&amp; lookaheadMatch.index == w.nextMatch)\n {\n var nextRowType = lookaheadMatch[2];\n if(nextRowType == &quot;k&quot;)\n {\n table.className = lookaheadMatch[1];\n w.nextMatch += lookaheadMatch[0].length+1;\n }\n else\n {\n if(nextRowType != currRowType)\n {\n rowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);\n currRowType = nextRowType;\n }\n if(currRowType == &quot;c&quot;)\n {\n // Caption\n w.nextMatch++;\n if(rowContainer != table.firstChild)\n table.insertBefore(rowContainer,table.firstChild);\n//[rbd lint warn] rowContainer.setAttribute(&quot;align&quot;,rowCount == 0?&quot;top&quot;:&quot;bottom&quot;);\n rowContainer.setAttribute(&quot;align&quot;,rowCount === 0?&quot;top&quot;:&quot;bottom&quot;);\n w.subWikifyTerm(rowContainer,this.rowTermRegExp);\n }\n else\n {\n this.rowHandler(w,createTiddlyElement(rowContainer,&quot;tr&quot;,null,(rowCount&amp;1)?&quot;oddRow&quot;:&quot;evenRow&quot;),prevColumns);\n if(currRowType == &quot;h&quot;) want_sortable = 1;\n rowCount++;\n }\n }\n this.lookaheadRegExp.lastIndex = w.nextMatch;\n lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n }\n if (want_sortable) {\n table.setAttribute(&quot;class&quot;,&quot;sortable&quot;);\n config.macros.sortableGridPlugin.ts_makeSortable(table);\n }\n };\n}\nelse\n alert(&quot;SortableGridPlugin works only with TiddlyWiki 2.0.11 and 2.1.x&quot;);\n \n//}}}\n</div>
<div tiddler="SplashScreenPlugin" modifier="Bob Denny" modified="200609232047" created="200609090049" tags="systemConfig plugin">/***\n\n''Inspired by [[TiddlyPom|http://www.warwick.ac.uk/~tuspam/tiddlypom.html]]''\n\n|Name|SplashScreenPlugin|\n|Created by|SaqImtiaz|\n|Location|http://lewcid.googlepages.com/lewcid.html#SplashScreenPlugin|\n|Version|0.21 |\n|Requires|~TW2.08+|\n!Description:\nProvides a simple splash screen that is visible while the TW is loading. \n\n@@WARNING! INSTALLATION CODE NOW COMMENTED OUT@@. See twstore.asp.\n\n!Installation\nCopy the source text of this tiddler to your TW in a new tiddler, tag it with systemConfig and save and reload. The SplashScreen will now be installed and will be visible the next time you reload your TW.\n\n!Customizing\nOnce the SplashScreen has been installed and you have reloaded your TW, the splash screen html will be present in the MarkupPreHead tiddler. You can edit it and customize to your needs.\n\n!History\n* 21-09-06: Comment out initialization for ~ShareYourSky/ASP usage. See twstore.asp for details.\n* 20-07-06 : version 0.21, modified to hide contentWrapper while SplashScreen is displayed.\n* 26-06-06 : version 0.2, first release\n\n!Code\n***/\n//{{{\nvar old_lewcid_splash_restart=restart;\n\nrestart = function()\n{ if (document.getElementById(&quot;SplashScreen&quot;))\n document.getElementById(&quot;SplashScreen&quot;).style.display = &quot;none&quot;;\n if (document.getElementById(&quot;contentWrapper&quot;))\n document.getElementById(&quot;contentWrapper&quot;).style.display = &quot;block&quot;;\n \n old_lewcid_splash_restart();\n \n/*** REMOVE ONCE INSTALLED \nif (splashScreenInstall)\n {if(config.options.chkAutoSave)\n {saveChanges();}\n displayMessage(&quot;TW SplashScreen has been installed, please save and refresh your TW.&quot;);\n }\n***/\n}\n\n/*** REMOVE ONCE INSTALLED\nvar oldText = store.getTiddlerText(&quot;MarkupPreHead&quot;);\nif (oldText.indexOf(&quot;SplashScreen&quot;)==-1)\n {var siteTitle = store.getTiddlerText(&quot;SiteTitle&quot;);\n var splasher='\sn\sn&lt;style type=&quot;text/css&quot;&gt;#contentWrapper {display:none;}&lt;/style&gt;&lt;div id=&quot;SplashScreen&quot; style=&quot;border: 3px solid #ccc; display: block; text-align: center; width: 320px; margin: 100px auto; padding: 50px; color:#000; font-size: 28px; font-family:Tahoma; background-color:#eee;&quot;&gt;&lt;b&gt;'+siteTitle +'&lt;/b&gt; is loading&lt;blink&gt; ...&lt;/blink&gt;&lt;br&gt;&lt;br&gt;&lt;span style=&quot;font-size: 14px; color:red;&quot;&gt;Requires Javascript.&lt;/span&gt;&lt;/div&gt;';\n if (! store.tiddlerExists(&quot;MarkupPreHead&quot;))\n {var myTiddler = store.createTiddler(&quot;MarkupPreHead&quot;);}\n else\n {var myTiddler = store.getTiddler(&quot;MarkupPreHead&quot;);}\n myTiddler.set(myTiddler.title,oldText+splasher,config.options.txtUserName,null,null);\n store.setDirty(true);\n var splashScreenInstall = true;\n}\n***/\n//}}}</div>
<div tiddler="Standard Flat Fields" modifier="Bob Denny" modified="201406231637" created="200804041745" tags="UserContent Observing">Acquire automatic flat fields using a previously saved standard flat plan. You can set up standard flats using the [[Setup Standard Flat Fields]] item.\n\nThis will start immediately&lt;% if(!screenFlats) { %&gt;, then sit waiting until the next dusk or dawn, whichever comes first, and will use the appropriate standard flat plan (see above)&lt;% } else { %&gt; and use the light panel/screen to acquire the flats. If needed, the dome/roof will be closed while this runs, and if it was open it will be re-opened afterward&lt;% } %&gt;.\n&lt;html&gt;&lt;form&gt;&lt;/form&gt;&lt;/html&gt;\n&lt;&lt;PostForm &quot;&quot; &quot;/ac/aacqdefflat.asp&quot; &quot;Acquire Standard Flat Fields&quot; &quot;Starts the flat field acquisition process&quot;&gt;&gt;</div>
<div tiddler="StartupItems" modifier="Brewington" modified="201505040521" created="200804140208" tags="Custom systemContent">[[System Status]]\n</div>
<div tiddler="StyleSheet" modifier="Bob Denny" modified="201109291557" created="201108292323" tags="styleSheet systemContent">/***\nThese are styles common to all themes. Usually widgets etc.\n!bValidator jQuery Form Validator Styles\nAuthor: Bojan Mauser [[bValidator jQuery form validation plugin|http://code.google.com/p/bvalidator/]]\n!!Revision History\n&lt;&lt;&lt;\n''2011.09.17 [rbd]'' [[SCHEDULER-691|http://gemini.dc3.com:8472/Gemini/Default.aspx?p=22&amp;i=691]] bValidator (jQuery form validator) styles. Validator used in Scheduler input forms. Incorporate into TW and my [[ValidateFormPlugin]]\n&lt;&lt;&lt;\n!!CSS Rules for bValidator\nThere are 4 styles of popup validation messages\n!!!Gray (the default)\n***/\n/*{{{*/\n/* invalid input */\n.bvalidator_invalid{\n	background-color: #FFFFAE;\n}\n\n/* error message */\n.bvalidator_errmsg {\n	background-color:#333;\n	font-size:10px;\n	border:1px solid #999;\n	color:#FFF;\n	display:none;\n	-moz-border-radius:4px;\n	-webkit-border-radius:4px;\n	-moz-border-radius-bottomleft:0;\n	-moz-border-radius-topleft:0;\n	-webkit-border-bottom-left-radius:0;\n	-webkit-border-top-left-radius:0;\n	-moz-box-shadow:0 0 6px #ddd;\n	-webkit-box-shadow:0 0 6px #ddd;\n	white-space:nowrap;\n	padding-top: 2px;\n	padding-right: 10px;\n	padding-bottom: 2px;\n	padding-left: 5px;\n	font-family: Arial, Helvetica, sans-serif;\n	-moz-opacity:.90;\n	filter:alpha(opacity=90);\n	opacity:.90; \n}\n\n/* close icon */\n.bvalidator_errmsg .bvalidator_close_icon {\n	margin-left: 5px;\n	margin-top: -2px;\n	font-family: Arial, Helvetica, sans-serif;\n	font-weight: bold;\n	color:#F96;\n	cursor:pointer;\n}\n\n/* arrow */\n.bvalidator_errmsg em {\n	display:block;\n	border-color: #333 transparent transparent;\n	border-style: solid;\n	border-width: 10px 10px 0;\n	height: 0;\n	width: 0;\n	position:absolute;\n	bottom:-10px;\n	left:5px;\n}\n/*}}}*/\n/***\n!!!~PostIt\n&lt;&lt;&lt;\n	var optionsPostIt = {\n		classNamePrefix:   'bvalidator_postit_',\n		offset:	           {x:-29, y:-10},\n		template:          '&lt;div class=&quot;{errMsgClass}&quot;&gt;{message}&lt;div class=&quot;bvalidator_postit_pointer&quot;&gt;&lt;div class=&quot;bvalidator_postit_inner_pointer&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'\n	};\n&lt;&lt;&lt;\n***/\n/*{{{*/\n/* invalid input */\n.bvalidator_postit_invalid{\n	background-color: #FFFFAE;\n}\n\n/* error message */\n.bvalidator_postit_errmsg {\n	background-color:#fffe66;\n	font-size:15px;\n	color:#000;\n	display:none;\n	white-space:nowrap;\n	padding-top: 2px;\n	padding-right: 10px;\n	padding-bottom: 2px;\n	padding-left: 5px;\n	border:2px solid #100b07;\n	border-radius: 10px;\n	-moz-border-radius: 10px;\n	font-family:'Comic Sans MS', 'Trebuchet MS', Trebuchet, Arial, Verdana, Sans-serif;\n	-moz-box-shadow:0 0 6px #ddd;\n	-webkit-box-shadow:0 0 6px #ddd;\n}\n\n/* arrow */\n.bvalidator_postit_errmsg .bvalidator_postit_pointer, .bvalidator_postit_errmsg .bvalidator_postit_inner_pointer {\n	position: absolute;\n	width:0;\n	height:0;\n	border-bottom-width: 0;\n	background: none;\n}\n.bvalidator_postit_errmsg .bvalidator_postit_pointer {\n	border-left: 7px solid transparent;\n	border-right: 7px solid transparent;\n	border-top: 14px solid #333;\n	bottom: -14px;\n	right: auto;\n	left: 20px;\n	margin-left: -7px;\n	bottom: -15px;\n}\n.bvalidator_postit_errmsg .bvalidator_postit_inner_pointer {\n	border-left: 5px solid transparent;\n	border-right: 5px solid transparent;\n	border-top: 5px solid #fffe66;\n	bottom: auto;\n	top: -16px;\n	left: -5px;\n}\n\n\n/* close icon */\n.bvalidator_postit_errmsg .bvalidator_postit_close_icon {\n	margin-left: 10px;\n	margin-top: -2px;\n	font-weight: bold;\n	color:#C30;\n	cursor:pointer;\n}\n/*}}}*/\n/***\n!!!Gray 2\n&lt;&lt;&lt;\n	var optionsGray2 = {\n		classNamePrefix:   'bvalidator_gray2_',\n		position:          {x:'right', y:'center'},\n		offset:	           {x:15, y:0},\n		template:          '&lt;div class=&quot;{errMsgClass}&quot;&gt;&lt;div class=&quot;bvalidator_gray2_arrow&quot;&gt;&lt;/div&gt;&lt;div class=&quot;bvalidator_gray2_cont1&quot;&gt;{message}&lt;/div&gt;&lt;/div&gt;'		\n	};\n&lt;&lt;&lt;\n***/\n/*{{{*/\n/* invalid input */\n.bvalidator_gray2_invalid{\n	background-color: #FFFFAE;\n}\n\n/* error message */\n.bvalidator_gray2_errmsg {\n	background-color:#333;\n	font-size:10px;\n	border:1px solid #999;\n	color:#FFF;\n	display:none;\n	-moz-border-radius:4px;\n	-webkit-border-radius:4px;\n	-moz-border-radius-bottomleft:0;\n	-moz-border-radius-topleft:0;\n	-webkit-border-bottom-left-radius:0;\n	-webkit-border-top-left-radius:0;\n	-moz-box-shadow:0 0 6px #ddd;\n	-webkit-box-shadow:0 0 6px #ddd;\n	white-space:nowrap;\n	padding-top: 2px;\n	padding-right: 10px;\n	padding-bottom: 2px;\n	padding-left: 5px;\n	font-family: Arial, Helvetica, sans-serif;\n	-moz-opacity:.90;\n	filter:alpha(opacity=90);\n	opacity:.90; \n}\n\n/* close icon */\n.bvalidator_gray2_errmsg .bvalidator_gray2_close_icon {\n	margin-left: 5px;\n	margin-top: -2px;\n	font-family: Arial, Helvetica, sans-serif;\n	font-weight: bold;\n	color:#F96;\n	cursor:pointer;\n}\n\n/* arrow */\n.bvalidator_gray2_errmsg .bvalidator_gray2_arrow {\n	display:inline-block;\n	border-color: transparent #333 transparent transparent;\n	border-style: solid;\n	border-width: 10px 10px 10px 0px;\n	height: 0;\n	width: 0;\n	position:relative;\n	left:-15px;\n	vertical-align:middle;\n}\n\n/* message container  */\n.bvalidator_gray2_errmsg .bvalidator_gray2_cont1 {\n	display:inline-block;\n	vertical-align:middle;\n}\n/*}}}*/\n/***\n!!!Orange\n&lt;&lt;&lt;\n	var optionsOrange = {\n		classNamePrefix: 'bvalidator_orange_'\n	};\n&lt;&lt;&lt;\n***/\n/*{{{*/\n/* invalid input */\n.bvalidator_orange_invalid{\n	background-color: #FFC;\n}\n\n/* error message */\n.bvalidator_orange_errmsg {\n	background-color:#F90;\n	font-size:10px;\n	border:1px solid #999;\n	color:#333;\n	display:none;\n	-moz-border-radius:4px;\n	-webkit-border-radius:4px;\n	-moz-border-radius-bottomleft:0;\n	-moz-border-radius-topleft:0;\n	-webkit-border-bottom-left-radius:0;\n	-webkit-border-top-left-radius:0;\n	-moz-box-shadow:0 0 6px #ddd;\n	-webkit-box-shadow:0 0 6px #ddd;\n	white-space:nowrap;\n	padding-top: 2px;\n	padding-right: 10px;\n	padding-bottom: 2px;\n	padding-left: 5px;\n	font-family: Arial, Helvetica, sans-serif;\n	-moz-opacity:.90;\n	filter:alpha(opacity=90);\n	opacity:.90;\n	font-weight: bold;\n}\n\n/* close icon */\n.bvalidator_orange_errmsg .bvalidator_orange_close_icon {\n	margin-left: 5px;\n	margin-top: -2px;\n	font-family: Verdana, Geneva, sans-serif;\n	font-weight: bolder;\n	color:#FFF;\n	cursor:pointer;\n	font-size: 14px;\n}\n\n/* arrow */\n.bvalidator_orange_errmsg em {\n	display:block;\n	border-color: #F90 transparent transparent;\n	border-style: solid;\n	border-width: 10px 10px 0;\n	height: 0;\n	width: 0;\n	position:absolute;\n	bottom:-10px;\n	left:5px;\n}\n/*}}}*/\n/***\n!!!Red\n&lt;&lt;&lt;\n	var optionsRed = {\n		classNamePrefix: 'bvalidator_red_'\n	};\n&lt;&lt;&lt;\n***/\n/*{{{*/\n/* invalid input */\n.bvalidator_red_invalid{\n	background-color: #FCC;\n}\n\n/* error message */\n.bvalidator_red_errmsg {\n	background-color:#F33;\n	font-size:10px;\n	border:1px solid #900;\n	color:#FFF;\n	display:none;\n	white-space:nowrap;\n	padding-top: 2px;\n	padding-right: 10px;\n	padding-bottom: 2px;\n	padding-left: 5px;\n	font-family: Arial, Helvetica, sans-serif;\n	-moz-opacity:.90;\n	filter:alpha(opacity=90);\n	opacity:.90;\n	font-weight: bold;\n}\n\n/* close icon */\n.bvalidator_red_errmsg .bvalidator_red_close_icon {\n	margin-left: 5px;\n	margin-top: -2px;\n	font-family: Verdana, Geneva, sans-serif;\n	font-weight: bolder;\n	color:#000;\n	cursor:pointer;\n	font-size: 12px;\n}\n\n/* arrow */\n.bvalidator_red_errmsg em {\n	display:block;\n	border-color: #F33 transparent transparent;\n	border-style: solid;\n	border-width: 10px 10px 0;\n	height: 0;\n	width: 0;\n	position:absolute;\n	bottom:-10px;\n	left:5px;\n}\n/*}}}*/\n</div>
<div tiddler="StyleSheetLayout" modifier="Bob Denny" modified="201109291556" created="201109291553" tags="">/***\nThis was originally a shadow tiddler, but was modified for fonts and thus became a real one. \n!!Revision History\n&lt;&lt;&lt;\n''2011.09.29 [rbd]'' Add tahoma as first/preferred font\n&lt;&lt;&lt;\n***/\n/*{{{*/\n* html .tiddler {\n    height: 1%;\n}\n\nbody {\n	font-size: .75em;\n	font-family: tahoma,arial,helvetica;\n	margin: 0;\n	padding: 0;\n}\n\nh1,h2,h3,h4,h5 {\n	font-weight: bold;\n	text-decoration: none;\n	padding-left: 0.4em;\n}\n\nh1 {font-size: 1.35em;}\nh2 {font-size: 1.25em;}\nh3 {font-size: 1.1em;}\nh4 {font-size: 1em;}\nh5 {font-size: .9em;}\n\nhr {\n	height: 1px;\n}\n\na{\n	text-decoration: none;\n}\n\ndt {font-weight: bold;}\n\nol { list-style-type: decimal }\nol ol { list-style-type: lower-alpha }\nol ol ol { list-style-type: lower-roman }\nol ol ol ol { list-style-type: decimal }\nol ol ol ol ol { list-style-type: lower-alpha }\nol ol ol ol ol ol { list-style-type: lower-roman }\nol ol ol ol ol ol ol { list-style-type: decimal }\n\n.txtOptionInput {\n	width: 11em;\n}\n\n#contentWrapper .chkOptionInput {\n	border: 0;\n}\n\n.externalLink {\n	text-decoration: underline;\n}\n\n.indent {margin-left:3em;}\n.outdent {margin-left:3em; text-indent:-3em;}\ncode.escaped {white-space:nowrap;}\n\n.tiddlyLinkExisting {\n	font-weight: bold;\n}\n\n.tiddlyLinkNonExisting {\n	font-style: italic;\n}\n\n/* the 'a' is required for IE, otherwise it renders the whole tiddler a bold */\na.tiddlyLinkNonExisting.shadow {\n	font-weight: bold;\n}\n\n#mainMenu .tiddlyLinkExisting, \n#mainMenu .tiddlyLinkNonExisting,\n#sidebarTabs .tiddlyLinkNonExisting{\n font-weight: normal;\n font-style: normal;\n}\n\n#sidebarTabs .tiddlyLinkExisting {\n font-weight: bold;\n font-style: normal;\n}\n\n.header {\n		position: relative;\n}\n\n.header a:hover {\n	background: transparent;\n}\n\n.headerShadow {\n	position: relative;\n	padding: 4.5em 0em 1em 1em;\n	left: -1px;\n	top: -1px;\n}\n\n.headerForeground {\n	position: absolute;\n	padding: 4.5em 0em 1em 1em;\n	left: 0px;\n	top: 0px;\n}\n\n.siteTitle {\n	font-size: 3em;\n}\n\n.siteSubtitle {\n	font-size: 1.2em;\n}\n\n#mainMenu {\n	position: absolute;\n	left: 0;\n	width: 10em;\n	text-align: right;\n	line-height: 1.6em;\n	padding: 1.5em 0.5em 0.5em 0.5em;\n	font-size: 1.1em;\n}\n\n#sidebar {\n	position: absolute;\n	right: 3px;\n	width: 16em;\n	font-size: .9em;\n}\n\n#sidebarOptions {\n	padding-top: 0.3em;\n}\n\n#sidebarOptions a {\n	margin: 0em 0.2em;\n	padding: 0.2em 0.3em;\n	display: block;\n}\n\n#sidebarOptions input {\n	margin: 0.4em 0.5em;\n}\n\n#sidebarOptions .sliderPanel {\n	margin-left: 1em;\n	padding: 0.5em;\n	font-size: .85em;\n}\n\n#sidebarOptions .sliderPanel a {\n	font-weight: bold;\n	display: inline;\n	padding: 0;\n}\n\n#sidebarOptions .sliderPanel input {\n	margin: 0 0 .3em 0;\n}\n\n#sidebarTabs .tabContents {\n	width: 15em;\n	overflow: hidden;\n}\n\n.wizard {\n	padding: 0.1em 0em 0em 2em;\n}\n\n.wizard h1 {\n	font-size: 2em;\n	font-weight: bold;\n	background: none;\n	padding: 0em 0em 0em 0em;\n	margin: 0.4em 0em 0.2em 0em;\n}\n\n.wizard h2 {\n	font-size: 1.2em;\n	font-weight: bold;\n	background: none;\n	padding: 0em 0em 0em 0em;\n	margin: 0.2em 0em 0.2em 0em;\n}\n\n.wizardStep {\n	padding: 1em 1em 1em 1em;\n}\n\n.wizard .button {\n	margin: 0.5em 0em 0em 0em;\n	font-size: 1.2em;\n}\n\n#messageArea {\nposition:absolute; top:0; right:0; margin: 0.5em; padding: 0.5em;\n}\n\n*[id='messageArea'] {\nposition:fixed !important; z-index:99;}\n\n.messageToolbar {\ndisplay: block;\ntext-align: right;\n}\n\n#messageArea a{\n	text-decoration: underline;\n}\n\n.popup {\n	font-size: .9em;\n	padding: 0.2em;\n	list-style: none;\n	margin: 0;\n}\n\n.popup hr {\n	display: block;\n	height: 1px;\n	width: auto;\n	padding: 0;\n	margin: 0.2em 0em;\n}\n\n.listBreak {\n	font-size: 1px;\n	line-height: 1px;\n}\n\n.listBreak div {\n	margin: 2px 0;\n}\n\n.popup li.disabled {\n	padding: 0.2em;\n}\n\n.popup li a{\n	display: block;\n	padding: 0.2em;\n}\n\n.tabset {\n	padding: 1em 0em 0em 0.5em;\n}\n\n.tab {\n	margin: 0em 0em 0em 0.25em;\n	padding: 2px;\n}\n\n.tabContents {\n	padding: 0.5em;\n}\n\n.tabContents ul, .tabContents ol {\n	margin: 0;\n	padding: 0;\n}\n\n.txtMainTab .tabContents li {\n	list-style: none;\n}\n\n.tabContents li.listLink {\n	 margin-left: .75em;\n}\n\n#displayArea {\n	margin: 1em 17em 0em 14em;\n}\n\n\n.toolbar {\n	text-align: right;\n	font-size: .9em;\n	visibility: hidden;\n}\n\n.selected .toolbar {\n	visibility: visible;\n}\n\n.tiddler {\n	padding: 1em 1em 0em 1em;\n}\n\n.missing .viewer,.missing .title {\n	font-style: italic;\n}\n\n.title {\n	font-size: 1.6em;\n	font-weight: bold;\n}\n\n.missing .subtitle {\n display: none;\n}\n\n.subtitle {\n	font-size: 1.1em;\n}\n\n.tiddler .button {\n	padding: 0.2em 0.4em;\n}\n\n.tagging {\nmargin: 0.5em 0.5em 0.5em 0;\nfloat: left;\ndisplay: none;\n}\n\n.isTag .tagging {\ndisplay: block;\n}\n\n.tagged {\nmargin: 0.5em;\nfloat: right;\n}\n\n.tagging, .tagged {\nfont-size: 0.9em;\npadding: 0.25em;\n}\n\n.tagging ul, .tagged ul {\nlist-style: none;margin: 0.25em;\npadding: 0;\n}\n\n.tagClear {\nclear: both;\n}\n\n.footer {\n	font-size: .9em;\n}\n\n.footer li {\ndisplay: inline;\n}\n\n* html .viewer pre {\n	width: 99%;\n	padding: 0 0 1em 0;\n}\n\n.viewer {\n	line-height: 1.4em;\n	padding-top: 0.5em;\n}\n\n.viewer .button {\n	margin: 0em 0.25em;\n	padding: 0em 0.25em;\n}\n\n.viewer blockquote {\n	line-height: 1.5em;\n	padding-left: 0.8em;\n	margin-left: 2.5em;\n}\n\n.viewer ul, .viewer ol{\n	margin-left: 0.5em;\n	padding-left: 1.5em;\n}\n\n.viewer table {\n	border-collapse: collapse;\n	margin: 0.8em 1.0em;\n}\n\n.viewer th, .viewer td, .viewer tr,.viewer caption{\n	padding: 3px;\n}\n\n.viewer table.listView {\n	font-size: 0.85em;\n	margin: 0.8em 1.0em;\n}\n\n.viewer table.listView th, .viewer table.listView td, .viewer table.listView tr {\n	padding: 0px 3px 0px 3px;\n}\n\n.viewer pre {\n	padding: 0.5em;\n	margin-left: 0.5em;\n	font-size: 1.2em;\n	line-height: 1.4em;\n	overflow: auto;\n}\n\n.viewer code {\n	font-size: 1.2em;\n	line-height: 1.4em;\n}\n\n.editor {\nfont-size: 1.1em;\n}\n\n.editor input, .editor textarea {\n	display: block;\n	width: 100%;\n	font: inherit;\n}\n\n.editorFooter {\n	padding: 0.25em 0em;\n	font-size: .9em;\n}\n\n.editorFooter .button {\npadding-top: 0px; padding-bottom: 0px;}\n\n.fieldsetFix {border: 0;\npadding: 0;\nmargin: 1px 0px 1px 0px;\n}\n\n.sparkline {\n	line-height: 1em;\n}\n\n.sparktick {\n	outline: 0;\n}\n\n.zoomer {\n	font-size: 1.1em;\n	position: absolute;\n	padding: 1em;\n}\n\n.cascade {\n	font-size: 1.1em;\n	position: absolute;\n	overflow: hidden;\n}\n/*}}}*/</div>
<div tiddler="Submit RTML Request" modifier="Bob Denny" modified="201207192326" created="201109281616" tags="Observing UserContent">&lt;&lt;slider &quot;&quot; &quot;Submit RTML Request Help&quot; Help &quot;Helpful information&quot;&gt;&gt;\n&lt;html&gt;&lt;table width=&quot;96%&quot; style=&quot;border:none;margin:1px;background:transparent&quot;&gt;&lt;iframe id=&quot;asuploadrtml&quot; src=&quot;/ac/asuploadrtml.asp&quot; width=&quot;100%&quot; height=&quot;0&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowtransparency style=&quot;border:none;&quot;&gt;&lt;/iframe&gt;&lt;/table&gt;&lt;/html&gt;&lt;script&gt;\n// This is for lost refresh on IE6\nif(document.all) { // IE\nvar iFrame = place.getElementsByTagName(&quot;iframe&quot;)[0];\niFrame .src = iFrame .src;\n}&lt;/script&gt;</div>
<div tiddler="Submit RTML Request Help" modifier="Bob Denny" modified="201109291500" created="201109282022" tags="Help UserContent hideUser">\nChoose a local file which contains an observing request in the Remote Telescope Markup Language 2.3. Click the ''Submit RTML'' button to upload the RTML file into the schedule database. If you check the ''Enable immediately'' box, the uploaded request will become eligible for scheduling immediately. Otherwise, the new request will be disabled, requiring you to enable it with the [[Schedule Browser|/sc/index.asp]]. \n\nRemote Telescope Markup Language 2.3 is an XML dialect used by ACP Scheduler for loading observing requests into the schedule database. Version 2.3 is a Scheduler-specific superset of the classic RTML. For more info, see the documentation for ACP Scheduler. \n\nThe [[ACP Planner|http://acp.dc3.com/planner.html]] application can generate RTML. </div>
<div tiddler="SysMonConsoleSlider" modifier="Bob Denny" modified="200904182233" created="200610072045" tags="hideUser">\n&lt;html&gt;\n&lt;form style=&quot;margin:4;&quot;&gt;\n &lt;input type=&quot;hidden&quot; name=&quot;Command&quot; value=&quot;StopScript&quot;&gt;\n &lt;/input&gt;\n&lt;/form&gt;\n&lt;/html&gt;&lt;&lt;PostForm &quot;&quot; &quot;ac/astopscript.asp&quot; &quot;Stop Run&quot; &quot;Interrupts the run as soon as possible&quot;&gt;&gt;\n&lt;html&gt;\n&lt;textarea readonly style=&quot;margin-top:4px;&quot; id=&quot;sm_console&quot; class=&quot;scriptlog&quot; rows=&quot;20&quot; cols=&quot;72&quot; wrap=&quot;off&quot;&gt;&lt;/textarea&gt;\n&lt;/html&gt;</div>
<div tiddler="System Status" modifier="Bob Denny" modified="201506232359" created="200610072014" tags="Control UserContent Observing">&lt;&lt;slider &quot;&quot; &quot;System Status Help&quot; Help&gt;&gt;&lt;html&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span id=&quot;sm_HoverLabel&quot;&gt;Hover the mouse over the links to see what they do&lt;/span&gt;\n&lt;!-- Main Display --&gt;\n&lt;table id=&quot;sm_sysMon&quot; class=&quot;noBorder&quot; style=&quot;border:0&quot;&gt;\n    &lt;tr height=&quot;100%&quot;&gt;\n        &lt;td valign=&quot;top&quot;&gt;\n            &lt;table style=&quot;margin:0&quot;&gt;\n                &lt;tr&gt;\n                    &lt;th colspan=&quot;2&quot; scope=&quot;col&quot;&gt;Observatory&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=&quot;2&quot; class=&quot;telemetry&quot; id=&quot;sm_obsStat&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;Local:&lt;/td&gt;\n                    &lt;td id=&quot;sm_local&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;--:--:--&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;UTC:&lt;/td&gt;\n                    &lt;td id=&quot;sm_utc&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;--:--:--&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;LST:&lt;/td&gt;\n                    &lt;td id=&quot;sm_lst&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;--:--:--&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td class=&quot;telemlabel&quot; id=&quot;sm_obsOwnerLabel&quot;&gt;&lt;span&gt;Owner&lt;/span&gt;&lt;/td&gt;\n                    &lt;td class=&quot;telemetry&quot; id=&quot;sm_obsOwner&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td class=&quot;telemlabel&quot; id=&quot;sm_obsWeatherLabel&quot;&gt;&lt;span&gt;Weather&lt;/span&gt;&lt;/td&gt;\n                    &lt;td class=&quot;telemetry&quot; id=&quot;sm_obsWeather&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_obsShutterRow&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot; id=&quot;sm_obsShutterLabel&quot;&gt;&lt;span&gt;Shutter&lt;/span&gt;&lt;/td&gt;\n                    &lt;td class=&quot;telemetry&quot; id=&quot;sm_obsShutter&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_obsDomeRow&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot; id=&quot;sm_obsDomeLabel&quot;&gt;&lt;span&gt;Dome&lt;/span&gt;&lt;/td&gt;\n                    &lt;td class=&quot;telemetry&quot; id=&quot;sm_obsDome&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_obsSchHdrRow&quot; title=&quot;Dispatcher Status&quot;&gt;\n                    &lt;th width=&quot;110&quot; colspan=&quot;2&quot; id=&quot;sm_obsSchHdr&quot;&gt;&lt;span&gt;Scheduler&lt;/span&gt;&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_obsSchStatRow&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot; id=&quot;sm_obsSchStatLabel&quot;&gt;&lt;span&gt;Status&lt;/span&gt;&lt;/td&gt;\n                    &lt;td class=&quot;telemetry&quot; id=&quot;sm_obsSchStat&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/td&gt;\n        &lt;td valign=&quot;top&quot;&gt;\n            &lt;table style=&quot;margin:0&quot;&gt;\n                &lt;tr&gt;\n                    &lt;th width=&quot;110&quot; colspan=&quot;2&quot; id=&quot;sm_scopeHdr&quot;&gt;&lt;span&gt;Telescope&lt;/span&gt;&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td id=&quot;sm_scopeStat&quot; class=&quot;telemetry&quot; colspan=&quot;2&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=&quot;2&quot;&gt;&lt;div class=&quot;progBarBg&quot;&gt;&lt;div id=&quot;sm_slewProg&quot; class=&quot;progBarFg&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_haRow&quot; title=&quot;-12 to +12&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;HA:&lt;/td&gt;\n                    &lt;td id=&quot;sm_ha&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;---:--.-&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr title=&quot;&lt;% if(Prefs.DoLocalTopo) { %&gt;Local Topocentric&lt;% } else { %&gt;J2000&lt;% } %&gt;&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;RA:&lt;/td&gt;\n                    &lt;td id=&quot;sm_ra&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;--:--:--.--&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr title=&quot;&lt;% if(Prefs.DoLocalTopo) { %&gt;Local Topocentric&lt;% } else { %&gt;J2000&lt;% } %&gt;&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;Dec:&lt;/td&gt;\n                    &lt;td id=&quot;sm_dec&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;---°--'--.-&quot;&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_paRow&quot; title=&quot;True sky PA&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;PA:&lt;/td&gt;\n                    &lt;td id=&quot;sm_pa&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;---°&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;Az:&lt;/td&gt;\n                    &lt;td id=&quot;sm_az&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;---.-°&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;Alt:&lt;/td&gt;\n                    &lt;td id=&quot;sm_alt&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;--.-°&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_gemRow&quot; title=&quot;Direction looking, opposite of pier side&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;GEM:&lt;/td&gt;\n                    &lt;td id=&quot;sm_gem&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr title=&quot;Relative air mass&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;Air:&lt;/td&gt;\n                    &lt;td id=&quot;sm_air&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;--.-&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/td&gt;\n        &lt;td valign=&quot;top&quot;&gt;\n            &lt;table style=&quot;margin:0&quot;&gt;\n                &lt;tr&gt;\n                    &lt;th width=&quot;124&quot; colspan=&quot;3&quot; id=&quot;sm_camHdr&quot;&gt;&lt;span&gt;Imager&lt;/span&gt;&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=&quot;3&quot; id=&quot;sm_camStat&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=&quot;3&quot;&gt;&lt;div class=&quot;progBarBg&quot;&gt;&lt;div id=&quot;sm_expProg&quot; class=&quot;progBarFg&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_imgFiltRow&quot;&gt;\n                    &lt;td width=&quot;46&quot; class=&quot;telemlabel&quot;&gt;Filter&lt;/td&gt;\n                    &lt;td colspan=&quot;2&quot; id=&quot;sm_imgFilt&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td width=&quot;46&quot; class=&quot;telemlabel&quot;&gt;Binning&amp;nbsp;&lt;/td&gt;\n                    &lt;td colspan=&quot;2&quot; id=&quot;sm_imgBin&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;-:1&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_imgTempRow&quot;&gt;\n                    &lt;td width=&quot;46&quot; class=&quot;telemlabel&quot; id=&quot;sm_imgTempLabel&quot;&gt;&lt;span&gt;Cooler&lt;/span&gt;&lt;/td&gt;\n                    &lt;td colspan=&quot;2&quot; id=&quot;sm_imgTemp&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;---&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_imgGuiderRow1&quot;&gt;\n                    &lt;th colspan=&quot;3&quot;&gt;Guider&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_imgGuiderRow2&quot;&gt;\n                    &lt;td colspan=&quot;3&quot; id=&quot;sm_guideStat&quot; class=&quot;telemetry&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_imgGuiderRow3&quot;&gt;\n                    &lt;td colspan=&quot;2&quot; class=&quot;telemlabel&quot;&gt;Interval (sec)&lt;/td&gt;\n                    &lt;td class=&quot;telemetry&quot; id=&quot;sm_guideInt&quot; style=&quot;text-align:right; width: 3em;&quot;&gt;&lt;span&gt;--.--&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_imgGuiderRow4&quot; &gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;Error&lt;/td&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;Ex:&lt;/td&gt;\n                    &lt;td class=&quot;telemetry&quot; id=&quot;sm_guideX&quot; style=&quot;text-align:right; width: 3em;&quot;&gt;&lt;span&gt;--.--&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_imgGuiderRow5&quot;&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;&amp;nbsp;(pix)&lt;/td&gt;\n                    &lt;td class=&quot;telemlabel&quot;&gt;Ey:&lt;/td&gt;\n                    &lt;td class=&quot;telemetry&quot; id=&quot;sm_guideY&quot; style=&quot;text-align:right; width: 3em;&quot;&gt;&lt;span&gt;--.--&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/td&gt;\n        &lt;td valign=&quot;top&quot;&gt;\n            &lt;table style=&quot;margin:0&quot;&gt;\n                &lt;tr&gt;\n                    &lt;th width=&quot;128&quot;colspan=&quot;2&quot;&gt;Activity&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=&quot;2&quot; class=&quot;telemetry&quot; id=&quot;sm_actStat&quot;&gt;&lt;span&gt;n/a&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr title=&quot;FWHM of last image&quot;&gt;\n                    &lt;td width=&quot;44&quot; class=&quot;telemlabel&quot;&gt;FWHM&lt;/td&gt;\n                    &lt;td class=&quot;telemetry&quot; id=&quot;sm_lastFWHM&quot;&gt;&lt;span&gt;-.-&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=&quot;2&quot; height=&quot;128&quot; id=&quot;sm_thumb&quot; align=&quot;center&quot; valign=&quot;middle&quot; title=&quot;Last image preview\nClick to see a larger preview&quot;&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td colspan=&quot;2&quot; height=&quot;60&quot; id=&quot;sm_guideImg&quot; align=&quot;center&quot; valign=&quot;middle&quot;&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/td&gt;\n        &lt;td valign=&quot;top&quot;&gt;\n            &lt;table style=&quot;margin:0&quot;&gt;\n                &lt;tr&gt;\n                    &lt;th width=&quot;158&quot; colspan=&quot;2&quot; id=&quot;sm_plnTitle&quot;&gt;Plan&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td width=&quot;44&quot; class=&quot;telemlabel&quot; id=&quot;sm_plnSetLabel&quot;&gt;Set&lt;/td&gt;\n                    &lt;td width=&quot;100&quot; class=&quot;telemetry&quot; id=&quot;sm_plnSet&quot;&gt;&lt;span&gt;-/-&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td width=&quot;44&quot; class=&quot;telemlabel&quot; id=&quot;sm_plnTgtLabel&quot;&gt;Target&lt;/td&gt;\n                    &lt;td width=&quot;108&quot; class=&quot;telemetry&quot; id=&quot;sm_plnTgt&quot;&gt;&lt;span&gt;n/a (-/-)&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td width=&quot;44&quot; class=&quot;telemlabel&quot;&gt;Repeat&lt;/td&gt;\n                    &lt;td width=&quot;108&quot; class=&quot;telemetry&quot; id=&quot;sm_plnRpt&quot;&gt;&lt;span&gt;-/-&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr id=&quot;sm_plnFiltRow&quot;&gt;\n                    &lt;td width=&quot;44&quot; class=&quot;telemlabel&quot; id=&quot;sm_plnFiltLabel&quot;&gt;Filter&lt;/td&gt;\n                    &lt;td width=&quot;108&quot; class=&quot;telemetry&quot; id=&quot;sm_plnFilt&quot;&gt;&lt;span&gt;n/a (-/-)&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td width=&quot;44&quot; class=&quot;telemlabel&quot;&gt;Count&lt;/td&gt;\n                    &lt;td width=&quot;108&quot; class=&quot;telemetry&quot; id=&quot;sm_plnCnt&quot;&gt;&lt;span&gt;-/-&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n            &lt;table id=&quot;sm_imgGraphArea&quot; style=&quot;margin:0&quot; title=&quot;+/- 2 pix, 8 min.&quot;&gt;\n                &lt;tr&gt;\n                    &lt;th width=&quot;158&quot;&gt;Tracking Errors&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td width=&quot;158&quot; height=&quot;34&quot; valign=&quot;center&quot; class=&quot;trackGraph&quot; id=&quot;sm_trkGraphX&quot;&gt;&lt;/td&gt; &lt;!-- 34px in sparkline call below --&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td width=&quot;158&quot; height=&quot;34&quot; valign=&quot;center&quot; class=&quot;trackGraph&quot; id=&quot;sm_trkGraphY&quot;&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td width=&quot;158&quot; height=&quot;48&quot; valign=&quot;center&quot; class=&quot;trackGraph&quot;&gt;&lt;div align=&quot;center&quot; id=&quot;sm_trkGraphXY&quot;&gt;&lt;/div&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;!-- Console Input Form LightBoxes --&gt;\n&lt;div class=&quot;lightBoxAlert&quot; id=&quot;sm_yesNoLightBox&quot; style=&quot;display:none&quot;&gt;\n    &lt;div class=&quot;lightBoxAlertIcon&quot;&gt;&lt;img id=&quot;lightBoxAlertIcon&quot; src=&quot;/im/question.png&quot; alt=&quot;?&quot; title=&quot;Input Requested&quot;&gt;&lt;/div&gt;\n    &lt;div style=&quot;margin-left:56px;margin-top:4px;&quot;&gt;\n    &lt;form style=&quot;margin:0px;&quot; id=&quot;sm_yesNoForm&quot; method=&quot;post&quot; action=&quot;/ac/aconsread.asp&quot;&gt;\n        &lt;span id=&quot;sm_yesNoPrompt&quot;&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;(click one)&lt;br&gt;\n        &lt;input type=&quot;radio&quot; name=&quot;YesNo&quot; value=&quot;y&quot; checked&gt;Yes&amp;nbsp;\n        &lt;input type=&quot;radio&quot; name=&quot;YesNo&quot; value=&quot;n&quot;&gt;No&lt;br&gt;\n        &lt;input type=&quot;hidden&quot; name=&quot;answer_yn&quot;&gt;\n    &lt;/form&gt;\n    &lt;input type=&quot;button&quot; id=&quot;sm_yesNoAnsButton&quot; value=&quot;Answer&quot;&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=&quot;lightBoxAlert&quot; id=&quot;sm_readLineLightBox&quot; style=&quot;display:none&quot;&gt;\n    &lt;div class=&quot;lightBoxAlertIcon&quot;&gt;&lt;img id=&quot;lightBoxAlertIcon&quot; src=&quot;/im/question.png&quot; alt=&quot;?&quot; title=&quot;Input Requested&quot;&gt;&lt;/div&gt;\n    &lt;div style=&quot;margin-left:56px;margin-top:4px;&quot;&gt;\n    &lt;form style=&quot;margin:0px;&quot; id=&quot;sm_readLineForm&quot; method=&quot;post&quot; action=&quot;/ac/aconsread.asp&quot;&gt;\n        &lt;span id=&quot;sm_readLinePrompt&quot;&gt;&lt;/span&gt;&lt;br&gt;\n        &lt;input type=&quot;text&quot; id=&quot;sm_readLineText&quot; name=&quot;response&quot; size=&quot;30&quot;&gt;&lt;br&gt;\n        &lt;input type=&quot;hidden&quot; id=&quot;sm_readLineButtonData&quot; name=&quot;??&quot;&gt;\n    &lt;/form&gt;\n    &lt;input type=&quot;button&quot; id=&quot;sm_readLineOKButton&quot; value=&quot;OK&quot;&gt;\n    &lt;span id=&quot;sm_readLineCancelSpan&quot; style=&quot;display:none&quot;&gt;&amp;nbsp;&amp;nbsp;\n        &lt;input type=&quot;button&quot; id=&quot;sm_readLineCancelButton&quot; value=&quot;Cancel&quot;&gt;\n    &lt;/span&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- End of HTML --&gt;\n&lt;/html&gt;&lt;&lt;slider &quot;SysMonConsole&quot; &quot;SysMonConsoleSlider&quot; &quot;Show/Hide Run Log and Abort Control&quot; &quot;Shows a live running log of activity&quot;&gt;&gt;&lt;script&gt;\n    // JSON workers (see asystemstatus.asp)\n    function _s(id, escVal) {                               // Fill in element\n        // Note that jQuery notation not used here (e.g. $('#' + id);) as\n        // it really slows the startup (and refresh) of the displays.\n        var elem = document.getElementById(id);\n        var val = unescape(escVal);\n        var span = elem.firstChild;                         // Inner &lt;span&gt; has appearance\n        if(span &amp;&amp; val.substr(0, 1) == '@') {               // Possible appearance code\n            switch(val.substr(1, 2)) {\n                case 'an':\n                    span.className = &quot;telemActive&quot;;\n                    span.setAttribute(&quot;flash&quot;, &quot;off&quot;);\n                    val = val.substr(3);\n                    break;\n                case 'af':\n                    span.className = &quot;telemActive&quot;;\n                    span.setAttribute(&quot;flash&quot;, &quot;on&quot;);\n                    val = val.substr(3);\n                    break;\n                case 'wn':\n                    span.className = &quot;telemWarn&quot;;\n                    span.setAttribute(&quot;flash&quot;, &quot;off&quot;);\n                    val = val.substr(3);\n                    break;\n                case 'wf':\n                    span.className = &quot;telemWarn&quot;;\n                    span.setAttribute(&quot;flash&quot;, &quot;on&quot;);\n                    val = val.substr(3);\n                    break;\n                case 'in':\n                case 'if':\n                    span.className = &quot;telemOff&quot;;\n                    span.setAttribute(&quot;flash&quot;, &quot;off&quot;);\n                    val = val.substr(3);\n                    break;\n                default:                                    // Pass anytning else on\n                    break;\n            }\n            span.innerHTML = val;                           // Content goes in span\n        }\n        else\n            elem.innerHTML = val;                           // Element gets content\n    }\n    // This is in a slider sub-tiddler, but still accessible!\n    function _c(escVal) {                                   // Same here, for textarea\n        try {                                               // May not exist (slider hidden)\n            var ta = document.getElementById('sm_console');\n            var lData = unescape(escVal);\n            ta.value = lData.substr(2);                     // Display all after auto-scroll indicator\n            if(lData.substr(0, 2) == &quot;@s&quot;)                  // If obs is busy\n                ta.scrollTop = ta.scrollHeight - ta.clientHeight; // Auto-scroll to bottom\n        } catch(ex) { }\n    }\n    function _p(id, val) {                                  // Prog-bar fractional length\n        var barElem = document.getElementById(id);\n        var tw = barElem.parentNode.offsetWidth;\n        barElem.style.width = parseInt(val * tw) + &quot;px&quot;;\n    }\n    function _v(id, val) {                                  // Set visibility\n        var elem = document.getElementById(id);\n        elem.style.display = (val ? &quot;table-row&quot; : &quot;none&quot;);\n    }\n    function _l(escVal) {                                   // Show simple LightBox\n        DC3.LightBox.showContent(unescape(escVal));\n    }\n    function _a(icon, escVal) {                             // Show LightBox Alert\n        DC3.LightBox.showAlert(icon, unescape(escVal)); \n    }\n    function _aw(icon, escVal) {                            // Show LightBox Web Console Alert\n        DC3.LightBox.showAlert(icon, unescape(escVal), _consPostAlertOk);   // Close sends POST back to aconsread.asp\n    }\n    function _lh() {                                        // Make any current LightBox disappear\n        DC3.LightBox.hideBox();\n    }\n    function _y(escPrompt) {                                // Show Console Yes/No LightBox\n        document.getElementById(&quot;sm_yesNoPrompt&quot;).innerHTML = unescape(escPrompt);\n        document.getElementById(&quot;sm_yesNoAnsButton&quot;).onclick = _consPostYesNoForm;\n        DC3.LightBox.showBox(&quot;sm_yesNoLightBox&quot;);\n    }\n    function _r(escPrompt, cancel) {                        // Show Console Read Line LightBox\n        document.getElementById(&quot;sm_readLineOKButton&quot;).onclick = _consPostReadLineFormOk;\n        if(cancel) {\n            document.getElementById(&quot;sm_readLineCancelSpan&quot;).style.display = '';\n            document.getElementById(&quot;sm_readLineCancelButton&quot;).onclick = _consPostReadLineFormCancel;\n        } else {\n            document.getElementById(&quot;sm_readLineCancelSpan&quot;).style.display = 'none';\n            document.getElementById(&quot;sm_readLineCancelButton&quot;).onclick = null;\n        }\n        document.getElementById(&quot;sm_readLinePrompt&quot;).innerHTML = unescape(escPrompt);\n        if(!DC3.LightBox.showing()) document.getElementById(&quot;sm_readLineText&quot;).value = &quot;&quot;;\n        DC3.LightBox.showBox(&quot;sm_readLineLightBox&quot;);\n    }\n    // Flasher function\n    function _smFlasher() {\n        DC3.Lib.sysMonFlashTimerID = null;                  // Timer has expired\n        var outer = document.getElementById(&quot;sm_sysMon&quot;);\n        if(!outer)                                          // Tiddler closed or editing\n            return;                                         // Exit now with no timer set\n        var spans = outer.getElementsByTagName(&quot;span&quot;);\n        for(var i = 0; i &lt; spans.length; i++) {\n            var span = spans[i];\n            if(span.attributes['flash'] &amp;&amp; span.attributes['flash'].value == 'on') {\n                if(span.attributes['onClass'] &amp;&amp; span.attributes['onClass'].value !== &quot;&quot;) {\n                    span.className = span.attributes['onClass'].value;\n                    span.attributes['onClass'].value = &quot;&quot;;\n                } else {\n                    span.setAttribute('onClass', span.className);\n                    span.className = &quot;telemOff&quot;;\n                }\n            }\n        }\n        if(DC3.Lib.sysMonFlashTimerID === null)             // Unless already active timer (????)\n            DC3.Lib.sysMonFlashTimerID = setTimeout(_smFlasher, 200);\n    }\n    // Dome/shutter control AJAX interface (variable labels and cmd links)\n    function _shutterCtlOnComplete(text, params) {\n        displayMessage(text);\n        _sendRequest(false);                                // Force immediate update (typ.)\n    }\n    function _shutterCtl(e) {\n        if(!e) e = window.event;\n        var tgt = resolveTarget(e);\n        var tiptxt = tgt.getAttribute(&quot;title&quot;);\n        if(!config.browser.isTouchInterface || confirm(tiptxt))\n        { \n            var op = resolveTarget(e).getAttribute(&quot;op&quot;);       // Link has op=&quot;xx&quot;? (typ.)\n            var qs = op ? &quot;?&quot; + op : &quot;&quot;;                        // Include as query string (typ.)\n            DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/ashutterctl.asp&quot; + qs, &quot;&quot;, _shutterCtlOnComplete, null);\n        }\n    }\n    function _domeCtlOnComplete(text, params) {\n        displayMessage(text);\n        _sendRequest(false);\n    }\n    function _domeCtl(e) {\n        if(!e) e = window.event;\n        var op = resolveTarget(e).getAttribute(&quot;op&quot;);\n        var tgt = resolveTarget(e);\n        var tiptxt = tgt.getAttribute(&quot;title&quot;);\n        if(!config.browser.isTouchInterface || confirm(tiptxt))\n        { \n            var qs = op ? &quot;?&quot; + op : &quot;&quot;;\n            DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/adomectl.asp&quot; + qs, &quot;&quot;, _domeCtlOnComplete, null);\n        }\n    }\n    function _schedCtlOnComplete(text, params) {\n        displayMessage(text);\n        _sendRequest(false);\n    }\n    function _schedCtl(e) {\n        if(!e) e = window.event;\n        var op = resolveTarget(e).getAttribute(&quot;op&quot;);\n        var tgt = resolveTarget(e);\n        var tiptxt = tgt.getAttribute(&quot;title&quot;);\n        if(!config.browser.isTouchInterface || confirm(tiptxt))\n        { \n            var qs = op ? &quot;?&quot; + op : &quot;&quot;;\n            DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/aschctrl.asp&quot; + qs, &quot;&quot;, _schedCtlOnComplete, null);\n        }\n    }\n    // Scope conn.disc AJAX interface\n    function _scopeCtlOnComplete(text, params) {\n        DC3.LightBox.hideBox();                             // Harmless if park-box wasn't shown\n        displayMessage(text);\n        _sendRequest(false);\n    }\n    function _scopeCtlDiscPark(e) {\n        var qs, ms;\n        if(document.getElementById(&quot;sm_yesNoForm&quot;).elements[0].checked) {\n            ms = &quot;Parking and disconnecting&quot;;\n            qs = &quot;discpark&quot;;\n        } else {\n            ms = &quot;Disconnecting&quot;;\n            qs = &quot;disc&quot;;\n        }\n        displayMessage( ms + &quot; the scope...&quot;);\n        DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/ascopeconn.asp?&quot; + qs, &quot;&quot;, _scopeCtlOnComplete, null);\n    }\n    function _scopeCtl(e) {\n        if(!e) e = window.event;\n        var tgt = resolveTarget(e);\n        var tiptxt = tgt.getAttribute(&quot;title&quot;);\n        if(!config.browser.isTouchInterface || confirm(tiptxt))\n        { \n            var op = resolveTarget(e).getAttribute(&quot;op&quot;);\n            var qs = op ? &quot;?&quot; + op : &quot;&quot;;\n            if(op == &quot;conn&quot;) {\n                displayMessage(&quot;Connecting scope, please wait...&quot;);\n                DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/ascopeconn.asp&quot; + qs, &quot;&quot;, _scopeCtlOnComplete, null);\n            } else {\n                // Can't use embedded ASP to check CanPark here\n                document.getElementById(&quot;sm_yesNoPrompt&quot;).innerHTML = &quot;Park the telescope?&quot;;\n                document.getElementById(&quot;sm_yesNoAnsButton&quot;).onclick = _scopeCtlDiscPark;\n                DC3.LightBox.showBox(&quot;sm_yesNoLightBox&quot;, null); // Do nothing if box is closed\n            }\n        }\n    }\n    // Camera conn.disc AJAX interface\n    function _camCtlOnComplete(text, params) {\n        displayMessage(text);\n        _sendRequest(false);\n    }\n    function _camCtl(e) {\n        if(!e) e = window.event;\n        var tgt = resolveTarget(e);\n        var tiptxt = tgt.getAttribute(&quot;title&quot;);\n        if(!config.browser.isTouchInterface || confirm(tiptxt))\n        { \n            var op = resolveTarget(e).getAttribute(&quot;op&quot;);\n            var qs = op ? &quot;?&quot; + op : &quot;&quot;;\n            // Checking row visibility for cameras with no temp control\n            if(op == &quot;disc&quot; &amp;&amp; (document.getElementById(&quot;sm_imgTempRow&quot;).style.display != &quot;none&quot;) &amp;&amp;\n                    (document.getElementById(&quot;sm_imgTemp&quot;).firstChild.innerHTML.search(/Off/) == -1)) {\n                DC3.LightBox.showAlert(&quot;warning&quot;, &quot;Warm and turn off the cooler first.&quot;);\n            } else {\n                DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/acamconn.asp&quot; + qs, &quot;&quot;, _camCtlOnComplete, null);\n            }\n        }\n    }\n    // Cooler control AJAX interface\n    function _tempCtlOnComplete(text, params) {\n        displayMessage(text);\n        _sendRequest(false);\n    }\n    function _tempCtl(e) {\n        if(!e) e = window.event;\n        var tgt = resolveTarget(e);\n        var tiptxt = tgt.getAttribute(&quot;title&quot;);\n        if(!config.browser.isTouchInterface || confirm(tiptxt))\n        { \n            var op = resolveTarget(e).getAttribute(&quot;op&quot;);\n            var qs;\n            if(op == &quot;temp&quot;) {\n                qs = prompt(&quot;New cooler temperature or \s&quot;off\s&quot;:&quot;, &quot;&quot;);\n                if(qs === &quot;&quot;) return;                           // Cancelled\n                qs = &quot;?&quot; + escape(qs);\n            } else {\n                qs = &quot;?&quot; + op;                                  // For now only &quot;on&quot;\n            }\n            DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/atempctrl.asp&quot; + qs, &quot;&quot;, _tempCtlOnComplete, null);\n        }\n    }\n    // Weather conn.disc AJAX interface\n    function _wxCtlOnComplete(text, params) {\n        displayMessage(text);\n        _sendRequest(false);\n    }\n    function _wxCtl(e) {\n        if(!e) e = window.event;\n        var tgt = resolveTarget(e);\n        var tiptxt = tgt.getAttribute(&quot;title&quot;);\n        if(!config.browser.isTouchInterface || confirm(tiptxt))\n        { \n            var op = resolveTarget(e).getAttribute(&quot;op&quot;);\n            var qs = op ? &quot;?&quot; + op : &quot;&quot;;\n            DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/awxconn.asp&quot; + qs, &quot;&quot;, _wxCtlOnComplete, null);\n        }\n    }\n    // Console I/O AJAX interface\n    function _consPostFormOnComplete(text, params) {\n        var t = text.trim();\n        if(t === &quot;&quot;)\n            displayMessage(t);\n        else\n            displayMessage(&quot;Message sent.&quot;);\n        DC3.LightBox.hideBox();\n    }\n    function _consPostYesNoForm(e) {\n        var form = document.getElementById(&quot;sm_yesNoForm&quot;);\n        DC3.Ajax.postForm(form, form.action, _consPostFormOnComplete, null);\n    }\n    function _consPostReadLineFormOk(e) {\n        var form = document.getElementById(&quot;sm_readLineForm&quot;);\n        document.getElementById(&quot;sm_readLineButtonData&quot;).name = &quot;answer_rd_ok&quot;;\n        DC3.Ajax.postForm(form, form.action, _consPostFormOnComplete, null);\n    }\n    function _consPostReadLineFormCancel(e) {\n        var form = document.getElementById(&quot;sm_readLineForm&quot;);\n        document.getElementById(&quot;sm_readLineButtonData&quot;).name = &quot;answer_rd_can&quot;;\n        DC3.Ajax.postForm(form, form.action, _consPostFormOnComplete, null);\n    }\n    function _consPostAlertOk() {                           // Not event, set as lightbox callback\n        DC3.Ajax.sendRequest(&quot;POST&quot;, &quot;/ac/aconsread.asp&quot;, &quot;&quot;, _consPostFormOnComplete, null);\n        return true;                                        // Go ahead and close lightbox\n    }\n    // AJAX interface (Depends on global DC3.Lib.sysMonTimerID)\n    function _smOnComplete(json, params) {\n        try {                                               // Dies if closed or editing\n            eval(json);                                     // (also toss any other JSON errors)\n            var clr = $('span.telemActive').css('color');   // Graph lines same color as active telemetry text\n            //\n            // Insert jQuery sparkline objects into place http://omnipotent.net/jquery.sparkline/\n            // NOTES: Width is 158 pixels, defaultPixelsPerValue = 2 (scale of X axis) so there\n            //        should be 79 values in the lists. This is set in asystemstatus as the \n            //        constant MAXTRKPTS = 79. At 6 sec per point, this is 7.9 minutes, eh?\n            //\n            $('#sm_trkGraphX').sparkline('html', \n            { \n                type:'line',\n                lineWidth:'2',\n                spotRadius:'2',\n                minSpotColor:false,\n                maxSpotColor:false,\n                lineColor:clr,\n                fillColor:false,\n                height:'34px',\n                chartRangeMin:'-2',\n                chartRangeMax:'2',\n                chartRangeClip:true,\n                defaultPixelsPerValue:2\n            });\n            $('#sm_trkGraphY').sparkline('html', \n            { \n                type:'line', \n                lineWidth:'2',\n                spotRadius:'2',\n                minSpotColor:false,\n                maxSpotColor:false,\n                lineColor:clr,\n                fillColor:false, \n                height:'34px',\n                chartRangeMin:'-2',\n                chartRangeMax:'2',\n                chartRangeClip:true,\n                defaultPixelsPerValue:2 \n            });\n            $('#sm_trkGraphXY').sparkline('html', \n            { \n                type:'line', \n                lineWidth:'1',\n                spotRadius:'2',\n                minSpotColor:false,\n                maxSpotColor:false,\n                lineColor:clr,\n                fillColor:false, \n                height:'48px',\n                width:'48px',\n                chartRangeMin:'-2',\n                chartRangeMax:'2',\n                chartRangeMinX:'0',\n                chartRangeMaxX:'4'\n            });\n        } catch(ex) { }\n        \n        // Update dynamic links' event hookups (should use jQuery!!)\n        var elem = document.getElementById(&quot;sm_logOff&quot;);    // May not exist (typ.)\n        if(elem) elem.onclick = DC3.Lib.logOff;             // Logoff in library now\n        elem = document.getElementById(&quot;sm_shutterCtlLink&quot;);\n        if(elem) elem.onclick = _shutterCtl;\n        elem = document.getElementById(&quot;sm_domeCtlLink&quot;);\n        if(elem) elem.onclick = _domeCtl;\n        elem = document.getElementById(&quot;sm_schCtlLink&quot;);\n        if(elem) elem.onclick = _schedCtl;\n        elem = document.getElementById(&quot;sm_scopeConnLink&quot;);\n        if(elem) elem.onclick = _scopeCtl;\n        elem = document.getElementById(&quot;sm_camConnLink&quot;);\n        if(elem) elem.onclick = _camCtl;\n        elem = document.getElementById(&quot;sm_camTempLink&quot;);\n        if(elem) elem.onclick = _tempCtl;\n        elem = document.getElementById(&quot;sm_wxCtlLink&quot;);\n        if(elem) elem.onclick = _wxCtl;\n\n        if(DC3.Lib.sysMonRefreshTimerID === null)           // Unless already active timer (????)\n            DC3.Lib.sysMonRefreshTimerID = setTimeout(_sendRequest, 5000);\n    }\n    function _sendRequest(init) {                           // True if this is initial call opening tiddler\n        if(DC3.Lib.sysMonRefreshTimerID)                    // Allow pre-emptive refresh call\n            clearTimeout(DC3.Lib.sysMonRefreshTimerID);     // ...for immediate refresh\n        DC3.Lib.sysMonRefreshTimerID = null;                // Timer's done now\n        if(document.getElementById(&quot;sm_scopeStat&quot;)) {       // Gone if editing or closed\n            // init will be an event or null if called back from timer\n            // look for explicit bool true to detect call for init\n            // POST prevents caching (the ajax lib adds Cache-Control too.\n            var complParams = { };\n            DC3.Ajax.sendRequest(&quot;POST&quot;, &quot;/ac/asystemstatus.asp&quot; + \n                                    ((typeof init == &quot;boolean&quot; &amp;&amp; init) ? &quot;?init&quot; : &quot;&quot;), \n                                    &quot;&quot;, _smOnComplete, complParams);\n        }\n    }\n    // Initial call on opening the tiddler\n    // Dynamic links - repeated in _sm_onComplete()\n    var elem = document.getElementById(&quot;sm_logOff&quot;);        // May not exist (typ.)\n    if(elem) elem.onclick = DC3.Lib.logOff;                 // Logoff in library now\n    elem = document.getElementById(&quot;sm_shutterCtlLink&quot;);\n    if(elem) elem.onclick = _shutterCtl;\n    elem = document.getElementById(&quot;sm_domeCtlLink&quot;);\n    if(elem) elem.onclick = _domeCtl;\n    elem = document.getElementById(&quot;sm_schCtlLink&quot;);\n    if(elem) elem.onclick = _schedCtl;\n    elem = document.getElementById(&quot;sm_scopeConnLink&quot;);\n    if(elem) elem.onclick = _scopeCtl;\n    elem = document.getElementById(&quot;sm_camConnLink&quot;);\n    if(elem) elem.onclick = _camCtl;\n    elem = document.getElementById(&quot;sm_camTempLink&quot;);\n    if(elem) elem.onclick = _tempCtl;\n    elem = document.getElementById(&quot;sm_wxCtlLink&quot;);\n    if(elem) elem.onclick = _wxCtl;\n    \n    elem = document.getElementById(&quot;sm_HoverLabel&quot;);\n    if(config.browser.isTouchInterface)\n        elem.innerHTML = &quot;Touch the links to see what they do and be asked if you want to do it&lt;/i&gt;&quot;;\n    else\n        elem.innerHTML = &quot;Hover the mouse over the links to see what they do&quot;;\n        \n    if(DC3.Lib.sysMonRefreshTimerID === null) _sendRequest(true);   // Don't start multiple timer cycles!\n    if(DC3.Lib.sysMonFlashTimerID === null) _smFlasher();\n&lt;/script&gt;\n</div>
<div tiddler="System Status Help" modifier="Bob Denny" modified="201408140053" created="200611071313" tags="Help UserContent hideUser">\nMostly self-explanatory, but there are a few things to be aware of:\n* The Owner label is a link. Click it to release the observatory.\n* The button at the bottom shows the detailed Run Log during observing. \n* If the Run Log is visible, you'll also see a button with which you can abort the run.\nThanks to ~DC-3 Dreams customer and software developer [[Russell Archer|http://www.rarcher.net]] for the idea of including the [[jQuery|http://jquery.com/]] library and for the guider tracking error feature. We have since used ~JQuery in other places and it is really great.\n&lt;% if(User.IsAdministrator) { %&gt;\n!!Administrators only\nThe following controls/links are available only to Administrators, and when the scheduler is //not// in control:\n* The labels Telescope and Imager are links for connecting and //shutting down// these devices. Shutting down the telescope includes parking and stopping sidereal tracking as well as disconnecting from the control system. Shutting down the imager includes changing the cooler temperature to +10 deg C before disconnecting it from the control system.\n* The Shutter/Roof and Dome labels are links that provide you with dome/roof control. The Dome display (rotation) will not be visible for a roof or clamshell.\n* The Weather label is a link with which you can connect and disconnect the weather server.\n* The Cooler label is a link with which you can turn the cooler on and off or change the temperature.\n&lt;% } %&gt;</div>
<div tiddler="Tag Usage" modifier="Bob Denny" modified="200611302214" created="200611070326" tags="Authoring deleteUser">Each item (tiddler) in the content has one or more //tags//. Click the tags▼ link in the toolbar to see which tags are attached to this item (Authoring and deleteUser). Most tags are hidden from users; only a few appear in the final content as Categories. The following buttons provide tag browsing similar to that provided in the tags tab in the right sidebar. To see what the meaning of a tag is, click its button then select &quot;Open tag 'xxx'&quot;.\n&lt;&lt;allTags&gt;&gt;\nMore to be written...</div>
<div tiddler="TaggerPlugin" modifier="Bob Denny" modified="200610272123" created="200609251516" tags="systemConfig macro plugin">/***\n|''Name:''|~TaggerPlugin|\n|''Version:''|1.0.1a (2006-10-27)|\n|''Source:''|http://lewcid.googlepages.com/lewcid.html/#TaggerPlugin|\n|''Author:''|~SaqImtiaz rev by Bob Denny|\n|''Description:''|Provides a drop down listing current tiddler tags, and allowing toggling of tags. Customized to remove 'open tag &lt;tag&gt;' and 'rename-tag &lt;tag&gt;' buttons when being used from an ASP page [Bob Denny]|\n|''Documentation:''|[[TaggerPluginDocumentation]]|\n|''Source Code:''|[[TaggerPluginSource]]|\n|''~TiddlyWiki:''|Version 2.0.8 or better|\n***/\n//{{{\n\nconfig.tagger={\n defaults:{\n label: 'Tags: ',\n tooltip: 'Manage tiddler tags',\n taglist: 'true',\n excludeTags: '',\n notags: 'tiddler has no tags',\n aretags: 'current tiddler tags:',\n toggletext: 'add tags:'\n }\n};\n\nconfig.macros.tagger={};\nconfig.macros.tagger.arrow = (document.all ? &quot;\su25BC&quot;:&quot;\su25BE&quot;); // UTF8 the fat one is the only one that works in IE\nconfig.macros.tagger.handler = function(place,macroName,params,wikifier,paramString,tiddler) {\n var defaults = config.tagger.defaults;\n var nAV = paramString.parseParams('tagman', null, true);\n var label = ((nAV[0].label)&amp;&amp;(nAV[0].label[0])!='.')?nAV[0].label[0]+this.arrow: defaults.label+this.arrow;\n var tooltip = ((nAV[0].tooltip)&amp;&amp;(nAV[0].tooltip[0])!='.')?nAV[0].tooltip[0]: defaults.tooltip;\n var taglist = ((nAV[0].taglist)&amp;&amp;(nAV[0].taglist[0])!='.')?nAV[0].taglist[0]: defaults.taglist;\n var exclude = ((nAV[0].exclude)&amp;&amp;(nAV[0].exclude[0])!='.')?(nAV[0].exclude[0]).readBracketedList(): defaults.excludeTags.readBracketedList();\n if ((nAV[0].source)&amp;&amp;(nAV[0].source[0])!='.')var source = nAV[0].source[0];\n if (source&amp;&amp;!store.getTiddler(source)) return false;\n\n var onclick = function(e) {\n if (!e) var e = window.event;\n var popup = Popup.create(this);\n var tagsarray = store.getTags();\n var tags=new Array();\n\n for (var i=0; i&lt;tagsarray.length; i++){\n tags.push(tagsarray[i][0]);}\n\n if (source)\n {var sourcetiddler=store.getTiddler(source);\n tags=sourcetiddler.tags.sort();}\n\n var currentTags = tiddler.tags.sort();\n\n var createButtons=function(text,theTag,tooltipPrefix){\n var sp = createTiddlyElement(createTiddlyElement(popup,&quot;li&quot;),&quot;span&quot;,null,&quot;tagger&quot;);\n var theToggle = createTiddlyButton(sp,text,tooltipPrefix+&quot; '&quot;+theTag+&quot;'&quot;,taggerOnToggle,&quot;button&quot;,&quot;toggleButton&quot;);\n theToggle.setAttribute(&quot;tiddler&quot;,tiddler.title);\n theToggle.setAttribute(&quot;tag&quot;,theTag);\n insertSpacer(sp);\n if (window.createTagButton_orig_mptw)\n createTagButton_orig_mptw(sp,theTag);\n else\n createTagButton(sp,theTag);\n }\n\n createTiddlyElement(popup,&quot;li&quot;,null,&quot;listTitle&quot;,(tiddler.tags.length == 0 ? defaults.notags : defaults.aretags));\n\n for (var t=0; t&lt;currentTags.length; t++){\n createButtons(&quot;[x]&quot;,currentTags[t],&quot;remove tag &quot;);\n }\n\n createTiddlyElement(createTiddlyElement(popup,&quot;li&quot;),&quot;hr&quot;);\n\n if (taglist!='false')\n { createTiddlyElement(popup,&quot;li&quot;,null,&quot;listTitle&quot;,defaults.toggletext);\n for (var i=0; i&lt;tags.length; i++){\n if (!tiddler.tags.contains(tags[i])&amp;&amp;!exclude.contains(tags[i]))\n {createButtons(&quot;[ ]&quot;,tags[i],&quot;add tag &quot;);\n }\n }\n createTiddlyElement(createTiddlyElement(popup,&quot;li&quot;),&quot;hr&quot;);\n }\n\n var newTagButton = createTiddlyButton(createTiddlyElement(popup,&quot;li&quot;),(&quot;Create new tag&quot;),null,taggerOnToggle);\n newTagButton.setAttribute(&quot;tiddler&quot;,tiddler.title);\n if (source) newTagButton.setAttribute(&quot;source&quot;,source);\n\n Popup.show(popup,false);\n e.cancelBubble = true;\n if (e.stopPropagation) e.stopPropagation();\n return(false);\n };\n\n createTiddlyButton(place,label,tooltip,onclick,&quot;button&quot;,&quot;taggerDrpBtn&quot;);\n};\n\nwindow.taggerOnToggle = function(e) {\n var tag = this.getAttribute(&quot;tag&quot;);\n var title = this.getAttribute(&quot;tiddler&quot;);\n var tiddler = store.getTiddler(title);\n if (!tag)\n {\n var newtag=prompt(&quot;Enter new tag:&quot;,&quot;&quot;);\n if (newtag!=''&amp;&amp;newtag!=null)\n {\n var tag=newtag;\n if (this.getAttribute(&quot;source&quot;))\n {var sourcetiddler = store.getTiddler(this.getAttribute(&quot;source&quot;));\n sourcetiddler.tags.pushUnique(newtag);}\n }\n else\n {return false;};\n }\n if (!tiddler || !tiddler.tags)\n {store.saveTiddler(title,title,'',config.options.txtUserName,new Date(),tag);}\n else\n {if (tiddler.tags.find(tag)==null)\n {tiddler.tags.push(tag)}\n else if(!newtag)\n {tiddler.tags.splice(tiddler.tags.find(tag),1)};\n store.saveTiddler(tiddler.title,tiddler.title,tiddler.text,tiddler.modifier,tiddler.modified,tiddler.tags);};\n story.refreshTiddler(title,null,true);\n if(config.options.chkAutoSave)\n saveChanges();\n return false;\n};\n\nsetStylesheet(\n &quot;.tagger a.button {font-weight: bold;display:inline; padding:0px;}\sn&quot;+\n &quot;.tagger #toggleButton {padding-left:2px; padding-right:2px; margin-right:1px; font-size:110%;}\sn&quot;+\n &quot;#nestedtagger {background:#2E5ADF; border: 1px solid #0331BF;}\sn&quot;+\n &quot;.popup .listTitle {color:#000;}\sn&quot;+\n &quot;&quot;,\n&quot;TaggerStyles&quot;);\n\nwindow.lewcidTiddlerSwapTag = function (tiddler, oldTag, newTag){\n for (var i = 0; i &lt; tiddler.tags.length; i++)\n if (tiddler.tags[i] == oldTag) {\n tiddler.tags[i] = newTag;\n return true;}\n return false;\n}\n\nwindow.lewcidRenameTag = function(e) {\n var tag=this.getAttribute(&quot;tag&quot;);\n var newtag=prompt(&quot;Rename tag '&quot;+tag+&quot;' to:&quot;,tag);\n\n if ((newtag==tag)||(newtag==null)) {return false;}\n\n if(store.tiddlerExists(newtag))\n {if(confirm(config.messages.overwriteWarning.format([newtag.toString()])))\n story.closeTiddler(newtag,false,false);\n else\n return null;}\n\n tagged=store.getTaggedTiddlers(tag);\n if (tagged.length!=0){\n for (var j = 0; j &lt; tagged.length; j++)\n lewcidTiddlerSwapTag(tagged[j],tag,newtag);}\n\n if (store.tiddlerExists(tag))\n {store.saveTiddler(tag,newtag);}\n if (document.getElementById(&quot;tiddler&quot;+tag))\n {var oldTagTiddler = document.getElementById(story.idPrefix + tag);\n var before= story.positionTiddler(oldTagTiddler);\n var place = document.getElementById(story.container);\n story.closeTiddler(tag,false,false);\n story.createTiddler(place,before,newtag,null);\n story.saveTiddler(newtag);}\n if(config.options.chkAutoSave)\n saveChanges();\n return false;\n}\n\n\nwindow.onClickTag=function(e)\n{\n if (!e) var e = window.event;\n var theTarget = resolveTarget(e);\n\n var nested = (!isNested(theTarget));\n if ((Popup.stack.length &gt; 1)&amp;&amp;(nested==true)) {Popup.removeFrom(1);}\n else if(Popup.stack.length &gt; 0 &amp;&amp; nested==false) {Popup.removeFrom(0);};\n\n var theId = (nested==false)? &quot;popup&quot; : &quot;nestedtagger&quot;;\n var popup = createTiddlyElement(document.body,&quot;ol&quot;,theId,&quot;popup&quot;,null);\n Popup.stack.push({root: this, popup: popup});\n\n var tag = this.getAttribute(&quot;tag&quot;);\n var title = this.getAttribute(&quot;tiddler&quot;);\n if(popup &amp;&amp; tag)\n {\n var tagged = store.getTaggedTiddlers(tag);\n var titles = [];\n var li,r;\n for(r=0;r&lt;tagged.length;r++)\n if(tagged[r].title != title)\n titles.push(tagged[r].title);\n var lingo = config.views.wikified.tag;\n if(titles.length &gt; 0)\n {\n var openAll = createTiddlyButton(createTiddlyElement(popup,&quot;li&quot;),lingo.openAllText.format([tag]),lingo.openAllTooltip,onClickTagOpenAll);\n openAll.setAttribute(&quot;tag&quot;,tag);\n createTiddlyElement(createTiddlyElement(popup,&quot;li&quot;),&quot;hr&quot;);\n for(r=0; r&lt;titles.length; r++)\n {\n createTiddlyLink(createTiddlyElement(popup,&quot;li&quot;),titles[r],true);\n }\n }\n else\n createTiddlyText(createTiddlyElement(popup,&quot;li&quot;,null,&quot;disabled&quot;),lingo.popupNone.format([tag]));\n if(document.location.pathname.lastIndexOf(&quot;.asp&quot;) == -1) // [rbd] Only if authoring, not ASP\n {\n createTiddlyElement(createTiddlyElement(popup,&quot;li&quot;),&quot;hr&quot;);\n var h = createTiddlyLink(createTiddlyElement(popup,&quot;li&quot;),tag,false);\n createTiddlyText(h,lingo.openTag.format([tag]));\n createTiddlyElement(createTiddlyElement(popup,&quot;li&quot;),&quot;hr&quot;);\n \n var renameTagButton = createTiddlyButton(createTiddlyElement(popup,&quot;li&quot;),(&quot;Rename tag '&quot;+tag+&quot;'&quot;),null,lewcidRenameTag);\n renameTagButton.setAttribute(&quot;tag&quot;,tag);\n }\n }\n Popup.show(popup,false);\n e.cancelBubble = true;\n if (e.stopPropagation) e.stopPropagation();\n return(false);\n}\n\nif (!window.isNested)\n window.isNested = function(e) {\n while (e != null) {\n var contentWrapper = document.getElementById(&quot;contentWrapper&quot;);\n if (contentWrapper == e) return true;\n e = e.parentNode;\n }\n return false;\n };\n\nif(document.location.pathname.lastIndexOf(&quot;.asp&quot;) == -1)\n {\n config.shadowTiddlers.TaggerPluginDocumentation=&quot;The documentation is available [[here.|http://lewcid.googlepages.com/lewcid.html#TaggerPluginDocumentation]]&quot;;\n\n config.shadowTiddlers.TaggerPluginSource=&quot;The uncompressed source code is available [[here.|http://lewcid.googlepages.com/lewcid.html#TaggerPluginSource]]&quot;;\n }\n//}}}</div>
<div tiddler="TestConsInfoSlider" modifier="Bob Denny" modified="200612050319" created="200612050316" tags="Help UserContent hideUser">Runs through tests of the &quot;light box&quot; browser displays which appear in response to scripts which ask for input from the user or display messages and wait for the user to indicate that the message has been seen. You'll be asked a couple of questions then shown a message. Nothing you do will make any permanent changes to the observatory, so feel free to run this at will!</div>
<div tiddler="TiddlyWiki" modifier="Bob Denny" modified="200609170048" created="200609170048" tags="hideUser systemContent">This ACP web application is based on [[TiddlyWiki|http://www.tiddlywiki.com/]]. It has been heavily extended via [[plugin]]s and dynamically generated content from ACP's Active Server Pages.</div>
<div tiddler="ToggleSidebarMacro" modifier="Bob Denny" modified="200609232029" created="200609231953" tags="systemConfig macro plugin">/***\n\n|Name|ToggleSideBarMacro|\n|Created by|SaqImtiaz|\n|Location|http://lewcid.googlepages.com/lewcid.html#ToggleSideBarMacro|\n|Version|1.0|\n|Requires|~TW2.x|\n!Description:\nProvides a button for toggling visibility of the SideBar. You can choose whether the SideBar should initially be hidden or displayed.\n\n!Demo\n&lt;&lt;toggleSideBar &quot;Toggle Sidebar&quot;&gt;&gt;\n\n!Usage:\n{{{&lt;&lt;toggleSideBar&gt;&gt;}}} &lt;&lt;toggleSideBar&gt;&gt;\nadditional options:\n{{{&lt;&lt;toggleSideBar label tooltip show/hide&gt;&gt;}}} where:\nlabel = custom label for the button,\ntooltip = custom tooltip for the button,\nshow/hide = use one or the other, determines whether the sidebar is shown at first or not.\n(default is to show the sidebar)\n\nYou can add it to your tiddler toolbar, your MainMenu, or where you like really.\nIf you are using a horizontal MainMenu and want the button to be right aligned, put the following in your StyleSheet:\n{{{ .HideSideBarButton {float:right;} }}}\n\n!History\n*23-07-06: version 1.0: completely rewritten, now works with custom stylesheets too, and easier to customize start behaviour. \n*20-07-06: version 0.11\n*27-04-06: version 0.1: working.\n\n!Code\n***/\n//{{{\nconfig.macros.toggleSideBar={};\n\nconfig.macros.toggleSideBar.settings={\n styleHide : &quot;#sidebar { display: none;}\sn&quot;+&quot;#contentWrapper #displayArea { margin-right: 1em;}\sn&quot;+&quot;&quot;,\n styleShow : &quot; &quot;,\n arrow1: &quot;«&quot;,\n arrow2: &quot;»&quot;\n};\n\nconfig.macros.toggleSideBar.handler=function (place,macroName,params,wikifier,paramString,tiddler)\n{\n var tooltip= params[1]||'toggle sidebar';\n var mode = (params[2] &amp;&amp; params[2]==&quot;hide&quot;)? &quot;hide&quot;:&quot;show&quot;;\n var arrow = (mode == &quot;hide&quot;)? this.settings.arrow1:this.settings.arrow2;\n var label= (params[0]&amp;&amp;params[0]!='.')?params[0]+&quot; &quot;+arrow:arrow;\n var theBtn = createTiddlyButton(place,label,tooltip,this.onToggleSideBar,&quot;button HideSideBarButton&quot;);\n if (mode == &quot;hide&quot;)\n { \n (document.getElementById(&quot;sidebar&quot;)).setAttribute(&quot;toggle&quot;,&quot;hide&quot;);\n setStylesheet(this.settings.styleHide,&quot;ToggleSideBarStyles&quot;);\n }\n};\n\nconfig.macros.toggleSideBar.onToggleSideBar = function(){\n var sidebar = document.getElementById(&quot;sidebar&quot;);\n var settings = config.macros.toggleSideBar.settings;\n if (sidebar.getAttribute(&quot;toggle&quot;)=='hide')\n {\n setStylesheet(settings.styleShow,&quot;ToggleSideBarStyles&quot;);\n sidebar.setAttribute(&quot;toggle&quot;,&quot;show&quot;);\n this.firstChild.data= (this.firstChild.data).replace(settings.arrow1,settings.arrow2);\n }\n else\n { \n setStylesheet(settings.styleHide,&quot;ToggleSideBarStyles&quot;);\n sidebar.setAttribute(&quot;toggle&quot;,&quot;hide&quot;);\n this.firstChild.data= (this.firstChild.data).replace(settings.arrow2,settings.arrow1);\n }\n\n return false;\n}\n\nsetStylesheet(&quot;.HideSideBarButton .button {font-weight:bold; padding: 0 5px;}\sn&quot;,&quot;ToggleSideBarButtonStyles&quot;);\n\n//}}}</div>
<div tiddler="TrainCorrectorInfoSlider" modifier="Bob Denny" modified="200612050221" created="200612050217" tags="Help UserContent hideUser">You don't normally have to do this, as ACP learns about your telescope as it observes, and centers targets every time. But if you want to train the corrector, you can run this. You'll be asked if you want to //replace// the pointing model with the new data, or augment the model with the mapping points gathered by this process. You'll also be asked for the number of points to gather. 50 is plenty for this corrector.</div>
<div tiddler="Troubleshooting FTP" modifier="Bob Denny" modified="201011220231" created="201011220020" tags="Help UserContent">/%&lt;%\n ftp_port = &quot;:&quot; + Request.ServerVariables(&quot;FTP_PORT&quot;);\n if(ftp_port == &quot;:21&quot;) ftp_port = &quot;&quot;;\n host_name = Request.ServerVariables(&quot;FTP_HOST&quot;) + ftp_port;\n site_name = Prefs.SiteName;\n user_name = User.Username;\n%&gt;%/\nUsing Explorer FTP can be frustrating. If you make a mistake in the location field or if your net connection is acting up, you may end up with long timeouts or goofy error messages that won't go away. Delete the network location and try again. The Mac is more forgiving of mistakes, and the error messages are more meaningful. Again, if needed start over and try again.\n\nIf you doubt that the server at the other end is really working, there is a test you can do on Windows in a shell/cmd window (Mac OS X has a similar command line FTP client):\n{{{\nC:\sxxx&gt; ftp &lt;%= host_name %&gt;\n}}}\nYou should see our server respond, asking for your username. Respond with your username, then when it asks, with your password. You should now see an FTP prompt. Type bye to terminate the session. The exchange should look like this:\n{{{\nC:\sxxx&gt; ftp dakota.dc3.com\nConnected to dakota.dc3.com.\n220 Welcome to ACP/FTP server at Red Mountain Simulated Observatory\nUser (dakota.dc3.com:(none)): rdenny\n331 Password required for rdenny.\nPassword:\n230 User rdenny logged in.\nftp&gt; bye\n221 Logging off ACP/FTP server at Red Mountain Simulated Observatory\nC:\sxxx&gt;\n}}}\nIf this simple test works, then the FTP server is both working and reachable.\n\nSome people have reported problems with &quot;passive&quot; FTP mode, which Windows will use unless told not to. If you're having problems you can try turning off passive mode. In the Control Panel, select Internet Options. Select the Advanced tab, and in the Browsing section of the list, turn off &quot;Use passive FTP...&quot;. That might get you going. Be aware that ACP's FTP server supports passive mode, however some firewalls have problems with it.\n</div>
<div tiddler="UploadLog" modifier="Brewington" modified="201509231709" created="200702281813" tags="">\n| 13/4/2015 16:58:52 | Bob Denny | [[author.html|http://127.0.0.1/author.html]] | [[twstore.asp|http://127.0.0.1/twstore.asp]] |  | author.html | author-backup |\n| 19/5/2015 10:45:37 | Bob Denny | [[author.html|http://127.0.0.1/author.html]] | [[twstore.asp|http://127.0.0.1/twstore.asp]] |  | author.html | author-backup | Ok |\n| 19/5/2015 10:55:7 | Bob Denny | [[author.html|http://127.0.0.1/author.html]] | [[twstore.asp|http://127.0.0.1/twstore.asp]] |  | author.html | author-backup |\n| 23/5/2015 18:37:51 | Bob Denny | [[author.html|http://127.0.0.1/author.html]] | [[twstore.asp|http://127.0.0.1/twstore.asp]] |  | author.html | author-backup |\n| 23/6/2015 16:59:1 | Bob Denny | [[author.html|http://127.0.0.1/author.html]] | [[twstore.asp|http://127.0.0.1/twstore.asp]] |  | author.html | author-backup |\n| 23/9/2015 10:9:56 | Brewington | [[author.html|http://192.168.1.11/author.html]] | [[twstore.asp|http://192.168.1.11/twstore.asp]] |  | author.html | author-backup |</div>
<div tiddler="UploadPlugin" modifier="Bob Denny" modified="200611060501" created="200609082348" tags="systemConfig macro plugin">/***\n|''Name:''|UploadPlugin|\n|''Description:''|Save to web a TiddlyWiki|\n|''Version:''|3.4.5b|\n|''Date:''|Nov 5, 2006|\n|''Source:''|http://tiddlywiki.bidix.info/#UploadPlugin|\n|''Documentation:''|http://tiddlywiki.bidix.info/#UploadDoc|\n|''Author:''|BidiX (BidiX (at) bidix (dot) info) - R. Denny modified|\n|''License:''|[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D ]]|\n|''~CoreVersion:''|2.0.0|\n|''Browser:''|Firefox 1.5; InternetExplorer 6.0; Safari|\n|''Include:''|config.lib.file; config.lib.log; config.lib.options; PasswordTweak|\n|''Require:''|[[UploadService|http://tiddlywiki.bidix.info/#UploadService]]|\n|''Modified:''|R. B. Denny - for RFC compliance in multipart separators. Must be lower case, also line breaks at separators not comply with RFC. Marked [rbd] (2 places). Remove &quot;save password&quot; checkbox and default to saving true. This was necessary because of the double hijack in SingleOptionsCookiePlugin|\n***/\n//{{{\nversion.extensions.UploadPlugin = {\n major: 3, minor: 4, revision: 5, \n date: new Date(2006,10,30),\n source: 'http://tiddlywiki.bidix.info/#UploadPlugin',\n documentation: 'http://tiddlywiki.bidix.info/#UploadDoc',\n author: 'BidiX (BidiX (at) bidix (dot) info',\n license: '[[BSD open source license|http://tiddlywiki.bidix.info/#%5B%5BBSD%20open%20source%20license%5D%5D]]',\n coreVersion: '2.0.0',\n browser: 'Firefox 1.5; InternetExplorer 6.0; Safari',\n modified: 'R. B. Denny - for RFC compliance aznd special changes'\n};\n//}}}\n\n////+++!![config.lib.file]\n\n//{{{\nif (!config.lib) config.lib = {};\nif (!config.lib.file) config.lib.file= {\n author: 'BidiX',\n version: {major: 0, minor: 1, revision: 0}, \n date: new Date(2006,3,9)\n};\nconfig.lib.file.dirname = function (filePath) {\n var lastpos;\n if ((lastpos = filePath.lastIndexOf(&quot;/&quot;)) != -1) {\n return filePath.substring(0, lastpos);\n } else {\n return filePath.substring(0, filePath.lastIndexOf(&quot;\s\s&quot;));\n }\n};\nconfig.lib.file.basename = function (filePath) {\n var lastpos;\n if ((lastpos = filePath.lastIndexOf(&quot;#&quot;)) != -1) \n filePath = filePath.substring(0, lastpos);\n if ((lastpos = filePath.lastIndexOf(&quot;/&quot;)) != -1) {\n return filePath.substring(lastpos + 1);\n } else\n return filePath.substring(filePath.lastIndexOf(&quot;\s\s&quot;)+1);\n};\nwindow.basename = function() {return &quot;@@deprecated@@&quot;;};\n//}}}\n////===\n\n////+++!![config.lib.log]\n\n//{{{\nif (!config.lib) config.lib = {};\nif (!config.lib.log) config.lib.log= {\n author: 'BidiX',\n version: {major: 0, minor: 1, revision: 1}, \n date: new Date(2006,8,19)\n};\nconfig.lib.Log = function(tiddlerTitle, logHeader) {\n if (version.major &lt; 2)\n this.tiddler = store.tiddlers[tiddlerTitle];\n else\n this.tiddler = store.getTiddler(tiddlerTitle);\n if (!this.tiddler) {\n this.tiddler = new Tiddler();\n this.tiddler.title = tiddlerTitle;\n this.tiddler.text = &quot;| !date | !user | !location |&quot; + logHeader;\n this.tiddler.created = new Date();\n this.tiddler.modifier = config.options.txtUserName;\n this.tiddler.modified = new Date();\n if (version.major &lt; 2)\n store.tiddlers[tiddlerTitle] = this.tiddler;\n else\n store.addTiddler(this.tiddler);\n }\n return this;\n};\n\nconfig.lib.Log.prototype.newLine = function (line) {\n var now = new Date();\n var newText = &quot;| &quot;;\n newText += now.getDate()+&quot;/&quot;+(now.getMonth()+1)+&quot;/&quot;+now.getFullYear() + &quot; &quot;;\n newText += now.getHours()+&quot;:&quot;+now.getMinutes()+&quot;:&quot;+now.getSeconds()+&quot; | &quot;;\n newText += config.options.txtUserName + &quot; | &quot;;\n var location = document.location.toString();\n var filename = config.lib.file.basename(location);\n if (!filename) filename = '/';\n newText += &quot;[[&quot;+filename+&quot;|&quot;+location + &quot;]] |&quot;;\n this.tiddler.text = this.tiddler.text + &quot;\sn&quot; + newText;\n this.addToLine(line);\n};\n\nconfig.lib.Log.prototype.addToLine = function (text) {\n this.tiddler.text = this.tiddler.text + text;\n this.tiddler.modifier = config.options.txtUserName;\n this.tiddler.modified = new Date();\n if (version.major &lt; 2)\n store.tiddlers[this.tiddler.tittle] = this.tiddler;\n else {\n store.addTiddler(this.tiddler);\n story.refreshTiddler(this.tiddler.title);\n store.notify(this.tiddler.title, true);\n }\n if (version.major &lt; 2)\n store.notifyAll(); \n};\n//}}}\n////===\n\n////+++!![config.lib.options]\n\n//{{{\nif (!config.lib) config.lib = {};\nif (!config.lib.options) config.lib.options = {\n author: 'BidiX',\n version: {major: 0, minor: 1, revision: 0}, \n date: new Date(2006,3,9)\n};\n\nconfig.lib.options.init = function (name, defaultValue) {\n if (!config.options[name]) {\n config.options[name] = defaultValue;\n saveOptionCookie(name);\n }\n};\n//}}}\n////===\n\n////+++!![PasswordTweak]\n\n//{{{\nversion.extensions.PasswordTweak = {\n major: 1, minor: 0, revision: 3, date: new Date(2006,8,30),\n type: 'tweak',\n source: 'http://tiddlywiki.bidix.info/#PasswordTweak'\n};\n//}}}\n/***\n!!config.macros.option\n***/\n//{{{\nconfig.macros.option.passwordCheckboxLabel = &quot;Save this password on this computer&quot;;\nconfig.macros.option.passwordType = &quot;password&quot;; // password | text\n\nconfig.macros.option.onChangeOption = function(e)\n{\n var opt = this.getAttribute(&quot;option&quot;);\n var elementType,valueField;\n if(opt) {\n switch(opt.substr(0,3)) {\n case &quot;txt&quot;:\n elementType = &quot;input&quot;;\n valueField = &quot;value&quot;;\n break;\n case &quot;pas&quot;:\n elementType = &quot;input&quot;;\n valueField = &quot;value&quot;;\n break;\n case &quot;chk&quot;:\n elementType = &quot;input&quot;;\n valueField = &quot;checked&quot;;\n break;\n }\n config.options[opt] = this[valueField];\n saveOptionCookie(opt);\n var nodes = document.getElementsByTagName(elementType);\n for(var t=0; t&lt;nodes.length; t++) \n {\n var optNode = nodes[t].getAttribute(&quot;option&quot;);\n if (opt == optNode) \n nodes[t][valueField] = this[valueField];\n }\n }\n return(true);\n};\n\nconfig.macros.option.handler = function(place,macroName,params)\n{\n var opt = params[0];\n if(config.options[opt] === undefined) {\n return;}\n var c;\n switch(opt.substr(0,3)) {\n case &quot;txt&quot;:\n c = document.createElement(&quot;input&quot;);\n c.onkeyup = this.onChangeOption;\n c.setAttribute (&quot;option&quot;,opt);\n c.className = &quot;txtOptionInput &quot;+opt;\n place.appendChild(c);\n c.value = config.options[opt];\n break;\n case &quot;pas&quot;:\n // input password\n c = document.createElement (&quot;input&quot;);\n c.setAttribute(&quot;type&quot;,config.macros.option.passwordType);\n c.onkeyup = this.onChangeOption;\n c.setAttribute(&quot;option&quot;,opt);\n c.className = &quot;pasOptionInput &quot;+opt;\n place.appendChild(c);\n c.value = config.options[opt];\n // checkbox link with this password &quot;save this password on this computer&quot;\n// c = document.createElement(&quot;input&quot;);\n// c.setAttribute(&quot;type&quot;,&quot;checkbox&quot;);\n// c.onclick = this.onChangeOption;\n// c.setAttribute(&quot;option&quot;,&quot;chk&quot;+opt);\n// c.className = &quot;chkOptionInput &quot;+opt;\n// place.appendChild(c);\n// c.checked = config.options[&quot;chk&quot;+opt];\n// // text savePasswordCheckboxLabel\n// place.appendChild(document.createTextNode(config.macros.option.passwordCheckboxLabel));\n break;\n case &quot;chk&quot;:\n c = document.createElement(&quot;input&quot;);\n c.setAttribute(&quot;type&quot;,&quot;checkbox&quot;);\n c.onclick = this.onChangeOption;\n c.setAttribute(&quot;option&quot;,opt);\n c.className = &quot;chkOptionInput &quot;+opt;\n place.appendChild(c);\n c.checked = config.options[opt];\n break;\n }\n};\n//}}}\n/***\n!! Option cookie stuff\n***/\n//{{{\n// window.loadOptionsCookie_orig_PasswordTweak = window.loadOptionsCookie;\n// window.loadOptionsCookie = function()\n// {\n// var cookies = document.cookie.split(&quot;;&quot;);\n// for(var c=0; c&lt;cookies.length; c++) {\n// var p = cookies[c].indexOf(&quot;=&quot;);\n// if(p != -1) {\n// var name = cookies[c].substr(0,p).trim();\n// var value = cookies[c].substr(p+1).trim();\n// switch(name.substr(0,3)) {\n// case &quot;txt&quot;:\n// config.options[name] = unescape(value);\n// break;\n// case &quot;pas&quot;:\n// config.options[name] = unescape(value);\n// break;\n// case &quot;chk&quot;:\n// config.options[name] = value == &quot;true&quot;;\n// break;\n// }\n// }\n// }\n// };\n// \n// window.saveOptionCookie_orig_PasswordTweak = window.saveOptionCookie;\n// window.saveOptionCookie = function(name)\n// {\n// var c = name + &quot;=&quot;;\n// switch(name.substr(0,3)) {\n// case &quot;txt&quot;:\n// c += escape(config.options[name].toString());\n// break;\n// case &quot;chk&quot;:\n// c += config.options[name] ? &quot;true&quot; : &quot;false&quot;;\n// // is there an option link with this chk ?\n// if (config.options[name.substr(3)]) {\n// saveOptionCookie(name.substr(3));\n// }\n// break;\n// case &quot;pas&quot;:\n// if (config.options[&quot;chk&quot;+name]) {\n// c += escape(config.options[name].toString());\n// } else {\n// c += &quot;&quot;;\n// }\n// break;\n// }\n// c += &quot;; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/&quot;;\n// document.cookie = c;\n// };\n//}}}\n/***\n!! Initializations\n***/\n//{{{\n// define config.options.pasPassword\nif (!config.options.pasPassword) {\n config.options.pasPassword = 'defaultPassword';\n window.saveOptionCookie('pasPassword');\n}\n// since loadCookies is first called befor password definition\n// we need to reload cookies\nwindow.loadOptionsCookie();\n//}}}\n////===\n\n////+++!![config.macros.upload]\n\n//{{{\nconfig.macros.upload = {\n accessKey: &quot;U&quot;,\n formName: &quot;UploadPlugin&quot;,\n contentType: &quot;text/html;charset=UTF-8&quot;,\n defaultStoreScript: &quot;store.php&quot;\n};\n\n// only this two configs need to be translated\nconfig.macros.upload.messages = {\n aboutToUpload: &quot;About to upload TiddlyWiki to %0&quot;,\n backupFileStored: &quot;Previous file backuped in %0&quot;,\n crossDomain: &quot;Certainly a cross-domain isue: access to an other site isn't allowed&quot;,\n errorDownloading: &quot;Error downloading&quot;,\n errorUploadingContent: &quot;Error uploading content&quot;,\n fileLocked: &quot;Files is locked: You are not allowed to Upload&quot;,\n fileNotFound: &quot;file to upload not found&quot;,\n fileNotUploaded: &quot;File %0 NOT uploaded&quot;,\n mainFileUploaded: &quot;Main TiddlyWiki file uploaded to %0&quot;,\n passwordEmpty: &quot;Unable to upload, your password is empty&quot;,\n urlParamMissing: &quot;url param missing&quot;,\n rssFileNotUploaded: &quot;RssFile %0 NOT uploaded&quot;,\n rssFileUploaded: &quot;Rss File uploaded to %0&quot;\n};\n\nconfig.macros.upload.label = {\n promptOption: &quot;Save and Upload this TiddlyWiki with UploadOptions&quot;,\n promptParamMacro: &quot;Save and Upload this TiddlyWiki in %0&quot;,\n saveLabel: &quot;save to web&quot;, \n saveToDisk: &quot;save to disk&quot;,\n uploadLabel: &quot;upload&quot; \n};\n\nconfig.macros.upload.handler = function(place,macroName,params){\n // parameters initialization\n var storeUrl = params[0];\n var toFilename = params[1];\n var backupDir = params[2];\n var uploadDir = params[3];\n var username = params[4];\n var password; // for security reason no password as macro parameter\n var label;\n if (document.location.toString().substr(0,4) == &quot;http&quot;)\n label = this.label.saveLabel;\n else\n label = this.label.uploadLabel;\n var prompt;\n if (storeUrl) {\n prompt = this.label.promptParamMacro.toString().format([this.toDirUrl(storeUrl, uploadDir, username)]);\n }\n else {\n prompt = this.label.promptOption;\n }\n createTiddlyButton(place, label, prompt, \n function () {\n config.macros.upload.upload(storeUrl, toFilename, uploadDir, backupDir, username, password); \n return false;}, \n null, null, this.accessKey);\n};\nconfig.macros.upload.UploadLog = function() {\n return new config.lib.Log('UploadLog', &quot; !storeUrl | !uploadDir | !toFilename | !backupdir | !origin |&quot; );\n};\nconfig.macros.upload.UploadLog.prototype = config.lib.Log.prototype;\nconfig.macros.upload.UploadLog.prototype.startUpload = function(storeUrl, toFilename, uploadDir, backupDir) {\n var line = &quot; [[&quot; + config.lib.file.basename(storeUrl) + &quot;|&quot; + storeUrl + &quot;]] | &quot;;\n line += uploadDir + &quot; | &quot; + toFilename + &quot; | &quot; + backupDir + &quot; |&quot;;\n this.newLine(line);\n};\nconfig.macros.upload.UploadLog.prototype.endUpload = function() {\n this.addToLine(&quot; Ok |&quot;);\n};\nconfig.macros.upload.basename = config.lib.file.basename;\nconfig.macros.upload.dirname = config.lib.file.dirname;\nconfig.macros.upload.toRootUrl = function (storeUrl, username)\n{\n return root = (this.dirname(storeUrl)?this.dirname(storeUrl):this.dirname(document.location.toString()));\n}\nconfig.macros.upload.toDirUrl = function (storeUrl, uploadDir, username)\n{\n var root = this.toRootUrl(storeUrl, username);\n if (uploadDir &amp;&amp; uploadDir != '.')\n root = root + '/' + uploadDir;\n return root;\n}\nconfig.macros.upload.toFileUrl = function (storeUrl, toFilename, uploadDir, username)\n{\n return this.toDirUrl(storeUrl, uploadDir, username) + '/' + toFilename;\n}\nconfig.macros.upload.upload = function(storeUrl, toFilename, uploadDir, backupDir, username, password)\n{\n // parameters initialization\n storeUrl = (storeUrl ? storeUrl : config.options.txtUploadStoreUrl);\n toFilename = (toFilename ? toFilename : config.options.txtUploadFilename);\n backupDir = (backupDir ? backupDir : config.options.txtUploadBackupDir);\n uploadDir = (uploadDir ? uploadDir : config.options.txtUploadDir);\n username = (username ? username : config.options.txtUploadUserName);\n password = config.options.pasUploadPassword; // for security reason no password as macro parameter\n if (!password || password === '') {\n alert(config.macros.upload.messages.passwordEmpty);\n return;\n }\n if (storeUrl === '') {\n storeUrl = config.macros.upload.defaultStoreScript;\n }\n if (config.lib.file.dirname(storeUrl) === '') {\n storeUrl = config.lib.file.dirname(document.location.toString())+'/'+storeUrl;\n }\n if (toFilename === '') {\n toFilename = config.lib.file.basename(document.location.toString());\n }\n\n clearMessage();\n // only for forcing the message to display\n if (version.major &lt; 2)\n store.notifyAll();\n if (!storeUrl) {\n alert(config.macros.upload.messages.urlParamMissing);\n return;\n }\n // Check that file is not locked\n if (window.BidiX &amp;&amp; BidiX.GroupAuthoring &amp;&amp; BidiX.GroupAuthoring.lock) {\n if (BidiX.GroupAuthoring.lock.isLocked() &amp;&amp; !BidiX.GroupAuthoring.lock.isMyLock()) {\n alert(config.macros.upload.messages.fileLocked);\n return;\n }\n }\n \n var log = new this.UploadLog();\n log.startUpload(storeUrl, toFilename, uploadDir, backupDir);\n if (document.location.toString().substr(0,5) == &quot;file:&quot;) {\n saveChanges();\n }\n var toDir = config.macros.upload.toDirUrl(storeUrl, toFilename, uploadDir, username);\n displayMessage(config.macros.upload.messages.aboutToUpload.format([toDir]), toDir);\n this.uploadChanges(storeUrl, toFilename, uploadDir, backupDir, username, password);\n if(config.options.chkGenerateAnRssFeed) {\n //var rssContent = convertUnicodeToUTF8(generateRss());\n var rssContent = generateRss();\n var rssPath = toFilename.substr(0,toFilename.lastIndexOf(&quot;.&quot;)) + &quot;.xml&quot;;\n this.uploadContent(rssContent, storeUrl, rssPath, uploadDir, '', username, password, \n function (responseText) {\n if (responseText.substring(0,1) != '0') {\n displayMessage(config.macros.upload.messages.rssFileNotUploaded.format([rssPath]));\n }\n else {\n var toFileUrl = config.macros.upload.toFileUrl(storeUrl, rssPath, uploadDir, username);\n displayMessage(config.macros.upload.messages.rssFileUploaded.format(\n [toFileUrl]), toFileUrl);\n }\n // for debugging store.php uncomment last line\n //DEBUG alert(responseText);\n });\n }\n return;\n};\n\nconfig.macros.upload.uploadChanges = function(storeUrl, toFilename, uploadDir, backupDir, \n username, password) {\n var original;\n if (document.location.toString().substr(0,4) == &quot;http&quot;) {\n original = this.download(storeUrl, toFilename, uploadDir, backupDir, username, password);\n return;\n }\n else {\n // standard way : Local file\n \n original = loadFile(getLocalPath(document.location.toString()));\n if(window.Components) {\n // it's a mozilla browser\n try {\n netscape.security.PrivilegeManager.enablePrivilege(&quot;UniversalXPConnect&quot;);\n var converter = Components.classes[&quot;@mozilla.org/intl/scriptableunicodeconverter&quot;]\n .createInstance(Components.interfaces.nsIScriptableUnicodeConverter);\n converter.charset = &quot;UTF-8&quot;;\n original = converter.ConvertToUnicode(original);\n }\n catch(e) {\n }\n }\n }\n //DEBUG alert(original);\n this.uploadChangesFrom(original, storeUrl, toFilename, uploadDir, backupDir, \n username, password);\n};\n\nconfig.macros.upload.uploadChangesFrom = function(original, storeUrl, toFilename, uploadDir, backupDir, \n username, password) {\n var startSaveArea = '&lt;div id=&quot;' + 'storeArea&quot;&gt;'; // Split up into two so that indexOf() of this source doesn't find it\n var endSaveArea = '&lt;/d' + 'iv&gt;';\n // Locate the storeArea div's\n var posOpeningDiv = original.indexOf(startSaveArea);\n var posClosingDiv = original.lastIndexOf(endSaveArea);\n if((posOpeningDiv == -1) || (posClosingDiv == -1))\n {\n alert(config.messages.invalidFileError.format([document.location.toString()]));\n return;\n }\n var revised = original.substr(0,posOpeningDiv + startSaveArea.length) + \n allTiddlersAsHtml() + &quot;\sn\st\st&quot; +\n original.substr(posClosingDiv);\n var newSiteTitle;\n if(version.major &lt; 2){\n newSiteTitle = (getElementText(&quot;siteTitle&quot;) + &quot; - &quot; + getElementText(&quot;siteSubtitle&quot;)).htmlEncode();\n } else {\n newSiteTitle = (wikifyPlain (&quot;SiteTitle&quot;) + &quot; - &quot; + wikifyPlain (&quot;SiteSubtitle&quot;)).htmlEncode();\n }\n\n revised = revised.replaceChunk(&quot;&lt;title&quot;+&quot;&gt;&quot;,&quot;&lt;/title&quot;+&quot;&gt;&quot;,&quot; &quot; + newSiteTitle + &quot; &quot;);\n revised = revised.replaceChunk(&quot;&lt;!--PRE-HEAD-START--&quot;+&quot;&gt;&quot;,&quot;&lt;!--PRE-HEAD-END--&quot;+&quot;&gt;&quot;,&quot;\sn&quot; + store.getTiddlerText(&quot;MarkupPreHead&quot;,&quot;&quot;) + &quot;\sn&quot;);\n revised = revised.replaceChunk(&quot;&lt;!--POST-HEAD-START--&quot;+&quot;&gt;&quot;,&quot;&lt;!--POST-HEAD-END--&quot;+&quot;&gt;&quot;,&quot;\sn&quot; + store.getTiddlerText(&quot;MarkupPostHead&quot;,&quot;&quot;) + &quot;\sn&quot;);\n revised = revised.replaceChunk(&quot;&lt;!--PRE-BODY-START--&quot;+&quot;&gt;&quot;,&quot;&lt;!--PRE-BODY-END--&quot;+&quot;&gt;&quot;,&quot;\sn&quot; + store.getTiddlerText(&quot;MarkupPreBody&quot;,&quot;&quot;) + &quot;\sn&quot;);\n revised = revised.replaceChunk(&quot;&lt;!--POST-BODY-START--&quot;+&quot;&gt;&quot;,&quot;&lt;!--POST-BODY-END--&quot;+&quot;&gt;&quot;,&quot;\sn&quot; + store.getTiddlerText(&quot;MarkupPostBody&quot;,&quot;&quot;) + &quot;\sn&quot;);\n\n var response = this.uploadContent(revised, storeUrl, toFilename, uploadDir, backupDir, \n username, password, function (responseText) {\n if (responseText.substring(0,1) != '0') {\n alert(responseText);\n displayMessage(config.macros.upload.messages.fileNotUploaded.format([getLocalPath(document.location.toString())]));\n }\n else {\n if (uploadDir !== '') {\n toFilename = uploadDir + &quot;/&quot; + config.macros.upload.basename(toFilename);\n } else {\n toFilename = config.macros.upload.basename(toFilename);\n }\n var toFileUrl = config.macros.upload.toFileUrl(storeUrl, toFilename, uploadDir, username);\n if (responseText.indexOf(&quot;destfile:&quot;) &gt; 0) {\n var destfile = responseText.substring(responseText.indexOf(&quot;destfile:&quot;)+9, \n responseText.indexOf(&quot;\sn&quot;, responseText.indexOf(&quot;destfile:&quot;)));\n toFileUrl = config.macros.upload.toRootUrl(storeUrl, username) + '/' + destfile;\n }\n else {\n toFileUrl = config.macros.upload.toFileUrl(storeUrl, toFilename, uploadDir, username);\n }\n displayMessage(config.macros.upload.messages.mainFileUploaded.format(\n [toFileUrl]), toFileUrl);\n if (backupDir &amp;&amp; responseText.indexOf(&quot;backupfile:&quot;) &gt; 0) {\n var backupFile = responseText.substring(responseText.indexOf(&quot;backupfile:&quot;)+11, \n responseText.indexOf(&quot;\sn&quot;, responseText.indexOf(&quot;backupfile:&quot;)));\n toBackupUrl = config.macros.upload.toRootUrl(storeUrl, username) + '/' + backupFile;\n displayMessage(config.macros.upload.messages.backupFileStored.format(\n [toBackupUrl]), toBackupUrl);\n }\n var log = new config.macros.upload.UploadLog();\n log.endUpload();\n store.setDirty(false);\n // erase local lock\n if (window.BidiX &amp;&amp; BidiX.GroupAuthoring &amp;&amp; BidiX.GroupAuthoring.lock) {\n BidiX.GroupAuthoring.lock.eraseLock();\n // change mtime with new mtime after upload\n var mtime = responseText.substr(responseText.indexOf(&quot;mtime:&quot;)+6);\n BidiX.GroupAuthoring.lock.mtime = mtime;\n }\n \n \n }\n // for debugging store.php uncomment last line\n //DEBUG alert(responseText);\n }\n );\n};\n\nconfig.macros.upload.uploadContent = function(content, storeUrl, toFilename, uploadDir, backupDir, \n username, password, callbackFn) {\n var boundary = &quot;---------------------------&quot;+&quot;aab03x&quot;; //[rbd]\n var request;\n try {\n request = new XMLHttpRequest();\n } \n catch (e) { \n request = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;); \n }\n if (window.netscape){\n try {\n if (document.location.toString().substr(0,4) != &quot;http&quot;) {\n netscape.security.PrivilegeManager.enablePrivilege('UniversalBrowserRead');}\n }\n catch (e) {}\n } \n //DEBUG alert(&quot;user[&quot;+config.options.txtUploadUserName+&quot;] password[&quot; + config.options.pasUploadPassword + &quot;]&quot;);\n // compose headers data\n var sheader = &quot;&quot;;\n sheader += &quot;--&quot; + boundary + &quot;\sr\snContent-disposition: form-data; name=\s&quot;&quot;;\n sheader += config.macros.upload.formName +&quot;\s&quot;\sr\sn\sr\sn&quot;;\n sheader += &quot;backupDir=&quot;+backupDir\n +&quot;;user=&quot; + username \n +&quot;;password=&quot; + password\n +&quot;;uploaddir=&quot; + uploadDir;\n // add lock attributes to sheader\n if (window.BidiX &amp;&amp; BidiX.GroupAuthoring &amp;&amp; BidiX.GroupAuthoring.lock) {\n var l = BidiX.GroupAuthoring.lock.myLock;\n sheader += &quot;;lockuser=&quot; + l.user\n + &quot;;mtime=&quot; + l.mtime\n + &quot;;locktime=&quot; + l.locktime;\n }\n sheader += &quot;;;\sr\sn&quot;; \n sheader += &quot;--&quot; + boundary + &quot;\sr\sn&quot;; //[rbd]\n sheader += &quot;Content-disposition: form-data; name=\s&quot;userfile\s&quot;; filename=\s&quot;&quot;+toFilename+&quot;\s&quot;\sr\sn&quot;;\n sheader += &quot;Content-Type: &quot; + config.macros.upload.contentType + &quot;\sr\sn&quot;;\n sheader += &quot;Content-Length: &quot; + content.length + &quot;\sr\sn\sr\sn&quot;;\n // compose trailer data\n var strailer = new String();\n strailer = &quot;\sr\sn--&quot; + boundary + &quot;--\sr\sn&quot;;\n //strailer = &quot;--&quot; + boundary + &quot;--\sr\sn&quot;;\n var data;\n data = sheader + content + strailer;\n //request.open(&quot;POST&quot;, storeUrl, true, username, password);\n try {\n request.open(&quot;POST&quot;, storeUrl, true); \n }\n catch(e) {\n alert(config.macros.upload.messages.crossDomain + &quot;\snError:&quot; +e);\n exit;\n }\n request.onreadystatechange = function () {\n if (request.readyState == 4) {\n if (request.status == 200)\n callbackFn(request.responseText);\n else\n alert(config.macros.upload.messages.errorUploadingContent + &quot;\snStatus: &quot;+request.status.statusText);\n }\n };\n request.setRequestHeader(&quot;Content-Length&quot;,data.length);\n request.setRequestHeader(&quot;Content-Type&quot;,&quot;multipart/form-data; boundary=&quot;+boundary);\n request.send(data); \n};\n\n\nconfig.macros.upload.download = function(uploadUrl, uploadToFilename, uploadDir, uploadBackupDir, \n username, password) {\n var request;\n try {\n request = new XMLHttpRequest();\n } \n catch (e) { \n request = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;); \n }\n try {\n if (uploadUrl.substr(0,4) == &quot;http&quot;) {\n netscape.security.PrivilegeManager.enablePrivilege(&quot;UniversalBrowserRead&quot;);\n }\n else {\n netscape.security.PrivilegeManager.enablePrivilege(&quot;UniversalXPConnect&quot;);\n }\n } catch (e) { }\n //request.open(&quot;GET&quot;, document.location.toString(), true, username, password);\n try {\n request.open(&quot;GET&quot;, document.location.toString(), true);\n }\n catch(e) {\n alert(config.macros.upload.messages.crossDomain + &quot;\snError:&quot; +e);\n exit;\n }\n \n request.onreadystatechange = function () {\n if (request.readyState == 4) {\n if(request.status == 200) {\n config.macros.upload.uploadChangesFrom(request.responseText, uploadUrl, \n uploadToFilename, uploadDir, uploadBackupDir, username, password);\n }\n else\n alert(config.macros.upload.messages.errorDownloading.format(\n [document.location.toString()]) + &quot;\snStatus: &quot;+request.status.statusText);\n }\n };\n request.send(null);\n};\n\n//}}}\n////===\n\n////+++!![Initializations]\n\n//{{{\nconfig.lib.options.init('txtUploadStoreUrl','store.php');\nconfig.lib.options.init('txtUploadFilename','');\nconfig.lib.options.init('txtUploadDir','');\nconfig.lib.options.init('txtUploadBackupDir','');\nconfig.lib.options.init('txtUploadUserName',config.options.txtUserName);\nconfig.lib.options.init('pasUploadPassword','');\nconfig.lib.options.init('chkpasUploadPassword', true);\nsetStylesheet(\n &quot;.pasOptionInput {width: 11em;}\sn&quot;+\n &quot;.txtOptionInput.txtUploadStoreUrl {width: 25em;}\sn&quot;+\n &quot;.txtOptionInput.txtUploadFilename {width: 25em;}\sn&quot;+\n &quot;.txtOptionInput.txtUploadDir {width: 25em;}\sn&quot;+\n &quot;.txtOptionInput.txtUploadBackupDir {width: 25em;}\sn&quot;+\n &quot;&quot;,\n &quot;UploadOptionsStyles&quot;);\n// if (document.location.toString().substr(0,4) == &quot;http&quot;) {\n// config.options.chkAutoSave = false; \n// saveOptionCookie('chkAutoSave');\n// }\nconfig.shadowTiddlers.UploadDoc = &quot;[[Full Documentation|http://tiddlywiki.bidix.info/l#UploadDoc ]]\sn&quot;; \n\n//}}}\n////===\n\n////+++!![Core Hijacking]\n\n//{{{\nconfig.macros.saveChanges.label_orig_UploadPlugin = config.macros.saveChanges.label;\nconfig.macros.saveChanges.label = config.macros.upload.label.saveToDisk;\n\nconfig.macros.saveChanges.handler_orig_UploadPlugin = config.macros.saveChanges.handler;\n\nconfig.macros.saveChanges.handler = function(place)\n{\n if ((!readOnly) &amp;&amp; (document.location.toString().substr(0,4) != &quot;http&quot;))\n createTiddlyButton(place,this.label,this.prompt,this.onClick,null,null,this.accessKey);\n};\n\n//}}}\n////===\n</div>
<div tiddler="UserContent" modifier="Bob Denny" modified="200611302144" created="200611070436" tags="systemContent hideUser">''Tag'': All of the items that the users (observers) see in the final content.</div>
<div tiddler="Using FTP" modifier="Bob Denny" modified="201011220149" created="200609292145" tags="Help UserContent">/%&lt;%\n ftp_port = &quot;:&quot; + Request.ServerVariables(&quot;FTP_PORT&quot;);\n if(ftp_port == &quot;:21&quot;) ftp_port = &quot;&quot;;\n host_name = Request.ServerVariables(&quot;FTP_HOST&quot;) + ftp_port;\n site_name = Prefs.SiteName;\n user_name = User.Username;\n%&gt;%/\n!Using Our FTP server &lt;%= host_name %&gt;\n&lt;html&gt;\n&lt;img src=&quot;/im/ftp1.png&quot; hspace=&quot;8&quot; align=&quot;right&quot;&gt;\n&lt;/html&gt;In order to provide you with a way to do bulk downloading of images and organize your data and files, we provide an optional File Transfer Protocol (FTP) service here at @@&lt;%= site_name %&gt;@@. If it is turned on, and if you have been given permissions to use it, you can log in with the same username and password you use for observatory access.\n\nThe FTP server's root is coincident with the web server's root. Under the root, there are folders for images, plans, and logs, and under those are the individual folders for each of our authorized users. Your username is @@&lt;%= user_name %&gt;@@. Thus, your image folder is @@/images/&lt;%= user_name %&gt;/@@, your plans folder is @@/plans/&lt;%= user_name %&gt;/@@, and your run-logs folder is @@/logs/&lt;%= user_name %&gt;/@@. The common scripts folder is just @@/scripts/@@ and the common upload folder is @@/uploads/@@. The folder where we provide files for you is @@/files/@@.\n\nOn the right is a tree view similar to that which you would see in the Navigation Pane of the Windows 7 Explorer after you create an FTP shortcut to our site @@&lt;%= host_name %&gt;@@ (bob.dc3.com is the host name in the figure, rdenny is the username). Note the location of rdenny's image, plan, and logs folders. You will see only your folders under Images, Plans, and Logs. Other users' folders are invisible to you. Similar views are available under earlier Windows versions including Windows XP, and of course Mac OS X.\n\n&lt;html&gt;\n&lt;a href=&quot;javascript:;&quot; onClick=&quot;DC3.LightBox.showContent('&lt;img src=\s'/im/ftp3.png\s' width=\s'822\s' height=\s'745\s'&gt;');&quot;&gt;&lt;img src=&quot;/im/ftp3-sm.png&quot; hspace=&quot;8&quot; align=&quot;left&quot;&gt;&lt;/a&gt;\n&lt;/html&gt;Here's a thumbnail showing the whole view on Windows 7. @@Click it for a larger view:@@\n\nEverything is there, including multi-select and drag-drop. You may not know your OS is capable of accessing files via FTP in this seamless way, so we've provided brief instructions on setting up FTP file access on your desktop:\n\n[[Easy FTP on Windows 7|FTP on Windows 7]]\n[[Easy FTP on Windows XP|FTP on Windows XP]]\n[[Easy FTP on Mac OS X|FTP on Mac OS X]]\n\nIf you don't like using Windows or Mac browsing, try an FTP client such as [[FileZilla|http://filezilla-project.org/]] or [[BulletProof FTP|http://www.bpftp.com/]]. There are many more out there for Windows and the Mac!\n&lt;html&gt;&lt;br clear=&quot;all /&gt;&lt;/html&gt;\n!Restrictions\nWhen we assign you an account for the observatory, we can optionally give you permissions to upload. We reserve the right to turn this permission on and off for security reasons.\n&lt;% if(User.CanUpload) { %&gt;\nYou have been given upload permissions. Besides uploading through the web interface, you can upload through the FTP server. In addition, you can create subfolders, rename files, move files around, and delete files. Of course you can download files from here such as the images you acquired during a run. We may, however, ask you to limit your use of our disk space.\n&lt;% } else {%&gt;\nYou currently do not have upload permissions. You are restricted from making any changes through the FTP server except deleting files from your images, logs, and plans folders. Of course you can download files, useful for getting the images you take in a long automated run. We ask that you delete old images to minimize the disk space you are using here.\n&lt;% } %&gt;\n</div>
<div tiddler="Using This Web Site" modifier="Bob Denny" modified="201408221741" created="200609292238" tags="Help UserContent">When you first opened this Share Your Sky! web site for @@&lt;%= Prefs.SiteName %&gt;@@, you probably figured out the basics right away. That's the whole idea! But there are some bits of info that can help you make the most out of it.\n*Everything is contained within this one web page, in the form of //micro-content// items that appear and disappear at your command. The nav toolbar that appears along the upper right edge of the //active// item is one way to control what shows.\n*The expandable menus on the left have links that open items. These menus are task-oriented.\n*Some of the micro-content items have a ''Help'' button in them. Clicking it will reveal help relating to that item. Clicking help again hides the help.\n*@@Explore!@@ Start by playing with the toolbar in the upper right of the micro-content items. It's fun, and you'll learn how to make the most of our remote observing system.</div>
<div tiddler="Using jQuery" modifier="Bob Denny" modified="201011162025" created="201011161955" tags="Authoring deleteUser">This framework includes the [[jQuery|http://jquery.com/]] library which you can use in your ~JavaScript. From their web site:\n&lt;&lt;&lt;\n//jQuery is a fast and concise ~JavaScript library that simplifies HTML document traversing, event handling, animating, and Ajax interactions for rapid web development. jQuery is designed to change the way that you write ~JavaScript.//\n&lt;&lt;&lt;\nIn addition, there is a vast array of [[jQuery plugins|http://plugins.jquery.com/]] with which you can add visual elements to the ACP web interface. An example of this is the [[jQuery Sparkline plugin|http://omnipotent.net/jquery.sparkline/]] which we use for the guider tracking error graph on the [[System Status]] display. Please note that these are not the same as the plugins that are used within this framework such as the InlineJavascriptPlugin. Thanks to DC-3 Dreams customer and world-class software developer [[Russell Archer|http://www.rarcher.net]] for the idea of including jQuery and for the guider tracking error feature.</div>
<div tiddler="UtilHelpSlider" modifier="Bob Denny" modified="200612051904" created="200612051900" tags="Help UserContent hideUser">\nThese are utility tasks that you can perform given your account privileges. They are implemented using special scripts that run in the control system. For information, as usual, see the run log in System Status.</div>
<div tiddler="Utility Tasks" modifier="Bob Denny" modified="201207091620" created="200612040310" tags="Control UserContent">&lt;&lt;slider &quot;&quot; &quot;UtilHelpSlider&quot; &quot;General Information&quot;&gt;&gt; [[System Status]]\n!!Observatory Adjustments\n* &lt;html&gt;&lt;a id=&quot;utilCenterScope&quot; \n href=&quot;javascript:;&quot; \n op=&quot;CenterScope.vbs&quot;&gt;Determine your scope's true coordinates and center it&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;CenterScopeInfoSlider&quot; Info&gt;&gt;\n* &lt;html&gt;&lt;a id=&quot;utilLostScope&quot; \n href=&quot;javascript:;&quot; \n op=&quot;FindLostScope.js&quot;&gt;Recover a lost scope using all-sky plate solving&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;LostScopeInfoSlider&quot; Info&gt;&gt;\n* &lt;html&gt;&lt;a id=&quot;utilAutoFocus&quot; \n href=&quot;javascript:;&quot; \n op=&quot;AutoFocus.vbs&quot;&gt;Focus the optical system using FocusMax&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;AutoFocusInfoSlider&quot; Info&gt;&gt;\n* &lt;html&gt;&lt;a id=&quot;utilCalibrate&quot; \n href=&quot;javascript:;&quot; \n op=&quot;CalibrateGuider.vbs&quot;&gt;Calibrate the autoguider&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;CalibrateInfoSlider&quot; Info&gt;&gt;\n* &lt;html&gt;&lt;a id=&quot;utilTrainCorrector&quot; \n href=&quot;javascript:;&quot; \n op=&quot;Train Corrector.vbs&quot;&gt;Train the pointing corrector with all-sky mapping points&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;TrainCorrectorInfoSlider&quot; Info&gt;&gt;\n!!Observatory Measurements\n* &lt;html&gt;&lt;a id=&quot;utilFindFocalLength&quot; \n href=&quot;javascript:;&quot; \n op=&quot;FindFocalLength.vbs&quot;&gt;Find the true focal length of your imager&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;FindFocalLengthsInfoSlider&quot; Info&gt;&gt;\n* &lt;html&gt;&lt;a id=&quot;utilFindLimitingMag&quot; \n href=&quot;javascript:;&quot; \n op=&quot;FindLimitingMagnitude.vbs&quot;&gt;Find your limiting magnitude and corresponding exposure duration&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;FindLimitingMagInfoSlider&quot; Info&gt;&gt;\n* &lt;html&gt;&lt;a id=&quot;utilFocusOffsets&quot; \n href=&quot;javascript:;&quot; \n op=&quot;FocusOffsets.vbs&quot;&gt;Determine and configure your filter focus offsets for ACP&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;FocusOffsetsInfoSlider&quot; Info&gt;&gt;\n!!System Tests\n* &lt;html&gt;&lt;a id=&quot;utilTestConsole&quot; \n href=&quot;javascript:;&quot; \n op=&quot;ask.vbs&quot;&gt;Test the script console's remote dialogs and alerts&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;TestConsInfoSlider&quot; Info&gt;&gt;\n* &lt;html&gt;&lt;a id=&quot;utilFindBrightStar&quot; \n href=&quot;javascript:;&quot; \n op=&quot;FindBrightStar.vbs&quot;&gt;Test bright star finder used for calibration and auto-focus&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;FindBrightStarInfoSlider&quot; Info&gt;&gt;&lt;% if(Voice.Active) { %&gt;\n* &lt;html&gt;&lt;a id=&quot;utilVoicePage&quot; \n href=&quot;javascript:;&quot; \n op=&quot;VoicePage.vbs&quot;&gt;Play a spoken voice message at the observatory&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;VoicePageInfoSlider&quot; Info&gt;&gt;&lt;% } %&gt;\n* &lt;html&gt;&lt;a id=&quot;utilSimpleLoop&quot; \n href=&quot;javascript:;&quot; \n op=&quot;Simple Loop.vbs&quot;&gt;Test the script console's logging and interrupts with a simple looping script&lt;/a&gt;\n&lt;/html&gt; &lt;&lt;slider &quot;&quot; &quot;SimpleLoopInfoSlider&quot; Info&gt;&gt;&lt;script&gt;\n function _utilOnComplete(text, params) {\n displayMessage(text);\n }\n function _util(e) {\n if(!e) e = window.event;\n var op = resolveTarget(e).getAttribute(&quot;op&quot;);\n var qs = op ? &quot;?&quot; + op : &quot;&quot;;\n DC3.Ajax.sendRequest(&quot;GET&quot;, &quot;/ac/arunscript.asp&quot; + qs, &quot;&quot;, _utilOnComplete, null);\n }\n var elem;\n // Must wire up onclick() at run time\n document.getElementById(&quot;utilCenterScope&quot;).onclick=_util;\n document.getElementById(&quot;utilLostScope&quot;).onclick=_util;\n document.getElementById(&quot;utilAutoFocus&quot;).onclick=_util;\n document.getElementById(&quot;utilCalibrate&quot;).onclick=_util;\n document.getElementById(&quot;utilTrainCorrector&quot;).onclick=_util;\n document.getElementById(&quot;utilFindFocalLength&quot;).onclick=_util;\n document.getElementById(&quot;utilFindLimitingMag&quot;).onclick=_util;\n document.getElementById(&quot;utilFocusOffsets&quot;).onclick=_util;\n document.getElementById(&quot;utilTestConsole&quot;).onclick=_util;\n document.getElementById(&quot;utilFindBrightStar&quot;).onclick=_util;\n elem = document.getElementById(&quot;utilVoicePage&quot;);\n if(elem) elem.onclick=_util;\n document.getElementById(&quot;utilSimpleLoop&quot;).onclick=_util;\n&lt;/script&gt;</div>
<div tiddler="ValidateFormPlugin" modifier="Bob Denny" modified="201501272324" created="201108291610" tags="macro plugin systemConfig">/***\n|''Name:''|ValidateFormPlugin|\n|''Description:''|Client-Side Form Validation|\n|''Date:''|Jan 27, 2015|\n|''Source:''|http://solo.dc3.com/tw/index.html#ValidateFormPlugin|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.2.0|\n|''~CoreVersion:''|2.1.3|\n|''Require:''|[[JQuery 1.6.2|http://jquery.com/]] and the [[jQuery bValidator plugin|http://code.google.com/p/bvalidator/]] v0.55 or later, with Bob Denny enhancements and corrections|\n!!Description\nThis macro activates a form for validation using the Bob Denny enhanced [[jQuery bValidator plugin|http://code.google.com/p/bvalidator/]], a [[JQuery|http://jquery.com/]] plugin that handles form validation. The validation is performed on the 'blur' event of each validated form field. Five styles of popup error message balloons are supported.\n!!Form Search Scope\nThe macro searches for its form within the scope of the macro handler's 'place' parameter. Normally, this is the tiddler viewer area. However, it is possible to include forms within a wikitext object such as a table cell. In this case, only forms within that table cell will be found by the macro (which also needs to be in that same table cell). This has some implications:\n# The form invocation must be within the same scope as the form it is controlling.\n# If only one form appears within a scope it need not be named, and the first parameter (the form name, see below) may be &quot;&quot;.\n!!Usage\nCreate one or more forms in the tiddler, using {{{&lt;html&gt;}}} tags to enclose the form as usual. The form does not need to have {{{action}}} or {{{method}}} attributes, {{{&lt;form&gt;}}} is enough. For more info see the PostFormPlugin. If you have more than one form in the scope, you must give each one a name, for example, {{{&lt;form name='form1'&gt;}}}. Add form elements (text fields, checkboxes, etc.). each with a name and a value, per HTML. At the end of the tiddler containing the form(s), invoke the ~ValidateForm macro. Remember the invocation must be in the same scope as the form! The macro has several parameters. If you need to include a parameter as a placeholder, use &quot;&quot;:\n\nBecome familiar with the [[bValidator documentation|http://karmela.fsb.hr/~bmauser/bvalidator/documentation.html]], particularly the [[validator actions|http://karmela.fsb.hr/~bmauser/bvalidator/documentation.html#actions]]. Note that the validation attribute name is not {{{data-bvalidator=}}}, but instead {{{validate=}}} (for clarity and conciseness). Also, if you specify a custom validation error message, use {{{val-errmsg=}}} instead of {{{data-bvalidator-msg=}}}. Each form field that is to be validated must have, at a minimum, a {{{validate=}}} attribute that specifies the validation actions.\n!!!Custom Validators for Date/Time and Sexagesimal\nIn addition to the validation actions described in the [[bValidator documentation|http://karmela.fsb.hr/~bmauser/bvalidator/documentation.html#actions]], the ~ValidateFormPlugin adds two additional validators:\n|!Action|!Parameters|!Description|\n|''sexanum''|min, max|Checks if the field contains a decimal //or//sexagesimal number that is greater than or equal to ''min'' and less than or equal to ''max''. Sexagesimal numbers may use any combination of non-numerics as DMS/HMS separators. Two and three part sexagesimal forms are supported.|\n|''jsdatetime''| |Checks if the field contains a date/time string which is in the formats acceptable to JavaScript (English language).|\n!!!Macro Parameters\n|!Param|!Description|\n|''1''|The name of the form, or &quot;&quot;. If &quot;&quot; is given, the first form in the scope is validated even though there may be multiple forms in the scope. Hote that it looks for the name=&quot;&quot; attribute, not id=&quot;&quot;. This is for consistency with PostFormPlugin|\n|''2''|(optional) a popup tip style name. Must be &quot;gray&quot;, &quot;gray2&quot;, &quot;postit&quot;, &quot;orange&quot;, or &quot;red&quot;. If omitted or not any of those values (case matters), the default gray style will be used.|\n!!Example\nHere's a simple form which will require a sexagesimal or decimal number from -90 to 90. The submit button posts to a mythical PHP page (will fail) if the form validates.\n{{{\n&lt;html&gt;&lt;form&gt;\nTest: &lt;input type=&quot;text&quot; name=&quot;sexa&quot; width=&quot;40&quot; validate=&quot;required,sexanum[-90:90]&quot; value=&quot;&quot;&gt;&lt;/input&gt;\n&lt;/form&gt;&lt;/html&gt;&lt;&lt;PostForm &quot;&quot; &quot;formtest.php&quot;&gt;&gt;&lt;&lt;ValidateForm&gt;&gt;\n}}}\n&lt;html&gt;&lt;form&gt;\nTest: &lt;input type=&quot;text&quot; name=&quot;sexa&quot; width=&quot;40&quot; validate=&quot;required,sexanum[-90:90]&quot; value=&quot;&quot;&gt;&lt;/input&gt;\n&lt;/form&gt;&lt;/html&gt;&lt;&lt;PostForm &quot;&quot; &quot;formtest.php&quot;&gt;&gt;&lt;&lt;ValidateForm&gt;&gt;\n!!Revision History\n&lt;&lt;&lt;\n''2011.08.29 [1.0.0]'' Initial creation.\n''2011.08.30 [1.0.0]'' Style parameter and slow balloon fade-in\n''2011.09.11 [1.0.0]'' Add idatetime custom validator, remove note about local jQuery.bValidator.js modifications.\n''2012.10.21 [1.1.0]'' Allow 2-part sexagesimal numbers \n''2015.01.27 [1.2.0]'' Allow comma decimal separator\n&lt;&lt;&lt;\n!!Code\n***/\n//{{{\nversion.extensions.ValidateFormPlugin = {\n major: 1, minor: 2, revision: 0,\n date: new Date(2015, 01, 27), \n type: 'macro',\n source: &quot;http://solo.dc3.com/tw/index.html#ValidateFormPlugin&quot;\n};\n\nconfig.macros.ValidateForm = {\n    \n    _theValidator: null,\n\n    getValidator: function() {\n        return _theValidator;\n    },\n\n    handler: function(place, macroName, params, wikifier, paramString, tiddler)\n    {\n        //\n        // Find the form. Either name given in param[0] or if &quot;&quot; then\n        // first form in the tiddler.\n        //\n        var forms = place.getElementsByTagName(&quot;form&quot;);\n        if(forms.length === 0) {\n            displayMessage(&quot;ValidateForm: No form in tiddler!&quot;);\n            return;\n        }\n        var form = null;\n        if(forms.length == 1 || params[0] === &quot;&quot;) { // Only 1 or unspecified\n            form = forms[0];                        // First form in the tiddler\n        } else {\n            for(var i = 0; i &lt; forms.length; i++) {\n                if(forms[i].name == params[0]) {\n                    form = forms[i];                // Named form\n                    break;\n                }\n            }\n            if(form === null) {                     // Not found by name\n                displayMessage(&quot;ValidateForm: No form \s&quot;&quot; + param[0] + &quot;\s&quot;in tiddler!&quot;);\n                return;\n            }\n        }\n        var style = params[1];\n        if(!style) style=&quot;gray&quot;;\n        if(![&quot;gray&quot;,&quot;gray2&quot;,&quot;postit&quot;,&quot;orange&quot;,&quot;red&quot;].contains(style)) style=&quot;gray&quot;;\n        var opts;\n        switch(style)\n        {\n            case &quot;gray&quot;:\n                opts = {  };\n                break;\n            case &quot;gray2&quot;:\n                opts = {\n                    classNamePrefix:   'bvalidator_gray2_',\n                    position:          {x:'right', y:'center'},\n                    offset:            {x:15, y:0},\n                    template:          '&lt;div class=&quot;{errMsgClass}&quot;&gt;&lt;div class=&quot;bvalidator_gray2_arrow&quot;&gt;&lt;/div&gt;&lt;div class=&quot;bvalidator_gray2_cont1&quot;&gt;{message}&lt;/div&gt;&lt;/div&gt;'     \n                };\n                break;\n            case &quot;postit&quot;:\n                opts = {\n                    classNamePrefix:   'bvalidator_postit_',\n                    offset:            {x:-29, y:-10},\n                    template:          '&lt;div class=&quot;{errMsgClass}&quot;&gt;{message}&lt;div class=&quot;bvalidator_postit_pointer&quot;&gt;&lt;div class=&quot;bvalidator_postit_inner_pointer&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'\n                };\n                break;\n            case &quot;orange&quot;:\n                opts = {\n                    classNamePrefix: 'bvalidator_orange_'\n                };\n                break;\n             case &quot;red&quot;:\n                opts = {\n                    classNamePrefix: 'bvalidator_red_'\n                };\n                break;               \n        }\n        opts.showErrMsgSpeed = 'slow';\n        opts.validateOn = 'blur';\n        opts.validateActionsAttr = 'validate';\n        opts.errorMessageAttr = 'val-errmsg';\n        //\n        // Hook up validator. Using name to be consistent with PostFormPlugin.\n        // Renaming the attributes to nicer/descriptive names\n        //\n        _theValidator= $(form).bValidator(opts);\n        form.bValidator = _theValidator;             // So PostForm et al. can call us\n        //\n        // Install the custom validator sexanum for sexagesimal and range check.\n        //\n        _theValidator.getActions().sexanum = this.sexanum;\n        _theValidator.getOptions().errorMessages.en.sexanum = &quot;Please enter a decimal or sexagesimal number between {0} and {1}&quot;;\n        //\n        // Install the custom Javascript date/time validator\n        //\n        _theValidator.getActions().idatetime = this.idatetime;\n        _theValidator.getOptions().errorMessages.en.idatetime = &quot;Please enter a UTC date/time, yyyy/mm/dd hh:mm[:ss]&quot;;\n    },\n\n    //\n    // Custom validator for date/time yyyy/mm/dd hh:mm[:ss]\n    //\n    idatetime: function(v)\n    {\n        var fstr = v.value;\n        if(fstr.search(/\sd\sd\sd\sd\s/\sd+\s/\sd+ +\sd+:\sd\sd/) !== 0) return false;\n        var d = null;\n        try {\n            var d = Date.parse(fstr);\n        } catch(ex) {\n            return false;\n        }\n        if(isNaN(d))\n            return false;\n        return true;\n    },\n    \n    //\n    // Custom validator for sexagesimal fields\n    //\n    sexanum: function(v, min, max)\n    {\n        var fstr = v.value;\n        if(fstr.search(/^[-+]?[0-9]*\s.?[0-9]+/) == -1) {                    // Must begin with number\n            return false;\n        }\n        var mats = fstr.match(/[-+]?[0-9]*[\s.\s,]?[0-9]+/g);                     // Must contain at least one number\n        if(mats === null) {\n            return false;\n        }\n        var val = 0.0;                                                      // Convert per sexagesimal\n        for(var i = mats.length - 1; i &gt;= 0; i--) {\n            var vpart = parseFloat(mats[i]);\n            if(i &gt; 0 &amp;&amp; (vpart &gt;= 60.0 || vpart &lt; 0.0))                     // Prevent bogus minutes/seconds\n                return false;\n            val = (val / 60.0) + Math.abs(vpart);\n        }\n        if(mats[0].substr(0, 1) == &quot;-&quot;) val = -val;                         // If neg, fix up sign\n        if(val &gt; max) return false;\n        if(val &lt; min) return false;\n        return true\n    }\n};\n//}}}\n</div>
<div tiddler="ViewTemplate" modifier="Bob Denny" modified="200611211426" created="200609221934" tags="systemContent">&lt;div class='toolbar'&gt;\n&lt;span style=&quot;padding-right:2em;&quot; macro=&quot;tagger label:tags tooltip:'Manage tags'&quot;&gt;&lt;/span&gt;\n&lt;span macro='toolbar collapseTiddler -closeTiddler closeOthers +editTiddler references jump'&gt;&lt;/span&gt;\n&lt;span macro='toggleSideBar side-bar'&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class='title' macro='view title'&gt;&lt;/div&gt;\n&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date [[DD MMM YYYY]]'&gt;&lt;/span&gt; (created &lt;span macro='view created date [[DD MMM YYYY]]'&gt;&lt;/span&gt;)&lt;/div&gt;\n&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;\n&lt;div class='tagClear'&gt;&lt;/div&gt;</div>
<div tiddler="VoicePageInfoSlider" modifier="Bob Denny" modified="200612050344" created="200612050338" tags="Help UserContent hideUser">Asks you to enter some text, then speaks the text out loud in the observatory. Maybe the operator will hear it. If the observatory computer doesn't have sound (what modern computer doesn't???) then this won't do anything.</div>
<div tiddler="Weather Forecast" modifier="Brewington" modified="201505042317" created="200610100044" tags="Control Custom UserContent">&lt;&lt;miniBrowser hideControls '/files/WeatherForecast.html'&gt;&gt;</div>
<div tiddler="Welcome" modifier="Bob Denny" modified="201408221744" created="200609151818" tags="Help UserContent">&lt;&lt;slider &quot;&quot; &quot;Getting Started&quot; &quot;Getting Started&quot; &quot;Helpful information for new users&quot;&gt;&gt; &lt;&lt;themeSelect style 'Select a Theme' 'Select a color theme for display'&gt;&gt;\n\nWelcome to &lt;%= Prefs.SiteName %&gt;. If you haven't been here before, click the &lt;&lt;slider &quot;&quot; &quot;Getting Started&quot; &quot;Getting Started&quot; &quot;Helpful information for new users&quot;&gt;&gt; button to expose some useful information, or &lt;&lt;themeSelect style 'Select a Theme' 'Select a color theme for display'&gt;&gt; you like. Happy observing!\n\n&lt;% if(User.Username == &quot;localweb&quot;) { %&gt;&lt;script&gt;DC3.LightBox.showAlert('info', 'Your plan, image, and log files are on disk in My Documents, ACP Observing');&lt;/script&gt;&lt;% } %&gt;</div>
<div tiddler="XPMenuPlugin" modifier="Bob Denny" modified="200803170439" created="200610311236" tags="macro plugin systemConfig">/***\n|''Name:''|XPMenuPlugin|\n|''Description:''|Support for Eric Simmons' DHTML XP Menu|\n|''Date:''|March 16, 2008|\n|''Source:''|http://solo.dc3.com/tw/index.html#XPMenuPlugin|\n|''Author:''|Bob Denny ~DC-3 Dreams, SP|\n|''License:''|[[Creative Commons Attribution-ShareAlike 2.5 License|http://creativecommons.org/licenses/by-sa/2.5/]]|\n|''Version:''|1.0.3|\n|''~CoreVersion:''|2.0.11, 2.1.0/1/2|\n|''Browser:''|Firefox 1.5/2.0; Internet Explorer 6.0/7.0; Safari|\nTo be written\n!Usage\nCall this macro at the end of the MainMenu that contains the HTML for making the menu.\n!Notes\nThe original Eric Simmons code was modified to run within the TiddlyWiki environment. Many changes were incorporated arising from needing to restrict the scope of the code as well as the element searching to be within the tiddler containing the macro call. This results in a much safer implementation. Changes are //not//marked. To see them, diff with the original Eric Simmons code. There were also almost 100 lint warnings due to undeclared variables and lenient comparisons.\n\nThe mainMenu images for all themes (assuming you have overrides for them in the theme CSS) are loaded by IE6 multiple times. I have seen IE6 queue up 4 or 5 requests for //each image//. This is really disgusting. For some background, I found [[this article|http://www.bazon.net/mishoo/articles.epl?art_id=958]], written by one of the legions of IE haters out there. Yes, most of thee responses are 304 not modified, but it's still ghastly.\n\nFortunately, I found a fix in [[this article|http://www.mister-pixel.com/]] which describes this little bit of JS:\n{{{\ntry {\n  document.execCommand(&quot;BackgroundImageCache&quot;, false, true);\n} catch(err) {}\n}}}\nObvious, right? Those arrogant @#$%^ at Microsoft. Well, anyway, put it into the MarkupPreHead and your cares will vanish.\n!!Revision History\n&lt;&lt;&lt;\n''2006.10.30 [1.0.0]'' Initial creation, from Eric Simmons. See (preserved) original comments in code.\n''2006.10.31 [1.0.1]'' Fixed cookie bug on Firefox (Closed appending). Rename stylesheet to acpsddm.css.\n''2007.12.04 [1.0.2]'' Fixed another cookie bug on FireFox: menu defaulting when no cookie. Cleaned up this logic.\n''2008.03.16 [1.0.3]'' Fixed yet another cookie bug, shows Error in macro on IE when cookie has too few state elements\n&lt;&lt;&lt;\n!Original Code Comments\n//{{{\n\nAuthor: Eric Simmons\nContact: info AT jswitch DOT com\nWebsite: http://www.jswitch.com\nScript featured and available at Dynamic Drive: http://www.dynamicdrive.com\nVersion: 2.1 05/2006	   \nBrowser Target: Mozilla 6+/FireFox Netscape 6+, IE 5.0+\nType: XP Style Menus ver 2.1\n\nDISCLAIMER:\nTHIS SOFTWARE IS PROVIDED &quot;AS IS&quot; AND WITHOUT\nANY EXPRESS OR IMPLIED WARRANTIES, JSWITCH.COM\nIS NOT RESPONSIBLE FOR ANY ADVERSE AFFECTS TO\nYOUR COMPUTER OR SYSTEMS RUNNING THIS SCRIPT.\n\nLICENSE:\nYOU ARE GRANTED THE RIGHT TO USE THE SCRIPT\nPERSONALLY OR COMMERCIALLY. THE AUTHOR, WEBSITE LINKS \nAND LICENSE INFORMATION IN THE HEADER OF THIS SCRIPT\nMUST NOT BE MODIFIED OR REMOVED. IF PORTIONS OF THE \nCODE ARE TRANSFERED TO ANOTHER SCRIT THE AUTHORS NAME\nAND CONTACT INFORMATION MUST BE STATED IN THE NEW SCRIPT\nBY THE PORTIONS CODE THAT HAVE BEEN TRANSFERED.\n\nv2.2\n-fixed cookie bug\n\nv2.1\n-Mouse events states for title bar\n-object index bug fixes\n-redesigned to look like XP :)\n\nv 2.0\n-W3C HTML 4.01 Transitional compliant\n-Support for initially open menu\n-New fading capability\n-Cookie menu persistence\n-Redesigned code\n\nNotes:\n\nIf you want a menu to be open initially set the style display to\n&quot;inline&quot; in the subMenu class div like this...\n&lt;div class=&quot;subMenu&quot; style=&quot;display:inline;&quot;&gt;\n\nThe fading effect can be disabled by setting the \nthis.doFading var to false. I have only tested this feature on \nie 6, Netscape 1.7, firefox 1 &amp; 1.5\n\nIf the user has cookies enabled the script will bake a cookie ;) on\nthe browser to track the state of the menus. This is good news for those\nof you who don't use frames, you can now have persistent menu states\n\nMake sure you put the java script include tag after all the menus otherwise\nit will not be able find and initialize them. If you have questions, or comments\nabout the XpStyle Menu v2 send me an email.\n\nAnd lastly a plug for myself, If you need some professional help with technical\nweb development please drop me an email, I do contracts for a competitive price. :)\n\nv 1.0\nXP style sliding Menu Bar\n\n//}}}\n!!Code\n***/\n//{{{\nversion.extensions.XPMenuPlugin = {\n major: 1, minor: 0, revision: 3,\n date: new Date(2008, 16, 3), \n type: 'plugin',\n source: &quot;http://solo.dc3.com/tw/index.html#XPMenuPlugin&quot;\n};\n\n// Initialize style sheet from tiddler\nrefreshStyles(&quot;XPMenuStyleSheet&quot;);\n\nconfig.macros.XPMenu = {\n    \n	menuObjArray:	new Array(),\n	numMenuItem:	0,\n	slideDelay: 	5,\n	divHeight:		21,\n	moveSlidePix:	7,\n	isLocked:		null,\n	doFading:		true,\n\n	handler: function(place, macroName, params, wikifier, paramString, tiddler)\n	{\n\n		this.menuObjArray[0] = new Array();\n		this.menuObjArray[1] = new Array();\n		this.menuObjArray[2] = new Array();\n		this.menuObjArray[3] = new Array();\n		this.menuObjArray[4] = new Array();\n		this.menuObjArray[5] = new Array();\n		this.menuObjArray[6] = new Array();\n		this.menuObjArray[7] = new Array();\n    \n		var divs = place.getElementsByTagName(&quot;DIV&quot;);\n		var mnuCookie = this._getUserCookie(&quot;xpMenuCookv2&quot;);\n		var menuStateAry = null;\n		if(mnuCookie !== &quot;&quot;)\n			menuStateAry = mnuCookie.split(&quot;,&quot;);\n    \n		var aryNum = 0;\n		for(var dn=0; dn &lt; divs.length;dn++)\n		{\n			if(String(divs.item(dn).className).substring(0,7) == &quot;topItem&quot;)\n			{   \n				var mainMenuDiv = divs.item(dn).parentNode;\n				var menuContainerDiv= mainMenuDiv.getElementsByTagName(&quot;DIV&quot;).item(1);\n				var itemContainerDiv= menuContainerDiv.getElementsByTagName(&quot;DIV&quot;).item(0);\n			    \n				if(!this.doFading)\n				{\n				    \n					if (menuContainerDiv.filters) {\n						menuContainerDiv.filters.alpha.opacity = 100;\n					} else {\n						menuContainerDiv.opacity = 1;\n					}\n				}\n				\n				// [rbd 2.2b] Use cookie to set open/closed state. If no cookie, defaults are \n				// in style sheet via div style= (see note above). [rbd 1.0.3] Check to see\n				// if cookie has a state for this menu. If the list is too short (array doesn't\n				// have enough elements) again default to the stylesheet. Opening or closing\n				// the elements not covered by the cookie will lengthen it to save the state.\n				if(menuStateAry !== null &amp;&amp; aryNum &lt; menuStateAry.length)\n				{\n					var itemHeight = parseInt(menuStateAry[aryNum]);\n					itemContainerDiv.style.height = itemHeight + &quot;px&quot;;\n					if(itemHeight === 0) {\n						itemContainerDiv.style.display = 'none';\n					} else {\n						itemContainerDiv.style.display = 'inline';\n					}\n				}\n    \n				this._init(divs.item(dn));\n				aryNum++;\n			}\n		}   \n	},\n\n	_init: function(objDiv)\n	{\n		if (this.isLocked)\n			return;\n    \n		var mainMenuDiv, subMenuDiv, menuContainerDiv, itemContainerDiv, styleRules;\n	    \n		for(var r=0;r &lt; document.styleSheets.length; r++)\n		{   \n			if(document.styleSheets[r].cssRules &amp;&amp; document.styleSheets[r].cssRules[0].selectorText == &quot;.navbar&quot;) {	// For IE/FireFox\n				styleRules = document.styleSheets[r].cssRules;\n				break;\n			}\n			if(document.styleSheets[r].rules &amp;&amp; document.styleSheets[r].rules[0].selectorText == &quot;.navbar&quot;) {		// For ???\n				styleRules = document.styleSheets[r].rules;\n				break;\n			}\n		}\n		    \n		this.numMenuItem = 0;\n		mainMenuDiv = objDiv.parentNode;\n		subMenuDiv =  mainMenuDiv.getElementsByTagName(&quot;DIV&quot;).item(0);\n    \n		menuContainerDiv= mainMenuDiv.getElementsByTagName(&quot;DIV&quot;).item(1);\n		itemContainerDiv= menuContainerDiv.getElementsByTagName(&quot;DIV&quot;).item(0);\n	    \n		var aLen = this.menuObjArray[0].length;\n		for (var i=0 ;i &lt; aLen ; i++)\n		{\n			if (this.menuObjArray[0][i] == menuContainerDiv)\n			{\n				break;\n			}\n		}\n	    \n		if (i == aLen)\n		{\n			this.menuObjArray[0][i] = menuContainerDiv;\n			this.menuObjArray[1][i] = itemContainerDiv;\n			this.menuObjArray[5][i] = null;							//[sentinel] See SetSlider()\n			this.menuObjArray[7][i] = subMenuDiv;\n			this.menuObjArray[7][i].onmouseover = this.ChangeStyle;\n			this.menuObjArray[7][i].onmouseout = this.ChangeStyle;\n			subMenuDiv.onclick = this.SetSlide;\n		    \n			var lastmenuNum = -1;\n			for (var b=0;b&lt;itemContainerDiv.childNodes.length;b++)\n			{\n				if (itemContainerDiv.childNodes.item(b).tagName == &quot;DIV&quot;)\n				{ \n					this.numMenuItem ++;\n					itemContainerDiv.childNodes.item(b).onmouseover = this.ChangeStyle;\n					itemContainerDiv.childNodes.item(b).onmouseout = this.ChangeStyle;\n					lastmenuNum = b;\n				}\n			}  \n		    \n			for(r=0;r &lt; styleRules.length; r++)\n			{\n				var tmpStr1 = String(styleRules[r].selectorText);\n				var tmpStr2 = String(&quot;.&quot; + itemContainerDiv.childNodes.item(lastmenuNum).className);\n				if(tmpStr1 == tmpStr2)\n				{\n					if(NaN != parseInt(styleRules[r].style.height))\n					{\n						this.divHeight = parseInt(styleRules[r].style.height) + 2;\n						break;\n					}\n				    \n				}\n			}\n				    \n			this.menuObjArray[2][i] = this.numMenuItem;\n			this.menuObjArray[3][i] = mainMenuDiv;\n    \n			if (itemContainerDiv.style.display == &quot;inline&quot;)\n			{\n				this.menuObjArray[4][i] = this.numMenuItem * this.divHeight;\n				this.menuObjArray[0][i].style.height = this.numMenuItem * this.divHeight + &quot;px&quot;;\n				this.menuObjArray[6][i] = true;\n			    \n				if(this.doFading)\n				{\n					if (this.menuObjArray[0][i].filters)\n						this.menuObjArray[0][i].filters.alpha.opacity = 100;\n					else\n						this.menuObjArray[0][i].style.opacity = 1;\n				}\n			    \n			} else {\n				// [rbd] - On FireFox this can already be Closed - ??? Well, this fixes it!\n				var cname = this.menuObjArray[7][i].className;\n				if(cname.indexOf(&quot;Close&quot;) != cname.length - 5/*&quot;Close&quot;.length*/)\n					this.menuObjArray[7][i].className = cname + &quot;Close&quot;;\n				this.menuObjArray[4][i] = 0;\n				this.menuObjArray[0][i].style.height = 0 + &quot;px&quot;;\n				this.menuObjArray[6][i] = false;\n				if(this.doFading)\n				{\n					if (this.menuObjArray[0][i].filters)\n						this.menuObjArray[0][i].filters.alpha.opacity = 0;\n					else\n						this.menuObjArray[0][i].style.opacity = 0.0;\n				}\n			}\n		}//end if\n    \n		mainMenuDiv = null;\n		subMenuDiv =  null;\n		menuContainerDiv= null;\n		itemContainerDiv= null;\n	},\n\n    \n	_updateUserCookie: function(aryIndex)\n	{\n		var date = new Date();\n		date.setTime(date.getTime() + (1000 * 60 * 60 * 24 * 30)); \n		document.cookie = &quot;xpMenuCookv2&quot; + &quot;=&quot; + escape(this.menuObjArray[4].toString()) + &quot;; expires=&quot; + date.toGMTString();  \n	},\n\n\n	_getUserCookie: function(crumbName)\n	{\n		var colCookie = document.cookie.split(&quot;; &quot;);\n	    \n		for (var a=0; a &lt; colCookie.length; a++)\n		{\n			var colCrumb = colCookie[a].split(&quot;=&quot;); 				   \n			if(colCrumb[0] == crumbName)\n				return unescape(colCrumb[1]);\n		}\n		return &quot;&quot;;\n	},\n\n\n	SetSlide: function()\n	{   \n		var me = config.macros.XPMenu;										// Event proc, 'this' is out of scope (typ.)\n		if (me.isLocked)\n			return;\n		else\n			me.isLocked = this.parentNode;		  \n		for (var i=0 ;i &lt; me.menuObjArray[0].length; i++)\n		{\n			if (me.menuObjArray[3][i] == this.parentNode)\n			{\n				if (me.menuObjArray[5][i] === null)							// Requires initialization to null!\n					me.menuObjArray[5][i] = setInterval(&quot;config.macros.XPMenu.RunSlide(&quot; + i + &quot;)&quot;, me.slideDelay);\n				break;\n			}\n		}\n	},\n\n    \n	RunSlide: function(objIndex)  \n	{\n		var me = config.macros.XPMenu;\n		if (me.menuObjArray[6][objIndex])\n		{\n			if(me.doFading)\n			{\n				if(me.menuObjArray[0][objIndex].filters)\n					me.menuObjArray[0][objIndex].filters.alpha.opacity -= 100/ ( ( (me.menuObjArray[2][objIndex] * me.divHeight) / me.moveSlidePix) +1);\n				else\n					me.menuObjArray[0][objIndex].style.opacity -= 0.9/(((me.menuObjArray[2][objIndex] * me.divHeight) / me.moveSlidePix)+1);\n			}\n			me.menuObjArray[1][objIndex].style.display = 'none';\n			me.menuObjArray[4][objIndex] -=  me.moveSlidePix;\n			if (me.menuObjArray[4][objIndex] &gt; 0)\n				me.menuObjArray[0][objIndex].style.height = me.menuObjArray[4][objIndex] + &quot;px&quot;;\n			else\n			{\n				if(me.doFading)\n				{\n					if(me.menuObjArray[0][objIndex].filters)\n						me.menuObjArray[0][objIndex].filters.alpha.opacity = 0;\n					else\n						me.menuObjArray[0][objIndex].style.opacity = 0;\n				}\n		    \n		    \n				var cName = String(me.menuObjArray[7][objIndex].className);\n				//alert(cName);\n    \n				if (cName.substring(cName.length - 4, cName.length) == &quot;Item&quot;)\n				{\n					me.menuObjArray[7][objIndex].className = me.menuObjArray[7][objIndex].className+&quot;Close&quot;;\n				}\n			    \n				if (cName.substring(cName.length - 4, cName.length) == &quot;Over&quot;)\n				{\n					me.menuObjArray[7][objIndex].className = cName.substring(0,cName.length - 4);\n					me.menuObjArray[7][objIndex].className = me.menuObjArray[7][objIndex].className+&quot;CloseOver&quot;;\n				}\n			    \n				if (cName.substring(cName.length - 5, cName.length) == &quot;Close&quot;)\n				{\n					me.menuObjArray[7][objIndex].className = cName.substring(0,cName.length - 5);\n					me.menuObjArray[7][objIndex].className = me.menuObjArray[7][objIndex].className+&quot;CloseOver&quot;;\n				}\n			    \n				//cName = String(me.menuObjArray[7][objIndex].className);\n				//alert(cName);\n			    \n				me.menuObjArray[4][objIndex] = 0;\n				me.menuObjArray[0][objIndex].style.height = 0 + &quot;px&quot;;\n				clearInterval(me.menuObjArray[5][objIndex]);\n				me.menuObjArray[5][objIndex] = null;\n				me.menuObjArray[6][objIndex] = false;\n				me.isLocked = null;\n				me._updateUserCookie(objIndex);\n				return 0;\n			}\n		    \n			return 0;\n		}\n    \n		if (!me.menuObjArray[6][objIndex])\n		{\n			if(me.doFading)\n			{\n				if(me.menuObjArray[0][objIndex].filters)\n					me.menuObjArray[0][objIndex].filters.alpha.opacity += 100/ ( ( (me.menuObjArray[2][objIndex] * me.divHeight) / me.moveSlidePix) +1);\n				else\n				{\n					var opcVal = parseFloat(me.menuObjArray[0][objIndex].style.opacity);\n					opcVal += 0.9/((me.menuObjArray[2][objIndex] * me.divHeight) / me.moveSlidePix);\n					me.menuObjArray[0][objIndex].style.opacity = opcVal;\n				}\n			}\n			me.menuObjArray[4][objIndex] +=  me.moveSlidePix;\n			if (me.menuObjArray[4][objIndex] &lt; (me.menuObjArray[2][objIndex] * me.divHeight))\n				me.menuObjArray[0][objIndex].style.height = me.menuObjArray[4][objIndex] + &quot;px&quot;;\n			else\n			{\n				if(me.doFading)\n				{\n					if(me.menuObjArray[0][objIndex].filters)\n						me.menuObjArray[0][objIndex].filters.alpha.opacity = 100;\n					else\n						me.menuObjArray[0][objIndex].style.opacity = 1;\n				}\n				var strClassName = String(me.menuObjArray[7][objIndex].className);\n				me.menuObjArray[4][objIndex] = (me.menuObjArray[2][objIndex] * me.divHeight);\n				me.menuObjArray[0][objIndex].style.height = (me.menuObjArray[2][objIndex] * me.divHeight)+ &quot;px&quot;;				 \n				me.menuObjArray[1][objIndex].style.display = 'inline';\n				clearInterval(me.menuObjArray[5][objIndex]);\n				me.menuObjArray[5][objIndex] = null;\n				me.menuObjArray[6][objIndex] = true;\n\n				cName = String(me.menuObjArray[7][objIndex].className);\n				//alert(cName);\n				if (cName.substring(cName.length - 4, cName.length) == &quot;Over&quot;)\n				{\n					//This is NOT a bug, just in need of refactoring :-)\n					//me.menuObjArray[7][objIndex].className = cName.substring(0,cName.length - 9);\n					//me.menuObjArray[7][objIndex].className = me.menuObjArray[7][objIndex].className+&quot;Over&quot;;\n					me.menuObjArray[7][objIndex].className = cName.substring(0,cName.length - 9) + &quot;Over&quot;; // [rbd]\n				}\n			    \n				if (cName.substring(cName.length - 5, cName.length) == &quot;Close&quot;)\n				{\n					//**BUGBUG** 'i' is not defined here\n					//me.menuObjArray[7][i].className = cName.substring(0,cName.length - 5);\n					//This is a guess... \n					me.menuObjArray[7][objIndex].className = cName.substring(0,cName.length - 5);\n				}\n				//cName = String(me.menuObjArray[7][objIndex].className);\n				//alert(cName);\n				me.isLocked = null;\n				me._updateUserCookie(objIndex);\n				return 0;\n			}	    \n			return 0;\n		}\n	},\n\n	ChangeStyle: function(e)\n	{\n		var className = String(this.className);\n	   \n		if (className.substring(className.length - 4, className.length) == &quot;Over&quot;)\n			this.className = className.substring(0,className.length - 4);\n		else\n			this.className = this.className + &quot;Over&quot;;\n	   //  alert(me.className);\n	}\n};\n//}}}\n</div>
<div tiddler="XPMenuStyleSheet" modifier="Bob Denny" modified="201505191754" created="200610311236" tags="systemContent">/***\nStyles used by the XPMenuPlugin. These are the base styles, and may be overridden by themes, etc. The mainDiv images should be 135 x 25.\n\n@@WARNING!@@ Do not tag this as ~styleSheet or it will show in the theme selector!\n!!Revision History\n&lt;&lt;&lt;\n''2006.09.16 [rbd]'' Initial edit for ACP5 from original ~XPMenu by Eric Simmons info@jswitch.com. See comments in XPMenuPlugin.\n''2006.09.17 [rbd]'' Change from indenting subitems based on &lt;a...&gt; to new subSubItem scheme. Clean up box model issues for IE and FF.\n''2006.09.20 [rbd]'' Move images to im sub folder\n''2006.10.31 [rbd]'' Move this into a tiddler, activate from new XPMenuPlugin\n''2015.05.19 [rbd]'' ~ACP-1303 Alignment of text in MainMenu top bar\n&lt;&lt;&lt;\n!!To Do\nRestrict scope.\n!!Code\n***/\n/*{{{*/\n\n.navbar {\n}\n.mainDiv {\n	width: 135px;\n	text-align: left;\n}\n.topItem {\n    display: table-cell;\n    vertical-align: middle;\n	font: 12px arial, helvetica;\n	letter-spacing: 0;\n	background: url(&quot;im/bar-tw-up.png&quot;) no-repeat 0 0;\n	background-position: center center;\n	background-repeat: no-repeat;\n	border: none;\n	width: 135px;\n	height: 25px;\n	color: #e0e0e0;\n	cursor: pointer;\n	text-indent: 10px;\n}\n.topItemOver {\n    display: table-cell;\n    vertical-align: middle;\n	font: 12px arial, helvetica;\n	letter-spacing: 0;\n	background: url(&quot;im/bar-tw-up-on.png&quot;) no-repeat 0 0;\n	background-position: center center;\n	background-repeat: no-repeat;\n	height: 25px;\n	width: 135px;\n	color: #ffffff;\n	cursor: pointer;\n	text-indent: 10px;\n}\n.topItemClose {\n    display: table-cell;\n    vertical-align: middle;\n	font: 12px arial, helvetica;\n	letter-spacing: 0;\n	background: url(&quot;im/bar-tw-down.png&quot;) no-repeat 0 0;\n	background-position: center center;\n	background-repeat:no-repeat;\n	height: 25px;\n	width: 135px;\n	color: #e0e0e0;\n	cursor: pointer;\n	text-indent: 10px;\n}\n.topItemCloseOver {\n    display: table-cell;\n    vertical-align: middle;\n	font: 12px arial, helvetica;\n	letter-spacing: 0;\n	background: url(&quot;im/bar-tw-down-on.png&quot;) no-repeat 0 0;\n	background-position: center center;\n	background-repeat: no-repeat;\n	height: 25px;\n	width: 135px;\n	color: #ffffff;\n	cursor: pointer;\n	text-indent: 10px;\n}\n.dropMenu {\n	font: bold 11px arial, helvetica;\n	background-color: #d6dff7;\n	color: #000;\n	border-width: 0 1px 1px 1px;\n	filter: alpha(opacity=100);\n	margin-bottom: 10px;\n	padding-top: 5px;\n}\n.subMenu {\n	display: block;\n}\n/*\n * Colors are ignored for hyperlinks which use 'a' style.\n * &quot;Over&quot; highlighting of non-hyperlinks can be done by\n * setting the &quot;xxOver&quot; color to something different\n * and change the cursor maybe?\n */\n.subItem {\n	margin-left: 10px;\n	margin-top: 2px;\n	height: 18px;\n	font: 11px arial, helvetica;\n	cursor: default;\n	color: #000000;\n}\n.subItemOver {\n	margin-left: 10px;\n	margin-top: 2px;\n	height: 18px;\n	font: 11px arial, helvetica;\n	cursor: default;\n	color: #000000; /*#0000cc;*/\n}\n.subSubItem {\n	margin-left: 23px;\n	margin-top: 2px;\n	height: 18px;\n	font: 11px arial, helvetica;\n	cursor: default;\n	color: #000000;\n}\n.subSubItemOver {\n	margin-left: 23px;\n	margin-top: 2px;\n	height: 18px;\n	font: 11px arial, helvetica;\n	cursor: default;\n	color: #000000; /*#0000cc;*/\n}\n.drop {\n	border-left: 1px solid black;\n	border-right: 1px solid black;\n}\n\n/*}}}*/\n</div>
<div tiddler="deleteUser" modifier="Bob Denny" modified="200611302127" created="200611302127" tags="systemContent deleteUser">Causes the item to be completely removed (instead of hidden, per [[hideUser]]) when the final user content is built.</div>
<div tiddler="excludeLists" modifier="Bob Denny" modified="200611302152" created="200609232117" tags="systemContent hideUser">''Tag'': Prevents items from showing in lists (in the sidebar). See also [[excludeSearch]].</div>
<div tiddler="excludeSearch" modifier="Bob Denny" modified="200611302151" created="200610271456" tags="systemContent hideUser">''Tag'': Prevents items from being found during searches. See also [[ExcludeLists]].</div>
<div tiddler="hideLocalUser" modifier="Bob Denny" modified="200611302156" created="200611302156" tags="systemContent hideUser">''Tag'': Causes items to be hidden from the local user (&quot;Use Web Browser&quot; on ACP window) only. These items are visible to remote users.</div>
<div tiddler="hideUser" modifier="Bob Denny" modified="200611302150" created="200609232053" tags="systemContent hideUser">''Tag'': This is used to hide tags and items in the final user content (as opposed to completely removing them, per [[deleteUser]]). See the ModeSwitchPlugin.</div>
<div tiddler="macro" modifier="Bob Denny" modified="200611302148" created="200609232055" tags="hideUser systemContent">''Tag'': A macro is a [[plugin]] that is called within wikitext. These items will always be tagged [[systemConfig]] as well.</div>
<div tiddler="pageTemplate" modifier="Bob Denny" modified="200611302147" created="200609232057" tags="hideUser systemContent">''Tag'': HTML templates used to lay out the page. Change when style/theme is changed.</div>
<div tiddler="plugin" modifier="Bob Denny" modified="200611302148" created="200609170046" tags="hideUser systemContent">''Tag'': Plugins are extensions to the basic TiddlyWiki logic on which this web application is based. They will always be tagged [[systemConfig]] as well.</div>
<div tiddler="styleSheet" modifier="Bob Denny" modified="200611302147" created="200609232058" tags="systemContent hideUser">''Tag'': CSS style info for layout etc. There is one for each theme, and one master/shadow.</div>
<div tiddler="systemConfig" modifier="Bob Denny" modified="200611302200" created="200609232059" tags="systemContent hideUser">''Tag'': All of the plugins. This tag triggers plugin processing during loading of the content in the browser. The content of these items is assumed to be ~JavaScript. These items can also be tagged [[macro]] and/or [[plugin]].</div>
<div tiddler="systemContent" modifier="Bob Denny" modified="200611302145" created="200609232100" tags="systemContent hideUser">''Tag'': Indicates //non-plugin// content that forms part of the system. A tiddler will not (well, //should// not) be tagged [[systemConfig]] and systemContent together.</div>
<div tiddler="systemLib" modifier="Bob Denny" modified="200611302144" created="200609232102" tags="systemContent hideUser">''Tag'': Javascript and CSS code that is not part of any plugin, but instead is part of a library of such things that can be used by multiple components.</div>
		</div>
<!--POST-BODY-START-->

<!--POST-BODY-END-->
	</body>
</html>
